{"version":3,"file":"worker-CDsY8ULT.js","sources":["../../node_modules/property-graph/dist/property-graph.modern.js","../../node_modules/@gltf-transform/core/dist/index.modern.js","../../lib/math.js","../../lib/animation.js","../../node_modules/esbuild-wasm/lib/browser.js","../../lib/error.js","../../node_modules/@jridgewell/sourcemap-codec/dist/sourcemap-codec.mjs","../../node_modules/@jridgewell/resolve-uri/dist/resolve-uri.umd.js","../../node_modules/@jridgewell/trace-mapping/dist/trace-mapping.mjs","../../node_modules/convert-source-map/index.js","../../lib/util.js","../../lib/bundler.js","../../node_modules/@jscadui/3mf-export/src/defMatrix.js","../../node_modules/@jscadui/3mf-export/src/matrix2str.js","../../node_modules/@jscadui/3mf-export/src/makeItem.js","../../node_modules/@jscadui/3mf-export/src/toDate3mf.js","../../node_modules/@jscadui/3mf-export/src/pushHeader.js","../../node_modules/@jscadui/3mf-export/src/pushObjectComponent.js","../../node_modules/@jscadui/3mf-export/src/pushObjectMesh.js","../../node_modules/@jscadui/3mf-export/src/staticFiles.js","../../node_modules/@jscadui/3mf-export/index.js","../../node_modules/fflate/esm/browser.js","../../lib/export-3mf.js","../../node_modules/ktx-parse/dist/ktx-parse.modern.js","../../node_modules/@gltf-transform/extensions/dist/index.modern.js","../../lib/manifold-gltf.js","../../lib/gltf-io.js","../../lib/export-gltf.js","../../lib/garbage-collector.js","../../lib/gltf-node.js","../../manifold.js","../../lib/wasm.js","../../lib/level-of-detail.js","../../lib/material.js","../../lib/debug.js","../../lib/scene-builder.js","../../lib/worker.js"],"sourcesContent":["class EventDispatcher {\n  constructor() {\n    this._listeners = {};\n  }\n\n  addEventListener(type, listener) {\n    const listeners = this._listeners;\n\n    if (listeners[type] === undefined) {\n      listeners[type] = [];\n    }\n\n    if (listeners[type].indexOf(listener) === -1) {\n      listeners[type].push(listener);\n    }\n\n    return this;\n  }\n\n  removeEventListener(type, listener) {\n    const listeners = this._listeners;\n    const listenerArray = listeners[type];\n\n    if (listenerArray !== undefined) {\n      const index = listenerArray.indexOf(listener);\n\n      if (index !== -1) {\n        listenerArray.splice(index, 1);\n      }\n    }\n\n    return this;\n  }\n\n  dispatchEvent(event) {\n    const listeners = this._listeners;\n    const listenerArray = listeners[event.type];\n\n    if (listenerArray !== undefined) {\n      // Make a copy, in case listeners are removed while iterating.\n      const array = listenerArray.slice(0);\n\n      for (let i = 0, l = array.length; i < l; i++) {\n        array[i].call(this, event);\n      }\n    }\n\n    return this;\n  }\n\n  dispose() {\n    for (const key in this._listeners) {\n      delete this._listeners[key];\n    }\n  }\n\n}\n\n/**\n * Represents a connection between two {@link GraphNode} resources in a {@link Graph}.\n *\n * The left node is considered the owner, and the right node the resource. The\n * owner is responsible for being able find and remove a reference to a resource, given\n * that link. The resource does not hold a reference to the link or to the owner,\n * although that reverse lookup can be done on the graph.\n */\nclass GraphEdge {\n  constructor(_name, _parent, _child, _attributes = {}) {\n    this._name = void 0;\n    this._parent = void 0;\n    this._child = void 0;\n    this._attributes = void 0;\n    this._disposed = false;\n    this._name = _name;\n    this._parent = _parent;\n    this._child = _child;\n    this._attributes = _attributes;\n\n    if (!_parent.isOnGraph(_child)) {\n      throw new Error('Cannot connect disconnected graphs.');\n    }\n  }\n  /** Name (attribute name from parent {@link GraphNode}). */\n\n\n  getName() {\n    return this._name;\n  }\n  /** Owner node. */\n\n\n  getParent() {\n    return this._parent;\n  }\n  /** Resource node. */\n\n\n  getChild() {\n    return this._child;\n  }\n  /**\n   * Sets the child node.\n   *\n   * @internal Only {@link Graph} implementations may safely call this method directly. Use\n   * \t{@link Property.swap} or {@link Graph.swapChild} instead.\n   */\n\n\n  setChild(child) {\n    this._child = child;\n    return this;\n  }\n  /** Attributes of the graph node relationship. */\n\n\n  getAttributes() {\n    return this._attributes;\n  }\n  /** Destroys a (currently intact) edge, updating both the graph and the owner. */\n\n\n  dispose() {\n    if (this._disposed) return; // @ts-expect-error GraphEdge doesn't know types of parent GraphNode.\n\n    this._parent._destroyRef(this);\n\n    this._disposed = true;\n  }\n  /** Whether this link has been destroyed. */\n\n\n  isDisposed() {\n    return this._disposed;\n  }\n\n}\n\n/**\n * A graph manages a network of {@link GraphNode} nodes, connected\n * by {@link @Link} edges.\n */\n\nclass Graph extends EventDispatcher {\n  constructor(...args) {\n    super(...args);\n    this._emptySet = new Set();\n    this._edges = new Set();\n    this._parentEdges = new Map();\n    this._childEdges = new Map();\n  }\n\n  /** Returns a list of all parent->child edges on this graph. */\n  listEdges() {\n    return Array.from(this._edges);\n  }\n  /** Returns a list of all edges on the graph having the given node as their child. */\n\n\n  listParentEdges(node) {\n    return Array.from(this._childEdges.get(node) || this._emptySet);\n  }\n  /** Returns a list of parent nodes for the given child node. */\n\n\n  listParents(node) {\n    const parentSet = new Set();\n\n    for (const edge of this.listParentEdges(node)) {\n      parentSet.add(edge.getParent());\n    }\n\n    return Array.from(parentSet);\n  }\n  /** Returns a list of all edges on the graph having the given node as their parent. */\n\n\n  listChildEdges(node) {\n    return Array.from(this._parentEdges.get(node) || this._emptySet);\n  }\n  /** Returns a list of child nodes for the given parent node. */\n\n\n  listChildren(node) {\n    const childSet = new Set();\n\n    for (const edge of this.listChildEdges(node)) {\n      childSet.add(edge.getChild());\n    }\n\n    return Array.from(childSet);\n  }\n\n  disconnectParents(node, filter) {\n    for (const edge of this.listParentEdges(node)) {\n      if (!filter || filter(edge.getParent())) {\n        edge.dispose();\n      }\n    }\n\n    return this;\n  }\n  /**********************************************************************************************\n   * Internal.\n   */\n\n  /**\n   * Creates a {@link GraphEdge} connecting two {@link GraphNode} instances. Edge is returned\n   * for the caller to store.\n   * @param a Owner\n   * @param b Resource\n   * @hidden\n   * @internal\n   */\n\n\n  _createEdge(name, a, b, attributes) {\n    const edge = new GraphEdge(name, a, b, attributes);\n\n    this._edges.add(edge);\n\n    const parent = edge.getParent();\n    if (!this._parentEdges.has(parent)) this._parentEdges.set(parent, new Set());\n\n    this._parentEdges.get(parent).add(edge);\n\n    const child = edge.getChild();\n    if (!this._childEdges.has(child)) this._childEdges.set(child, new Set());\n\n    this._childEdges.get(child).add(edge);\n\n    return edge;\n  }\n  /**\n   * Detaches a {@link GraphEdge} from the {@link Graph}. Before calling this\n   * method, ensure that the GraphEdge has first been detached from any\n   * associated {@link GraphNode} attributes.\n   * @hidden\n   * @internal\n   */\n\n\n  _destroyEdge(edge) {\n    this._edges.delete(edge);\n\n    this._parentEdges.get(edge.getParent()).delete(edge);\n\n    this._childEdges.get(edge.getChild()).delete(edge);\n\n    return this;\n  }\n\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n/**\n * An ordered collection of {@link Ref Refs}, allowing duplicates. Removing\n * a Ref is an O(n) operation — use {@link RefSet} for faster removal, if\n * duplicates are not required.\n */\nclass RefList {\n  constructor(refs) {\n    this.list = [];\n\n    if (refs) {\n      for (const ref of refs) {\n        this.list.push(ref);\n      }\n    }\n  }\n\n  add(ref) {\n    this.list.push(ref);\n  }\n\n  remove(ref) {\n    const index = this.list.indexOf(ref);\n    if (index >= 0) this.list.splice(index, 1);\n  }\n\n  removeChild(child) {\n    const refs = [];\n\n    for (const ref of this.list) {\n      if (ref.getChild() === child) {\n        refs.push(ref);\n      }\n    }\n\n    for (const ref of refs) {\n      this.remove(ref);\n    }\n\n    return refs;\n  }\n\n  listRefsByChild(child) {\n    const refs = [];\n\n    for (const ref of this.list) {\n      if (ref.getChild() === child) {\n        refs.push(ref);\n      }\n    }\n\n    return refs;\n  }\n\n  values() {\n    return this.list;\n  }\n\n}\n/**\n * An ordered collection of {@link Ref Refs}, without duplicates. Adding or\n * removing a Ref is typically O(1) or O(log(n)), and faster than\n * {@link RefList}. If support for duplicates is required, use {@link RefList}.\n */\n\nclass RefSet {\n  constructor(refs) {\n    this.set = new Set();\n    this.map = new Map();\n\n    if (refs) {\n      for (const ref of refs) {\n        this.add(ref);\n      }\n    }\n  }\n\n  add(ref) {\n    const child = ref.getChild();\n    this.removeChild(child);\n    this.set.add(ref);\n    this.map.set(child, ref);\n  }\n\n  remove(ref) {\n    this.set.delete(ref);\n    this.map.delete(ref.getChild());\n  }\n\n  removeChild(child) {\n    const ref = this.map.get(child) || null;\n    if (ref) this.remove(ref);\n    return ref;\n  }\n\n  getRefByChild(child) {\n    return this.map.get(child) || null;\n  }\n\n  values() {\n    return Array.from(this.set);\n  }\n\n}\n/**\n * Map (or dictionary) from string keys to {@link Ref Refs}.\n */\n\nclass RefMap {\n  constructor(map) {\n    this.map = {};\n\n    if (map) {\n      Object.assign(this.map, map);\n    }\n  }\n\n  set(key, child) {\n    this.map[key] = child;\n  }\n\n  delete(key) {\n    delete this.map[key];\n  }\n\n  get(key) {\n    return this.map[key] || null;\n  }\n\n  keys() {\n    return Object.keys(this.map);\n  }\n\n  values() {\n    return Object.values(this.map);\n  }\n\n}\n\nconst $attributes = Symbol('attributes');\nconst $immutableKeys = Symbol('immutableKeys');\n/**\n * Represents a node in a {@link Graph}.\n */\n\nclass GraphNode extends EventDispatcher {\n  /**\n   * Internal graph used to search and maintain references.\n   * @hidden\n   */\n\n  /**\n   * Attributes (literal values and GraphNode references) associated with this instance. For each\n   * GraphNode reference, the attributes stores a {@link GraphEdge}. List and Map references are\n   * stored as arrays and dictionaries of edges.\n   * @internal\n   */\n\n  /**\n   * Attributes included with `getDefaultAttributes` are considered immutable, and cannot be\n   * modifed by `.setRef()`, `.copy()`, or other GraphNode methods. Both the edges and the\n   * properties will be disposed with the parent GraphNode.\n   *\n   * Currently, only single-edge references (getRef/setRef) are supported as immutables.\n   *\n   * @internal\n   */\n  constructor(graph) {\n    super();\n    this._disposed = false;\n    this.graph = void 0;\n    this[$attributes] = void 0;\n    this[$immutableKeys] = void 0;\n    this.graph = graph;\n    this[$immutableKeys] = new Set();\n    this[$attributes] = this._createAttributes();\n  }\n  /**\n   * Returns default attributes for the graph node. Subclasses having any attributes (either\n   * literal values or references to other graph nodes) must override this method. Literal\n   * attributes should be given their default values, if any. References should generally be\n   * initialized as empty (Ref → null, RefList → [], RefMap → {}) and then modified by setters.\n   *\n   * Any single-edge references (setRef) returned by this method will be considered immutable,\n   * to be owned by and disposed with the parent node. Multi-edge references (addRef, removeRef,\n   * setRefMap) cannot be returned as default attributes.\n   */\n\n\n  getDefaults() {\n    return {};\n  }\n  /**\n   * Constructs and returns an object used to store a graph nodes attributes. Compared to the\n   * default Attributes interface, this has two distinctions:\n   *\n   * 1. Slots for GraphNode<T> objects are replaced with slots for GraphEdge<this, GraphNode<T>>\n   * 2. GraphNode<T> objects provided as defaults are considered immutable\n   *\n   * @internal\n   */\n\n\n  _createAttributes() {\n    const defaultAttributes = this.getDefaults();\n    const attributes = {};\n\n    for (const key in defaultAttributes) {\n      const value = defaultAttributes[key]; // TODO(design): With Ref, RefList, and RefMap types, should users\n      // be able to pass them all here? Listeners must be added.\n\n      if (value instanceof GraphNode) {\n        const ref = this.graph._createEdge(key, this, value);\n\n        this[$immutableKeys].add(key);\n        attributes[key] = ref;\n      } else {\n        attributes[key] = value;\n      }\n    }\n\n    return attributes;\n  }\n  /** @internal Returns true if two nodes are on the same {@link Graph}. */\n\n\n  isOnGraph(other) {\n    return this.graph === other.graph;\n  }\n  /** Returns true if the node has been permanently removed from the graph. */\n\n\n  isDisposed() {\n    return this._disposed;\n  }\n  /**\n   * Removes both inbound references to and outbound references from this object. At the end\n   * of the process the object holds no references, and nothing holds references to it. A\n   * disposed object is not reusable.\n   */\n\n\n  dispose() {\n    if (this._disposed) return;\n    this.graph.listChildEdges(this).forEach(edge => edge.dispose());\n    this.graph.disconnectParents(this);\n    this._disposed = true;\n    this.dispatchEvent({\n      type: 'dispose'\n    });\n  }\n  /**\n   * Removes all inbound references to this object. At the end of the process the object is\n   * considered 'detached': it may hold references to child resources, but nothing holds\n   * references to it. A detached object may be re-attached.\n   */\n\n\n  detach() {\n    this.graph.disconnectParents(this);\n    return this;\n  }\n  /**\n   * Transfers this object's references from the old node to the new one. The old node is fully\n   * detached from this parent at the end of the process.\n   *\n   * @hidden\n   */\n\n\n  swap(prevValue, nextValue) {\n    for (const attribute in this[$attributes]) {\n      const value = this[$attributes][attribute];\n\n      if (value instanceof GraphEdge) {\n        const ref = value;\n\n        if (ref.getChild() === prevValue) {\n          this.setRef(attribute, nextValue, ref.getAttributes());\n        }\n      } else if (value instanceof RefList) {\n        for (const ref of value.listRefsByChild(prevValue)) {\n          const refAttributes = ref.getAttributes();\n          this.removeRef(attribute, prevValue);\n          this.addRef(attribute, nextValue, refAttributes);\n        }\n      } else if (value instanceof RefSet) {\n        const ref = value.getRefByChild(prevValue);\n\n        if (ref) {\n          const refAttributes = ref.getAttributes();\n          this.removeRef(attribute, prevValue);\n          this.addRef(attribute, nextValue, refAttributes);\n        }\n      } else if (value instanceof RefMap) {\n        for (const key of value.keys()) {\n          const ref = value.get(key);\n\n          if (ref.getChild() === prevValue) {\n            this.setRefMap(attribute, key, nextValue, ref.getAttributes());\n          }\n        }\n      }\n    }\n\n    return this;\n  }\n  /**********************************************************************************************\n   * Literal attributes.\n   */\n\n  /** @hidden */\n\n\n  get(attribute) {\n    return this[$attributes][attribute];\n  }\n  /** @hidden */\n\n\n  set(attribute, value) {\n    this[$attributes][attribute] = value;\n    return this.dispatchEvent({\n      type: 'change',\n      attribute\n    });\n  }\n  /**********************************************************************************************\n   * Ref: 1:1 graph node references.\n   */\n\n  /** @hidden */\n\n\n  getRef(attribute) {\n    const ref = this[$attributes][attribute];\n    return ref ? ref.getChild() : null;\n  }\n  /** @hidden */\n\n\n  setRef(attribute, value, attributes) {\n    if (this[$immutableKeys].has(attribute)) {\n      throw new Error(`Cannot overwrite immutable attribute, \"${attribute}\".`);\n    }\n\n    const prevRef = this[$attributes][attribute];\n    if (prevRef) prevRef.dispose(); // TODO(cleanup): Possible duplicate event.\n\n    if (!value) return this;\n\n    const ref = this.graph._createEdge(attribute, this, value, attributes);\n\n    this[$attributes][attribute] = ref;\n    return this.dispatchEvent({\n      type: 'change',\n      attribute\n    });\n  }\n  /**********************************************************************************************\n   * RefList: 1:many graph node references.\n   */\n\n  /** @hidden */\n\n\n  listRefs(attribute) {\n    const refs = this.assertRefList(attribute);\n    return refs.values().map(ref => ref.getChild());\n  }\n  /** @hidden */\n\n\n  addRef(attribute, value, attributes) {\n    const ref = this.graph._createEdge(attribute, this, value, attributes);\n\n    const refs = this.assertRefList(attribute);\n    refs.add(ref);\n    return this.dispatchEvent({\n      type: 'change',\n      attribute\n    });\n  }\n  /** @hidden */\n\n\n  removeRef(attribute, value) {\n    const refs = this.assertRefList(attribute);\n\n    if (refs instanceof RefList) {\n      for (const ref of refs.listRefsByChild(value)) {\n        ref.dispose();\n      }\n    } else {\n      const ref = refs.getRefByChild(value);\n      if (ref) ref.dispose();\n    }\n\n    return this;\n  }\n  /** @hidden */\n\n\n  assertRefList(attribute) {\n    const refs = this[$attributes][attribute];\n\n    if (refs instanceof RefList || refs instanceof RefSet) {\n      return refs;\n    } // TODO(v3) Remove warning.\n\n\n    throw new Error(`Expected RefList or RefSet for attribute \"${attribute}\"`);\n  }\n  /**********************************************************************************************\n   * RefMap: Named 1:many (map) graph node references.\n   */\n\n  /** @hidden */\n\n\n  listRefMapKeys(attribute) {\n    return this.assertRefMap(attribute).keys();\n  }\n  /** @hidden */\n\n\n  listRefMapValues(attribute) {\n    return this.assertRefMap(attribute).values().map(ref => ref.getChild());\n  }\n  /** @hidden */\n\n\n  getRefMap(attribute, key) {\n    const refMap = this.assertRefMap(attribute);\n    const ref = refMap.get(key);\n    return ref ? ref.getChild() : null;\n  }\n  /** @hidden */\n\n\n  setRefMap(attribute, key, value, metadata) {\n    const refMap = this.assertRefMap(attribute);\n    const prevRef = refMap.get(key);\n    if (prevRef) prevRef.dispose(); // TODO(cleanup): Possible duplicate event.\n\n    if (!value) return this;\n    metadata = Object.assign(metadata || {}, {\n      key: key\n    });\n\n    const ref = this.graph._createEdge(attribute, this, value, _extends({}, metadata, {\n      key\n    }));\n\n    refMap.set(key, ref);\n    return this.dispatchEvent({\n      type: 'change',\n      attribute,\n      key\n    });\n  }\n  /** @hidden */\n\n\n  assertRefMap(attribute) {\n    const map = this[$attributes][attribute];\n\n    if (map instanceof RefMap) {\n      return map;\n    } // TODO(v3) Remove warning.\n\n\n    throw new Error(`Expected RefMap for attribute \"${attribute}\"`);\n  }\n  /**********************************************************************************************\n   * Events.\n   */\n\n  /**\n   * Dispatches an event on the GraphNode, and on the associated\n   * Graph. Event types on the graph are prefixed, `\"node:[type]\"`.\n   */\n\n\n  dispatchEvent(event) {\n    super.dispatchEvent(_extends({}, event, {\n      target: this\n    }));\n    this.graph.dispatchEvent(_extends({}, event, {\n      target: this,\n      type: `node:${event.type}`\n    }));\n    return this;\n  }\n  /**********************************************************************************************\n   * Internal.\n   */\n\n  /** @hidden */\n\n\n  _destroyRef(ref) {\n    const attribute = ref.getName();\n\n    if (this[$attributes][attribute] === ref) {\n      this[$attributes][attribute] = null; // TODO(design): See _createAttributes().\n\n      if (this[$immutableKeys].has(attribute)) ref.getChild().dispose();\n    } else if (this[$attributes][attribute] instanceof RefList) {\n      this[$attributes][attribute].remove(ref);\n    } else if (this[$attributes][attribute] instanceof RefSet) {\n      this[$attributes][attribute].remove(ref);\n    } else if (this[$attributes][attribute] instanceof RefMap) {\n      const refMap = this[$attributes][attribute];\n\n      for (const key of refMap.keys()) {\n        if (refMap.get(key) === ref) {\n          refMap.delete(key);\n        }\n      }\n    } else {\n      return;\n    }\n\n    this.graph._destroyEdge(ref);\n\n    this.dispatchEvent({\n      type: 'change',\n      attribute\n    });\n  }\n\n}\n\nexport { $attributes, $immutableKeys, EventDispatcher, Graph, GraphEdge, GraphNode, RefList, RefMap, RefSet };\n//# sourceMappingURL=property-graph.modern.js.map\n","import { GraphNode, $attributes, GraphEdge, $immutableKeys, RefList, RefSet, RefMap, Graph } from 'property-graph';\nexport { Graph, GraphEdge, RefList, RefMap, RefSet } from 'property-graph';\n\n/**\n * Current version of the package.\n * @hidden\n */\nconst VERSION = `v${\"4.2.1\"}`;\n/** @hidden */\nconst GLB_BUFFER = '@glb.bin';\n/** String IDs for core {@link Property} types. */\nvar PropertyType;\n(function (PropertyType) {\n  PropertyType[\"ACCESSOR\"] = \"Accessor\";\n  PropertyType[\"ANIMATION\"] = \"Animation\";\n  PropertyType[\"ANIMATION_CHANNEL\"] = \"AnimationChannel\";\n  PropertyType[\"ANIMATION_SAMPLER\"] = \"AnimationSampler\";\n  PropertyType[\"BUFFER\"] = \"Buffer\";\n  PropertyType[\"CAMERA\"] = \"Camera\";\n  PropertyType[\"MATERIAL\"] = \"Material\";\n  PropertyType[\"MESH\"] = \"Mesh\";\n  PropertyType[\"PRIMITIVE\"] = \"Primitive\";\n  PropertyType[\"PRIMITIVE_TARGET\"] = \"PrimitiveTarget\";\n  PropertyType[\"NODE\"] = \"Node\";\n  PropertyType[\"ROOT\"] = \"Root\";\n  PropertyType[\"SCENE\"] = \"Scene\";\n  PropertyType[\"SKIN\"] = \"Skin\";\n  PropertyType[\"TEXTURE\"] = \"Texture\";\n  PropertyType[\"TEXTURE_INFO\"] = \"TextureInfo\";\n})(PropertyType || (PropertyType = {}));\n/** Vertex layout method. */\nvar VertexLayout;\n(function (VertexLayout) {\n  /**\n   * Stores vertex attributes in a single buffer view per mesh primitive. Interleaving vertex\n   * data may improve performance by reducing page-thrashing in GPU memory.\n   */\n  VertexLayout[\"INTERLEAVED\"] = \"interleaved\";\n  /**\n   * Stores each vertex attribute in a separate buffer view. May decrease performance by causing\n   * page-thrashing in GPU memory. Some 3D engines may prefer this layout, e.g. for simplicity.\n   */\n  VertexLayout[\"SEPARATE\"] = \"separate\";\n})(VertexLayout || (VertexLayout = {}));\n/** Accessor usage. */\nvar BufferViewUsage$1;\n(function (BufferViewUsage) {\n  BufferViewUsage[\"ARRAY_BUFFER\"] = \"ARRAY_BUFFER\";\n  BufferViewUsage[\"ELEMENT_ARRAY_BUFFER\"] = \"ELEMENT_ARRAY_BUFFER\";\n  BufferViewUsage[\"INVERSE_BIND_MATRICES\"] = \"INVERSE_BIND_MATRICES\";\n  BufferViewUsage[\"OTHER\"] = \"OTHER\";\n  BufferViewUsage[\"SPARSE\"] = \"SPARSE\";\n})(BufferViewUsage$1 || (BufferViewUsage$1 = {}));\n/** Texture channels. */\nvar TextureChannel;\n(function (TextureChannel) {\n  TextureChannel[TextureChannel[\"R\"] = 4096] = \"R\";\n  TextureChannel[TextureChannel[\"G\"] = 256] = \"G\";\n  TextureChannel[TextureChannel[\"B\"] = 16] = \"B\";\n  TextureChannel[TextureChannel[\"A\"] = 1] = \"A\";\n})(TextureChannel || (TextureChannel = {}));\nvar Format;\n(function (Format) {\n  Format[\"GLTF\"] = \"GLTF\";\n  Format[\"GLB\"] = \"GLB\";\n})(Format || (Format = {}));\nconst ComponentTypeToTypedArray = {\n  '5120': Int8Array,\n  '5121': Uint8Array,\n  '5122': Int16Array,\n  '5123': Uint16Array,\n  '5125': Uint32Array,\n  '5126': Float32Array\n};\n\n/**\n * *Common utilities for working with Uint8Array and Buffer objects.*\n *\n * @category Utilities\n */\nclass BufferUtils {\n  /** Creates a byte array from a Data URI. */\n  static createBufferFromDataURI(dataURI) {\n    if (typeof Buffer === 'undefined') {\n      // Browser.\n      const byteString = atob(dataURI.split(',')[1]);\n      const ia = new Uint8Array(byteString.length);\n      for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n      return ia;\n    } else {\n      // Node.js.\n      const data = dataURI.split(',')[1];\n      const isBase64 = dataURI.indexOf('base64') >= 0;\n      return Buffer.from(data, isBase64 ? 'base64' : 'utf8');\n    }\n  }\n  /** Encodes text to a byte array. */\n  static encodeText(text) {\n    return new TextEncoder().encode(text);\n  }\n  /** Decodes a byte array to text. */\n  static decodeText(array) {\n    return new TextDecoder().decode(array);\n  }\n  /**\n   * Concatenates N byte arrays.\n   */\n  static concat(arrays) {\n    let totalByteLength = 0;\n    for (const array of arrays) {\n      totalByteLength += array.byteLength;\n    }\n    const result = new Uint8Array(totalByteLength);\n    let byteOffset = 0;\n    for (const array of arrays) {\n      result.set(array, byteOffset);\n      byteOffset += array.byteLength;\n    }\n    return result;\n  }\n  /**\n   * Pads a Uint8Array to the next 4-byte boundary.\n   *\n   * Reference: [glTF → Data Alignment](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment)\n   */\n  static pad(srcArray, paddingByte = 0) {\n    const paddedLength = this.padNumber(srcArray.byteLength);\n    if (paddedLength === srcArray.byteLength) return srcArray;\n    const dstArray = new Uint8Array(paddedLength);\n    dstArray.set(srcArray);\n    if (paddingByte !== 0) {\n      for (let i = srcArray.byteLength; i < paddedLength; i++) {\n        dstArray[i] = paddingByte;\n      }\n    }\n    return dstArray;\n  }\n  /** Pads a number to 4-byte boundaries. */\n  static padNumber(v) {\n    return Math.ceil(v / 4) * 4;\n  }\n  /** Returns true if given byte array instances are equal. */\n  static equals(a, b) {\n    if (a === b) return true;\n    if (a.byteLength !== b.byteLength) return false;\n    let i = a.byteLength;\n    while (i--) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  /**\n   * Returns a Uint8Array view of a typed array, with the same underlying ArrayBuffer.\n   *\n   * A shorthand for:\n   *\n   * ```js\n   * const buffer = new Uint8Array(\n   * \tarray.buffer,\n   * \tarray.byteOffset + byteOffset,\n   * \tMath.min(array.byteLength, byteLength)\n   * );\n   * ```\n   *\n   */\n  static toView(a, byteOffset = 0, byteLength = Infinity) {\n    return new Uint8Array(a.buffer, a.byteOffset + byteOffset, Math.min(a.byteLength, byteLength));\n  }\n  static assertView(view) {\n    if (view && !ArrayBuffer.isView(view)) {\n      throw new Error(`Method requires Uint8Array parameter; received \"${typeof view}\".`);\n    }\n    return view;\n  }\n}\n\n/**\n * *Common utilities for working with colors in vec3, vec4, or hexadecimal form.*\n *\n * Provides methods to convert linear components (vec3, vec4) to sRGB hex values. All colors in\n * the glTF specification, excluding color textures, are linear. Hexadecimal values, in sRGB\n * colorspace, are accessible through helper functions in the API as a convenience.\n *\n * ```typescript\n * // Hex (sRGB) to factor (linear).\n * const factor = ColorUtils.hexToFactor(0xFFCCCC, []);\n *\n * // Factor (linear) to hex (sRGB).\n * const hex = ColorUtils.factorToHex([1, .25, .25])\n * ```\n *\n * @category Utilities\n */\nclass ColorUtils {\n  /**\n   * Converts sRGB hexadecimal to linear components.\n   * @typeParam T vec3 or vec4 linear components.\n   */\n  static hexToFactor(hex, target) {\n    hex = Math.floor(hex);\n    const _target = target;\n    _target[0] = (hex >> 16 & 255) / 255;\n    _target[1] = (hex >> 8 & 255) / 255;\n    _target[2] = (hex & 255) / 255;\n    return this.convertSRGBToLinear(target, target);\n  }\n  /**\n   * Converts linear components to sRGB hexadecimal.\n   * @typeParam T vec3 or vec4 linear components.\n   */\n  static factorToHex(factor) {\n    const target = [...factor];\n    const [r, g, b] = this.convertLinearToSRGB(factor, target);\n    return r * 255 << 16 ^ g * 255 << 8 ^ b * 255 << 0;\n  }\n  /**\n   * Converts sRGB components to linear components.\n   * @typeParam T vec3 or vec4 linear components.\n   */\n  static convertSRGBToLinear(source, target) {\n    const _source = source;\n    const _target = target;\n    for (let i = 0; i < 3; i++) {\n      _target[i] = _source[i] < 0.04045 ? _source[i] * 0.0773993808 : Math.pow(_source[i] * 0.9478672986 + 0.0521327014, 2.4);\n    }\n    return target;\n  }\n  /**\n   * Converts linear components to sRGB components.\n   * @typeParam T vec3 or vec4 linear components.\n   */\n  static convertLinearToSRGB(source, target) {\n    const _source = source;\n    const _target = target;\n    for (let i = 0; i < 3; i++) {\n      _target[i] = _source[i] < 0.0031308 ? _source[i] * 12.92 : 1.055 * Math.pow(_source[i], 0.41666) - 0.055;\n    }\n    return target;\n  }\n}\n\n/** JPEG image support. */\nclass JPEGImageUtils {\n  match(array) {\n    return array.length >= 3 && array[0] === 255 && array[1] === 216 && array[2] === 255;\n  }\n  getSize(array) {\n    // Skip 4 chars, they are for signature\n    let view = new DataView(array.buffer, array.byteOffset + 4);\n    let i, next;\n    while (view.byteLength) {\n      // read length of the next block\n      i = view.getUint16(0, false);\n      // i = buffer.readUInt16BE(0);\n      // ensure correct format\n      validateJPEGBuffer(view, i);\n      // 0xFFC0 is baseline standard(SOF)\n      // 0xFFC1 is baseline optimized(SOF)\n      // 0xFFC2 is progressive(SOF2)\n      next = view.getUint8(i + 1);\n      if (next === 0xc0 || next === 0xc1 || next === 0xc2) {\n        return [view.getUint16(i + 7, false), view.getUint16(i + 5, false)];\n      }\n      // move to the next block\n      view = new DataView(array.buffer, view.byteOffset + i + 2);\n    }\n    throw new TypeError('Invalid JPG, no size found');\n  }\n  getChannels(_buffer) {\n    return 3;\n  }\n}\n/**\n * PNG image support.\n *\n * PNG signature: 'PNG\\r\\n\\x1a\\n'\n * PNG image header chunk name: 'IHDR'\n */\nclass PNGImageUtils {\n  match(array) {\n    return array.length >= 8 && array[0] === 0x89 && array[1] === 0x50 && array[2] === 0x4e && array[3] === 0x47 && array[4] === 0x0d && array[5] === 0x0a && array[6] === 0x1a && array[7] === 0x0a;\n  }\n  getSize(array) {\n    const view = new DataView(array.buffer, array.byteOffset);\n    const magic = BufferUtils.decodeText(array.slice(12, 16));\n    if (magic === PNGImageUtils.PNG_FRIED_CHUNK_NAME) {\n      return [view.getUint32(32, false), view.getUint32(36, false)];\n    }\n    return [view.getUint32(16, false), view.getUint32(20, false)];\n  }\n  getChannels(_buffer) {\n    return 4;\n  }\n}\n/**\n * *Common utilities for working with image data.*\n *\n * @category Utilities\n */\n// Used to detect \"fried\" png's: http://www.jongware.com/pngdefry.html\nPNGImageUtils.PNG_FRIED_CHUNK_NAME = 'CgBI';\nclass ImageUtils {\n  /** Registers support for a new image format; useful for certain extensions. */\n  static registerFormat(mimeType, impl) {\n    this.impls[mimeType] = impl;\n  }\n  /**\n   * Returns detected MIME type of the given image buffer. Note that for image\n   * formats with support provided by extensions, the extension must be\n   * registered with an I/O class before it can be detected by ImageUtils.\n   */\n  static getMimeType(buffer) {\n    for (const mimeType in this.impls) {\n      if (this.impls[mimeType].match(buffer)) {\n        return mimeType;\n      }\n    }\n    return null;\n  }\n  /** Returns the dimensions of the image. */\n  static getSize(buffer, mimeType) {\n    if (!this.impls[mimeType]) return null;\n    return this.impls[mimeType].getSize(buffer);\n  }\n  /**\n   * Returns a conservative estimate of the number of channels in the image. For some image\n   * formats, the method may return 4 indicating the possibility of an alpha channel, without\n   * the ability to guarantee that an alpha channel is present.\n   */\n  static getChannels(buffer, mimeType) {\n    if (!this.impls[mimeType]) return null;\n    return this.impls[mimeType].getChannels(buffer);\n  }\n  /** Returns a conservative estimate of the GPU memory required by this image. */\n  static getVRAMByteLength(buffer, mimeType) {\n    if (!this.impls[mimeType]) return null;\n    if (this.impls[mimeType].getVRAMByteLength) {\n      return this.impls[mimeType].getVRAMByteLength(buffer);\n    }\n    let uncompressedBytes = 0;\n    const channels = 4; // See https://github.com/donmccurdy/glTF-Transform/issues/151.\n    const resolution = this.getSize(buffer, mimeType);\n    if (!resolution) return null;\n    while (resolution[0] > 1 || resolution[1] > 1) {\n      uncompressedBytes += resolution[0] * resolution[1] * channels;\n      resolution[0] = Math.max(Math.floor(resolution[0] / 2), 1);\n      resolution[1] = Math.max(Math.floor(resolution[1] / 2), 1);\n    }\n    uncompressedBytes += 1 * 1 * channels;\n    return uncompressedBytes;\n  }\n  /** Returns the preferred file extension for the given MIME type. */\n  static mimeTypeToExtension(mimeType) {\n    if (mimeType === 'image/jpeg') return 'jpg';\n    return mimeType.split('/').pop();\n  }\n  /** Returns the MIME type for the given file extension. */\n  static extensionToMimeType(extension) {\n    if (extension === 'jpg') return 'image/jpeg';\n    if (!extension) return '';\n    return `image/${extension}`;\n  }\n}\nImageUtils.impls = {\n  'image/jpeg': new JPEGImageUtils(),\n  'image/png': new PNGImageUtils()\n};\nfunction validateJPEGBuffer(view, i) {\n  // index should be within buffer limits\n  if (i > view.byteLength) {\n    throw new TypeError('Corrupt JPG, exceeded buffer limits');\n  }\n  // Every JPEG block must begin with a 0xFF\n  if (view.getUint8(i) !== 0xff) {\n    throw new TypeError('Invalid JPG, marker table corrupted');\n  }\n  return view;\n}\n\n/**\n * *Utility class for working with file systems and URI paths.*\n *\n * @category Utilities\n */\nclass FileUtils {\n  /**\n   * Extracts the basename from a file path, e.g. \"folder/model.glb\" -> \"model\".\n   * See: {@link HTTPUtils.basename}\n   */\n  static basename(uri) {\n    const fileName = uri.split(/[\\\\/]/).pop();\n    return fileName.substring(0, fileName.lastIndexOf('.'));\n  }\n  /**\n   * Extracts the extension from a file path, e.g. \"folder/model.glb\" -> \"glb\".\n   * See: {@link HTTPUtils.extension}\n   */\n  static extension(uri) {\n    if (uri.startsWith('data:image/')) {\n      const mimeType = uri.match(/data:(image\\/\\w+)/)[1];\n      return ImageUtils.mimeTypeToExtension(mimeType);\n    } else if (uri.startsWith('data:model/gltf+json')) {\n      return 'gltf';\n    } else if (uri.startsWith('data:model/gltf-binary')) {\n      return 'glb';\n    } else if (uri.startsWith('data:application/')) {\n      return 'bin';\n    }\n    return uri.split(/[\\\\/]/).pop().split(/[.]/).pop();\n  }\n}\n\n/**\n * Common utilities\n * @module glMatrix\n */\nvar ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};\n\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nfunction create() {\n  var out = new ARRAY_TYPE(3);\n\n  if (ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nfunction length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nfunction transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\n(function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n})();\n\n/** @hidden Implemented in /core for use by /extensions, publicly exported from /functions. */\nfunction getBounds(node) {\n  const resultBounds = createBounds();\n  const parents = node.propertyType === PropertyType.NODE ? [node] : node.listChildren();\n  for (const parent of parents) {\n    parent.traverse(node => {\n      const mesh = node.getMesh();\n      if (!mesh) return;\n      // Compute mesh bounds and update result.\n      const meshBounds = getMeshBounds(mesh, node.getWorldMatrix());\n      if (meshBounds.min.every(isFinite) && meshBounds.max.every(isFinite)) {\n        expandBounds(meshBounds.min, resultBounds);\n        expandBounds(meshBounds.max, resultBounds);\n      }\n    });\n  }\n  return resultBounds;\n}\n/** Computes mesh bounds in world space. */\nfunction getMeshBounds(mesh, worldMatrix) {\n  const meshBounds = createBounds();\n  // We can't transform a local AABB into world space and still have a tight AABB in world space,\n  // so we need to compute the world AABB vertex by vertex here.\n  for (const prim of mesh.listPrimitives()) {\n    const position = prim.getAttribute('POSITION');\n    const indices = prim.getIndices();\n    if (!position) continue;\n    let localPos = [0, 0, 0];\n    let worldPos = [0, 0, 0];\n    for (let i = 0, il = indices ? indices.getCount() : position.getCount(); i < il; i++) {\n      const index = indices ? indices.getScalar(i) : i;\n      localPos = position.getElement(index, localPos);\n      worldPos = transformMat4(worldPos, localPos, worldMatrix);\n      expandBounds(worldPos, meshBounds);\n    }\n  }\n  return meshBounds;\n}\n/** Expands bounds of target by given source. */\nfunction expandBounds(point, target) {\n  for (let i = 0; i < 3; i++) {\n    target.min[i] = Math.min(point[i], target.min[i]);\n    target.max[i] = Math.max(point[i], target.max[i]);\n  }\n}\n/** Creates new bounds with min=Infinity, max=-Infinity. */\nfunction createBounds() {\n  return {\n    min: [Infinity, Infinity, Infinity],\n    max: [-Infinity, -Infinity, -Infinity]\n  };\n}\n\n// Need a placeholder domain to construct a URL from a relative path. We only\n// access `url.pathname`, so the domain doesn't matter.\nconst NULL_DOMAIN = 'https://null.example';\n/**\n * *Utility class for working with URLs.*\n *\n * @category Utilities\n */\nclass HTTPUtils {\n  static dirname(path) {\n    const index = path.lastIndexOf('/');\n    if (index === -1) return './';\n    return path.substring(0, index + 1);\n  }\n  /**\n   * Extracts the basename from a URL, e.g. \"folder/model.glb\" -> \"model\".\n   * See: {@link FileUtils.basename}\n   */\n  static basename(uri) {\n    return FileUtils.basename(new URL(uri, NULL_DOMAIN).pathname);\n  }\n  /**\n   * Extracts the extension from a URL, e.g. \"folder/model.glb\" -> \"glb\".\n   * See: {@link FileUtils.extension}\n   */\n  static extension(uri) {\n    return FileUtils.extension(new URL(uri, NULL_DOMAIN).pathname);\n  }\n  static resolve(base, path) {\n    if (!this.isRelativePath(path)) return path;\n    const stack = base.split('/');\n    const parts = path.split('/');\n    stack.pop();\n    for (let i = 0; i < parts.length; i++) {\n      if (parts[i] === '.') continue;\n      if (parts[i] === '..') {\n        stack.pop();\n      } else {\n        stack.push(parts[i]);\n      }\n    }\n    return stack.join('/');\n  }\n  /**\n   * Returns true for URLs containing a protocol, and false for both\n   * absolute and relative paths.\n   */\n  static isAbsoluteURL(path) {\n    return this.PROTOCOL_REGEXP.test(path);\n  }\n  /**\n   * Returns true for paths that are declared relative to some unknown base\n   * path. For example, \"foo/bar/\" is relative both \"/foo/bar/\" is not.\n   */\n  static isRelativePath(path) {\n    return !/^(?:[a-zA-Z]+:)?\\//.test(path);\n  }\n}\nHTTPUtils.DEFAULT_INIT = {};\nHTTPUtils.PROTOCOL_REGEXP = /^[a-zA-Z]+:\\/\\//;\n\n// Reference: https://github.com/jonschlinkert/is-plain-object\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\nfunction isPlainObject(o) {\n  if (isObject(o) === false) return false;\n  // If has modified constructor\n  const ctor = o.constructor;\n  if (ctor === undefined) return true;\n  // If has modified prototype\n  const prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n  // If constructor does not have an Object-specific method\n  if (Object.hasOwn(prot, 'isPrototypeOf') === false) {\n    return false;\n  }\n  // Most likely a plain Object\n  return true;\n}\n\nvar _Logger;\n/** Logger verbosity thresholds. */\nvar Verbosity;\n(function (Verbosity) {\n  /** No events are logged. */\n  Verbosity[Verbosity[\"SILENT\"] = 4] = \"SILENT\";\n  /** Only error events are logged. */\n  Verbosity[Verbosity[\"ERROR\"] = 3] = \"ERROR\";\n  /** Only error and warn events are logged. */\n  Verbosity[Verbosity[\"WARN\"] = 2] = \"WARN\";\n  /** Only error, warn, and info events are logged. (DEFAULT) */\n  Verbosity[Verbosity[\"INFO\"] = 1] = \"INFO\";\n  /** All events are logged. */\n  Verbosity[Verbosity[\"DEBUG\"] = 0] = \"DEBUG\";\n})(Verbosity || (Verbosity = {}));\n/**\n * *Logger utility class.*\n *\n * @category Utilities\n */\nclass Logger {\n  /** Constructs a new Logger instance. */\n  constructor(verbosity) {\n    this.verbosity = void 0;\n    this.verbosity = verbosity;\n  }\n  /** Logs an event at level {@link Logger.Verbosity.DEBUG}. */\n  debug(text) {\n    if (this.verbosity <= Logger.Verbosity.DEBUG) {\n      console.debug(text);\n    }\n  }\n  /** Logs an event at level {@link Logger.Verbosity.INFO}. */\n  info(text) {\n    if (this.verbosity <= Logger.Verbosity.INFO) {\n      console.info(text);\n    }\n  }\n  /** Logs an event at level {@link Logger.Verbosity.WARN}. */\n  warn(text) {\n    if (this.verbosity <= Logger.Verbosity.WARN) {\n      console.warn(text);\n    }\n  }\n  /** Logs an event at level {@link Logger.Verbosity.ERROR}. */\n  error(text) {\n    if (this.verbosity <= Logger.Verbosity.ERROR) {\n      console.error(text);\n    }\n  }\n}\n_Logger = Logger;\n/** Logger verbosity thresholds. */\nLogger.Verbosity = Verbosity;\n/** Default logger instance. */\nLogger.DEFAULT_INSTANCE = new _Logger(_Logger.Verbosity.INFO);\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nfunction determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nfunction multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nfunction getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nfunction getRotation(out, mat) {\n  var scaling = new ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n\n/** @hidden */\nclass MathUtils {\n  static identity(v) {\n    return v;\n  }\n  static eq(a, b, tolerance = 10e-6) {\n    if (a.length !== b.length) return false;\n    for (let i = 0; i < a.length; i++) {\n      if (Math.abs(a[i] - b[i]) > tolerance) return false;\n    }\n    return true;\n  }\n  static clamp(value, min, max) {\n    if (value < min) return min;\n    if (value > max) return max;\n    return value;\n  }\n  // TODO(perf): Compare performance if we replace the switch with individual functions.\n  static decodeNormalizedInt(i, componentType) {\n    // Hardcode enums from accessor.ts to avoid a circular dependency.\n    switch (componentType) {\n      case 5126:\n        // FLOAT\n        return i;\n      case 5123:\n        // UNSIGNED_SHORT\n        return i / 65535.0;\n      case 5121:\n        // UNSIGNED_BYTE\n        return i / 255.0;\n      case 5122:\n        // SHORT\n        return Math.max(i / 32767.0, -1.0);\n      case 5120:\n        // BYTE\n        return Math.max(i / 127.0, -1.0);\n      default:\n        throw new Error('Invalid component type.');\n    }\n  }\n  // TODO(perf): Compare performance if we replace the switch with individual functions.\n  static encodeNormalizedInt(f, componentType) {\n    // Hardcode enums from accessor.ts to avoid a circular dependency.\n    switch (componentType) {\n      case 5126:\n        // FLOAT\n        return f;\n      case 5123:\n        // UNSIGNED_SHORT\n        return Math.round(MathUtils.clamp(f, 0, 1) * 65535.0);\n      case 5121:\n        // UNSIGNED_BYTE\n        return Math.round(MathUtils.clamp(f, 0, 1) * 255.0);\n      case 5122:\n        // SHORT\n        return Math.round(MathUtils.clamp(f, -1, 1) * 32767.0);\n      case 5120:\n        // BYTE\n        return Math.round(MathUtils.clamp(f, -1, 1) * 127.0);\n      default:\n        throw new Error('Invalid component type.');\n    }\n  }\n  /**\n   * Decompose a mat4 to TRS properties.\n   *\n   * Equivalent to the Matrix4 decompose() method in three.js, and intentionally not using the\n   * gl-matrix version. See: https://github.com/toji/gl-matrix/issues/408\n   *\n   * @param srcMat Matrix element, to be decomposed to TRS properties.\n   * @param dstTranslation Translation element, to be overwritten.\n   * @param dstRotation Rotation element, to be overwritten.\n   * @param dstScale Scale element, to be overwritten.\n   */\n  static decompose(srcMat, dstTranslation, dstRotation, dstScale) {\n    let sx = length([srcMat[0], srcMat[1], srcMat[2]]);\n    const sy = length([srcMat[4], srcMat[5], srcMat[6]]);\n    const sz = length([srcMat[8], srcMat[9], srcMat[10]]);\n    // if determine is negative, we need to invert one scale\n    const det = determinant(srcMat);\n    if (det < 0) sx = -sx;\n    dstTranslation[0] = srcMat[12];\n    dstTranslation[1] = srcMat[13];\n    dstTranslation[2] = srcMat[14];\n    // scale the rotation part\n    const _m1 = srcMat.slice();\n    const invSX = 1 / sx;\n    const invSY = 1 / sy;\n    const invSZ = 1 / sz;\n    _m1[0] *= invSX;\n    _m1[1] *= invSX;\n    _m1[2] *= invSX;\n    _m1[4] *= invSY;\n    _m1[5] *= invSY;\n    _m1[6] *= invSY;\n    _m1[8] *= invSZ;\n    _m1[9] *= invSZ;\n    _m1[10] *= invSZ;\n    getRotation(dstRotation, _m1);\n    dstScale[0] = sx;\n    dstScale[1] = sy;\n    dstScale[2] = sz;\n  }\n  /**\n   * Compose TRS properties to a mat4.\n   *\n   * Equivalent to the Matrix4 compose() method in three.js, and intentionally not using the\n   * gl-matrix version. See: https://github.com/toji/gl-matrix/issues/408\n   *\n   * @param srcTranslation Translation element of matrix.\n   * @param srcRotation Rotation element of matrix.\n   * @param srcScale Scale element of matrix.\n   * @param dstMat Matrix element, to be modified and returned.\n   * @returns dstMat, overwritten to mat4 equivalent of given TRS properties.\n   */\n  static compose(srcTranslation, srcRotation, srcScale, dstMat) {\n    const te = dstMat;\n    const x = srcRotation[0],\n      y = srcRotation[1],\n      z = srcRotation[2],\n      w = srcRotation[3];\n    const x2 = x + x,\n      y2 = y + y,\n      z2 = z + z;\n    const xx = x * x2,\n      xy = x * y2,\n      xz = x * z2;\n    const yy = y * y2,\n      yz = y * z2,\n      zz = z * z2;\n    const wx = w * x2,\n      wy = w * y2,\n      wz = w * z2;\n    const sx = srcScale[0],\n      sy = srcScale[1],\n      sz = srcScale[2];\n    te[0] = (1 - (yy + zz)) * sx;\n    te[1] = (xy + wz) * sx;\n    te[2] = (xz - wy) * sx;\n    te[3] = 0;\n    te[4] = (xy - wz) * sy;\n    te[5] = (1 - (xx + zz)) * sy;\n    te[6] = (yz + wx) * sy;\n    te[7] = 0;\n    te[8] = (xz + wy) * sz;\n    te[9] = (yz - wx) * sz;\n    te[10] = (1 - (xx + yy)) * sz;\n    te[11] = 0;\n    te[12] = srcTranslation[0];\n    te[13] = srcTranslation[1];\n    te[14] = srcTranslation[2];\n    te[15] = 1;\n    return te;\n  }\n}\n\nfunction equalsRef(refA, refB) {\n  if (!!refA !== !!refB) return false;\n  const a = refA.getChild();\n  const b = refB.getChild();\n  return a === b || a.equals(b);\n}\nfunction equalsRefSet(refSetA, refSetB) {\n  if (!!refSetA !== !!refSetB) return false;\n  const refValuesA = refSetA.values();\n  const refValuesB = refSetB.values();\n  if (refValuesA.length !== refValuesB.length) return false;\n  for (let i = 0; i < refValuesA.length; i++) {\n    const a = refValuesA[i];\n    const b = refValuesB[i];\n    if (a.getChild() === b.getChild()) continue;\n    if (!a.getChild().equals(b.getChild())) return false;\n  }\n  return true;\n}\nfunction equalsRefMap(refMapA, refMapB) {\n  if (!!refMapA !== !!refMapB) return false;\n  const keysA = refMapA.keys();\n  const keysB = refMapB.keys();\n  if (keysA.length !== keysB.length) return false;\n  for (const key of keysA) {\n    const refA = refMapA.get(key);\n    const refB = refMapB.get(key);\n    if (!!refA !== !!refB) return false;\n    const a = refA.getChild();\n    const b = refB.getChild();\n    if (a === b) continue;\n    if (!a.equals(b)) return false;\n  }\n  return true;\n}\nfunction equalsArray(a, b) {\n  if (a === b) return true;\n  if (!!a !== !!b || !a || !b) return false;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\nfunction equalsObject(_a, _b) {\n  if (_a === _b) return true;\n  if (!!_a !== !!_b) return false;\n  if (!isPlainObject(_a) || !isPlainObject(_b)) {\n    return _a === _b;\n  }\n  const a = _a;\n  const b = _b;\n  let numKeysA = 0;\n  let numKeysB = 0;\n  let key;\n  for (key in a) numKeysA++;\n  for (key in b) numKeysB++;\n  if (numKeysA !== numKeysB) return false;\n  for (key in a) {\n    const valueA = a[key];\n    const valueB = b[key];\n    if (isArray(valueA) && isArray(valueB)) {\n      if (!equalsArray(valueA, valueB)) return false;\n    } else if (isPlainObject(valueA) && isPlainObject(valueB)) {\n      if (!equalsObject(valueA, valueB)) return false;\n    } else {\n      if (valueA !== valueB) return false;\n    }\n  }\n  return true;\n}\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nconst ALPHABET = '23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ';\nconst UNIQUE_RETRIES = 999;\nconst ID_LENGTH = 6;\nconst previousIDs = new Set();\nconst generateOne = function generateOne() {\n  let rtn = '';\n  for (let i = 0; i < ID_LENGTH; i++) {\n    rtn += ALPHABET.charAt(Math.floor(Math.random() * ALPHABET.length));\n  }\n  return rtn;\n};\n/**\n * Short ID generator.\n *\n * Generated IDs are short, easy to type, and unique for the duration of the program's execution.\n * Uniqueness across multiple program executions, or on other devices, is not guaranteed. Based on\n * [Short ID Generation in JavaScript](https://tomspencer.dev/blog/2014/11/16/short-id-generation-in-javascript/),\n * with alterations.\n *\n * @category Utilities\n * @hidden\n */\nconst uuid = function uuid() {\n  for (let retries = 0; retries < UNIQUE_RETRIES; retries++) {\n    const id = generateOne();\n    if (!previousIDs.has(id)) {\n      previousIDs.add(id);\n      return id;\n    }\n  }\n  return '';\n};\n\nconst COPY_IDENTITY = t => t;\nconst EMPTY_SET = new Set();\n/**\n * *Properties represent distinct resources in a glTF asset, referenced by other properties.*\n *\n * For example, each material and texture is a property, with material properties holding\n * references to the textures. All properties are created with factory methods on the\n * {@link Document} in which they should be constructed. Properties are destroyed by calling\n * {@link Property.dispose}().\n *\n * Usage:\n *\n * ```ts\n * const texture = doc.createTexture('myTexture');\n * doc.listTextures(); // → [texture x 1]\n *\n * // Attach a texture to a material.\n * material.setBaseColorTexture(texture);\n * material.getBaseColortexture(); // → texture\n *\n * // Detaching a texture removes any references to it, except from the doc.\n * texture.detach();\n * material.getBaseColorTexture(); // → null\n * doc.listTextures(); // → [texture x 1]\n *\n * // Disposing a texture removes all references to it, and its own references.\n * texture.dispose();\n * doc.listTextures(); // → []\n * ```\n *\n * Reference:\n * - [glTF → Concepts](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#concepts)\n *\n * @category Properties\n */\nclass Property extends GraphNode {\n  /** @hidden */\n  constructor(graph, name = '') {\n    super(graph);\n    this[$attributes]['name'] = name;\n    this.init();\n    this.dispatchEvent({\n      type: 'create'\n    });\n  }\n  /**\n   * Returns the Graph associated with this Property. For internal use.\n   * @hidden\n   * @experimental\n   */\n  getGraph() {\n    return this.graph;\n  }\n  /**\n   * Returns default attributes for the property. Empty lists and maps should be initialized\n   * to empty arrays and objects. Always invoke `super.getDefaults()` and extend the result.\n   */\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      name: '',\n      extras: {}\n    });\n  }\n  /** @hidden */\n  set(attribute, value) {\n    if (Array.isArray(value)) value = value.slice(); // copy vector, quat, color …\n    return super.set(attribute, value);\n  }\n  /**********************************************************************************************\n   * Name.\n   */\n  /**\n   * Returns the name of this property. While names are not required to be unique, this is\n   * encouraged, and non-unique names will be overwritten in some tools. For custom data about\n   * a property, prefer to use Extras.\n   */\n  getName() {\n    return this.get('name');\n  }\n  /**\n   * Sets the name of this property. While names are not required to be unique, this is\n   * encouraged, and non-unique names will be overwritten in some tools. For custom data about\n   * a property, prefer to use Extras.\n   */\n  setName(name) {\n    return this.set('name', name);\n  }\n  /**********************************************************************************************\n   * Extras.\n   */\n  /**\n   * Returns a reference to the Extras object, containing application-specific data for this\n   * Property. Extras should be an Object, not a primitive value, for best portability.\n   */\n  getExtras() {\n    return this.get('extras');\n  }\n  /**\n   * Updates the Extras object, containing application-specific data for this Property. Extras\n   * should be an Object, not a primitive value, for best portability.\n   */\n  setExtras(extras) {\n    return this.set('extras', extras);\n  }\n  /**********************************************************************************************\n   * Graph state.\n   */\n  /**\n   * Makes a copy of this property, with the same resources (by reference) as the original.\n   */\n  clone() {\n    const PropertyClass = this.constructor;\n    return new PropertyClass(this.graph).copy(this, COPY_IDENTITY);\n  }\n  /**\n   * Copies all data from another property to this one. Child properties are copied by reference,\n   * unless a 'resolve' function is given to override that.\n   * @param other Property to copy references from.\n   * @param resolve Function to resolve each Property being transferred. Default is identity.\n   */\n  copy(other, resolve = COPY_IDENTITY) {\n    // Remove previous references.\n    for (const key in this[$attributes]) {\n      const value = this[$attributes][key];\n      if (value instanceof GraphEdge) {\n        if (!this[$immutableKeys].has(key)) {\n          value.dispose();\n        }\n      } else if (value instanceof RefList || value instanceof RefSet) {\n        for (const ref of value.values()) {\n          ref.dispose();\n        }\n      } else if (value instanceof RefMap) {\n        for (const ref of value.values()) {\n          ref.dispose();\n        }\n      }\n    }\n    // Add new references.\n    for (const key in other[$attributes]) {\n      const thisValue = this[$attributes][key];\n      const otherValue = other[$attributes][key];\n      if (otherValue instanceof GraphEdge) {\n        if (this[$immutableKeys].has(key)) {\n          const ref = thisValue;\n          ref.getChild().copy(resolve(otherValue.getChild()), resolve);\n        } else {\n          // biome-ignore lint/suspicious/noExplicitAny: TODO\n          this.setRef(key, resolve(otherValue.getChild()), otherValue.getAttributes());\n        }\n      } else if (otherValue instanceof RefSet || otherValue instanceof RefList) {\n        for (const ref of otherValue.values()) {\n          // biome-ignore lint/suspicious/noExplicitAny: TODO\n          this.addRef(key, resolve(ref.getChild()), ref.getAttributes());\n        }\n      } else if (otherValue instanceof RefMap) {\n        for (const subkey of otherValue.keys()) {\n          const ref = otherValue.get(subkey);\n          // biome-ignore lint/suspicious/noExplicitAny: TODO\n          this.setRefMap(key, subkey, resolve(ref.getChild()), ref.getAttributes());\n        }\n      } else if (isPlainObject(otherValue)) {\n        this[$attributes][key] = JSON.parse(JSON.stringify(otherValue));\n      } else if (Array.isArray(otherValue) || otherValue instanceof ArrayBuffer || ArrayBuffer.isView(otherValue)) {\n        // biome-ignore lint/suspicious/noExplicitAny: TODO\n        this[$attributes][key] = otherValue.slice();\n      } else {\n        this[$attributes][key] = otherValue;\n      }\n    }\n    return this;\n  }\n  /**\n   * Returns true if two properties are deeply equivalent, recursively comparing the attributes\n   * of the properties. Optionally, a 'skip' set may be included, specifying attributes whose\n   * values should not be considered in the comparison.\n   *\n   * Example: Two {@link Primitive Primitives} are equivalent if they have accessors and\n   * materials with equivalent content — but not necessarily the same specific accessors\n   * and materials.\n   */\n  equals(other, skip = EMPTY_SET) {\n    if (this === other) return true;\n    if (this.propertyType !== other.propertyType) return false;\n    for (const key in this[$attributes]) {\n      if (skip.has(key)) continue;\n      const a = this[$attributes][key];\n      const b = other[$attributes][key];\n      if (a instanceof GraphEdge || b instanceof GraphEdge) {\n        if (!equalsRef(a, b)) {\n          return false;\n        }\n      } else if (a instanceof RefSet || b instanceof RefSet || a instanceof RefList || b instanceof RefList) {\n        if (!equalsRefSet(a, b)) {\n          return false;\n        }\n      } else if (a instanceof RefMap || b instanceof RefMap) {\n        if (!equalsRefMap(a, b)) {\n          return false;\n        }\n      } else if (isPlainObject(a) || isPlainObject(b)) {\n        if (!equalsObject(a, b)) return false;\n      } else if (isArray(a) || isArray(b)) {\n        if (!equalsArray(a, b)) return false;\n      } else {\n        // Literal.\n        if (a !== b) return false;\n      }\n    }\n    return true;\n  }\n  detach() {\n    // Detaching should keep properties in the same Document, and attached to its root.\n    this.graph.disconnectParents(this, n => n.propertyType !== 'Root');\n    return this;\n  }\n  /**\n   * Returns a list of all properties that hold a reference to this property. For example, a\n   * material may hold references to various textures, but a texture does not hold references\n   * to the materials that use it.\n   *\n   * It is often necessary to filter the results for a particular type: some resources, like\n   * {@link Accessor}s, may be referenced by different types of properties. Most properties\n   * include the {@link Root} as a parent, which is usually not of interest.\n   *\n   * Usage:\n   *\n   * ```ts\n   * const materials = texture\n   * \t.listParents()\n   * \t.filter((p) => p instanceof Material)\n   * ```\n   */\n  listParents() {\n    return this.graph.listParents(this);\n  }\n}\n\n/**\n * *A {@link Property} that can have {@link ExtensionProperty} instances attached.*\n *\n * Most properties are extensible. See the {@link Extension} documentation for information about\n * how to use extensions.\n *\n * @category Properties\n */\nclass ExtensibleProperty extends Property {\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      extensions: new RefMap()\n    });\n  }\n  /** Returns an {@link ExtensionProperty} attached to this Property, if any. */\n  getExtension(name) {\n    return this.getRefMap('extensions', name);\n  }\n  /**\n   * Attaches the given {@link ExtensionProperty} to this Property. For a given extension, only\n   * one ExtensionProperty may be attached to any one Property at a time.\n   */\n  setExtension(name, extensionProperty) {\n    if (extensionProperty) extensionProperty._validateParent(this);\n    return this.setRefMap('extensions', name, extensionProperty);\n  }\n  /** Lists all {@link ExtensionProperty} instances attached to this Property. */\n  listExtensions() {\n    return this.listRefMapValues('extensions');\n  }\n}\n\n/**\n * *Accessors store lists of numeric, vector, or matrix elements in a typed array.*\n *\n * All large data for {@link Mesh}, {@link Skin}, and {@link Animation} properties is stored in\n * {@link Accessor}s, organized into one or more {@link Buffer}s. Each accessor provides data in\n * typed arrays, with two abstractions:\n *\n * *Elements* are the logical divisions of the data into useful types: `\"SCALAR\"`, `\"VEC2\"`,\n * `\"VEC3\"`, `\"VEC4\"`, `\"MAT3\"`, or `\"MAT4\"`. The element type can be determined with the\n * {@link Accessor.getType getType}() method, and the number of elements in the accessor determine its\n * {@link Accessor.getCount getCount}(). The number of components in an element — e.g. 9 for `\"MAT3\"` — are its\n * {@link Accessor.getElementSize getElementSize}(). See {@link Accessor.Type}.\n *\n * *Components* are the numeric values within an element — e.g. `.x` and `.y` for `\"VEC2\"`. Various\n * component types are available: `BYTE`, `UNSIGNED_BYTE`, `SHORT`, `UNSIGNED_SHORT`,\n * `UNSIGNED_INT`, and `FLOAT`. The component type can be determined with the\n * {@link Accessor.getComponentType getComponentType} method, and the number of bytes in each component determine its\n * {@link Accessor.getComponentSize getComponentSize}. See {@link Accessor.ComponentType}.\n *\n * Usage:\n *\n * ```typescript\n * const accessor = doc.createAccessor('myData')\n * \t.setArray(new Float32Array([1,2,3,4,5,6,7,8,9,10,11,12]))\n * \t.setType(Accessor.Type.VEC3)\n * \t.setBuffer(doc.getRoot().listBuffers()[0]);\n *\n * accessor.getCount();        // → 4\n * accessor.getElementSize();  // → 3\n * accessor.getByteLength();   // → 48\n * accessor.getElement(1, []); // → [4, 5, 6]\n *\n * accessor.setElement(0, [10, 20, 30]);\n * ```\n *\n * Data access through the {@link Accessor.getElement getElement} and {@link Accessor.setElement setElement}\n * methods reads or overwrites the content of the underlying typed array. These methods use\n * element arrays intended to be compatible with the [gl-matrix](https://github.com/toji/gl-matrix)\n * library, or with the `toArray`/`fromArray` methods of libraries like three.js and babylon.js.\n *\n * Each Accessor must be assigned to a {@link Buffer}, which determines where the accessor's data\n * is stored in the final file. Assigning Accessors to different Buffers allows the data to be\n * written to different `.bin` files.\n *\n * glTF Transform does not expose many details of sparse, normalized, or interleaved accessors\n * through its API. It reads files using those techniques, presents a simplified view of the data\n * for editing, and attempts to write data back out with optimizations. For example, vertex\n * attributes will typically be interleaved by default, regardless of the input file.\n *\n * References:\n * - [glTF → Accessors](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#accessors)\n *\n * @category Properties\n */\nclass Accessor extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.ACCESSOR;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      array: null,\n      type: Accessor.Type.SCALAR,\n      componentType: Accessor.ComponentType.FLOAT,\n      normalized: false,\n      sparse: false,\n      buffer: null\n    });\n  }\n  /**********************************************************************************************\n   * Static.\n   */\n  /** Returns size of a given element type, in components. */\n  static getElementSize(type) {\n    switch (type) {\n      case Accessor.Type.SCALAR:\n        return 1;\n      case Accessor.Type.VEC2:\n        return 2;\n      case Accessor.Type.VEC3:\n        return 3;\n      case Accessor.Type.VEC4:\n        return 4;\n      case Accessor.Type.MAT2:\n        return 4;\n      case Accessor.Type.MAT3:\n        return 9;\n      case Accessor.Type.MAT4:\n        return 16;\n      default:\n        throw new Error('Unexpected type: ' + type);\n    }\n  }\n  /** Returns size of a given component type, in bytes. */\n  static getComponentSize(componentType) {\n    switch (componentType) {\n      case Accessor.ComponentType.BYTE:\n        return 1;\n      case Accessor.ComponentType.UNSIGNED_BYTE:\n        return 1;\n      case Accessor.ComponentType.SHORT:\n        return 2;\n      case Accessor.ComponentType.UNSIGNED_SHORT:\n        return 2;\n      case Accessor.ComponentType.UNSIGNED_INT:\n        return 4;\n      case Accessor.ComponentType.FLOAT:\n        return 4;\n      default:\n        throw new Error('Unexpected component type: ' + componentType);\n    }\n  }\n  /**********************************************************************************************\n   * Min/max bounds.\n   */\n  /**\n   * Minimum value of each component in this attribute. Unlike in a final glTF file, values\n   * returned by this method will reflect the minimum accounting for {@link .normalized}\n   * state.\n   */\n  getMinNormalized(target) {\n    const normalized = this.getNormalized();\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    this.getMin(target);\n    if (normalized) {\n      for (let j = 0; j < elementSize; j++) {\n        target[j] = MathUtils.decodeNormalizedInt(target[j], componentType);\n      }\n    }\n    return target;\n  }\n  /**\n   * Minimum value of each component in this attribute. Values returned by this method do not\n   * reflect normalization: use {@link .getMinNormalized} in that case.\n   */\n  getMin(target) {\n    const array = this.getArray();\n    const count = this.getCount();\n    const elementSize = this.getElementSize();\n    for (let j = 0; j < elementSize; j++) target[j] = Infinity;\n    for (let i = 0; i < count * elementSize; i += elementSize) {\n      for (let j = 0; j < elementSize; j++) {\n        const value = array[i + j];\n        if (Number.isFinite(value)) {\n          target[j] = Math.min(target[j], value);\n        }\n      }\n    }\n    return target;\n  }\n  /**\n   * Maximum value of each component in this attribute. Unlike in a final glTF file, values\n   * returned by this method will reflect the minimum accounting for {@link .normalized}\n   * state.\n   */\n  getMaxNormalized(target) {\n    const normalized = this.getNormalized();\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    this.getMax(target);\n    if (normalized) {\n      for (let j = 0; j < elementSize; j++) {\n        target[j] = MathUtils.decodeNormalizedInt(target[j], componentType);\n      }\n    }\n    return target;\n  }\n  /**\n   * Maximum value of each component in this attribute. Values returned by this method do not\n   * reflect normalization: use {@link .getMinNormalized} in that case.\n   */\n  getMax(target) {\n    const array = this.get('array');\n    const count = this.getCount();\n    const elementSize = this.getElementSize();\n    for (let j = 0; j < elementSize; j++) target[j] = -Infinity;\n    for (let i = 0; i < count * elementSize; i += elementSize) {\n      for (let j = 0; j < elementSize; j++) {\n        const value = array[i + j];\n        if (Number.isFinite(value)) {\n          target[j] = Math.max(target[j], value);\n        }\n      }\n    }\n    return target;\n  }\n  /**********************************************************************************************\n   * Layout.\n   */\n  /**\n   * Number of elements in the accessor. An array of length 30, containing 10 `VEC3` elements,\n   * will have a count of 10.\n   */\n  getCount() {\n    const array = this.get('array');\n    return array ? array.length / this.getElementSize() : 0;\n  }\n  /** Type of element stored in the accessor. `VEC2`, `VEC3`, etc. */\n  getType() {\n    return this.get('type');\n  }\n  /**\n   * Sets type of element stored in the accessor. `VEC2`, `VEC3`, etc. Array length must be a\n   * multiple of the component size (`VEC2` = 2, `VEC3` = 3, ...) for the selected type.\n   */\n  setType(type) {\n    return this.set('type', type);\n  }\n  /**\n   * Number of components in each element of the accessor. For example, the element size of a\n   * `VEC2` accessor is 2. This value is determined automatically based on array length and\n   * accessor type, specified with {@link Accessor.setType setType()}.\n   */\n  // biome-ignore lint/suspicious/useAdjacentOverloadSignatures: Static vs. non-static.\n  getElementSize() {\n    return Accessor.getElementSize(this.get('type'));\n  }\n  /**\n   * Size of each component (a value in the raw array), in bytes. For example, the\n   * `componentSize` of data backed by a `float32` array is 4 bytes.\n   */\n  getComponentSize() {\n    return this.get('array').BYTES_PER_ELEMENT;\n  }\n  /**\n   * Component type (float32, uint16, etc.). This value is determined automatically, and can only\n   * be modified by replacing the underlying array.\n   */\n  getComponentType() {\n    return this.get('componentType');\n  }\n  /**********************************************************************************************\n   * Normalization.\n   */\n  /**\n   * Specifies whether integer data values should be normalized (true) to [0, 1] (for unsigned\n   * types) or [-1, 1] (for signed types), or converted directly (false) when they are accessed.\n   * This property is defined only for accessors that contain vertex attributes or animation\n   * output data.\n   */\n  getNormalized() {\n    return this.get('normalized');\n  }\n  /**\n   * Specifies whether integer data values should be normalized (true) to [0, 1] (for unsigned\n   * types) or [-1, 1] (for signed types), or converted directly (false) when they are accessed.\n   * This property is defined only for accessors that contain vertex attributes or animation\n   * output data.\n   */\n  setNormalized(normalized) {\n    return this.set('normalized', normalized);\n  }\n  /**********************************************************************************************\n   * Data access.\n   */\n  /**\n   * Returns the scalar element value at the given index. For\n   * {@link Accessor.getNormalized normalized} integer accessors, values are\n   * decoded and returned in floating-point form.\n   */\n  getScalar(index) {\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    const array = this.getArray();\n    if (this.getNormalized()) {\n      return MathUtils.decodeNormalizedInt(array[index * elementSize], componentType);\n    }\n    return array[index * elementSize];\n  }\n  /**\n   * Assigns the scalar element value at the given index. For\n   * {@link Accessor.getNormalized normalized} integer accessors, \"value\" should be\n   * given in floating-point form — it will be integer-encoded before writing\n   * to the underlying array.\n   */\n  setScalar(index, x) {\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    const array = this.getArray();\n    if (this.getNormalized()) {\n      array[index * elementSize] = MathUtils.encodeNormalizedInt(x, componentType);\n    } else {\n      array[index * elementSize] = x;\n    }\n    return this;\n  }\n  /**\n   * Returns the vector or matrix element value at the given index. For\n   * {@link Accessor.getNormalized normalized} integer accessors, values are\n   * decoded and returned in floating-point form.\n   *\n   * Example:\n   *\n   * ```javascript\n   * import { add } from 'gl-matrix/add';\n   *\n   * const element = [];\n   * const offset = [1, 1, 1];\n   *\n   * for (let i = 0; i < accessor.getCount(); i++) {\n   * \taccessor.getElement(i, element);\n   * \tadd(element, element, offset);\n   * \taccessor.setElement(i, element);\n   * }\n   * ```\n   */\n  getElement(index, target) {\n    const normalized = this.getNormalized();\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    const array = this.getArray();\n    for (let i = 0; i < elementSize; i++) {\n      if (normalized) {\n        target[i] = MathUtils.decodeNormalizedInt(array[index * elementSize + i], componentType);\n      } else {\n        target[i] = array[index * elementSize + i];\n      }\n    }\n    return target;\n  }\n  /**\n   * Assigns the vector or matrix element value at the given index. For\n   * {@link Accessor.getNormalized normalized} integer accessors, \"value\" should be\n   * given in floating-point form — it will be integer-encoded before writing\n   * to the underlying array.\n   *\n   * Example:\n   *\n   * ```javascript\n   * import { add } from 'gl-matrix/add';\n   *\n   * const element = [];\n   * const offset = [1, 1, 1];\n   *\n   * for (let i = 0; i < accessor.getCount(); i++) {\n   * \taccessor.getElement(i, element);\n   * \tadd(element, element, offset);\n   * \taccessor.setElement(i, element);\n   * }\n   * ```\n   */\n  setElement(index, value) {\n    const normalized = this.getNormalized();\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    const array = this.getArray();\n    for (let i = 0; i < elementSize; i++) {\n      if (normalized) {\n        array[index * elementSize + i] = MathUtils.encodeNormalizedInt(value[i], componentType);\n      } else {\n        array[index * elementSize + i] = value[i];\n      }\n    }\n    return this;\n  }\n  /**********************************************************************************************\n   * Raw data storage.\n   */\n  /**\n   * Specifies whether the accessor should be stored sparsely. When written to a glTF file, sparse\n   * accessors store only values that differ from base values. When loaded in glTF Transform (or most\n   * runtimes) a sparse accessor can be treated like any other accessor. Currently, glTF Transform always\n   * uses zeroes for the base values when writing files.\n   * @experimental\n   */\n  getSparse() {\n    return this.get('sparse');\n  }\n  /**\n   * Specifies whether the accessor should be stored sparsely. When written to a glTF file, sparse\n   * accessors store only values that differ from base values. When loaded in glTF Transform (or most\n   * runtimes) a sparse accessor can be treated like any other accessor. Currently, glTF Transform always\n   * uses zeroes for the base values when writing files.\n   * @experimental\n   */\n  setSparse(sparse) {\n    return this.set('sparse', sparse);\n  }\n  /** Returns the {@link Buffer} into which this accessor will be organized. */\n  getBuffer() {\n    return this.getRef('buffer');\n  }\n  /** Assigns the {@link Buffer} into which this accessor will be organized. */\n  setBuffer(buffer) {\n    return this.setRef('buffer', buffer);\n  }\n  /** Returns the raw typed array underlying this accessor. */\n  getArray() {\n    return this.get('array');\n  }\n  /** Assigns the raw typed array underlying this accessor. */\n  setArray(array) {\n    this.set('componentType', array ? arrayToComponentType(array) : Accessor.ComponentType.FLOAT);\n    this.set('array', array);\n    return this;\n  }\n  /** Returns the total bytelength of this accessor, exclusive of padding. */\n  getByteLength() {\n    const array = this.get('array');\n    return array ? array.byteLength : 0;\n  }\n}\n/**************************************************************************************************\n * Accessor utilities.\n */\n/** @internal */\n/**********************************************************************************************\n * Constants.\n */\n/** Element type contained by the accessor (SCALAR, VEC2, ...). */\nAccessor.Type = {\n  /** Scalar, having 1 value per element. */\n  SCALAR: 'SCALAR',\n  /** 2-component vector, having 2 components per element. */\n  VEC2: 'VEC2',\n  /** 3-component vector, having 3 components per element. */\n  VEC3: 'VEC3',\n  /** 4-component vector, having 4 components per element. */\n  VEC4: 'VEC4',\n  /** 2x2 matrix, having 4 components per element. */\n  MAT2: 'MAT2',\n  /** 3x3 matrix, having 9 components per element. */\n  MAT3: 'MAT3',\n  /** 4x3 matrix, having 16 components per element. */\n  MAT4: 'MAT4'\n};\n/** Data type of the values composing each element in the accessor. */\nAccessor.ComponentType = {\n  /**\n   * 1-byte signed integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array Int8Array}.\n   */\n  BYTE: 5120,\n  /**\n   * 1-byte unsigned integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array Uint8Array}.\n   */\n  UNSIGNED_BYTE: 5121,\n  /**\n   * 2-byte signed integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array Int16Array}.\n   */\n  SHORT: 5122,\n  /**\n   * 2-byte unsigned integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array Uint16Array}.\n   */\n  UNSIGNED_SHORT: 5123,\n  /**\n   * 4-byte unsigned integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array Uint32Array}.\n   */\n  UNSIGNED_INT: 5125,\n  /**\n   * 4-byte floating point number, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array Float32Array}.\n   */\n  FLOAT: 5126\n};\nfunction arrayToComponentType(array) {\n  switch (array.constructor) {\n    case Float32Array:\n      return Accessor.ComponentType.FLOAT;\n    case Uint32Array:\n      return Accessor.ComponentType.UNSIGNED_INT;\n    case Uint16Array:\n      return Accessor.ComponentType.UNSIGNED_SHORT;\n    case Uint8Array:\n      return Accessor.ComponentType.UNSIGNED_BYTE;\n    case Int16Array:\n      return Accessor.ComponentType.SHORT;\n    case Int8Array:\n      return Accessor.ComponentType.BYTE;\n    default:\n      throw new Error('Unknown accessor componentType.');\n  }\n}\n\n/**\n * *Reusable collections of {@link AnimationChannel}s, together representing a discrete animation\n * clip.*\n *\n * One Animation represents one playable unit in an animation system. Each may contain channels\n * affecting multiple paths (`translation`, `rotation`, `scale`, or `weights`) on multiple\n * {@link Node}s. An Animation's channels must be played together, and do not have any meaning in\n * isolation.\n *\n * Multiple Animations _may_ be played together: for example, one character's _Walk_ animation\n * might play while another character's _Run_ animation plays. Or a single character might have\n * both an _Idle_ and a _Talk_ animation playing at the same time. However, glTF does not define\n * any particular relationship between top-level Animations, or any particular playback behavior\n * like looping or sequences of Animations. General-purpose viewers typically autoplay the first\n * animation and provide UI controls for choosing another. Game engines may have significantly\n * more advanced methods of playing and blending animations.\n *\n * For example, a very simple skinned {@link Mesh} might have two Animations, _Idle_ and _Walk_.\n * Each of those Animations might affect the rotations of two bones, _LegL_ and _LegR_, where the\n * keyframes for each target-path pair are stored in {@link AnimationChannel} instances. In  total,\n * this model would contain two Animations and Four {@link AnimationChannel}s.\n *\n * Usage:\n *\n * ```ts\n * const animation = doc.createAnimation('machineRun')\n * \t.addChannel(rotateCog1)\n * \t.addChannel(rotateCog2)\n * \t.addChannel(rotateCog3);\n * ```\n *\n * Reference\n * - [glTF → Animations](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#animations)\n *\n * @category Properties\n */\nclass Animation extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.ANIMATION;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      channels: new RefSet(),\n      samplers: new RefSet()\n    });\n  }\n  /** Adds an {@link AnimationChannel} to this Animation. */\n  addChannel(channel) {\n    return this.addRef('channels', channel);\n  }\n  /** Removes an {@link AnimationChannel} from this Animation. */\n  removeChannel(channel) {\n    return this.removeRef('channels', channel);\n  }\n  /** Lists {@link AnimationChannel}s in this Animation. */\n  listChannels() {\n    return this.listRefs('channels');\n  }\n  /** Adds an {@link AnimationSampler} to this Animation. */\n  addSampler(sampler) {\n    return this.addRef('samplers', sampler);\n  }\n  /** Removes an {@link AnimationSampler} from this Animation. */\n  removeSampler(sampler) {\n    return this.removeRef('samplers', sampler);\n  }\n  /** Lists {@link AnimationSampler}s in this Animation. */\n  listSamplers() {\n    return this.listRefs('samplers');\n  }\n}\n\n/**\n * *A target-path pair within a larger {@link Animation}, which refers to an\n * {@link AnimationSampler} storing the keyframe data for that pair.*\n *\n * A _target_ is always a {@link Node}, in the core glTF spec. A _path_ is any property of that\n * Node that can be affected by animation: `translation`, `rotation`, `scale`, or `weights`. An\n * {@link Animation} affecting the positions and rotations of several {@link Node}s would contain\n * one channel for each Node-position or Node-rotation pair. The keyframe data for an\n * AnimationChannel is stored in an {@link AnimationSampler}, which must be attached to the same\n * {@link Animation}.\n *\n * Usage:\n *\n * ```ts\n * const node = doc.getRoot()\n * \t.listNodes()\n * \t.find((node) => node.getName() === 'Cog');\n *\n * const channel = doc.createAnimationChannel('cogRotation')\n * \t.setTargetPath('rotation')\n * \t.setTargetNode(node)\n * \t.setSampler(rotateSampler);\n * ```\n *\n * Reference\n * - [glTF → Animations](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#animations)\n *\n * @category Properties\n */\nclass AnimationChannel extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.ANIMATION_CHANNEL;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      targetPath: null,\n      targetNode: null,\n      sampler: null\n    });\n  }\n  /**********************************************************************************************\n   * Properties.\n   */\n  /**\n   * Path (property) animated on the target {@link Node}. Supported values include:\n   * `translation`, `rotation`, `scale`, or `weights`.\n   */\n  getTargetPath() {\n    return this.get('targetPath');\n  }\n  /**\n   * Path (property) animated on the target {@link Node}. Supported values include:\n   * `translation`, `rotation`, `scale`, or `weights`.\n   */\n  setTargetPath(targetPath) {\n    return this.set('targetPath', targetPath);\n  }\n  /** Target {@link Node} animated by the channel. */\n  getTargetNode() {\n    return this.getRef('targetNode');\n  }\n  /** Target {@link Node} animated by the channel. */\n  setTargetNode(targetNode) {\n    return this.setRef('targetNode', targetNode);\n  }\n  /**\n   * Keyframe data input/output values for the channel. Must be attached to the same\n   * {@link Animation}.\n   */\n  getSampler() {\n    return this.getRef('sampler');\n  }\n  /**\n   * Keyframe data input/output values for the channel. Must be attached to the same\n   * {@link Animation}.\n   */\n  setSampler(sampler) {\n    return this.setRef('sampler', sampler);\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\n/** Name of the property to be modified by an animation channel. */\nAnimationChannel.TargetPath = {\n  /** Channel targets {@link Node.setTranslation}. */\n  TRANSLATION: 'translation',\n  /** Channel targets {@link Node.setRotation}. */\n  ROTATION: 'rotation',\n  /** Channel targets {@link Node.setScale}. */\n  SCALE: 'scale',\n  /** Channel targets {@link Node.setWeights}, affecting {@link PrimitiveTarget} weights. */\n  WEIGHTS: 'weights'\n};\n\n/**\n * *Reusable collection of keyframes affecting particular property of an object.*\n *\n * Each AnimationSampler refers to an input and an output {@link Accessor}. Input contains times\n * (in seconds) for each keyframe. Output contains values (of any {@link Accessor.Type}) for the\n * animated property at each keyframe. Samplers using `CUBICSPLINE` interpolation will also contain\n * in/out tangents in the output, with the layout:\n *\n * in<sub>1</sub>, value<sub>1</sub>, out<sub>1</sub>,\n * in<sub>2</sub>, value<sub>2</sub>, out<sub>2</sub>,\n * in<sub>3</sub>, value<sub>3</sub>, out<sub>3</sub>, ...\n *\n * Usage:\n *\n * ```ts\n * // Create accessor containing input times, in seconds.\n * const input = doc.createAccessor('bounceTimes')\n * \t.setArray(new Float32Array([0, 1, 2]))\n * \t.setType(Accessor.Type.SCALAR);\n *\n * // Create accessor containing output values, in local units.\n * const output = doc.createAccessor('bounceValues')\n * \t.setArray(new Float32Array([\n * \t\t0, 0, 0, // y = 0\n * \t\t0, 1, 0, // y = 1\n * \t\t0, 0, 0, // y = 0\n * \t]))\n * \t.setType(Accessor.Type.VEC3);\n *\n * // Create sampler.\n * const sampler = doc.createAnimationSampler('bounce')\n * \t.setInput(input)\n * \t.setOutput(output)\n * \t.setInterpolation('LINEAR');\n * ```\n *\n * Reference\n * - [glTF → Animations](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#animations)\n *\n * @category Properties\n */\nclass AnimationSampler extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.ANIMATION_SAMPLER;\n  }\n  getDefaultAttributes() {\n    return Object.assign(super.getDefaults(), {\n      interpolation: AnimationSampler.Interpolation.LINEAR,\n      input: null,\n      output: null\n    });\n  }\n  /**********************************************************************************************\n   * Static.\n   */\n  /** Interpolation mode: `STEP`, `LINEAR`, or `CUBICSPLINE`. */\n  getInterpolation() {\n    return this.get('interpolation');\n  }\n  /** Interpolation mode: `STEP`, `LINEAR`, or `CUBICSPLINE`. */\n  setInterpolation(interpolation) {\n    return this.set('interpolation', interpolation);\n  }\n  /** Times for each keyframe, in seconds. */\n  getInput() {\n    return this.getRef('input');\n  }\n  /** Times for each keyframe, in seconds. */\n  setInput(input) {\n    return this.setRef('input', input, {\n      usage: BufferViewUsage$1.OTHER\n    });\n  }\n  /**\n   * Values for each keyframe. For `CUBICSPLINE` interpolation, output also contains in/out\n   * tangents.\n   */\n  getOutput() {\n    return this.getRef('output');\n  }\n  /**\n   * Values for each keyframe. For `CUBICSPLINE` interpolation, output also contains in/out\n   * tangents.\n   */\n  setOutput(output) {\n    return this.setRef('output', output, {\n      usage: BufferViewUsage$1.OTHER\n    });\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\n/** Interpolation method. */\nAnimationSampler.Interpolation = {\n  /** Animated values are linearly interpolated between keyframes. */\n  LINEAR: 'LINEAR',\n  /** Animated values remain constant from one keyframe until the next keyframe. */\n  STEP: 'STEP',\n  /** Animated values are interpolated according to given cubic spline tangents. */\n  CUBICSPLINE: 'CUBICSPLINE'\n};\n\n/**\n * *Buffers are low-level storage units for binary data.*\n *\n * glTF 2.0 has three concepts relevant to binary storage: accessors, buffer views, and buffers.\n * In glTF Transform, an {@link Accessor} is referenced by any property that requires numeric typed\n * array data. Meshes, Primitives, and Animations all reference Accessors. Buffers define how that\n * data is organized into transmitted file(s). A `.glb` file has only a single Buffer, and when\n * exporting to `.glb` your resources should be grouped accordingly. A `.gltf` file may reference\n * one or more `.bin` files — each `.bin` is a Buffer — and grouping Accessors under different\n * Buffers allow you to specify that structure.\n *\n * For engines that can dynamically load portions of a glTF file, splitting data into separate\n * buffers can allow you to avoid loading data until it is needed. For example, you might put\n * binary data for specific meshes into a different `.bin` buffer, or put each animation's binary\n * payload into its own `.bin`.\n *\n * Buffer Views define how Accessors are organized within a given Buffer. glTF Transform creates an\n * efficient Buffer View layout automatically at export: there is no Buffer View property exposed\n * by the glTF Transform API, simplifying data management.\n *\n * Usage:\n *\n * ```ts\n * // Create two buffers with custom filenames.\n * const buffer1 = doc.createBuffer('buffer1')\n * \t.setURI('part1.bin');\n * const buffer2 = doc.createBuffer('buffer2')\n * \t.setURI('part2.bin');\n *\n * // Assign the attributes of two meshes to different buffers. If the meshes\n * // had indices or morph target attributes, you would also want to relocate\n * // those accessors.\n * mesh1\n * \t.listPrimitives()\n * \t.forEach((primitive) => primitive.listAttributes()\n * \t\t.forEach((attribute) => attribute.setBuffer(buffer1)));\n * mesh2\n * \t.listPrimitives()\n * \t.forEach((primitive) => primitive.listAttributes()\n * \t\t.forEach((attribute) => attribute.setBuffer(buffer2)));\n *\n * // Write to disk. Each mesh's binary data will be in a separate binary file;\n * // any remaining accessors will be in a third (default) buffer.\n * await new NodeIO().write('scene.gltf', doc);\n * // → scene.gltf, part1.bin, part2.bin\n * ```\n *\n * References:\n * - [glTF → Buffers and Buffer Views](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#buffers-and-buffer-views)\n * - [glTF → Accessors](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#accessors)\n *\n * @category Properties\n */\nclass Buffer$1 extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.BUFFER;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      uri: ''\n    });\n  }\n  /**\n   * Returns the URI (or filename) of this buffer (e.g. 'myBuffer.bin'). URIs are strongly\n   * encouraged to be relative paths, rather than absolute. Use of a protocol (like `file://`)\n   * is possible for custom applications, but will limit the compatibility of the asset with most\n   * tools.\n   *\n   * Buffers commonly use the extension `.bin`, though this is not required.\n   */\n  getURI() {\n    return this.get('uri');\n  }\n  /**\n   * Sets the URI (or filename) of this buffer (e.g. 'myBuffer.bin'). URIs are strongly\n   * encouraged to be relative paths, rather than absolute. Use of a protocol (like `file://`)\n   * is possible for custom applications, but will limit the compatibility of the asset with most\n   * tools.\n   *\n   * Buffers commonly use the extension `.bin`, though this is not required.\n   */\n  setURI(uri) {\n    return this.set('uri', uri);\n  }\n}\n\n/**\n * *Cameras are perspectives through which the {@link Scene} may be viewed.*\n *\n * Projection can be perspective or orthographic. Cameras are contained in nodes and thus can be\n * transformed. The camera is defined such that the local +X axis is to the right, the lens looks\n * towards the local -Z axis, and the top of the camera is aligned with the local +Y axis. If no\n * transformation is specified, the location of the camera is at the origin.\n *\n * Usage:\n *\n * ```typescript\n * const camera = doc.createCamera('myCamera')\n * \t.setType(GLTF.CameraType.PERSPECTIVE)\n * \t.setZNear(0.1)\n * \t.setZFar(100)\n * \t.setYFov(Math.PI / 4)\n * \t.setAspectRatio(1.5);\n *\n * node.setCamera(camera);\n * ```\n *\n * References:\n * - [glTF → Cameras](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#cameras)\n *\n * @category Properties\n */\nclass Camera extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.CAMERA;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      // Common.\n      type: Camera.Type.PERSPECTIVE,\n      znear: 0.1,\n      zfar: 100,\n      // Perspective.\n      aspectRatio: null,\n      yfov: Math.PI * 2 * 50 / 360,\n      // 50º\n      // Orthographic.\n      xmag: 1,\n      ymag: 1\n    });\n  }\n  /**********************************************************************************************\n   * Common.\n   */\n  /** Specifies if the camera uses a perspective or orthographic projection. */\n  getType() {\n    return this.get('type');\n  }\n  /** Specifies if the camera uses a perspective or orthographic projection. */\n  setType(type) {\n    return this.set('type', type);\n  }\n  /** Floating-point distance to the near clipping plane. */\n  getZNear() {\n    return this.get('znear');\n  }\n  /** Floating-point distance to the near clipping plane. */\n  setZNear(znear) {\n    return this.set('znear', znear);\n  }\n  /**\n   * Floating-point distance to the far clipping plane. When defined, zfar must be greater than\n   * znear. If zfar is undefined, runtime must use infinite projection matrix.\n   */\n  getZFar() {\n    return this.get('zfar');\n  }\n  /**\n   * Floating-point distance to the far clipping plane. When defined, zfar must be greater than\n   * znear. If zfar is undefined, runtime must use infinite projection matrix.\n   */\n  setZFar(zfar) {\n    return this.set('zfar', zfar);\n  }\n  /**********************************************************************************************\n   * Perspective.\n   */\n  /**\n   * Floating-point aspect ratio of the field of view. When undefined, the aspect ratio of the\n   * canvas is used.\n   */\n  getAspectRatio() {\n    return this.get('aspectRatio');\n  }\n  /**\n   * Floating-point aspect ratio of the field of view. When undefined, the aspect ratio of the\n   * canvas is used.\n   */\n  setAspectRatio(aspectRatio) {\n    return this.set('aspectRatio', aspectRatio);\n  }\n  /** Floating-point vertical field of view in radians. */\n  getYFov() {\n    return this.get('yfov');\n  }\n  /** Floating-point vertical field of view in radians. */\n  setYFov(yfov) {\n    return this.set('yfov', yfov);\n  }\n  /**********************************************************************************************\n   * Orthographic.\n   */\n  /**\n   * Floating-point horizontal magnification of the view, and half the view's width\n   * in world units.\n   */\n  getXMag() {\n    return this.get('xmag');\n  }\n  /**\n   * Floating-point horizontal magnification of the view, and half the view's width\n   * in world units.\n   */\n  setXMag(xmag) {\n    return this.set('xmag', xmag);\n  }\n  /**\n   * Floating-point vertical magnification of the view, and half the view's height\n   * in world units.\n   */\n  getYMag() {\n    return this.get('ymag');\n  }\n  /**\n   * Floating-point vertical magnification of the view, and half the view's height\n   * in world units.\n   */\n  setYMag(ymag) {\n    return this.set('ymag', ymag);\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\nCamera.Type = {\n  /** A perspective camera representing a perspective projection matrix. */\n  PERSPECTIVE: 'perspective',\n  /** An orthographic camera representing an orthographic projection matrix. */\n  ORTHOGRAPHIC: 'orthographic'\n};\n\n/**\n * *Base class for all {@link Property} types that can be attached by an {@link Extension}.*\n *\n * After an {@link Extension} is attached to a glTF {@link Document}, the Extension may be used to\n * construct ExtensionProperty instances, to be referenced throughout the document as prescribed by\n * the Extension. For example, the `KHR_materials_clearcoat` Extension defines a `Clearcoat`\n * ExtensionProperty, which is referenced by {@link Material} Properties in the Document, and may\n * contain references to {@link Texture} properties of its own.\n *\n * For more information on available extensions and their usage, see [Extensions](/extensions).\n *\n * Reference:\n * - [glTF → Extensions](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#specifying-extensions)\n *\n * @category Properties\n */\nclass ExtensionProperty extends Property {\n  /** @hidden */\n  _validateParent(parent) {\n    if (!this.parentTypes.includes(parent.propertyType)) {\n      throw new Error(`Parent \"${parent.propertyType}\" invalid for child \"${this.propertyType}\".`);\n    }\n  }\n}\nExtensionProperty.EXTENSION_NAME = void 0;\n\n/**\n * *Settings associated with a particular use of a {@link Texture}.*\n *\n * Different materials may reuse the same texture but with different texture coordinates,\n * minFilter/magFilter, or wrapS/wrapT settings. The TextureInfo class contains settings\n * derived from both the \"TextureInfo\" and \"Sampler\" properties in the glTF specification,\n * consolidated here for simplicity.\n *\n * TextureInfo properties cannot be directly created. For any material texture slot, such as\n * baseColorTexture, there will be a corresponding method to obtain the TextureInfo for that slot.\n * For example, see {@link Material.getBaseColorTextureInfo}.\n *\n * References:\n * - [glTF → Texture Info](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#reference-textureinfo)\n *\n * @category Properties\n */\nclass TextureInfo extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.TEXTURE_INFO;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      texCoord: 0,\n      magFilter: null,\n      minFilter: null,\n      wrapS: TextureInfo.WrapMode.REPEAT,\n      wrapT: TextureInfo.WrapMode.REPEAT\n    });\n  }\n  /**********************************************************************************************\n   * Texture coordinates.\n   */\n  /** Returns the texture coordinate (UV set) index for the texture. */\n  getTexCoord() {\n    return this.get('texCoord');\n  }\n  /** Sets the texture coordinate (UV set) index for the texture. */\n  setTexCoord(texCoord) {\n    return this.set('texCoord', texCoord);\n  }\n  /**********************************************************************************************\n   * Min/mag filter.\n   */\n  /** Returns the magnification filter applied to the texture. */\n  getMagFilter() {\n    return this.get('magFilter');\n  }\n  /** Sets the magnification filter applied to the texture. */\n  setMagFilter(magFilter) {\n    return this.set('magFilter', magFilter);\n  }\n  /** Sets the minification filter applied to the texture. */\n  getMinFilter() {\n    return this.get('minFilter');\n  }\n  /** Returns the minification filter applied to the texture. */\n  setMinFilter(minFilter) {\n    return this.set('minFilter', minFilter);\n  }\n  /**********************************************************************************************\n   * UV wrapping.\n   */\n  /** Returns the S (U) wrapping mode for UVs used by the texture. */\n  getWrapS() {\n    return this.get('wrapS');\n  }\n  /** Sets the S (U) wrapping mode for UVs used by the texture. */\n  setWrapS(wrapS) {\n    return this.set('wrapS', wrapS);\n  }\n  /** Returns the T (V) wrapping mode for UVs used by the texture. */\n  getWrapT() {\n    return this.get('wrapT');\n  }\n  /** Sets the T (V) wrapping mode for UVs used by the texture. */\n  setWrapT(wrapT) {\n    return this.set('wrapT', wrapT);\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\n/** UV wrapping mode. Values correspond to WebGL enums. */\nTextureInfo.WrapMode = {\n  /** */\n  CLAMP_TO_EDGE: 33071,\n  /** */\n  MIRRORED_REPEAT: 33648,\n  /** */\n  REPEAT: 10497\n};\n/** Magnification filter. Values correspond to WebGL enums. */\nTextureInfo.MagFilter = {\n  /** */\n  NEAREST: 9728,\n  /** */\n  LINEAR: 9729\n};\n/** Minification filter. Values correspond to WebGL enums. */\nTextureInfo.MinFilter = {\n  /** */\n  NEAREST: 9728,\n  /** */\n  LINEAR: 9729,\n  /** */\n  NEAREST_MIPMAP_NEAREST: 9984,\n  /** */\n  LINEAR_MIPMAP_NEAREST: 9985,\n  /** */\n  NEAREST_MIPMAP_LINEAR: 9986,\n  /** */\n  LINEAR_MIPMAP_LINEAR: 9987\n};\n\nconst {\n  R,\n  G,\n  B,\n  A\n} = TextureChannel;\n/**\n * *Materials describe a surface's appearance and response to light.*\n *\n * Each {@link Primitive} within a {@link Mesh} may be assigned a single Material. The number of\n * GPU draw calls typically increases with both the numbers of Primitives and of Materials in an\n * asset; Materials should be reused wherever possible. Techniques like texture atlasing and vertex\n * colors allow objects to have varied appearances while technically sharing a single Material.\n *\n * Material properties are modified by both scalars (like `baseColorFactor`) and textures (like\n * `baseColorTexture`). When both are available, factors are considered linear multipliers against\n * textures of the same name. In the case of base color, vertex colors (`COLOR_0` attributes) are\n * also multiplied.\n *\n * Textures containing color data (`baseColorTexture`, `emissiveTexture`) are sRGB. All other\n * textures are linear. Like other resources, textures should be reused when possible.\n *\n * Usage:\n *\n * ```typescript\n * const material = doc.createMaterial('myMaterial')\n * \t.setBaseColorFactor([1, 0.5, 0.5, 1]) // RGBA\n * \t.setOcclusionTexture(aoTexture)\n * \t.setOcclusionStrength(0.5);\n *\n * mesh.listPrimitives()\n * \t.forEach((prim) => prim.setMaterial(material));\n * ```\n *\n * @category Properties\n */\nclass Material extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.MATERIAL;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      alphaMode: Material.AlphaMode.OPAQUE,\n      alphaCutoff: 0.5,\n      doubleSided: false,\n      baseColorFactor: [1, 1, 1, 1],\n      baseColorTexture: null,\n      baseColorTextureInfo: new TextureInfo(this.graph, 'baseColorTextureInfo'),\n      emissiveFactor: [0, 0, 0],\n      emissiveTexture: null,\n      emissiveTextureInfo: new TextureInfo(this.graph, 'emissiveTextureInfo'),\n      normalScale: 1,\n      normalTexture: null,\n      normalTextureInfo: new TextureInfo(this.graph, 'normalTextureInfo'),\n      occlusionStrength: 1,\n      occlusionTexture: null,\n      occlusionTextureInfo: new TextureInfo(this.graph, 'occlusionTextureInfo'),\n      roughnessFactor: 1,\n      metallicFactor: 1,\n      metallicRoughnessTexture: null,\n      metallicRoughnessTextureInfo: new TextureInfo(this.graph, 'metallicRoughnessTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Double-sided / culling.\n   */\n  /** Returns true when both sides of triangles should be rendered. May impact performance. */\n  getDoubleSided() {\n    return this.get('doubleSided');\n  }\n  /** Sets whether to render both sides of triangles. May impact performance. */\n  setDoubleSided(doubleSided) {\n    return this.set('doubleSided', doubleSided);\n  }\n  /**********************************************************************************************\n   * Alpha.\n   */\n  /** Returns material alpha, equivalent to baseColorFactor[3]. */\n  getAlpha() {\n    return this.get('baseColorFactor')[3];\n  }\n  /** Sets material alpha, equivalent to baseColorFactor[3]. */\n  setAlpha(alpha) {\n    const baseColorFactor = this.get('baseColorFactor').slice();\n    baseColorFactor[3] = alpha;\n    return this.set('baseColorFactor', baseColorFactor);\n  }\n  /**\n   * Returns the mode of the material's alpha channels, which are provided by `baseColorFactor`\n   * and `baseColorTexture`.\n   *\n   * - `OPAQUE`: Alpha value is ignored and the rendered output is fully opaque.\n   * - `BLEND`: Alpha value is used to determine the transparency each pixel on a surface, and\n   * \tthe fraction of surface vs. background color in the final result. Alpha blending creates\n   *\tsignificant edge cases in realtime renderers, and some care when structuring the model is\n   * \tnecessary for good results. In particular, transparent geometry should be kept in separate\n   * \tmeshes or primitives from opaque geometry. The `depthWrite` or `zWrite` settings in engines\n   * \tshould usually be disabled on transparent materials.\n   * - `MASK`: Alpha value is compared against `alphaCutoff` threshold for each pixel on a\n   * \tsurface, and the pixel is either fully visible or fully discarded based on that cutoff.\n   * \tThis technique is useful for things like leafs/foliage, grass, fabric meshes, and other\n   * \tsurfaces where no semitransparency is needed. With a good choice of `alphaCutoff`, surfaces\n   * \tthat don't require semitransparency can avoid the performance penalties and visual issues\n   * \tinvolved with `BLEND` transparency.\n   *\n   * Reference:\n   * - [glTF → material.alphaMode](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#materialalphamode)\n   */\n  getAlphaMode() {\n    return this.get('alphaMode');\n  }\n  /** Sets the mode of the material's alpha channels. See {@link Material.getAlphaMode getAlphaMode} for details. */\n  setAlphaMode(alphaMode) {\n    return this.set('alphaMode', alphaMode);\n  }\n  /** Returns the visibility threshold; applied only when `.alphaMode='MASK'`. */\n  getAlphaCutoff() {\n    return this.get('alphaCutoff');\n  }\n  /** Sets the visibility threshold; applied only when `.alphaMode='MASK'`. */\n  setAlphaCutoff(alphaCutoff) {\n    return this.set('alphaCutoff', alphaCutoff);\n  }\n  /**********************************************************************************************\n   * Base color.\n   */\n  /**\n   * Base color / albedo factor; Linear-sRGB components.\n   * See {@link Material.getBaseColorTexture getBaseColorTexture}.\n   */\n  getBaseColorFactor() {\n    return this.get('baseColorFactor');\n  }\n  /**\n   * Base color / albedo factor; Linear-sRGB components.\n   * See {@link Material.getBaseColorTexture getBaseColorTexture}.\n   */\n  setBaseColorFactor(baseColorFactor) {\n    return this.set('baseColorFactor', baseColorFactor);\n  }\n  /**\n   * Base color / albedo. The visible color of a non-metallic surface under constant ambient\n   * light would be a linear combination (multiplication) of its vertex colors, base color\n   * factor, and base color texture. Lighting, and reflections in metallic or smooth surfaces,\n   * also effect the final color. The alpha (`.a`) channel of base color factors and textures\n   * will have varying effects, based on the setting of {@link Material.getAlphaMode getAlphaMode}.\n   *\n   * Reference:\n   * - [glTF → material.pbrMetallicRoughness.baseColorFactor](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#pbrmetallicroughnessbasecolorfactor)\n   */\n  getBaseColorTexture() {\n    return this.getRef('baseColorTexture');\n  }\n  /**\n   * Settings affecting the material's use of its base color texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getBaseColorTextureInfo() {\n    return this.getRef('baseColorTexture') ? this.getRef('baseColorTextureInfo') : null;\n  }\n  /** Sets base color / albedo texture. See {@link Material.getBaseColorTexture getBaseColorTexture}. */\n  setBaseColorTexture(texture) {\n    return this.setRef('baseColorTexture', texture, {\n      channels: R | G | B | A,\n      isColor: true\n    });\n  }\n  /**********************************************************************************************\n   * Emissive.\n   */\n  /** Emissive color; Linear-sRGB components. See {@link Material.getEmissiveTexture getEmissiveTexture}. */\n  getEmissiveFactor() {\n    return this.get('emissiveFactor');\n  }\n  /** Emissive color; Linear-sRGB components. See {@link Material.getEmissiveTexture getEmissiveTexture}. */\n  setEmissiveFactor(emissiveFactor) {\n    return this.set('emissiveFactor', emissiveFactor);\n  }\n  /**\n   * Emissive texture. Emissive color is added to any base color of the material, after any\n   * lighting/shadowing are applied. An emissive color does not inherently \"glow\", or affect\n   * objects around it at all. To create that effect, most viewers must also enable a\n   * post-processing effect called \"bloom\".\n   *\n   * Reference:\n   * - [glTF → material.emissiveTexture](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#materialemissivetexture)\n   */\n  getEmissiveTexture() {\n    return this.getRef('emissiveTexture');\n  }\n  /**\n   * Settings affecting the material's use of its emissive texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getEmissiveTextureInfo() {\n    return this.getRef('emissiveTexture') ? this.getRef('emissiveTextureInfo') : null;\n  }\n  /** Sets emissive texture. See {@link Material.getEmissiveTexture getEmissiveTexture}. */\n  setEmissiveTexture(texture) {\n    return this.setRef('emissiveTexture', texture, {\n      channels: R | G | B,\n      isColor: true\n    });\n  }\n  /**********************************************************************************************\n   * Normal.\n   */\n  /** Normal (surface detail) factor; linear multiplier. Affects `.normalTexture`. */\n  getNormalScale() {\n    return this.get('normalScale');\n  }\n  /** Normal (surface detail) factor; linear multiplier. Affects `.normalTexture`. */\n  setNormalScale(scale) {\n    return this.set('normalScale', scale);\n  }\n  /**\n   * Normal (surface detail) texture.\n   *\n   * A tangent space normal map. The texture contains RGB components. Each texel represents the\n   * XYZ components of a normal vector in tangent space. Red [0 to 255] maps to X [-1 to 1].\n   * Green [0 to 255] maps to Y [-1 to 1]. Blue [128 to 255] maps to Z [1/255 to 1]. The normal\n   * vectors use OpenGL conventions where +X is right and +Y is up. +Z points toward the viewer.\n   *\n   * Reference:\n   * - [glTF → material.normalTexture](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#materialnormaltexture)\n   */\n  getNormalTexture() {\n    return this.getRef('normalTexture');\n  }\n  /**\n   * Settings affecting the material's use of its normal texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getNormalTextureInfo() {\n    return this.getRef('normalTexture') ? this.getRef('normalTextureInfo') : null;\n  }\n  /** Sets normal (surface detail) texture. See {@link Material.getNormalTexture getNormalTexture}. */\n  setNormalTexture(texture) {\n    return this.setRef('normalTexture', texture, {\n      channels: R | G | B\n    });\n  }\n  /**********************************************************************************************\n   * Occlusion.\n   */\n  /** (Ambient) Occlusion factor; linear multiplier. Affects `.occlusionTexture`. */\n  getOcclusionStrength() {\n    return this.get('occlusionStrength');\n  }\n  /** Sets (ambient) occlusion factor; linear multiplier. Affects `.occlusionTexture`. */\n  setOcclusionStrength(strength) {\n    return this.set('occlusionStrength', strength);\n  }\n  /**\n   * (Ambient) Occlusion texture, generally used for subtle 'baked' shadowing effects that are\n   * independent of an object's position, such as shading in inset areas and corners. Direct\n   * lighting is not affected by occlusion, so at least one indirect light source must be present\n   * in the scene for occlusion effects to be visible.\n   *\n   * The occlusion values are sampled from the R channel. Higher values indicate areas that\n   * should receive full indirect lighting and lower values indicate no indirect lighting.\n   *\n   * Reference:\n   * - [glTF → material.occlusionTexture](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#materialocclusiontexture)\n   */\n  getOcclusionTexture() {\n    return this.getRef('occlusionTexture');\n  }\n  /**\n   * Settings affecting the material's use of its occlusion texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getOcclusionTextureInfo() {\n    return this.getRef('occlusionTexture') ? this.getRef('occlusionTextureInfo') : null;\n  }\n  /** Sets (ambient) occlusion texture. See {@link Material.getOcclusionTexture getOcclusionTexture}. */\n  setOcclusionTexture(texture) {\n    return this.setRef('occlusionTexture', texture, {\n      channels: R\n    });\n  }\n  /**********************************************************************************************\n   * Metallic / roughness.\n   */\n  /**\n   * Roughness factor; linear multiplier. Affects roughness channel of\n   * `metallicRoughnessTexture`. See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  getRoughnessFactor() {\n    return this.get('roughnessFactor');\n  }\n  /**\n   * Sets roughness factor; linear multiplier. Affects roughness channel of\n   * `metallicRoughnessTexture`. See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  setRoughnessFactor(factor) {\n    return this.set('roughnessFactor', factor);\n  }\n  /**\n   * Metallic factor; linear multiplier. Affects roughness channel of\n   * `metallicRoughnessTexture`. See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  getMetallicFactor() {\n    return this.get('metallicFactor');\n  }\n  /**\n   * Sets metallic factor; linear multiplier. Affects roughness channel of\n   * `metallicRoughnessTexture`. See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  setMetallicFactor(factor) {\n    return this.set('metallicFactor', factor);\n  }\n  /**\n   * Metallic roughness texture. The metalness values are sampled from the B channel. The\n   * roughness values are sampled from the G channel. When a material is fully metallic,\n   * or nearly so, it may require image-based lighting (i.e. an environment map) or global\n   * illumination to appear well-lit.\n   *\n   * Reference:\n   * - [glTF → material.pbrMetallicRoughness.metallicRoughnessTexture](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#pbrmetallicroughnessmetallicroughnesstexture)\n   */\n  getMetallicRoughnessTexture() {\n    return this.getRef('metallicRoughnessTexture');\n  }\n  /**\n   * Settings affecting the material's use of its metallic/roughness texture. If no texture is\n   * attached, {@link TextureInfo} is `null`.\n   */\n  getMetallicRoughnessTextureInfo() {\n    return this.getRef('metallicRoughnessTexture') ? this.getRef('metallicRoughnessTextureInfo') : null;\n  }\n  /**\n   * Sets metallic/roughness texture.\n   * See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  setMetallicRoughnessTexture(texture) {\n    return this.setRef('metallicRoughnessTexture', texture, {\n      channels: G | B\n    });\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\nMaterial.AlphaMode = {\n  /**\n   * The alpha value is ignored and the rendered output is fully opaque\n   */\n  OPAQUE: 'OPAQUE',\n  /**\n   * The rendered output is either fully opaque or fully transparent depending on the alpha\n   * value and the specified alpha cutoff value\n   */\n  MASK: 'MASK',\n  /**\n   * The alpha value is used to composite the source and destination areas. The rendered\n   * output is combined with the background using the normal painting operation (i.e. the\n   * Porter and Duff over operator)\n   */\n  BLEND: 'BLEND'\n};\n\n/**\n * *Meshes define reusable geometry (triangles, lines, or points) and are instantiated by\n * {@link Node}s.*\n *\n * Each draw call required to render a mesh is represented as a {@link Primitive}. Meshes typically\n * have only a single {@link Primitive}, but may have more for various reasons. A mesh manages only\n * a list of primitives — materials, morph targets, and other properties are managed on a per-\n * primitive basis.\n *\n * When the same geometry and material should be rendered at multiple places in the scene, reuse\n * the same Mesh instance and attach it to multiple nodes for better efficiency. Where the geometry\n * is shared but the material is not, reusing {@link Accessor}s under different meshes and\n * primitives can similarly improve transmission efficiency, although some rendering efficiency is\n * lost as the number of materials in a scene increases.\n *\n * Usage:\n *\n * ```ts\n * const primitive = doc.createPrimitive()\n * \t.setAttribute('POSITION', positionAccessor)\n * \t.setAttribute('TEXCOORD_0', uvAccessor);\n * const mesh = doc.createMesh('myMesh')\n * \t.addPrimitive(primitive);\n * node.setMesh(mesh);\n * ```\n *\n * References:\n * - [glTF → Geometry](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#geometry)\n *\n * @category Properties\n */\nclass Mesh extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.MESH;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      weights: [],\n      primitives: new RefSet()\n    });\n  }\n  /** Adds a {@link Primitive} to the mesh's draw call list. */\n  addPrimitive(primitive) {\n    return this.addRef('primitives', primitive);\n  }\n  /** Removes a {@link Primitive} from the mesh's draw call list. */\n  removePrimitive(primitive) {\n    return this.removeRef('primitives', primitive);\n  }\n  /** Lists {@link Primitive} draw calls of the mesh. */\n  listPrimitives() {\n    return this.listRefs('primitives');\n  }\n  /**\n   * Initial weights of each {@link PrimitiveTarget} on this mesh. Each {@link Primitive} must\n   * have the same number of targets. Most engines only support 4-8 active morph targets at a\n   * time.\n   */\n  getWeights() {\n    return this.get('weights');\n  }\n  /**\n   * Initial weights of each {@link PrimitiveTarget} on this mesh. Each {@link Primitive} must\n   * have the same number of targets. Most engines only support 4-8 active morph targets at a\n   * time.\n   */\n  setWeights(weights) {\n    return this.set('weights', weights);\n  }\n}\n\n/**\n * *Nodes are the objects that comprise a {@link Scene}.*\n *\n * Each Node may have one or more children, and a transform (position, rotation, and scale) that\n * applies to all of its descendants. A Node may also reference (or \"instantiate\") other resources\n * at its location, including {@link Mesh}, Camera, Light, and Skin properties. A Node cannot be\n * part of more than one {@link Scene}.\n *\n * A Node's local transform is represented with array-like objects, intended to be compatible with\n * [gl-matrix](https://github.com/toji/gl-matrix), or with the `toArray`/`fromArray` methods of\n * libraries like three.js and babylon.js.\n *\n * Usage:\n *\n * ```ts\n * const node = doc.createNode('myNode')\n * \t.setMesh(mesh)\n * \t.setTranslation([0, 0, 0])\n * \t.addChild(otherNode);\n * ```\n *\n * References:\n * - [glTF → Nodes and Hierarchy](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#nodes-and-hierarchy)\n *\n * @category Properties\n */\nclass Node extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.NODE;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      translation: [0, 0, 0],\n      rotation: [0, 0, 0, 1],\n      scale: [1, 1, 1],\n      weights: [],\n      camera: null,\n      mesh: null,\n      skin: null,\n      children: new RefSet()\n    });\n  }\n  copy(other, resolve = COPY_IDENTITY) {\n    // Node cannot be copied, only cloned. Copying is shallow, but Nodes cannot have more than\n    // one parent. Rather than leaving one of the two Nodes without children, throw an error here.\n    if (resolve === COPY_IDENTITY) throw new Error('Node cannot be copied.');\n    return super.copy(other, resolve);\n  }\n  /**********************************************************************************************\n   * Local transform.\n   */\n  /** Returns the translation (position) of this Node in local space. */\n  getTranslation() {\n    return this.get('translation');\n  }\n  /** Returns the rotation (quaternion) of this Node in local space. */\n  getRotation() {\n    return this.get('rotation');\n  }\n  /** Returns the scale of this Node in local space. */\n  getScale() {\n    return this.get('scale');\n  }\n  /** Sets the translation (position) of this Node in local space. */\n  setTranslation(translation) {\n    return this.set('translation', translation);\n  }\n  /** Sets the rotation (quaternion) of this Node in local space. */\n  setRotation(rotation) {\n    return this.set('rotation', rotation);\n  }\n  /** Sets the scale of this Node in local space. */\n  setScale(scale) {\n    return this.set('scale', scale);\n  }\n  /** Returns the local matrix of this Node. */\n  getMatrix() {\n    return MathUtils.compose(this.get('translation'), this.get('rotation'), this.get('scale'), []);\n  }\n  /** Sets the local matrix of this Node. Matrix will be decomposed to TRS properties. */\n  setMatrix(matrix) {\n    const translation = this.get('translation').slice();\n    const rotation = this.get('rotation').slice();\n    const scale = this.get('scale').slice();\n    MathUtils.decompose(matrix, translation, rotation, scale);\n    return this.set('translation', translation).set('rotation', rotation).set('scale', scale);\n  }\n  /**********************************************************************************************\n   * World transform.\n   */\n  /** Returns the translation (position) of this Node in world space. */\n  getWorldTranslation() {\n    const t = [0, 0, 0];\n    MathUtils.decompose(this.getWorldMatrix(), t, [0, 0, 0, 1], [1, 1, 1]);\n    return t;\n  }\n  /** Returns the rotation (quaternion) of this Node in world space. */\n  getWorldRotation() {\n    const r = [0, 0, 0, 1];\n    MathUtils.decompose(this.getWorldMatrix(), [0, 0, 0], r, [1, 1, 1]);\n    return r;\n  }\n  /** Returns the scale of this Node in world space. */\n  getWorldScale() {\n    const s = [1, 1, 1];\n    MathUtils.decompose(this.getWorldMatrix(), [0, 0, 0], [0, 0, 0, 1], s);\n    return s;\n  }\n  /** Returns the world matrix of this Node. */\n  getWorldMatrix() {\n    // Build ancestor chain.\n    const ancestors = [];\n    for (let node = this; node != null; node = node.getParentNode()) {\n      ancestors.push(node);\n    }\n    // Compute world matrix.\n    let ancestor;\n    const worldMatrix = ancestors.pop().getMatrix();\n    while (ancestor = ancestors.pop()) {\n      multiply(worldMatrix, worldMatrix, ancestor.getMatrix());\n    }\n    return worldMatrix;\n  }\n  /**********************************************************************************************\n   * Scene hierarchy.\n   */\n  /**\n   * Adds the given Node as a child of this Node.\n   *\n   * Requirements:\n   *\n   * 1. Nodes MAY be root children of multiple {@link Scene Scenes}\n   * 2. Nodes MUST NOT be children of >1 Node\n   * 3. Nodes MUST NOT be children of both Nodes and {@link Scene Scenes}\n   *\n   * The `addChild` method enforces these restrictions automatically, and will\n   * remove the new child from previous parents where needed. This behavior\n   * may change in future major releases of the library.\n   */\n  addChild(child) {\n    // Remove existing parents.\n    const parentNode = child.getParentNode();\n    if (parentNode) parentNode.removeChild(child);\n    for (const parent of child.listParents()) {\n      if (parent.propertyType === PropertyType.SCENE) {\n        parent.removeChild(child);\n      }\n    }\n    return this.addRef('children', child);\n  }\n  /** Removes a Node from this Node's child Node list. */\n  removeChild(child) {\n    return this.removeRef('children', child);\n  }\n  /** Lists all child Nodes of this Node. */\n  listChildren() {\n    return this.listRefs('children');\n  }\n  /**\n   * Returns the Node's unique parent Node within the scene graph. If the\n   * Node has no parents, or is a direct child of the {@link Scene}\n   * (\"root node\"), this method returns null.\n   *\n   * Unrelated to {@link Property.listParents}, which lists all resource\n   * references from properties of any type ({@link Skin}, {@link Root}, ...).\n   */\n  getParentNode() {\n    for (const parent of this.listParents()) {\n      if (parent.propertyType === PropertyType.NODE) {\n        return parent;\n      }\n    }\n    return null;\n  }\n  /**********************************************************************************************\n   * Attachments.\n   */\n  /** Returns the {@link Mesh}, if any, instantiated at this Node. */\n  getMesh() {\n    return this.getRef('mesh');\n  }\n  /**\n   * Sets a {@link Mesh} to be instantiated at this Node. A single mesh may be instantiated by\n   * multiple Nodes; reuse of this sort is strongly encouraged.\n   */\n  setMesh(mesh) {\n    return this.setRef('mesh', mesh);\n  }\n  /** Returns the {@link Camera}, if any, instantiated at this Node. */\n  getCamera() {\n    return this.getRef('camera');\n  }\n  /** Sets a {@link Camera} to be instantiated at this Node. */\n  setCamera(camera) {\n    return this.setRef('camera', camera);\n  }\n  /** Returns the {@link Skin}, if any, instantiated at this Node. */\n  getSkin() {\n    return this.getRef('skin');\n  }\n  /** Sets a {@link Skin} to be instantiated at this Node. */\n  setSkin(skin) {\n    return this.setRef('skin', skin);\n  }\n  /**\n   * Initial weights of each {@link PrimitiveTarget} for the mesh instance at this Node.\n   * Most engines only support 4-8 active morph targets at a time.\n   */\n  getWeights() {\n    return this.get('weights');\n  }\n  /**\n   * Initial weights of each {@link PrimitiveTarget} for the mesh instance at this Node.\n   * Most engines only support 4-8 active morph targets at a time.\n   */\n  setWeights(weights) {\n    return this.set('weights', weights);\n  }\n  /**********************************************************************************************\n   * Helpers.\n   */\n  /** Visits this {@link Node} and its descendants, top-down. */\n  traverse(fn) {\n    fn(this);\n    for (const child of this.listChildren()) child.traverse(fn);\n    return this;\n  }\n}\n\n/**\n * *Primitives are individual GPU draw calls comprising a {@link Mesh}.*\n *\n * Meshes typically have only a single Primitive, although various cases may require more. Each\n * primitive may be assigned vertex attributes, morph target attributes, and a material. Any of\n * these properties should be reused among multiple primitives where feasible.\n *\n * Primitives cannot be moved independently of other primitives within the same mesh, except\n * through the use of morph targets and skinning. If independent movement or other runtime\n * behavior is necessary (like raycasting or collisions) prefer to assign each primitive to a\n * different mesh. The number of GPU draw calls is typically not affected by grouping or\n * ungrouping primitives to a mesh.\n *\n * Each primitive may optionally be deformed by one or more morph targets, stored in a\n * {@link PrimitiveTarget}.\n *\n * Usage:\n *\n * ```ts\n * const primitive = doc.createPrimitive()\n * \t.setAttribute('POSITION', positionAccessor)\n * \t.setAttribute('TEXCOORD_0', uvAccessor)\n * \t.setMaterial(material);\n * mesh.addPrimitive(primitive);\n * node.setMesh(mesh);\n * ```\n *\n * References:\n * - [glTF → Geometry](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#geometry)\n *\n * @category Properties\n */\nclass Primitive extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.PRIMITIVE;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      mode: Primitive.Mode.TRIANGLES,\n      material: null,\n      indices: null,\n      attributes: new RefMap(),\n      targets: new RefSet()\n    });\n  }\n  /**********************************************************************************************\n   * Primitive data.\n   */\n  /** Returns an {@link Accessor} with indices of vertices to be drawn. */\n  getIndices() {\n    return this.getRef('indices');\n  }\n  /**\n   * Sets an {@link Accessor} with indices of vertices to be drawn. In `TRIANGLES` draw mode,\n   * each set of three indices define a triangle. The front face has a counter-clockwise (CCW)\n   * winding order.\n   */\n  setIndices(indices) {\n    return this.setRef('indices', indices, {\n      usage: BufferViewUsage$1.ELEMENT_ARRAY_BUFFER\n    });\n  }\n  /** Returns a vertex attribute as an {@link Accessor}. */\n  getAttribute(semantic) {\n    return this.getRefMap('attributes', semantic);\n  }\n  /**\n   * Sets a vertex attribute to an {@link Accessor}. All attributes must have the same vertex\n   * count.\n   */\n  setAttribute(semantic, accessor) {\n    return this.setRefMap('attributes', semantic, accessor, {\n      usage: BufferViewUsage$1.ARRAY_BUFFER\n    });\n  }\n  /**\n   * Lists all vertex attribute {@link Accessor}s associated with the primitive, excluding any\n   * attributes used for morph targets. For example, `[positionAccessor, normalAccessor,\n   * uvAccessor]`. Order will be consistent with the order returned by {@link .listSemantics}().\n   */\n  listAttributes() {\n    return this.listRefMapValues('attributes');\n  }\n  /**\n   * Lists all vertex attribute semantics associated with the primitive, excluding any semantics\n   * used for morph targets. For example, `['POSITION', 'NORMAL', 'TEXCOORD_0']`. Order will be\n   * consistent with the order returned by {@link .listAttributes}().\n   */\n  listSemantics() {\n    return this.listRefMapKeys('attributes');\n  }\n  /** Returns the material used to render the primitive. */\n  getMaterial() {\n    return this.getRef('material');\n  }\n  /** Sets the material used to render the primitive. */\n  setMaterial(material) {\n    return this.setRef('material', material);\n  }\n  /**********************************************************************************************\n   * Mode.\n   */\n  /**\n   * Returns the GPU draw mode (`TRIANGLES`, `LINES`, `POINTS`...) as a WebGL enum value.\n   *\n   * Reference:\n   * - [glTF → `primitive.mode`](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#primitivemode)\n   */\n  getMode() {\n    return this.get('mode');\n  }\n  /**\n   * Sets the GPU draw mode (`TRIANGLES`, `LINES`, `POINTS`...) as a WebGL enum value.\n   *\n   * Reference:\n   * - [glTF → `primitive.mode`](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#primitivemode)\n   */\n  setMode(mode) {\n    return this.set('mode', mode);\n  }\n  /**********************************************************************************************\n   * Morph targets.\n   */\n  /** Lists all morph targets associated with the primitive. */\n  listTargets() {\n    return this.listRefs('targets');\n  }\n  /**\n   * Adds a morph target to the primitive. All primitives in the same mesh must have the same\n   * number of targets.\n   */\n  addTarget(target) {\n    return this.addRef('targets', target);\n  }\n  /**\n   * Removes a morph target from the primitive. All primitives in the same mesh must have the same\n   * number of targets.\n   */\n  removeTarget(target) {\n    return this.removeRef('targets', target);\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\n/** Type of primitives to render. All valid values correspond to WebGL enums. */\nPrimitive.Mode = {\n  /** Draw single points. */\n  POINTS: 0,\n  /** Draw lines. Each vertex connects to the one after it. */\n  LINES: 1,\n  /**\n   * Draw lines. Each set of two vertices is treated as a separate line segment.\n   * @deprecated See {@link https://github.com/KhronosGroup/glTF/issues/1883 KhronosGroup/glTF#1883}.\n   */\n  LINE_LOOP: 2,\n  /** Draw a connected group of line segments from the first vertex to the last,  */\n  LINE_STRIP: 3,\n  /** Draw triangles. Each set of three vertices creates a separate triangle. */\n  TRIANGLES: 4,\n  /** Draw a connected strip of triangles. */\n  TRIANGLE_STRIP: 5,\n  /**\n   * Draw a connected group of triangles. Each vertex connects to the previous and the first\n   * vertex in the fan.\n   * @deprecated See {@link https://github.com/KhronosGroup/glTF/issues/1883 KhronosGroup/glTF#1883}.\n   */\n  TRIANGLE_FAN: 6\n};\n\n/**\n * *Morph target or shape key used to deform one {@link Primitive} in a {@link Mesh}.*\n *\n * A PrimitiveTarget contains a `POSITION` attribute (and optionally `NORMAL` and `TANGENT`) that\n * can additively deform the base attributes on a {@link Mesh} {@link Primitive}. Vertex values\n * of `0, 0, 0` in the target will have no effect, whereas a value of `0, 1, 0` would offset that\n * vertex in the base geometry by y+=1. Morph targets can be fully or partially applied: their\n * default state is controlled by {@link Mesh.getWeights}, which can also be overridden for a\n * particular instantiation of a {@link Mesh}, using {@link Node.getWeights}.\n *\n * Reference:\n * - [glTF → Morph Targets](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#morph-targets)\n *\n * @category Properties\n */\nclass PrimitiveTarget extends Property {\n  init() {\n    this.propertyType = PropertyType.PRIMITIVE_TARGET;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      attributes: new RefMap()\n    });\n  }\n  /** Returns a morph target vertex attribute as an {@link Accessor}. */\n  getAttribute(semantic) {\n    return this.getRefMap('attributes', semantic);\n  }\n  /**\n   * Sets a morph target vertex attribute to an {@link Accessor}.\n   */\n  setAttribute(semantic, accessor) {\n    return this.setRefMap('attributes', semantic, accessor, {\n      usage: BufferViewUsage$1.ARRAY_BUFFER\n    });\n  }\n  /**\n   * Lists all morph target vertex attribute {@link Accessor}s associated. Order will be\n   * consistent with the order returned by {@link .listSemantics}().\n   */\n  listAttributes() {\n    return this.listRefMapValues('attributes');\n  }\n  /**\n   * Lists all morph target vertex attribute semantics associated. Order will be\n   * consistent with the order returned by {@link .listAttributes}().\n   */\n  listSemantics() {\n    return this.listRefMapKeys('attributes');\n  }\n}\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\n/**\n * *Scenes represent a set of visual objects to render.*\n *\n * Typically a glTF file contains only a single Scene, although more are allowed and useful in some\n * cases. No particular meaning is associated with additional Scenes, except as defined by the\n * application. Scenes reference {@link Node}s, and a single Node cannot be a member of more than\n * one Scene.\n *\n * References:\n * - [glTF → Scenes](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#scenes)\n * - [glTF → Coordinate System and Units](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#coordinate-system-and-units)\n *\n * @category Properties\n */\nclass Scene extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.SCENE;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      children: new RefSet()\n    });\n  }\n  copy(other, resolve = COPY_IDENTITY) {\n    // Scene cannot be copied, only cloned. Copying is shallow, but nodes cannot have more than\n    // one parent. Rather than leaving one of the two Scenes without children, throw an error here.\n    if (resolve === COPY_IDENTITY) throw new Error('Scene cannot be copied.');\n    return super.copy(other, resolve);\n  }\n  /**\n   * Adds a {@link Node} to the Scene.\n   *\n   * Requirements:\n   *\n   * 1. Nodes MAY be root children of multiple {@link Scene Scenes}\n   * 2. Nodes MUST NOT be children of >1 Node\n   * 3. Nodes MUST NOT be children of both Nodes and {@link Scene Scenes}\n   *\n   * The `addChild` method enforces these restrictions automatically, and will\n   * remove the new child from previous parents where needed. This behavior\n   * may change in future major releases of the library.\n   */\n  addChild(node) {\n    // Remove existing parent.\n    const parentNode = node.getParentNode();\n    if (parentNode) parentNode.removeChild(node);\n    return this.addRef('children', node);\n  }\n  /** Removes a {@link Node} from the Scene. */\n  removeChild(node) {\n    return this.removeRef('children', node);\n  }\n  /**\n   * Lists all direct child {@link Node Nodes} in the Scene. Indirect\n   * descendants (children of children) are not returned, but may be\n   * reached recursively or with {@link Scene.traverse} instead.\n   */\n  listChildren() {\n    return this.listRefs('children');\n  }\n  /** Visits each {@link Node} in the Scene, including descendants, top-down. */\n  traverse(fn) {\n    for (const node of this.listChildren()) node.traverse(fn);\n    return this;\n  }\n}\n\n/**\n * *Collection of {@link Node} joints and inverse bind matrices used with skinned {@link Mesh}\n * instances.*\n *\n * Reference\n * - [glTF → Skins](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#skins)\n *\n * @category Properties\n */\nclass Skin extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.SKIN;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      skeleton: null,\n      inverseBindMatrices: null,\n      joints: new RefSet()\n    });\n  }\n  /**\n   * {@link Node} used as a skeleton root. The node must be the closest common root of the joints\n   * hierarchy or a direct or indirect parent node of the closest common root.\n   */\n  getSkeleton() {\n    return this.getRef('skeleton');\n  }\n  /**\n   * {@link Node} used as a skeleton root. The node must be the closest common root of the joints\n   * hierarchy or a direct or indirect parent node of the closest common root.\n   */\n  setSkeleton(skeleton) {\n    return this.setRef('skeleton', skeleton);\n  }\n  /**\n   * {@link Accessor} containing the floating-point 4x4 inverse-bind matrices. The default is\n   * that each matrix is a 4x4 identity matrix, which implies that inverse-bind matrices were\n   * pre-applied.\n   */\n  getInverseBindMatrices() {\n    return this.getRef('inverseBindMatrices');\n  }\n  /**\n   * {@link Accessor} containing the floating-point 4x4 inverse-bind matrices. The default is\n   * that each matrix is a 4x4 identity matrix, which implies that inverse-bind matrices were\n   * pre-applied.\n   */\n  setInverseBindMatrices(inverseBindMatrices) {\n    return this.setRef('inverseBindMatrices', inverseBindMatrices, {\n      usage: BufferViewUsage$1.INVERSE_BIND_MATRICES\n    });\n  }\n  /** Adds a joint {@link Node} to this {@link Skin}. */\n  addJoint(joint) {\n    return this.addRef('joints', joint);\n  }\n  /** Removes a joint {@link Node} from this {@link Skin}. */\n  removeJoint(joint) {\n    return this.removeRef('joints', joint);\n  }\n  /** Lists joints ({@link Node}s used as joints or bones) in this {@link Skin}. */\n  listJoints() {\n    return this.listRefs('joints');\n  }\n}\n\n/**\n * *Texture, or images, referenced by {@link Material} properties.*\n *\n * Textures in glTF Transform are a combination of glTF's `texture` and `image` properties, and\n * should be unique within a document, such that no other texture contains the same\n * {@link Texture.getImage getImage()} data. Where duplicates may already exist, the `dedup({textures: true})`\n * transform can remove them. A {@link Document} with N texture properties will be exported to a\n * glTF file with N `image` properties, and the minimum number of `texture` properties necessary\n * for the materials that use it.\n *\n * For properties associated with a particular _use_ of a texture, see {@link TextureInfo}.\n *\n * Reference:\n * - [glTF → Textures](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#textures)\n * - [glTF → Images](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#images)\n *\n * @category Properties\n */\nclass Texture extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.TEXTURE;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      image: null,\n      mimeType: '',\n      uri: ''\n    });\n  }\n  /**********************************************************************************************\n   * MIME type / format.\n   */\n  /** Returns the MIME type for this texture ('image/jpeg' or 'image/png'). */\n  getMimeType() {\n    return this.get('mimeType') || ImageUtils.extensionToMimeType(FileUtils.extension(this.get('uri')));\n  }\n  /**\n   * Sets the MIME type for this texture ('image/jpeg' or 'image/png'). If the texture does not\n   * have a URI, a MIME type is required for correct export.\n   */\n  setMimeType(mimeType) {\n    return this.set('mimeType', mimeType);\n  }\n  /**********************************************************************************************\n   * URI / filename.\n   */\n  /** Returns the URI (e.g. 'path/to/file.png') for this texture. */\n  getURI() {\n    return this.get('uri');\n  }\n  /**\n   * Sets the URI (e.g. 'path/to/file.png') for this texture. If the texture does not have a MIME\n   * type, a URI is required for correct export.\n   */\n  setURI(uri) {\n    this.set('uri', uri);\n    const mimeType = ImageUtils.extensionToMimeType(FileUtils.extension(uri));\n    if (mimeType) this.set('mimeType', mimeType);\n    return this;\n  }\n  /**********************************************************************************************\n   * Image data.\n   */\n  /** Returns the raw image data for this texture. */\n  getImage() {\n    return this.get('image');\n  }\n  /** Sets the raw image data for this texture. */\n  setImage(image) {\n    return this.set('image', BufferUtils.assertView(image));\n  }\n  /** Returns the size, in pixels, of this texture. */\n  getSize() {\n    const image = this.get('image');\n    if (!image) return null;\n    return ImageUtils.getSize(image, this.getMimeType());\n  }\n}\n\n/**\n * *Root property of a glTF asset.*\n *\n * Any properties to be exported with a particular asset must be referenced (directly or\n * indirectly) by the root. Metadata about the asset's license, generator, and glTF specification\n * version are stored in the asset, accessible with {@link Root.getAsset}.\n *\n * Properties are added to the root with factory methods on its {@link Document}, and removed by\n * calling {@link Property.dispose}() on the resource. Any properties that have been created but\n * not disposed will be included when calling the various `root.list*()` methods.\n *\n * A document's root cannot be removed, and no other root may be created. Unlike other\n * {@link Property} types, the `.dispose()`, `.detach()` methods have no useful function on a\n * Root property.\n *\n * Usage:\n *\n * ```ts\n * const root = document.getRoot();\n * const scene = document.createScene('myScene');\n * const node = document.createNode('myNode');\n * scene.addChild(node);\n *\n * console.log(root.listScenes()); // → [scene x 1]\n * ```\n *\n * Reference: [glTF → Concepts](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#concepts)\n *\n * @category Properties\n */\nclass Root extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.ROOT;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      asset: {\n        generator: `glTF-Transform ${VERSION}`,\n        version: '2.0'\n      },\n      defaultScene: null,\n      accessors: new RefSet(),\n      animations: new RefSet(),\n      buffers: new RefSet(),\n      cameras: new RefSet(),\n      materials: new RefSet(),\n      meshes: new RefSet(),\n      nodes: new RefSet(),\n      scenes: new RefSet(),\n      skins: new RefSet(),\n      textures: new RefSet()\n    });\n  }\n  /** @internal */\n  constructor(graph) {\n    super(graph);\n    this._extensions = new Set();\n    graph.addEventListener('node:create', event => {\n      this._addChildOfRoot(event.target);\n    });\n  }\n  clone() {\n    throw new Error('Root cannot be cloned.');\n  }\n  copy(other, resolve = COPY_IDENTITY) {\n    // Root cannot be cloned in isolation: only with its Document. Extensions are managed by\n    // the Document during cloning. The Root, and only the Root, should keep existing\n    // references while copying to avoid overwriting during a merge.\n    if (resolve === COPY_IDENTITY) throw new Error('Root cannot be copied.');\n    // IMPORTANT: Root cannot call super.copy(), which removes existing references.\n    this.set('asset', _extends({}, other.get('asset')));\n    this.setName(other.getName());\n    this.setExtras(_extends({}, other.getExtras()));\n    this.setDefaultScene(other.getDefaultScene() ? resolve(other.getDefaultScene()) : null);\n    for (const extensionName of other.listRefMapKeys('extensions')) {\n      const otherExtension = other.getExtension(extensionName);\n      this.setExtension(extensionName, resolve(otherExtension));\n    }\n    return this;\n  }\n  _addChildOfRoot(child) {\n    if (child instanceof Scene) {\n      this.addRef('scenes', child);\n    } else if (child instanceof Node) {\n      this.addRef('nodes', child);\n    } else if (child instanceof Camera) {\n      this.addRef('cameras', child);\n    } else if (child instanceof Skin) {\n      this.addRef('skins', child);\n    } else if (child instanceof Mesh) {\n      this.addRef('meshes', child);\n    } else if (child instanceof Material) {\n      this.addRef('materials', child);\n    } else if (child instanceof Texture) {\n      this.addRef('textures', child);\n    } else if (child instanceof Animation) {\n      this.addRef('animations', child);\n    } else if (child instanceof Accessor) {\n      this.addRef('accessors', child);\n    } else if (child instanceof Buffer$1) {\n      this.addRef('buffers', child);\n    }\n    // No error for untracked property types.\n    return this;\n  }\n  /**\n   * Returns the `asset` object, which specifies the target glTF version of the asset. Additional\n   * metadata can be stored in optional properties such as `generator` or `copyright`.\n   *\n   * Reference: [glTF → Asset](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#asset)\n   */\n  getAsset() {\n    return this.get('asset');\n  }\n  /**********************************************************************************************\n   * Extensions.\n   */\n  /** Lists all {@link Extension Extensions} enabled for this root. */\n  listExtensionsUsed() {\n    return Array.from(this._extensions);\n  }\n  /** Lists all {@link Extension Extensions} enabled and required for this root. */\n  listExtensionsRequired() {\n    return this.listExtensionsUsed().filter(extension => extension.isRequired());\n  }\n  /** @internal */\n  _enableExtension(extension) {\n    this._extensions.add(extension);\n    return this;\n  }\n  /** @internal */\n  _disableExtension(extension) {\n    this._extensions.delete(extension);\n    return this;\n  }\n  /**********************************************************************************************\n   * Properties.\n   */\n  /** Lists all {@link Scene} properties associated with this root. */\n  listScenes() {\n    return this.listRefs('scenes');\n  }\n  /** Default {@link Scene} associated with this root. */\n  setDefaultScene(defaultScene) {\n    return this.setRef('defaultScene', defaultScene);\n  }\n  /** Default {@link Scene} associated with this root. */\n  getDefaultScene() {\n    return this.getRef('defaultScene');\n  }\n  /** Lists all {@link Node} properties associated with this root. */\n  listNodes() {\n    return this.listRefs('nodes');\n  }\n  /** Lists all {@link Camera} properties associated with this root. */\n  listCameras() {\n    return this.listRefs('cameras');\n  }\n  /** Lists all {@link Skin} properties associated with this root. */\n  listSkins() {\n    return this.listRefs('skins');\n  }\n  /** Lists all {@link Mesh} properties associated with this root. */\n  listMeshes() {\n    return this.listRefs('meshes');\n  }\n  /** Lists all {@link Material} properties associated with this root. */\n  listMaterials() {\n    return this.listRefs('materials');\n  }\n  /** Lists all {@link Texture} properties associated with this root. */\n  listTextures() {\n    return this.listRefs('textures');\n  }\n  /** Lists all {@link Animation} properties associated with this root. */\n  listAnimations() {\n    return this.listRefs('animations');\n  }\n  /** Lists all {@link Accessor} properties associated with this root. */\n  listAccessors() {\n    return this.listRefs('accessors');\n  }\n  /** Lists all {@link Buffer} properties associated with this root. */\n  listBuffers() {\n    return this.listRefs('buffers');\n  }\n}\n\n/**\n * *Wraps a glTF asset and its resources for easier modification.*\n *\n * Documents manage glTF assets and the relationships among dependencies. The document wrapper\n * allow tools to read and write changes without dealing with array indices or byte offsets, which\n * would otherwise require careful management over the course of a file modification. An internal\n * graph structure allows any property in the glTF file to maintain references to its dependencies,\n * and makes it easy to determine where a particular property dependency is being used. For\n * example, finding a list of materials that use a particular texture is as simple as calling\n * {@link Texture.listParents}().\n *\n * A new resource {@link Property} (e.g. a {@link Mesh} or {@link Material}) is created by calling\n * 'create' methods on the document. Resources are destroyed by calling {@link Property.dispose}().\n *\n * ```ts\n * import fs from 'fs/promises';\n * import { Document } from '@gltf-transform/core';\n * import { dedup } from '@gltf-transform/functions';\n *\n * const document = new Document();\n *\n * const texture1 = document.createTexture('myTexture')\n * \t.setImage(await fs.readFile('path/to/image.png'))\n * \t.setMimeType('image/png');\n * const texture2 = document.createTexture('myTexture2')\n * \t.setImage(await fs.readFile('path/to/image2.png'))\n * \t.setMimeType('image/png');\n *\n * // Document containing duplicate copies of the same texture.\n * document.getRoot().listTextures(); // → [texture x 2]\n *\n * await document.transform(\n * \tdedup({textures: true}),\n * \t// ...\n * );\n *\n * // Document with duplicate textures removed.\n * document.getRoot().listTextures(); // → [texture x 1]\n * ```\n *\n * Reference:\n * - [glTF → Basics](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#gltf-basics)\n * - [glTF → Concepts](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#concepts)\n *\n * @category Documents\n */\nclass Document {\n  /**\n   * Returns the Document associated with a given Graph, if any.\n   * @hidden\n   * @experimental\n   */\n  static fromGraph(graph) {\n    return Document._GRAPH_DOCUMENTS.get(graph) || null;\n  }\n  /** Creates a new Document, representing an empty glTF asset. */\n  constructor() {\n    this._graph = new Graph();\n    this._root = new Root(this._graph);\n    this._logger = Logger.DEFAULT_INSTANCE;\n    Document._GRAPH_DOCUMENTS.set(this._graph, this);\n  }\n  /** Returns the glTF {@link Root} property. */\n  getRoot() {\n    return this._root;\n  }\n  /**\n   * Returns the {@link Graph} representing connectivity of resources within this document.\n   * @hidden\n   */\n  getGraph() {\n    return this._graph;\n  }\n  /** Returns the {@link Logger} instance used for any operations performed on this document. */\n  getLogger() {\n    return this._logger;\n  }\n  /**\n   * Overrides the {@link Logger} instance used for any operations performed on this document.\n   *\n   * Usage:\n   *\n   * ```ts\n   * doc\n   * \t.setLogger(new Logger(Logger.Verbosity.SILENT))\n   * \t.transform(dedup(), weld());\n   * ```\n   */\n  setLogger(logger) {\n    this._logger = logger;\n    return this;\n  }\n  /**\n   * Clones this Document, copying all resources within it.\n   * @deprecated Use 'cloneDocument(document)' from '@gltf-transform/functions'.\n   * @hidden\n   * @internal\n   */\n  clone() {\n    throw new Error(`Use 'cloneDocument(source)' from '@gltf-transform/functions'.`);\n  }\n  /**\n   * Merges the content of another Document into this one, without affecting the original.\n   * @deprecated Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.\n   * @hidden\n   * @internal\n   */\n  merge(_other) {\n    throw new Error(`Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.`);\n  }\n  /**\n   * Applies a series of modifications to this document. Each transformation is asynchronous,\n   * takes the {@link Document} as input, and returns nothing. Transforms are applied in the\n   * order given, which may affect the final result.\n   *\n   * Usage:\n   *\n   * ```ts\n   * await doc.transform(\n   * \tdedup(),\n   * \tprune()\n   * );\n   * ```\n   *\n   * @param transforms List of synchronous transformation functions to apply.\n   */\n  async transform(...transforms) {\n    const stack = transforms.map(fn => fn.name);\n    for (const transform of transforms) {\n      await transform(this, {\n        stack\n      });\n    }\n    return this;\n  }\n  /**********************************************************************************************\n   * Extension factory method.\n   */\n  /**\n   * Creates a new {@link Extension}, for the extension type of the given constructor. If the\n   * extension is already enabled for this Document, the previous Extension reference is reused.\n   */\n  createExtension(ctor) {\n    const extensionName = ctor.EXTENSION_NAME;\n    const prevExtension = this.getRoot().listExtensionsUsed().find(ext => ext.extensionName === extensionName);\n    return prevExtension || new ctor(this);\n  }\n  /**********************************************************************************************\n   * Property factory methods.\n   */\n  /** Creates a new {@link Scene} attached to this document's {@link Root}. */\n  createScene(name = '') {\n    return new Scene(this._graph, name);\n  }\n  /** Creates a new {@link Node} attached to this document's {@link Root}. */\n  createNode(name = '') {\n    return new Node(this._graph, name);\n  }\n  /** Creates a new {@link Camera} attached to this document's {@link Root}. */\n  createCamera(name = '') {\n    return new Camera(this._graph, name);\n  }\n  /** Creates a new {@link Skin} attached to this document's {@link Root}. */\n  createSkin(name = '') {\n    return new Skin(this._graph, name);\n  }\n  /** Creates a new {@link Mesh} attached to this document's {@link Root}. */\n  createMesh(name = '') {\n    return new Mesh(this._graph, name);\n  }\n  /**\n   * Creates a new {@link Primitive}. Primitives must be attached to a {@link Mesh}\n   * for use and export; they are not otherwise associated with a {@link Root}.\n   */\n  createPrimitive() {\n    return new Primitive(this._graph);\n  }\n  /**\n   * Creates a new {@link PrimitiveTarget}, or morph target. Targets must be attached to a\n   * {@link Primitive} for use and export; they are not otherwise associated with a {@link Root}.\n   */\n  createPrimitiveTarget(name = '') {\n    return new PrimitiveTarget(this._graph, name);\n  }\n  /** Creates a new {@link Material} attached to this document's {@link Root}. */\n  createMaterial(name = '') {\n    return new Material(this._graph, name);\n  }\n  /** Creates a new {@link Texture} attached to this document's {@link Root}. */\n  createTexture(name = '') {\n    return new Texture(this._graph, name);\n  }\n  /** Creates a new {@link Animation} attached to this document's {@link Root}. */\n  createAnimation(name = '') {\n    return new Animation(this._graph, name);\n  }\n  /**\n   * Creates a new {@link AnimationChannel}. Channels must be attached to an {@link Animation}\n   * for use and export; they are not otherwise associated with a {@link Root}.\n   */\n  createAnimationChannel(name = '') {\n    return new AnimationChannel(this._graph, name);\n  }\n  /**\n   * Creates a new {@link AnimationSampler}. Samplers must be attached to an {@link Animation}\n   * for use and export; they are not otherwise associated with a {@link Root}.\n   */\n  createAnimationSampler(name = '') {\n    return new AnimationSampler(this._graph, name);\n  }\n  /** Creates a new {@link Accessor} attached to this document's {@link Root}. */\n  createAccessor(name = '', buffer = null) {\n    if (!buffer) {\n      buffer = this.getRoot().listBuffers()[0];\n    }\n    return new Accessor(this._graph, name).setBuffer(buffer);\n  }\n  /** Creates a new {@link Buffer} attached to this document's {@link Root}. */\n  createBuffer(name = '') {\n    return new Buffer$1(this._graph, name);\n  }\n}\n/**\n * Enables lookup of a Document from its Graph. For internal use, only.\n * @internal\n * @experimental\n */\nDocument._GRAPH_DOCUMENTS = new WeakMap();\n\n/**\n * *Base class for all Extensions.*\n *\n * Extensions enhance a glTF {@link Document} with additional features and schema, beyond the core\n * glTF specification. Common extensions may be imported from the `@gltf-transform/extensions`\n * package, or custom extensions may be created by extending this base class.\n *\n * An extension is added to a Document by calling {@link Document.createExtension} with the\n * extension constructor. The extension object may then be used to construct\n * {@link ExtensionProperty} instances, which are attached to properties throughout the Document\n * as prescribed by the extension itself.\n *\n * For more information on available extensions and their usage, see [Extensions](/extensions).\n *\n * Reference:\n * - [glTF → Extensions](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#specifying-extensions)\n * - [glTF Extension Registry](https://github.com/KhronosGroup/gltf/blob/main/extensions)\n *\n * @category Extensions\n */\nclass Extension {\n  /** @hidden */\n  constructor(document) {\n    /** Official name of the extension. */\n    this.extensionName = '';\n    /**\n     * Before reading, extension should be called for these {@link Property} types. *Most\n     * extensions don't need to implement this.*\n     * @hidden\n     */\n    this.prereadTypes = [];\n    /**\n     * Before writing, extension should be called for these {@link Property} types. *Most\n     * extensions don't need to implement this.*\n     * @hidden\n     */\n    this.prewriteTypes = [];\n    /** @hidden Dependency IDs needed to read this extension, to be installed before I/O. */\n    this.readDependencies = [];\n    /** @hidden Dependency IDs needed to write this extension, to be installed before I/O. */\n    this.writeDependencies = [];\n    /** @hidden */\n    this.document = void 0;\n    /** @hidden */\n    this.required = false;\n    /** @hidden */\n    this.properties = new Set();\n    /** @hidden */\n    this._listener = void 0;\n    this.document = document;\n    document.getRoot()._enableExtension(this);\n    this._listener = _event => {\n      const event = _event;\n      const target = event.target;\n      if (target instanceof ExtensionProperty && target.extensionName === this.extensionName) {\n        if (event.type === 'node:create') this._addExtensionProperty(target);\n        if (event.type === 'node:dispose') this._removeExtensionProperty(target);\n      }\n    };\n    const graph = document.getGraph();\n    graph.addEventListener('node:create', this._listener);\n    graph.addEventListener('node:dispose', this._listener);\n  }\n  /** Disables and removes the extension from the Document. */\n  dispose() {\n    this.document.getRoot()._disableExtension(this);\n    const graph = this.document.getGraph();\n    graph.removeEventListener('node:create', this._listener);\n    graph.removeEventListener('node:dispose', this._listener);\n    for (const property of this.properties) {\n      property.dispose();\n    }\n  }\n  /** @hidden Performs first-time setup for the extension. Must be idempotent. */\n  static register() {}\n  /**\n   * Indicates to the client whether it is OK to load the asset when this extension is not\n   * recognized. Optional extensions are generally preferred, if there is not a good reason\n   * to require a client to completely fail when an extension isn't known.\n   */\n  isRequired() {\n    return this.required;\n  }\n  /**\n   * Indicates to the client whether it is OK to load the asset when this extension is not\n   * recognized. Optional extensions are generally preferred, if there is not a good reason\n   * to require a client to completely fail when an extension isn't known.\n   */\n  setRequired(required) {\n    this.required = required;\n    return this;\n  }\n  /**\n   * Lists all {@link ExtensionProperty} instances associated with, or created by, this\n   * extension. Includes only instances that are attached to the Document's graph; detached\n   * instances will be excluded.\n   */\n  listProperties() {\n    return Array.from(this.properties);\n  }\n  /**********************************************************************************************\n   * ExtensionProperty management.\n   */\n  /** @internal */\n  _addExtensionProperty(property) {\n    this.properties.add(property);\n    return this;\n  }\n  /** @internal */\n  _removeExtensionProperty(property) {\n    this.properties.delete(property);\n    return this;\n  }\n  /**********************************************************************************************\n   * I/O implementation.\n   */\n  /** @hidden Installs dependencies required by the extension. */\n  install(_key, _dependency) {\n    return this;\n  }\n  /**\n   * Used by the {@link PlatformIO} utilities when reading a glTF asset. This method may\n   * optionally be implemented by an extension, and should then support any property type\n   * declared by the Extension's {@link Extension.prereadTypes} list. The Extension will\n   * be given a ReaderContext instance, and is expected to update either the context or its\n   * {@link JSONDocument} with resources known to the Extension. *Most extensions don't need to\n   * implement this.*\n   * @hidden\n   */\n  preread(_readerContext, _propertyType) {\n    return this;\n  }\n  /**\n   * Used by the {@link PlatformIO} utilities when writing a glTF asset. This method may\n   * optionally be implemented by an extension, and should then support any property type\n   * declared by the Extension's {@link Extension.prewriteTypes} list. The Extension will\n   * be given a WriterContext instance, and is expected to update either the context or its\n   * {@link JSONDocument} with resources known to the Extension. *Most extensions don't need to\n   * implement this.*\n   * @hidden\n   */\n  prewrite(_writerContext, _propertyType) {\n    return this;\n  }\n}\n/** Official name of the extension. */\nExtension.EXTENSION_NAME = void 0;\n\n/**\n * Model class providing glTF Transform objects representing each definition in the glTF file, used\n * by a {@link GLTFReader} and its {@link Extension} implementations. Indices of all properties will be\n * consistent with the glTF file.\n *\n * @hidden\n */\nclass ReaderContext {\n  constructor(jsonDoc) {\n    this.jsonDoc = void 0;\n    this.buffers = [];\n    this.bufferViews = [];\n    this.bufferViewBuffers = [];\n    this.accessors = [];\n    this.textures = [];\n    this.textureInfos = new Map();\n    this.materials = [];\n    this.meshes = [];\n    this.cameras = [];\n    this.nodes = [];\n    this.skins = [];\n    this.animations = [];\n    this.scenes = [];\n    this.jsonDoc = jsonDoc;\n  }\n  setTextureInfo(textureInfo, textureInfoDef) {\n    this.textureInfos.set(textureInfo, textureInfoDef);\n    if (textureInfoDef.texCoord !== undefined) {\n      textureInfo.setTexCoord(textureInfoDef.texCoord);\n    }\n    if (textureInfoDef.extras !== undefined) {\n      textureInfo.setExtras(textureInfoDef.extras);\n    }\n    const textureDef = this.jsonDoc.json.textures[textureInfoDef.index];\n    if (textureDef.sampler === undefined) return;\n    const samplerDef = this.jsonDoc.json.samplers[textureDef.sampler];\n    if (samplerDef.magFilter !== undefined) {\n      textureInfo.setMagFilter(samplerDef.magFilter);\n    }\n    if (samplerDef.minFilter !== undefined) {\n      textureInfo.setMinFilter(samplerDef.minFilter);\n    }\n    if (samplerDef.wrapS !== undefined) {\n      textureInfo.setWrapS(samplerDef.wrapS);\n    }\n    if (samplerDef.wrapT !== undefined) {\n      textureInfo.setWrapT(samplerDef.wrapT);\n    }\n  }\n}\n\nconst DEFAULT_OPTIONS = {\n  logger: Logger.DEFAULT_INSTANCE,\n  extensions: [],\n  dependencies: {}\n};\nconst SUPPORTED_PREREAD_TYPES = new Set([PropertyType.BUFFER, PropertyType.TEXTURE, PropertyType.MATERIAL, PropertyType.MESH, PropertyType.PRIMITIVE, PropertyType.NODE, PropertyType.SCENE]);\n/** @internal */\nclass GLTFReader {\n  static read(jsonDoc, _options = DEFAULT_OPTIONS) {\n    const options = _extends({}, DEFAULT_OPTIONS, _options);\n    const {\n      json\n    } = jsonDoc;\n    const document = new Document().setLogger(options.logger);\n    this.validate(jsonDoc, options);\n    /* Reader context. */\n    const context = new ReaderContext(jsonDoc);\n    /** Asset. */\n    const assetDef = json.asset;\n    const asset = document.getRoot().getAsset();\n    if (assetDef.copyright) asset.copyright = assetDef.copyright;\n    if (assetDef.extras) asset.extras = assetDef.extras;\n    if (json.extras !== undefined) {\n      document.getRoot().setExtras(_extends({}, json.extras));\n    }\n    /** Extensions (1/2). */\n    const extensionsUsed = json.extensionsUsed || [];\n    const extensionsRequired = json.extensionsRequired || [];\n    options.extensions.sort((a, b) => a.EXTENSION_NAME > b.EXTENSION_NAME ? 1 : -1);\n    for (const Extension of options.extensions) {\n      if (extensionsUsed.includes(Extension.EXTENSION_NAME)) {\n        // Create extension.\n        const extension = document.createExtension(Extension).setRequired(extensionsRequired.includes(Extension.EXTENSION_NAME));\n        // Warn on unsupported preread hooks.\n        const unsupportedHooks = extension.prereadTypes.filter(type => !SUPPORTED_PREREAD_TYPES.has(type));\n        if (unsupportedHooks.length) {\n          options.logger.warn(`Preread hooks for some types (${unsupportedHooks.join()}), requested by extension ` + `${extension.extensionName}, are unsupported. Please file an issue or a PR.`);\n        }\n        // Install dependencies.\n        for (const key of extension.readDependencies) {\n          extension.install(key, options.dependencies[key]);\n        }\n      }\n    }\n    /** Buffers. */\n    const bufferDefs = json.buffers || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.BUFFER)).forEach(extension => extension.preread(context, PropertyType.BUFFER));\n    context.buffers = bufferDefs.map(bufferDef => {\n      const buffer = document.createBuffer(bufferDef.name);\n      if (bufferDef.extras) buffer.setExtras(bufferDef.extras);\n      if (bufferDef.uri && bufferDef.uri.indexOf('__') !== 0) {\n        buffer.setURI(bufferDef.uri);\n      }\n      return buffer;\n    });\n    /** Buffer views. */\n    const bufferViewDefs = json.bufferViews || [];\n    context.bufferViewBuffers = bufferViewDefs.map((bufferViewDef, index) => {\n      if (!context.bufferViews[index]) {\n        const bufferDef = jsonDoc.json.buffers[bufferViewDef.buffer];\n        const resource = bufferDef.uri ? jsonDoc.resources[bufferDef.uri] : jsonDoc.resources[GLB_BUFFER];\n        const byteOffset = bufferViewDef.byteOffset || 0;\n        context.bufferViews[index] = BufferUtils.toView(resource, byteOffset, bufferViewDef.byteLength);\n      }\n      return context.buffers[bufferViewDef.buffer];\n    });\n    /** Accessors. */\n    // Accessor .count and .componentType properties are inferred dynamically.\n    const accessorDefs = json.accessors || [];\n    context.accessors = accessorDefs.map(accessorDef => {\n      const buffer = context.bufferViewBuffers[accessorDef.bufferView];\n      const accessor = document.createAccessor(accessorDef.name, buffer).setType(accessorDef.type);\n      if (accessorDef.extras) accessor.setExtras(accessorDef.extras);\n      if (accessorDef.normalized !== undefined) {\n        accessor.setNormalized(accessorDef.normalized);\n      }\n      // Sparse accessors, KHR_draco_mesh_compression, and EXT_meshopt_compression.\n      if (accessorDef.bufferView === undefined) return accessor;\n      // NOTICE: We mark sparse accessors at the end of the I/O reading process. Consider an\n      // accessor to be 'sparse' if it (A) includes sparse value overrides, or (B) does not\n      // define .bufferView _and_ no extension provides that data.\n      accessor.setArray(getAccessorArray(accessorDef, context));\n      return accessor;\n    });\n    /** Textures. */\n    // glTF Transform's \"Texture\" properties correspond 1:1 with glTF \"Image\" properties, and\n    // with image files. The glTF file may contain more one texture per image, where images\n    // are reused with different sampler properties.\n    const imageDefs = json.images || [];\n    const textureDefs = json.textures || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.TEXTURE)).forEach(extension => extension.preread(context, PropertyType.TEXTURE));\n    context.textures = imageDefs.map(imageDef => {\n      const texture = document.createTexture(imageDef.name);\n      // glTF Image corresponds 1:1 with glTF Transform Texture. See `writer.ts`.\n      if (imageDef.extras) texture.setExtras(imageDef.extras);\n      if (imageDef.bufferView !== undefined) {\n        const bufferViewDef = json.bufferViews[imageDef.bufferView];\n        const bufferDef = jsonDoc.json.buffers[bufferViewDef.buffer];\n        const bufferData = bufferDef.uri ? jsonDoc.resources[bufferDef.uri] : jsonDoc.resources[GLB_BUFFER];\n        const byteOffset = bufferViewDef.byteOffset || 0;\n        const byteLength = bufferViewDef.byteLength;\n        const imageData = bufferData.slice(byteOffset, byteOffset + byteLength);\n        texture.setImage(imageData);\n      } else if (imageDef.uri !== undefined) {\n        texture.setImage(jsonDoc.resources[imageDef.uri]);\n        if (imageDef.uri.indexOf('__') !== 0) {\n          texture.setURI(imageDef.uri);\n        }\n      }\n      if (imageDef.mimeType !== undefined) {\n        texture.setMimeType(imageDef.mimeType);\n      } else if (imageDef.uri) {\n        const extension = FileUtils.extension(imageDef.uri);\n        texture.setMimeType(ImageUtils.extensionToMimeType(extension));\n      }\n      return texture;\n    });\n    /** Materials. */\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.MATERIAL)).forEach(extension => extension.preread(context, PropertyType.MATERIAL));\n    const materialDefs = json.materials || [];\n    context.materials = materialDefs.map(materialDef => {\n      const material = document.createMaterial(materialDef.name);\n      if (materialDef.extras) material.setExtras(materialDef.extras);\n      // Program state & blending.\n      if (materialDef.alphaMode !== undefined) {\n        material.setAlphaMode(materialDef.alphaMode);\n      }\n      if (materialDef.alphaCutoff !== undefined) {\n        material.setAlphaCutoff(materialDef.alphaCutoff);\n      }\n      if (materialDef.doubleSided !== undefined) {\n        material.setDoubleSided(materialDef.doubleSided);\n      }\n      // Factors.\n      const pbrDef = materialDef.pbrMetallicRoughness || {};\n      if (pbrDef.baseColorFactor !== undefined) {\n        material.setBaseColorFactor(pbrDef.baseColorFactor);\n      }\n      if (materialDef.emissiveFactor !== undefined) {\n        material.setEmissiveFactor(materialDef.emissiveFactor);\n      }\n      if (pbrDef.metallicFactor !== undefined) {\n        material.setMetallicFactor(pbrDef.metallicFactor);\n      }\n      if (pbrDef.roughnessFactor !== undefined) {\n        material.setRoughnessFactor(pbrDef.roughnessFactor);\n      }\n      // Textures.\n      if (pbrDef.baseColorTexture !== undefined) {\n        const textureInfoDef = pbrDef.baseColorTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setBaseColorTexture(texture);\n        context.setTextureInfo(material.getBaseColorTextureInfo(), textureInfoDef);\n      }\n      if (materialDef.emissiveTexture !== undefined) {\n        const textureInfoDef = materialDef.emissiveTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setEmissiveTexture(texture);\n        context.setTextureInfo(material.getEmissiveTextureInfo(), textureInfoDef);\n      }\n      if (materialDef.normalTexture !== undefined) {\n        const textureInfoDef = materialDef.normalTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setNormalTexture(texture);\n        context.setTextureInfo(material.getNormalTextureInfo(), textureInfoDef);\n        if (materialDef.normalTexture.scale !== undefined) {\n          material.setNormalScale(materialDef.normalTexture.scale);\n        }\n      }\n      if (materialDef.occlusionTexture !== undefined) {\n        const textureInfoDef = materialDef.occlusionTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setOcclusionTexture(texture);\n        context.setTextureInfo(material.getOcclusionTextureInfo(), textureInfoDef);\n        if (materialDef.occlusionTexture.strength !== undefined) {\n          material.setOcclusionStrength(materialDef.occlusionTexture.strength);\n        }\n      }\n      if (pbrDef.metallicRoughnessTexture !== undefined) {\n        const textureInfoDef = pbrDef.metallicRoughnessTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setMetallicRoughnessTexture(texture);\n        context.setTextureInfo(material.getMetallicRoughnessTextureInfo(), textureInfoDef);\n      }\n      return material;\n    });\n    /** Meshes. */\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.MESH)).forEach(extension => extension.preread(context, PropertyType.MESH));\n    const meshDefs = json.meshes || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.PRIMITIVE)).forEach(extension => extension.preread(context, PropertyType.PRIMITIVE));\n    context.meshes = meshDefs.map(meshDef => {\n      const mesh = document.createMesh(meshDef.name);\n      if (meshDef.extras) mesh.setExtras(meshDef.extras);\n      if (meshDef.weights !== undefined) {\n        mesh.setWeights(meshDef.weights);\n      }\n      const primitiveDefs = meshDef.primitives || [];\n      primitiveDefs.forEach(primitiveDef => {\n        const primitive = document.createPrimitive();\n        if (primitiveDef.extras) primitive.setExtras(primitiveDef.extras);\n        if (primitiveDef.material !== undefined) {\n          primitive.setMaterial(context.materials[primitiveDef.material]);\n        }\n        if (primitiveDef.mode !== undefined) {\n          primitive.setMode(primitiveDef.mode);\n        }\n        for (const [semantic, index] of Object.entries(primitiveDef.attributes || {})) {\n          primitive.setAttribute(semantic, context.accessors[index]);\n        }\n        if (primitiveDef.indices !== undefined) {\n          primitive.setIndices(context.accessors[primitiveDef.indices]);\n        }\n        const targetNames = meshDef.extras && meshDef.extras.targetNames || [];\n        const targetDefs = primitiveDef.targets || [];\n        targetDefs.forEach((targetDef, targetIndex) => {\n          const targetName = targetNames[targetIndex] || targetIndex.toString();\n          const target = document.createPrimitiveTarget(targetName);\n          for (const [semantic, accessorIndex] of Object.entries(targetDef)) {\n            target.setAttribute(semantic, context.accessors[accessorIndex]);\n          }\n          primitive.addTarget(target);\n        });\n        mesh.addPrimitive(primitive);\n      });\n      return mesh;\n    });\n    /** Cameras. */\n    const cameraDefs = json.cameras || [];\n    context.cameras = cameraDefs.map(cameraDef => {\n      const camera = document.createCamera(cameraDef.name).setType(cameraDef.type);\n      if (cameraDef.extras) camera.setExtras(cameraDef.extras);\n      if (cameraDef.type === Camera.Type.PERSPECTIVE) {\n        const perspectiveDef = cameraDef.perspective;\n        camera.setYFov(perspectiveDef.yfov);\n        camera.setZNear(perspectiveDef.znear);\n        if (perspectiveDef.zfar !== undefined) {\n          camera.setZFar(perspectiveDef.zfar);\n        }\n        if (perspectiveDef.aspectRatio !== undefined) {\n          camera.setAspectRatio(perspectiveDef.aspectRatio);\n        }\n      } else {\n        const orthoDef = cameraDef.orthographic;\n        camera.setZNear(orthoDef.znear).setZFar(orthoDef.zfar).setXMag(orthoDef.xmag).setYMag(orthoDef.ymag);\n      }\n      return camera;\n    });\n    /** Nodes. */\n    const nodeDefs = json.nodes || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.NODE)).forEach(extension => extension.preread(context, PropertyType.NODE));\n    context.nodes = nodeDefs.map(nodeDef => {\n      const node = document.createNode(nodeDef.name);\n      if (nodeDef.extras) node.setExtras(nodeDef.extras);\n      if (nodeDef.translation !== undefined) {\n        node.setTranslation(nodeDef.translation);\n      }\n      if (nodeDef.rotation !== undefined) {\n        node.setRotation(nodeDef.rotation);\n      }\n      if (nodeDef.scale !== undefined) {\n        node.setScale(nodeDef.scale);\n      }\n      if (nodeDef.matrix !== undefined) {\n        const translation = [0, 0, 0];\n        const rotation = [0, 0, 0, 1];\n        const scale = [1, 1, 1];\n        MathUtils.decompose(nodeDef.matrix, translation, rotation, scale);\n        node.setTranslation(translation);\n        node.setRotation(rotation);\n        node.setScale(scale);\n      }\n      if (nodeDef.weights !== undefined) {\n        node.setWeights(nodeDef.weights);\n      }\n      // Attachments (mesh, camera, skin) defined later in reading process.\n      return node;\n    });\n    /** Skins. */\n    const skinDefs = json.skins || [];\n    context.skins = skinDefs.map(skinDef => {\n      const skin = document.createSkin(skinDef.name);\n      if (skinDef.extras) skin.setExtras(skinDef.extras);\n      if (skinDef.inverseBindMatrices !== undefined) {\n        skin.setInverseBindMatrices(context.accessors[skinDef.inverseBindMatrices]);\n      }\n      if (skinDef.skeleton !== undefined) {\n        skin.setSkeleton(context.nodes[skinDef.skeleton]);\n      }\n      for (const nodeIndex of skinDef.joints) {\n        skin.addJoint(context.nodes[nodeIndex]);\n      }\n      return skin;\n    });\n    /** Node attachments. */\n    nodeDefs.map((nodeDef, nodeIndex) => {\n      const node = context.nodes[nodeIndex];\n      const children = nodeDef.children || [];\n      children.forEach(childIndex => node.addChild(context.nodes[childIndex]));\n      if (nodeDef.mesh !== undefined) node.setMesh(context.meshes[nodeDef.mesh]);\n      if (nodeDef.camera !== undefined) node.setCamera(context.cameras[nodeDef.camera]);\n      if (nodeDef.skin !== undefined) node.setSkin(context.skins[nodeDef.skin]);\n    });\n    /** Animations. */\n    const animationDefs = json.animations || [];\n    context.animations = animationDefs.map(animationDef => {\n      const animation = document.createAnimation(animationDef.name);\n      if (animationDef.extras) animation.setExtras(animationDef.extras);\n      const samplerDefs = animationDef.samplers || [];\n      const samplers = samplerDefs.map(samplerDef => {\n        const sampler = document.createAnimationSampler().setInput(context.accessors[samplerDef.input]).setOutput(context.accessors[samplerDef.output]).setInterpolation(samplerDef.interpolation || AnimationSampler.Interpolation.LINEAR);\n        if (samplerDef.extras) sampler.setExtras(samplerDef.extras);\n        animation.addSampler(sampler);\n        return sampler;\n      });\n      const channels = animationDef.channels || [];\n      channels.forEach(channelDef => {\n        const channel = document.createAnimationChannel().setSampler(samplers[channelDef.sampler]).setTargetPath(channelDef.target.path);\n        if (channelDef.target.node !== undefined) channel.setTargetNode(context.nodes[channelDef.target.node]);\n        if (channelDef.extras) channel.setExtras(channelDef.extras);\n        animation.addChannel(channel);\n      });\n      return animation;\n    });\n    /** Scenes. */\n    const sceneDefs = json.scenes || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.SCENE)).forEach(extension => extension.preread(context, PropertyType.SCENE));\n    context.scenes = sceneDefs.map(sceneDef => {\n      const scene = document.createScene(sceneDef.name);\n      if (sceneDef.extras) scene.setExtras(sceneDef.extras);\n      const children = sceneDef.nodes || [];\n      children.map(nodeIndex => context.nodes[nodeIndex]).forEach(node => scene.addChild(node));\n      return scene;\n    });\n    if (json.scene !== undefined) {\n      document.getRoot().setDefaultScene(context.scenes[json.scene]);\n    }\n    /** Extensions (2/2). */\n    document.getRoot().listExtensionsUsed().forEach(extension => extension.read(context));\n    /** Post-processing. */\n    // Consider an accessor to be 'sparse' if it (A) includes sparse value overrides,\n    // or (B) does not define .bufferView _and_ no extension provides that data. Case\n    // (B) represents a zero-filled accessor.\n    accessorDefs.forEach((accessorDef, index) => {\n      const accessor = context.accessors[index];\n      const hasSparseValues = !!accessorDef.sparse;\n      const isZeroFilled = !accessorDef.bufferView && !accessor.getArray();\n      if (hasSparseValues || isZeroFilled) {\n        accessor.setSparse(true).setArray(getSparseArray(accessorDef, context));\n      }\n    });\n    return document;\n  }\n  static validate(jsonDoc, options) {\n    const json = jsonDoc.json;\n    if (json.asset.version !== '2.0') {\n      throw new Error(`Unsupported glTF version, \"${json.asset.version}\".`);\n    }\n    if (json.extensionsRequired) {\n      for (const extensionName of json.extensionsRequired) {\n        if (!options.extensions.find(extension => extension.EXTENSION_NAME === extensionName)) {\n          throw new Error(`Missing required extension, \"${extensionName}\".`);\n        }\n      }\n    }\n    if (json.extensionsUsed) {\n      for (const extensionName of json.extensionsUsed) {\n        if (!options.extensions.find(extension => extension.EXTENSION_NAME === extensionName)) {\n          options.logger.warn(`Missing optional extension, \"${extensionName}\".`);\n        }\n      }\n    }\n  }\n}\n/**\n * Returns the contents of an interleaved accessor, as a typed array.\n * @internal\n */\nfunction getInterleavedArray(accessorDef, context) {\n  const jsonDoc = context.jsonDoc;\n  const bufferView = context.bufferViews[accessorDef.bufferView];\n  const bufferViewDef = jsonDoc.json.bufferViews[accessorDef.bufferView];\n  const TypedArray = ComponentTypeToTypedArray[accessorDef.componentType];\n  const elementSize = Accessor.getElementSize(accessorDef.type);\n  const componentSize = TypedArray.BYTES_PER_ELEMENT;\n  const accessorByteOffset = accessorDef.byteOffset || 0;\n  const array = new TypedArray(accessorDef.count * elementSize);\n  const view = new DataView(bufferView.buffer, bufferView.byteOffset, bufferView.byteLength);\n  const byteStride = bufferViewDef.byteStride;\n  for (let i = 0; i < accessorDef.count; i++) {\n    for (let j = 0; j < elementSize; j++) {\n      const byteOffset = accessorByteOffset + i * byteStride + j * componentSize;\n      let value;\n      switch (accessorDef.componentType) {\n        case Accessor.ComponentType.FLOAT:\n          value = view.getFloat32(byteOffset, true);\n          break;\n        case Accessor.ComponentType.UNSIGNED_INT:\n          value = view.getUint32(byteOffset, true);\n          break;\n        case Accessor.ComponentType.UNSIGNED_SHORT:\n          value = view.getUint16(byteOffset, true);\n          break;\n        case Accessor.ComponentType.UNSIGNED_BYTE:\n          value = view.getUint8(byteOffset);\n          break;\n        case Accessor.ComponentType.SHORT:\n          value = view.getInt16(byteOffset, true);\n          break;\n        case Accessor.ComponentType.BYTE:\n          value = view.getInt8(byteOffset);\n          break;\n        default:\n          throw new Error(`Unexpected componentType \"${accessorDef.componentType}\".`);\n      }\n      array[i * elementSize + j] = value;\n    }\n  }\n  return array;\n}\n/**\n * Returns the contents of an accessor, as a typed array.\n * @internal\n */\nfunction getAccessorArray(accessorDef, context) {\n  const jsonDoc = context.jsonDoc;\n  const bufferView = context.bufferViews[accessorDef.bufferView];\n  const bufferViewDef = jsonDoc.json.bufferViews[accessorDef.bufferView];\n  const TypedArray = ComponentTypeToTypedArray[accessorDef.componentType];\n  const elementSize = Accessor.getElementSize(accessorDef.type);\n  const componentSize = TypedArray.BYTES_PER_ELEMENT;\n  const elementStride = elementSize * componentSize;\n  // Interleaved buffer view.\n  if (bufferViewDef.byteStride !== undefined && bufferViewDef.byteStride !== elementStride) {\n    return getInterleavedArray(accessorDef, context);\n  }\n  const byteOffset = bufferView.byteOffset + (accessorDef.byteOffset || 0);\n  const byteLength = accessorDef.count * elementSize * componentSize;\n  // Might optimize this to avoid deep copy later, but it's useful for now and not a known\n  // bottleneck. See https://github.com/donmccurdy/glTF-Transform/issues/256.\n  return new TypedArray(bufferView.buffer.slice(byteOffset, byteOffset + byteLength));\n}\n/**\n * Returns the contents of a sparse accessor, as a typed array.\n * @internal\n */\nfunction getSparseArray(accessorDef, context) {\n  const TypedArray = ComponentTypeToTypedArray[accessorDef.componentType];\n  const elementSize = Accessor.getElementSize(accessorDef.type);\n  let array;\n  if (accessorDef.bufferView !== undefined) {\n    array = getAccessorArray(accessorDef, context);\n  } else {\n    array = new TypedArray(accessorDef.count * elementSize);\n  }\n  const sparseDef = accessorDef.sparse;\n  if (!sparseDef) return array; // Zero-filled accessor.\n  const count = sparseDef.count;\n  const indicesDef = _extends({}, accessorDef, sparseDef.indices, {\n    count,\n    type: 'SCALAR'\n  });\n  const valuesDef = _extends({}, accessorDef, sparseDef.values, {\n    count\n  });\n  const indices = getAccessorArray(indicesDef, context);\n  const values = getAccessorArray(valuesDef, context);\n  // Override indices given in the sparse data.\n  for (let i = 0; i < indicesDef.count; i++) {\n    for (let j = 0; j < elementSize; j++) {\n      array[indices[i] * elementSize + j] = values[i * elementSize + j];\n    }\n  }\n  return array;\n}\n\nvar BufferViewTarget;\n(function (BufferViewTarget) {\n  BufferViewTarget[BufferViewTarget[\"ARRAY_BUFFER\"] = 34962] = \"ARRAY_BUFFER\";\n  BufferViewTarget[BufferViewTarget[\"ELEMENT_ARRAY_BUFFER\"] = 34963] = \"ELEMENT_ARRAY_BUFFER\";\n})(BufferViewTarget || (BufferViewTarget = {}));\n/**\n * Model class providing writing state to a {@link GLTFWriter} and its {@link Extension}\n * implementations.\n *\n * @hidden\n */\nclass WriterContext {\n  constructor(_doc, jsonDoc, options) {\n    this._doc = void 0;\n    this.jsonDoc = void 0;\n    this.options = void 0;\n    this.accessorIndexMap = new Map();\n    this.animationIndexMap = new Map();\n    this.bufferIndexMap = new Map();\n    this.cameraIndexMap = new Map();\n    this.skinIndexMap = new Map();\n    this.materialIndexMap = new Map();\n    this.meshIndexMap = new Map();\n    this.nodeIndexMap = new Map();\n    this.imageIndexMap = new Map();\n    this.textureDefIndexMap = new Map();\n    // textureDef JSON -> index\n    this.textureInfoDefMap = new Map();\n    this.samplerDefIndexMap = new Map();\n    // samplerDef JSON -> index\n    this.sceneIndexMap = new Map();\n    this.imageBufferViews = [];\n    this.otherBufferViews = new Map();\n    this.otherBufferViewsIndexMap = new Map();\n    this.extensionData = {};\n    this.bufferURIGenerator = void 0;\n    this.imageURIGenerator = void 0;\n    this.logger = void 0;\n    this._accessorUsageMap = new Map();\n    this.accessorUsageGroupedByParent = new Set(['ARRAY_BUFFER']);\n    this.accessorParents = new Map();\n    this._doc = _doc;\n    this.jsonDoc = jsonDoc;\n    this.options = options;\n    const root = _doc.getRoot();\n    const numBuffers = root.listBuffers().length;\n    const numImages = root.listTextures().length;\n    this.bufferURIGenerator = new UniqueURIGenerator(numBuffers > 1, () => options.basename || 'buffer');\n    this.imageURIGenerator = new UniqueURIGenerator(numImages > 1, texture => getSlot(_doc, texture) || options.basename || 'texture');\n    this.logger = _doc.getLogger();\n  }\n  /**\n   * Creates a TextureInfo definition, and any Texture or Sampler definitions it requires. If\n   * possible, Texture and Sampler definitions are shared.\n   */\n  createTextureInfoDef(texture, textureInfo) {\n    const samplerDef = {\n      magFilter: textureInfo.getMagFilter() || undefined,\n      minFilter: textureInfo.getMinFilter() || undefined,\n      wrapS: textureInfo.getWrapS(),\n      wrapT: textureInfo.getWrapT()\n    };\n    const samplerKey = JSON.stringify(samplerDef);\n    if (!this.samplerDefIndexMap.has(samplerKey)) {\n      this.samplerDefIndexMap.set(samplerKey, this.jsonDoc.json.samplers.length);\n      this.jsonDoc.json.samplers.push(samplerDef);\n    }\n    const textureDef = {\n      source: this.imageIndexMap.get(texture),\n      sampler: this.samplerDefIndexMap.get(samplerKey)\n    };\n    const textureKey = JSON.stringify(textureDef);\n    if (!this.textureDefIndexMap.has(textureKey)) {\n      this.textureDefIndexMap.set(textureKey, this.jsonDoc.json.textures.length);\n      this.jsonDoc.json.textures.push(textureDef);\n    }\n    const textureInfoDef = {\n      index: this.textureDefIndexMap.get(textureKey)\n    };\n    if (textureInfo.getTexCoord() !== 0) {\n      textureInfoDef.texCoord = textureInfo.getTexCoord();\n    }\n    if (Object.keys(textureInfo.getExtras()).length > 0) {\n      textureInfoDef.extras = textureInfo.getExtras();\n    }\n    this.textureInfoDefMap.set(textureInfo, textureInfoDef);\n    return textureInfoDef;\n  }\n  createPropertyDef(property) {\n    const def = {};\n    if (property.getName()) {\n      def.name = property.getName();\n    }\n    if (Object.keys(property.getExtras()).length > 0) {\n      def.extras = property.getExtras();\n    }\n    return def;\n  }\n  createAccessorDef(accessor) {\n    const accessorDef = this.createPropertyDef(accessor);\n    accessorDef.type = accessor.getType();\n    accessorDef.componentType = accessor.getComponentType();\n    accessorDef.count = accessor.getCount();\n    const needsBounds = this._doc.getGraph().listParentEdges(accessor).some(edge => edge.getName() === 'attributes' && edge.getAttributes().key === 'POSITION' || edge.getName() === 'input');\n    if (needsBounds) {\n      accessorDef.max = accessor.getMax([]).map(Math.fround);\n      accessorDef.min = accessor.getMin([]).map(Math.fround);\n    }\n    if (accessor.getNormalized()) {\n      accessorDef.normalized = accessor.getNormalized();\n    }\n    return accessorDef;\n  }\n  createImageData(imageDef, data, texture) {\n    if (this.options.format === Format.GLB) {\n      this.imageBufferViews.push(data);\n      imageDef.bufferView = this.jsonDoc.json.bufferViews.length;\n      this.jsonDoc.json.bufferViews.push({\n        buffer: 0,\n        byteOffset: -1,\n        // determined while iterating buffers, in Writer.ts.\n        byteLength: data.byteLength\n      });\n    } else {\n      const extension = ImageUtils.mimeTypeToExtension(texture.getMimeType());\n      imageDef.uri = this.imageURIGenerator.createURI(texture, extension);\n      this.assignResourceURI(imageDef.uri, data, false);\n    }\n  }\n  assignResourceURI(uri, data, throwOnConflict) {\n    const resources = this.jsonDoc.resources;\n    // https://github.com/KhronosGroup/glTF/issues/2446\n    if (!(uri in resources)) {\n      resources[uri] = data;\n      return;\n    }\n    if (data === resources[uri]) {\n      this.logger.warn(`Duplicate resource URI, \"${uri}\".`);\n      return;\n    }\n    const conflictMessage = `Resource URI \"${uri}\" already assigned to different data.`;\n    if (!throwOnConflict) {\n      this.logger.warn(conflictMessage);\n      return;\n    }\n    throw new Error(conflictMessage);\n  }\n  /**\n   * Returns implicit usage type of the given accessor, related to grouping accessors into\n   * buffer views. Usage is a superset of buffer view target, including ARRAY_BUFFER and\n   * ELEMENT_ARRAY_BUFFER, but also usages that do not match GPU buffer view targets such as\n   * IBMs. Additional usages are defined by extensions, like `EXT_mesh_gpu_instancing`.\n   */\n  getAccessorUsage(accessor) {\n    const cachedUsage = this._accessorUsageMap.get(accessor);\n    if (cachedUsage) return cachedUsage;\n    if (accessor.getSparse()) return BufferViewUsage$1.SPARSE;\n    for (const edge of this._doc.getGraph().listParentEdges(accessor)) {\n      const {\n        usage\n      } = edge.getAttributes();\n      if (usage) return usage;\n      if (edge.getParent().propertyType !== PropertyType.ROOT) {\n        this.logger.warn(`Missing attribute \".usage\" on edge, \"${edge.getName()}\".`);\n      }\n    }\n    // Group accessors with no specified usage into a miscellaneous buffer view.\n    return BufferViewUsage$1.OTHER;\n  }\n  /**\n   * Sets usage for the given accessor. Some accessor types must be grouped into\n   * buffer views with like accessors. This includes the specified buffer view \"targets\", but\n   * also implicit usage like IBMs or instanced mesh attributes. If unspecified, an accessor\n   * will be grouped with other accessors of unspecified usage.\n   */\n  addAccessorToUsageGroup(accessor, usage) {\n    const prevUsage = this._accessorUsageMap.get(accessor);\n    if (prevUsage && prevUsage !== usage) {\n      throw new Error(`Accessor with usage \"${prevUsage}\" cannot be reused as \"${usage}\".`);\n    }\n    this._accessorUsageMap.set(accessor, usage);\n    return this;\n  }\n}\n/** Explicit buffer view targets defined by glTF specification. */\nWriterContext.BufferViewTarget = BufferViewTarget;\n/**\n * Implicit buffer view usage, not required by glTF specification, but nonetheless useful for\n * proper grouping of accessors into buffer views. Additional usages are defined by extensions,\n * like `EXT_mesh_gpu_instancing`.\n */\nWriterContext.BufferViewUsage = BufferViewUsage$1;\n/** Maps usage type to buffer view target. Usages not mapped have undefined targets. */\nWriterContext.USAGE_TO_TARGET = {\n  [BufferViewUsage$1.ARRAY_BUFFER]: BufferViewTarget.ARRAY_BUFFER,\n  [BufferViewUsage$1.ELEMENT_ARRAY_BUFFER]: BufferViewTarget.ELEMENT_ARRAY_BUFFER\n};\nclass UniqueURIGenerator {\n  constructor(multiple, basename) {\n    this.multiple = void 0;\n    this.basename = void 0;\n    this.counter = {};\n    this.multiple = multiple;\n    this.basename = basename;\n  }\n  createURI(object, extension) {\n    if (object.getURI()) {\n      return object.getURI();\n    } else if (!this.multiple) {\n      return `${this.basename(object)}.${extension}`;\n    } else {\n      const basename = this.basename(object);\n      this.counter[basename] = this.counter[basename] || 1;\n      return `${basename}_${this.counter[basename]++}.${extension}`;\n    }\n  }\n}\n/** Returns the first slot (by name) to which the texture is assigned. */\nfunction getSlot(document, texture) {\n  const edge = document.getGraph().listParentEdges(texture).find(edge => edge.getParent() !== document.getRoot());\n  return edge ? edge.getName().replace(/texture$/i, '') : '';\n}\n\nconst {\n  BufferViewUsage\n} = WriterContext;\nconst {\n  UNSIGNED_INT,\n  UNSIGNED_SHORT,\n  UNSIGNED_BYTE\n} = Accessor.ComponentType;\nconst SUPPORTED_PREWRITE_TYPES = new Set([PropertyType.ACCESSOR, PropertyType.BUFFER, PropertyType.MATERIAL, PropertyType.MESH]);\n/**\n * @internal\n * @hidden\n */\nclass GLTFWriter {\n  static write(doc, options) {\n    const graph = doc.getGraph();\n    const root = doc.getRoot();\n    const json = {\n      asset: _extends({\n        generator: `glTF-Transform ${VERSION}`\n      }, root.getAsset()),\n      extras: _extends({}, root.getExtras())\n    };\n    const jsonDoc = {\n      json,\n      resources: {}\n    };\n    const context = new WriterContext(doc, jsonDoc, options);\n    const logger = options.logger || Logger.DEFAULT_INSTANCE;\n    /* Extensions (1/2). */\n    // Extensions present on the Document are not written unless they are also registered with\n    // the I/O class. This ensures that setup in `extension.register()` is completed, and\n    // allows a Document to be written with specific extensions disabled.\n    const extensionsRegistered = new Set(options.extensions.map(ext => ext.EXTENSION_NAME));\n    const extensionsUsed = doc.getRoot().listExtensionsUsed().filter(ext => extensionsRegistered.has(ext.extensionName)).sort((a, b) => a.extensionName > b.extensionName ? 1 : -1);\n    const extensionsRequired = doc.getRoot().listExtensionsRequired().filter(ext => extensionsRegistered.has(ext.extensionName)).sort((a, b) => a.extensionName > b.extensionName ? 1 : -1);\n    if (extensionsUsed.length < doc.getRoot().listExtensionsUsed().length) {\n      logger.warn('Some extensions were not registered for I/O, and will not be written.');\n    }\n    for (const extension of extensionsUsed) {\n      // Warn on unsupported prewrite hooks.\n      const unsupportedHooks = extension.prewriteTypes.filter(type => !SUPPORTED_PREWRITE_TYPES.has(type));\n      if (unsupportedHooks.length) {\n        logger.warn(`Prewrite hooks for some types (${unsupportedHooks.join()}), requested by extension ` + `${extension.extensionName}, are unsupported. Please file an issue or a PR.`);\n      }\n      // Install dependencies.\n      for (const key of extension.writeDependencies) {\n        extension.install(key, options.dependencies[key]);\n      }\n    }\n    /**\n     * Pack a group of accessors into a sequential buffer view. Appends accessor and buffer view\n     * definitions to the root JSON lists.\n     *\n     * @param accessors Accessors to be included.\n     * @param bufferIndex Buffer to write to.\n     * @param bufferByteOffset Current offset into the buffer, accounting for other buffer views.\n     * @param bufferViewTarget (Optional) target use of the buffer view.\n     */\n    function concatAccessors(accessors, bufferIndex, bufferByteOffset, bufferViewTarget) {\n      const buffers = [];\n      let byteLength = 0;\n      // Create accessor definitions, determining size of final buffer view.\n      for (const accessor of accessors) {\n        const accessorDef = context.createAccessorDef(accessor);\n        accessorDef.bufferView = json.bufferViews.length;\n        const accessorArray = accessor.getArray();\n        const data = BufferUtils.pad(BufferUtils.toView(accessorArray));\n        accessorDef.byteOffset = byteLength;\n        byteLength += data.byteLength;\n        buffers.push(data);\n        context.accessorIndexMap.set(accessor, json.accessors.length);\n        json.accessors.push(accessorDef);\n      }\n      // Create buffer view definition.\n      const bufferViewData = BufferUtils.concat(buffers);\n      const bufferViewDef = {\n        buffer: bufferIndex,\n        byteOffset: bufferByteOffset,\n        byteLength: bufferViewData.byteLength\n      };\n      if (bufferViewTarget) bufferViewDef.target = bufferViewTarget;\n      json.bufferViews.push(bufferViewDef);\n      return {\n        buffers,\n        byteLength\n      };\n    }\n    /**\n     * Pack a group of accessors into an interleaved buffer view. Appends accessor and buffer\n     * view definitions to the root JSON lists. Buffer view target is implicitly attribute data.\n     *\n     * References:\n     * - [Apple • Best Practices for Working with Vertex Data](https://developer.apple.com/library/archive/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html)\n     * - [Khronos • Vertex Specification Best Practices](https://www.khronos.org/opengl/wiki/Vertex_Specification_Best_Practices)\n     *\n     * @param accessors Accessors to be included.\n     * @param bufferIndex Buffer to write to.\n     * @param bufferByteOffset Offset into the buffer, accounting for other buffer views.\n     */\n    function interleaveAccessors(accessors, bufferIndex, bufferByteOffset) {\n      const vertexCount = accessors[0].getCount();\n      let byteStride = 0;\n      // Create accessor definitions, determining size and stride of final buffer view.\n      for (const accessor of accessors) {\n        const accessorDef = context.createAccessorDef(accessor);\n        accessorDef.bufferView = json.bufferViews.length;\n        accessorDef.byteOffset = byteStride;\n        const elementSize = accessor.getElementSize();\n        const componentSize = accessor.getComponentSize();\n        byteStride += BufferUtils.padNumber(elementSize * componentSize);\n        context.accessorIndexMap.set(accessor, json.accessors.length);\n        json.accessors.push(accessorDef);\n      }\n      // Allocate interleaved buffer view.\n      const byteLength = vertexCount * byteStride;\n      const buffer = new ArrayBuffer(byteLength);\n      const view = new DataView(buffer);\n      // Write interleaved accessor data to the buffer view.\n      for (let i = 0; i < vertexCount; i++) {\n        let vertexByteOffset = 0;\n        for (const accessor of accessors) {\n          const elementSize = accessor.getElementSize();\n          const componentSize = accessor.getComponentSize();\n          const componentType = accessor.getComponentType();\n          const array = accessor.getArray();\n          for (let j = 0; j < elementSize; j++) {\n            const viewByteOffset = i * byteStride + vertexByteOffset + j * componentSize;\n            const value = array[i * elementSize + j];\n            switch (componentType) {\n              case Accessor.ComponentType.FLOAT:\n                view.setFloat32(viewByteOffset, value, true);\n                break;\n              case Accessor.ComponentType.BYTE:\n                view.setInt8(viewByteOffset, value);\n                break;\n              case Accessor.ComponentType.SHORT:\n                view.setInt16(viewByteOffset, value, true);\n                break;\n              case Accessor.ComponentType.UNSIGNED_BYTE:\n                view.setUint8(viewByteOffset, value);\n                break;\n              case Accessor.ComponentType.UNSIGNED_SHORT:\n                view.setUint16(viewByteOffset, value, true);\n                break;\n              case Accessor.ComponentType.UNSIGNED_INT:\n                view.setUint32(viewByteOffset, value, true);\n                break;\n              default:\n                throw new Error('Unexpected component type: ' + componentType);\n            }\n          }\n          vertexByteOffset += BufferUtils.padNumber(elementSize * componentSize);\n        }\n      }\n      // Create buffer view definition.\n      const bufferViewDef = {\n        buffer: bufferIndex,\n        byteOffset: bufferByteOffset,\n        byteLength: byteLength,\n        byteStride: byteStride,\n        target: WriterContext.BufferViewTarget.ARRAY_BUFFER\n      };\n      json.bufferViews.push(bufferViewDef);\n      return {\n        byteLength,\n        buffers: [new Uint8Array(buffer)]\n      };\n    }\n    /**\n     * Pack a group of sparse accessors. Appends accessor and buffer view\n     * definitions to the root JSON lists.\n     *\n     * @param accessors Accessors to be included.\n     * @param bufferIndex Buffer to write to.\n     * @param bufferByteOffset Current offset into the buffer, accounting for other buffer views.\n     */\n    function concatSparseAccessors(accessors, bufferIndex, bufferByteOffset) {\n      const buffers = [];\n      let byteLength = 0;\n      const sparseData = new Map();\n      let maxIndex = -Infinity;\n      let needSparseWarning = false;\n      // (1) Write accessor definitions, gathering indices and values.\n      for (const accessor of accessors) {\n        const accessorDef = context.createAccessorDef(accessor);\n        json.accessors.push(accessorDef);\n        context.accessorIndexMap.set(accessor, json.accessors.length - 1);\n        const indices = [];\n        const values = [];\n        const el = [];\n        const base = new Array(accessor.getElementSize()).fill(0);\n        for (let i = 0, il = accessor.getCount(); i < il; i++) {\n          accessor.getElement(i, el);\n          if (MathUtils.eq(el, base, 0)) continue;\n          maxIndex = Math.max(i, maxIndex);\n          indices.push(i);\n          for (let j = 0; j < el.length; j++) values.push(el[j]);\n        }\n        const count = indices.length;\n        const data = {\n          accessorDef,\n          count\n        };\n        sparseData.set(accessor, data);\n        if (count === 0) continue;\n        if (count > accessor.getCount() / 2) {\n          needSparseWarning = true;\n        }\n        const ValueArray = ComponentTypeToTypedArray[accessor.getComponentType()];\n        data.indices = indices;\n        data.values = new ValueArray(values);\n      }\n      // (2) Early exit if all sparse accessors are just zero-filled arrays.\n      if (!Number.isFinite(maxIndex)) {\n        return {\n          buffers,\n          byteLength\n        };\n      }\n      if (needSparseWarning) {\n        logger.warn(`Some sparse accessors have >50% non-zero elements, which may increase file size.`);\n      }\n      // (3) Write index buffer view.\n      const IndexArray = maxIndex < 255 ? Uint8Array : maxIndex < 65535 ? Uint16Array : Uint32Array;\n      const IndexComponentType = maxIndex < 255 ? UNSIGNED_BYTE : maxIndex < 65535 ? UNSIGNED_SHORT : UNSIGNED_INT;\n      const indicesBufferViewDef = {\n        buffer: bufferIndex,\n        byteOffset: bufferByteOffset + byteLength,\n        byteLength: 0\n      };\n      for (const accessor of accessors) {\n        const data = sparseData.get(accessor);\n        if (data.count === 0) continue;\n        data.indicesByteOffset = indicesBufferViewDef.byteLength;\n        const buffer = BufferUtils.pad(BufferUtils.toView(new IndexArray(data.indices)));\n        buffers.push(buffer);\n        byteLength += buffer.byteLength;\n        indicesBufferViewDef.byteLength += buffer.byteLength;\n      }\n      json.bufferViews.push(indicesBufferViewDef);\n      const indicesBufferViewIndex = json.bufferViews.length - 1;\n      // (4) Write value buffer view.\n      const valuesBufferViewDef = {\n        buffer: bufferIndex,\n        byteOffset: bufferByteOffset + byteLength,\n        byteLength: 0\n      };\n      for (const accessor of accessors) {\n        const data = sparseData.get(accessor);\n        if (data.count === 0) continue;\n        data.valuesByteOffset = valuesBufferViewDef.byteLength;\n        const buffer = BufferUtils.pad(BufferUtils.toView(data.values));\n        buffers.push(buffer);\n        byteLength += buffer.byteLength;\n        valuesBufferViewDef.byteLength += buffer.byteLength;\n      }\n      json.bufferViews.push(valuesBufferViewDef);\n      const valuesBufferViewIndex = json.bufferViews.length - 1;\n      // (5) Write accessor sparse entries.\n      for (const accessor of accessors) {\n        const data = sparseData.get(accessor);\n        if (data.count === 0) continue;\n        data.accessorDef.sparse = {\n          count: data.count,\n          indices: {\n            bufferView: indicesBufferViewIndex,\n            byteOffset: data.indicesByteOffset,\n            componentType: IndexComponentType\n          },\n          values: {\n            bufferView: valuesBufferViewIndex,\n            byteOffset: data.valuesByteOffset\n          }\n        };\n      }\n      return {\n        buffers,\n        byteLength\n      };\n    }\n    json.accessors = [];\n    json.bufferViews = [];\n    /* Textures. */\n    // glTF Transform's \"Texture\" properties correspond 1:1 with glTF \"Image\" properties, and\n    // with image files. The glTF file may contain more one texture per image, where images\n    // are reused with different sampler properties.\n    json.samplers = [];\n    json.textures = [];\n    json.images = root.listTextures().map((texture, textureIndex) => {\n      const imageDef = context.createPropertyDef(texture);\n      if (texture.getMimeType()) {\n        imageDef.mimeType = texture.getMimeType();\n      }\n      const image = texture.getImage();\n      if (image) {\n        context.createImageData(imageDef, image, texture);\n      }\n      context.imageIndexMap.set(texture, textureIndex);\n      return imageDef;\n    });\n    /* Accessors. */\n    extensionsUsed.filter(extension => extension.prewriteTypes.includes(PropertyType.ACCESSOR)).forEach(extension => extension.prewrite(context, PropertyType.ACCESSOR));\n    root.listAccessors().forEach(accessor => {\n      // Attributes are grouped and interleaved in one buffer view per mesh primitive.\n      // Indices for all primitives are grouped into a single buffer view. IBMs are grouped\n      // into a single buffer view. Other usage (if specified by extensions) also goes into\n      // a dedicated buffer view. Everything else goes into a miscellaneous buffer view.\n      // Certain accessor usage should group data into buffer views by the accessor parent.\n      // The `accessorParents` map uses the first parent of each accessor for this purpose.\n      const groupByParent = context.accessorUsageGroupedByParent;\n      const accessorParents = context.accessorParents;\n      // Skip if already written by an extension.\n      if (context.accessorIndexMap.has(accessor)) return;\n      // Assign usage for core accessor usage types (explicit targets and implicit usage).\n      const usage = context.getAccessorUsage(accessor);\n      context.addAccessorToUsageGroup(accessor, usage);\n      // For accessor usage that requires grouping by parent (vertex and instance\n      // attributes) organize buffer views accordingly.\n      if (groupByParent.has(usage)) {\n        const parent = graph.listParents(accessor).find(parent => parent.propertyType !== PropertyType.ROOT);\n        accessorParents.set(accessor, parent);\n      }\n    });\n    /* Buffers, buffer views. */\n    extensionsUsed.filter(extension => extension.prewriteTypes.includes(PropertyType.BUFFER)).forEach(extension => extension.prewrite(context, PropertyType.BUFFER));\n    const needsBuffer = root.listAccessors().length > 0 || context.otherBufferViews.size > 0 || root.listTextures().length > 0 && options.format === Format.GLB;\n    if (needsBuffer && root.listBuffers().length === 0) {\n      throw new Error('Buffer required for Document resources, but none was found.');\n    }\n    json.buffers = [];\n    root.listBuffers().forEach((buffer, index) => {\n      const bufferDef = context.createPropertyDef(buffer);\n      const groupByParent = context.accessorUsageGroupedByParent;\n      const accessors = buffer.listParents().filter(property => property instanceof Accessor);\n      const uniqueParents = new Set(accessors.map(accessor => context.accessorParents.get(accessor)));\n      const parentToIndex = new Map(Array.from(uniqueParents).map((parent, index) => [parent, index]));\n      const accessorGroups = {};\n      for (const accessor of accessors) {\n        var _key;\n        // Skip if already written by an extension.\n        if (context.accessorIndexMap.has(accessor)) continue;\n        const usage = context.getAccessorUsage(accessor);\n        let key = usage;\n        if (groupByParent.has(usage)) {\n          const parent = context.accessorParents.get(accessor);\n          key += `:${parentToIndex.get(parent)}`;\n        }\n        accessorGroups[_key = key] || (accessorGroups[_key] = {\n          usage,\n          accessors: []\n        });\n        accessorGroups[key].accessors.push(accessor);\n      }\n      // Write accessor groups to buffer views.\n      const buffers = [];\n      const bufferIndex = json.buffers.length;\n      let bufferByteLength = 0;\n      for (const {\n        usage,\n        accessors: groupAccessors\n      } of Object.values(accessorGroups)) {\n        if (usage === BufferViewUsage.ARRAY_BUFFER && options.vertexLayout === VertexLayout.INTERLEAVED) {\n          // (1) Interleaved vertex attributes.\n          const result = interleaveAccessors(groupAccessors, bufferIndex, bufferByteLength);\n          bufferByteLength += result.byteLength;\n          for (const _buffer of result.buffers) {\n            buffers.push(_buffer);\n          }\n        } else if (usage === BufferViewUsage.ARRAY_BUFFER) {\n          // (2) Non-interleaved vertex attributes.\n          for (const accessor of groupAccessors) {\n            // We 'interleave' a single accessor because the method pads to\n            // 4-byte boundaries, which concatAccessors() does not.\n            const result = interleaveAccessors([accessor], bufferIndex, bufferByteLength);\n            bufferByteLength += result.byteLength;\n            for (const _buffer2 of result.buffers) {\n              buffers.push(_buffer2);\n            }\n          }\n        } else if (usage === BufferViewUsage.SPARSE) {\n          // (3) Sparse accessors.\n          const result = concatSparseAccessors(groupAccessors, bufferIndex, bufferByteLength);\n          bufferByteLength += result.byteLength;\n          for (const _buffer3 of result.buffers) {\n            buffers.push(_buffer3);\n          }\n        } else if (usage === BufferViewUsage.ELEMENT_ARRAY_BUFFER) {\n          // (4) Indices.\n          const target = WriterContext.BufferViewTarget.ELEMENT_ARRAY_BUFFER;\n          const result = concatAccessors(groupAccessors, bufferIndex, bufferByteLength, target);\n          bufferByteLength += result.byteLength;\n          for (const _buffer4 of result.buffers) {\n            buffers.push(_buffer4);\n          }\n        } else {\n          // (5) Other.\n          const result = concatAccessors(groupAccessors, bufferIndex, bufferByteLength);\n          bufferByteLength += result.byteLength;\n          for (const _buffer5 of result.buffers) {\n            buffers.push(_buffer5);\n          }\n        }\n      }\n      // We only support embedded images in GLB, where the embedded buffer must be the first.\n      // Additional buffers are currently left empty (see EXT_meshopt_compression fallback).\n      if (context.imageBufferViews.length && index === 0) {\n        for (let i = 0; i < context.imageBufferViews.length; i++) {\n          json.bufferViews[json.images[i].bufferView].byteOffset = bufferByteLength;\n          bufferByteLength += context.imageBufferViews[i].byteLength;\n          buffers.push(context.imageBufferViews[i]);\n          if (bufferByteLength % 8) {\n            // See: https://github.com/KhronosGroup/glTF/issues/1935\n            const imagePadding = 8 - bufferByteLength % 8;\n            bufferByteLength += imagePadding;\n            buffers.push(new Uint8Array(imagePadding));\n          }\n        }\n      }\n      if (context.otherBufferViews.has(buffer)) {\n        for (const data of context.otherBufferViews.get(buffer)) {\n          json.bufferViews.push({\n            buffer: bufferIndex,\n            byteOffset: bufferByteLength,\n            byteLength: data.byteLength\n          });\n          context.otherBufferViewsIndexMap.set(data, json.bufferViews.length - 1);\n          bufferByteLength += data.byteLength;\n          buffers.push(data);\n        }\n      }\n      if (bufferByteLength) {\n        // Assign buffer URI.\n        let uri;\n        if (options.format === Format.GLB) {\n          uri = GLB_BUFFER;\n        } else {\n          uri = context.bufferURIGenerator.createURI(buffer, 'bin');\n          bufferDef.uri = uri;\n        }\n        // Write buffer views to buffer.\n        bufferDef.byteLength = bufferByteLength;\n        context.assignResourceURI(uri, BufferUtils.concat(buffers), true);\n      }\n      json.buffers.push(bufferDef);\n      context.bufferIndexMap.set(buffer, index);\n    });\n    if (root.listAccessors().find(a => !a.getBuffer())) {\n      logger.warn('Skipped writing one or more Accessors: no Buffer assigned.');\n    }\n    /* Materials. */\n    extensionsUsed.filter(extension => extension.prewriteTypes.includes(PropertyType.MATERIAL)).forEach(extension => extension.prewrite(context, PropertyType.MATERIAL));\n    json.materials = root.listMaterials().map((material, index) => {\n      const materialDef = context.createPropertyDef(material);\n      // Program state & blending.\n      if (material.getAlphaMode() !== Material.AlphaMode.OPAQUE) {\n        materialDef.alphaMode = material.getAlphaMode();\n      }\n      if (material.getAlphaMode() === Material.AlphaMode.MASK) {\n        materialDef.alphaCutoff = material.getAlphaCutoff();\n      }\n      if (material.getDoubleSided()) materialDef.doubleSided = true;\n      // Factors.\n      materialDef.pbrMetallicRoughness = {};\n      if (!MathUtils.eq(material.getBaseColorFactor(), [1, 1, 1, 1])) {\n        materialDef.pbrMetallicRoughness.baseColorFactor = material.getBaseColorFactor();\n      }\n      if (!MathUtils.eq(material.getEmissiveFactor(), [0, 0, 0])) {\n        materialDef.emissiveFactor = material.getEmissiveFactor();\n      }\n      if (material.getRoughnessFactor() !== 1) {\n        materialDef.pbrMetallicRoughness.roughnessFactor = material.getRoughnessFactor();\n      }\n      if (material.getMetallicFactor() !== 1) {\n        materialDef.pbrMetallicRoughness.metallicFactor = material.getMetallicFactor();\n      }\n      // Textures.\n      if (material.getBaseColorTexture()) {\n        const texture = material.getBaseColorTexture();\n        const textureInfo = material.getBaseColorTextureInfo();\n        materialDef.pbrMetallicRoughness.baseColorTexture = context.createTextureInfoDef(texture, textureInfo);\n      }\n      if (material.getEmissiveTexture()) {\n        const texture = material.getEmissiveTexture();\n        const textureInfo = material.getEmissiveTextureInfo();\n        materialDef.emissiveTexture = context.createTextureInfoDef(texture, textureInfo);\n      }\n      if (material.getNormalTexture()) {\n        const texture = material.getNormalTexture();\n        const textureInfo = material.getNormalTextureInfo();\n        const textureInfoDef = context.createTextureInfoDef(texture, textureInfo);\n        if (material.getNormalScale() !== 1) {\n          textureInfoDef.scale = material.getNormalScale();\n        }\n        materialDef.normalTexture = textureInfoDef;\n      }\n      if (material.getOcclusionTexture()) {\n        const texture = material.getOcclusionTexture();\n        const textureInfo = material.getOcclusionTextureInfo();\n        const textureInfoDef = context.createTextureInfoDef(texture, textureInfo);\n        if (material.getOcclusionStrength() !== 1) {\n          textureInfoDef.strength = material.getOcclusionStrength();\n        }\n        materialDef.occlusionTexture = textureInfoDef;\n      }\n      if (material.getMetallicRoughnessTexture()) {\n        const texture = material.getMetallicRoughnessTexture();\n        const textureInfo = material.getMetallicRoughnessTextureInfo();\n        materialDef.pbrMetallicRoughness.metallicRoughnessTexture = context.createTextureInfoDef(texture, textureInfo);\n      }\n      context.materialIndexMap.set(material, index);\n      return materialDef;\n    });\n    /* Meshes. */\n    extensionsUsed.filter(extension => extension.prewriteTypes.includes(PropertyType.MESH)).forEach(extension => extension.prewrite(context, PropertyType.MESH));\n    json.meshes = root.listMeshes().map((mesh, index) => {\n      const meshDef = context.createPropertyDef(mesh);\n      let targetNames = null;\n      meshDef.primitives = mesh.listPrimitives().map(primitive => {\n        const primitiveDef = {\n          attributes: {}\n        };\n        primitiveDef.mode = primitive.getMode();\n        const material = primitive.getMaterial();\n        if (material) {\n          primitiveDef.material = context.materialIndexMap.get(material);\n        }\n        if (Object.keys(primitive.getExtras()).length) {\n          primitiveDef.extras = primitive.getExtras();\n        }\n        const indices = primitive.getIndices();\n        if (indices) {\n          primitiveDef.indices = context.accessorIndexMap.get(indices);\n        }\n        for (const semantic of primitive.listSemantics()) {\n          primitiveDef.attributes[semantic] = context.accessorIndexMap.get(primitive.getAttribute(semantic));\n        }\n        for (const target of primitive.listTargets()) {\n          const targetDef = {};\n          for (const semantic of target.listSemantics()) {\n            targetDef[semantic] = context.accessorIndexMap.get(target.getAttribute(semantic));\n          }\n          primitiveDef.targets = primitiveDef.targets || [];\n          primitiveDef.targets.push(targetDef);\n        }\n        if (primitive.listTargets().length && !targetNames) {\n          targetNames = primitive.listTargets().map(target => target.getName());\n        }\n        return primitiveDef;\n      });\n      if (mesh.getWeights().length) {\n        meshDef.weights = mesh.getWeights();\n      }\n      if (targetNames) {\n        meshDef.extras = meshDef.extras || {};\n        meshDef.extras['targetNames'] = targetNames;\n      }\n      context.meshIndexMap.set(mesh, index);\n      return meshDef;\n    });\n    /** Cameras. */\n    json.cameras = root.listCameras().map((camera, index) => {\n      const cameraDef = context.createPropertyDef(camera);\n      cameraDef.type = camera.getType();\n      if (cameraDef.type === Camera.Type.PERSPECTIVE) {\n        cameraDef.perspective = {\n          znear: camera.getZNear(),\n          zfar: camera.getZFar(),\n          yfov: camera.getYFov()\n        };\n        const aspectRatio = camera.getAspectRatio();\n        if (aspectRatio !== null) {\n          cameraDef.perspective.aspectRatio = aspectRatio;\n        }\n      } else {\n        cameraDef.orthographic = {\n          znear: camera.getZNear(),\n          zfar: camera.getZFar(),\n          xmag: camera.getXMag(),\n          ymag: camera.getYMag()\n        };\n      }\n      context.cameraIndexMap.set(camera, index);\n      return cameraDef;\n    });\n    /* Nodes. */\n    json.nodes = root.listNodes().map((node, index) => {\n      const nodeDef = context.createPropertyDef(node);\n      if (!MathUtils.eq(node.getTranslation(), [0, 0, 0])) {\n        nodeDef.translation = node.getTranslation();\n      }\n      if (!MathUtils.eq(node.getRotation(), [0, 0, 0, 1])) {\n        nodeDef.rotation = node.getRotation();\n      }\n      if (!MathUtils.eq(node.getScale(), [1, 1, 1])) {\n        nodeDef.scale = node.getScale();\n      }\n      if (node.getWeights().length) {\n        nodeDef.weights = node.getWeights();\n      }\n      // Attachments (mesh, camera, skin) defined later in writing process.\n      context.nodeIndexMap.set(node, index);\n      return nodeDef;\n    });\n    /** Skins. */\n    json.skins = root.listSkins().map((skin, index) => {\n      const skinDef = context.createPropertyDef(skin);\n      const inverseBindMatrices = skin.getInverseBindMatrices();\n      if (inverseBindMatrices) {\n        skinDef.inverseBindMatrices = context.accessorIndexMap.get(inverseBindMatrices);\n      }\n      const skeleton = skin.getSkeleton();\n      if (skeleton) {\n        skinDef.skeleton = context.nodeIndexMap.get(skeleton);\n      }\n      skinDef.joints = skin.listJoints().map(joint => context.nodeIndexMap.get(joint));\n      context.skinIndexMap.set(skin, index);\n      return skinDef;\n    });\n    /** Node attachments. */\n    root.listNodes().forEach((node, index) => {\n      const nodeDef = json.nodes[index];\n      const mesh = node.getMesh();\n      if (mesh) {\n        nodeDef.mesh = context.meshIndexMap.get(mesh);\n      }\n      const camera = node.getCamera();\n      if (camera) {\n        nodeDef.camera = context.cameraIndexMap.get(camera);\n      }\n      const skin = node.getSkin();\n      if (skin) {\n        nodeDef.skin = context.skinIndexMap.get(skin);\n      }\n      if (node.listChildren().length > 0) {\n        nodeDef.children = node.listChildren().map(node => context.nodeIndexMap.get(node));\n      }\n    });\n    /** Animations. */\n    json.animations = root.listAnimations().map((animation, index) => {\n      const animationDef = context.createPropertyDef(animation);\n      const samplerIndexMap = new Map();\n      animationDef.samplers = animation.listSamplers().map((sampler, samplerIndex) => {\n        const samplerDef = context.createPropertyDef(sampler);\n        samplerDef.input = context.accessorIndexMap.get(sampler.getInput());\n        samplerDef.output = context.accessorIndexMap.get(sampler.getOutput());\n        samplerDef.interpolation = sampler.getInterpolation();\n        samplerIndexMap.set(sampler, samplerIndex);\n        return samplerDef;\n      });\n      animationDef.channels = animation.listChannels().map(channel => {\n        const channelDef = context.createPropertyDef(channel);\n        channelDef.sampler = samplerIndexMap.get(channel.getSampler());\n        channelDef.target = {\n          node: context.nodeIndexMap.get(channel.getTargetNode()),\n          path: channel.getTargetPath()\n        };\n        return channelDef;\n      });\n      context.animationIndexMap.set(animation, index);\n      return animationDef;\n    });\n    /* Scenes. */\n    json.scenes = root.listScenes().map((scene, index) => {\n      const sceneDef = context.createPropertyDef(scene);\n      sceneDef.nodes = scene.listChildren().map(node => context.nodeIndexMap.get(node));\n      context.sceneIndexMap.set(scene, index);\n      return sceneDef;\n    });\n    const defaultScene = root.getDefaultScene();\n    if (defaultScene) {\n      json.scene = root.listScenes().indexOf(defaultScene);\n    }\n    /* Extensions (2/2). */\n    json.extensionsUsed = extensionsUsed.map(ext => ext.extensionName);\n    json.extensionsRequired = extensionsRequired.map(ext => ext.extensionName);\n    extensionsUsed.forEach(extension => extension.write(context));\n    //\n    clean(json);\n    return jsonDoc;\n  }\n}\n/**\n * Removes empty and null values from an object.\n * @param object\n * @internal\n */\nfunction clean(object) {\n  const unused = [];\n  for (const key in object) {\n    const value = object[key];\n    if (Array.isArray(value) && value.length === 0) {\n      unused.push(key);\n    } else if (value === null || value === '') {\n      unused.push(key);\n    } else if (value && typeof value === 'object' && Object.keys(value).length === 0) {\n      unused.push(key);\n    }\n  }\n  for (const key of unused) {\n    delete object[key];\n  }\n}\n\nvar ChunkType;\n(function (ChunkType) {\n  ChunkType[ChunkType[\"JSON\"] = 1313821514] = \"JSON\";\n  ChunkType[ChunkType[\"BIN\"] = 5130562] = \"BIN\";\n})(ChunkType || (ChunkType = {}));\n/**\n * *Abstract I/O service.*\n *\n * The most common use of the I/O service is to read/write a {@link Document} with a given path.\n * Methods are also available for converting in-memory representations of raw glTF files, both\n * binary (*Uint8Array*) and JSON ({@link JSONDocument}).\n *\n * For platform-specific implementations, see {@link NodeIO}, {@link WebIO}, and {@link DenoIO}.\n *\n * @category I/O\n */\nclass PlatformIO {\n  constructor() {\n    this._logger = Logger.DEFAULT_INSTANCE;\n    this._extensions = new Set();\n    this._dependencies = {};\n    this._vertexLayout = VertexLayout.INTERLEAVED;\n    /** @hidden */\n    this.lastReadBytes = 0;\n    /** @hidden */\n    this.lastWriteBytes = 0;\n  }\n  /** Sets the {@link Logger} used by this I/O instance. Defaults to Logger.DEFAULT_INSTANCE. */\n  setLogger(logger) {\n    this._logger = logger;\n    return this;\n  }\n  /** Registers extensions, enabling I/O class to read and write glTF assets requiring them. */\n  registerExtensions(extensions) {\n    for (const extension of extensions) {\n      this._extensions.add(extension);\n      extension.register();\n    }\n    return this;\n  }\n  /** Registers dependencies used (e.g. by extensions) in the I/O process. */\n  registerDependencies(dependencies) {\n    Object.assign(this._dependencies, dependencies);\n    return this;\n  }\n  /**\n   * Sets the vertex layout method used by this I/O instance. Defaults to\n   * VertexLayout.INTERLEAVED.\n   */\n  setVertexLayout(layout) {\n    this._vertexLayout = layout;\n    return this;\n  }\n  /**********************************************************************************************\n   * Public Read API.\n   */\n  /** Reads a {@link Document} from the given URI. */\n  async read(uri) {\n    return await this.readJSON(await this.readAsJSON(uri));\n  }\n  /** Loads a URI and returns a {@link JSONDocument} struct, without parsing. */\n  async readAsJSON(uri) {\n    const view = await this.readURI(uri, 'view');\n    this.lastReadBytes = view.byteLength;\n    const jsonDoc = isGLB(view) ? this._binaryToJSON(view) : {\n      json: JSON.parse(BufferUtils.decodeText(view)),\n      resources: {}\n    };\n    // Read external resources first, before Data URIs are replaced.\n    await this._readResourcesExternal(jsonDoc, this.dirname(uri));\n    this._readResourcesInternal(jsonDoc);\n    return jsonDoc;\n  }\n  /** Converts glTF-formatted JSON and a resource map to a {@link Document}. */\n  async readJSON(jsonDoc) {\n    jsonDoc = this._copyJSON(jsonDoc);\n    this._readResourcesInternal(jsonDoc);\n    return GLTFReader.read(jsonDoc, {\n      extensions: Array.from(this._extensions),\n      dependencies: this._dependencies,\n      logger: this._logger\n    });\n  }\n  /** Converts a GLB-formatted Uint8Array to a {@link JSONDocument}. */\n  async binaryToJSON(glb) {\n    const jsonDoc = this._binaryToJSON(BufferUtils.assertView(glb));\n    this._readResourcesInternal(jsonDoc);\n    const json = jsonDoc.json;\n    // Check for external references, which can't be resolved by this method.\n    if (json.buffers && json.buffers.some(bufferDef => isExternalBuffer(jsonDoc, bufferDef))) {\n      throw new Error('Cannot resolve external buffers with binaryToJSON().');\n    } else if (json.images && json.images.some(imageDef => isExternalImage(jsonDoc, imageDef))) {\n      throw new Error('Cannot resolve external images with binaryToJSON().');\n    }\n    return jsonDoc;\n  }\n  /** Converts a GLB-formatted Uint8Array to a {@link Document}. */\n  async readBinary(glb) {\n    return this.readJSON(await this.binaryToJSON(BufferUtils.assertView(glb)));\n  }\n  /**********************************************************************************************\n   * Public Write API.\n   */\n  /** Converts a {@link Document} to glTF-formatted JSON and a resource map. */\n  async writeJSON(doc, _options = {}) {\n    if (_options.format === Format.GLB && doc.getRoot().listBuffers().length > 1) {\n      throw new Error('GLB must have 0–1 buffers.');\n    }\n    return GLTFWriter.write(doc, {\n      format: _options.format || Format.GLTF,\n      basename: _options.basename || '',\n      logger: this._logger,\n      vertexLayout: this._vertexLayout,\n      dependencies: _extends({}, this._dependencies),\n      extensions: Array.from(this._extensions)\n    });\n  }\n  /** Converts a {@link Document} to a GLB-formatted Uint8Array. */\n  async writeBinary(doc) {\n    const {\n      json,\n      resources\n    } = await this.writeJSON(doc, {\n      format: Format.GLB\n    });\n    const header = new Uint32Array([0x46546c67, 2, 12]);\n    const jsonText = JSON.stringify(json);\n    const jsonChunkData = BufferUtils.pad(BufferUtils.encodeText(jsonText), 0x20);\n    const jsonChunkHeader = BufferUtils.toView(new Uint32Array([jsonChunkData.byteLength, 0x4e4f534a]));\n    const jsonChunk = BufferUtils.concat([jsonChunkHeader, jsonChunkData]);\n    header[header.length - 1] += jsonChunk.byteLength;\n    const binBuffer = Object.values(resources)[0];\n    if (!binBuffer || !binBuffer.byteLength) {\n      return BufferUtils.concat([BufferUtils.toView(header), jsonChunk]);\n    }\n    const binChunkData = BufferUtils.pad(binBuffer, 0x00);\n    const binChunkHeader = BufferUtils.toView(new Uint32Array([binChunkData.byteLength, 0x004e4942]));\n    const binChunk = BufferUtils.concat([binChunkHeader, binChunkData]);\n    header[header.length - 1] += binChunk.byteLength;\n    return BufferUtils.concat([BufferUtils.toView(header), jsonChunk, binChunk]);\n  }\n  /**********************************************************************************************\n   * Internal.\n   */\n  async _readResourcesExternal(jsonDoc, base) {\n    var _this = this;\n    const images = jsonDoc.json.images || [];\n    const buffers = jsonDoc.json.buffers || [];\n    const pendingResources = [...images, ...buffers].map(async function (resource) {\n      const uri = resource.uri;\n      if (!uri || uri.match(/data:/)) return Promise.resolve();\n      jsonDoc.resources[uri] = await _this.readURI(_this.resolve(base, uri), 'view');\n      _this.lastReadBytes += jsonDoc.resources[uri].byteLength;\n    });\n    await Promise.all(pendingResources);\n  }\n  _readResourcesInternal(jsonDoc) {\n    // NOTICE: This method may be called more than once during the loading\n    // process (e.g. WebIO.read) and should handle that safely.\n    function resolveResource(resource) {\n      if (!resource.uri) return;\n      if (resource.uri in jsonDoc.resources) {\n        BufferUtils.assertView(jsonDoc.resources[resource.uri]);\n        return;\n      }\n      if (resource.uri.match(/data:/)) {\n        // Rewrite Data URIs to something short and unique.\n        const resourceUUID = `__${uuid()}.${FileUtils.extension(resource.uri)}`;\n        jsonDoc.resources[resourceUUID] = BufferUtils.createBufferFromDataURI(resource.uri);\n        resource.uri = resourceUUID;\n      }\n    }\n    // Unpack images.\n    const images = jsonDoc.json.images || [];\n    images.forEach(image => {\n      if (image.bufferView === undefined && image.uri === undefined) {\n        throw new Error('Missing resource URI or buffer view.');\n      }\n      resolveResource(image);\n    });\n    // Unpack buffers.\n    const buffers = jsonDoc.json.buffers || [];\n    buffers.forEach(resolveResource);\n  }\n  /**\n   * Creates a shallow copy of glTF-formatted {@link JSONDocument}.\n   *\n   * Images, Buffers, and Resources objects are deep copies so that PlatformIO can safely\n   * modify them during the parsing process. Other properties are shallow copies, and buffers\n   * are passed by reference.\n   */\n  _copyJSON(jsonDoc) {\n    const {\n      images,\n      buffers\n    } = jsonDoc.json;\n    jsonDoc = {\n      json: _extends({}, jsonDoc.json),\n      resources: _extends({}, jsonDoc.resources)\n    };\n    if (images) {\n      jsonDoc.json.images = images.map(image => _extends({}, image));\n    }\n    if (buffers) {\n      jsonDoc.json.buffers = buffers.map(buffer => _extends({}, buffer));\n    }\n    return jsonDoc;\n  }\n  /** Internal version of binaryToJSON; does not warn about external resources. */\n  _binaryToJSON(glb) {\n    // Decode and verify GLB header.\n    if (!isGLB(glb)) {\n      throw new Error('Invalid glTF 2.0 binary.');\n    }\n    // Decode JSON chunk.\n    const jsonChunkHeader = new Uint32Array(glb.buffer, glb.byteOffset + 12, 2);\n    if (jsonChunkHeader[1] !== ChunkType.JSON) {\n      throw new Error('Missing required GLB JSON chunk.');\n    }\n    const jsonByteOffset = 20;\n    const jsonByteLength = jsonChunkHeader[0];\n    const jsonText = BufferUtils.decodeText(BufferUtils.toView(glb, jsonByteOffset, jsonByteLength));\n    const json = JSON.parse(jsonText);\n    // Decode BIN chunk.\n    const binByteOffset = jsonByteOffset + jsonByteLength;\n    if (glb.byteLength <= binByteOffset) {\n      return {\n        json,\n        resources: {}\n      };\n    }\n    const binChunkHeader = new Uint32Array(glb.buffer, glb.byteOffset + binByteOffset, 2);\n    if (binChunkHeader[1] !== ChunkType.BIN) {\n      // Allow GLB files without BIN chunk, but with unknown chunk\n      // Spec: https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#chunks-overview\n      return {\n        json,\n        resources: {}\n      };\n    }\n    const binByteLength = binChunkHeader[0];\n    const binBuffer = BufferUtils.toView(glb, binByteOffset + 8, binByteLength);\n    return {\n      json,\n      resources: {\n        [GLB_BUFFER]: binBuffer\n      }\n    };\n  }\n}\nfunction isExternalBuffer(jsonDocument, bufferDef) {\n  return bufferDef.uri !== undefined && !(bufferDef.uri in jsonDocument.resources);\n}\nfunction isExternalImage(jsonDocument, imageDef) {\n  return imageDef.uri !== undefined && !(imageDef.uri in jsonDocument.resources) && imageDef.bufferView === undefined;\n}\nfunction isGLB(view) {\n  if (view.byteLength < 3 * Uint32Array.BYTES_PER_ELEMENT) return false;\n  const header = new Uint32Array(view.buffer, view.byteOffset, 3);\n  return header[0] === 0x46546c67 && header[1] === 2;\n}\n\n/**\n * *I/O service for [Deno](https://deno.land/).*\n *\n * The most common use of the I/O service is to read/write a {@link Document} with a given path.\n * Methods are also available for converting in-memory representations of raw glTF files, both\n * binary (*Uint8Array*) and JSON ({@link JSONDocument}).\n *\n * _*NOTICE:* Support for the Deno environment is currently experimental. See\n * [glTF-Transform#457](https://github.com/donmccurdy/glTF-Transform/issues/457)._\n *\n * Usage:\n *\n * ```typescript\n * import { DenoIO } from 'https://esm.sh/@gltf-transform/core';\n * import * as path from 'https://deno.land/std/path/mod.ts';\n *\n * const io = new DenoIO(path);\n *\n * // Read.\n * let document;\n * document = io.read('model.glb');  // → Document\n * document = io.readBinary(glb);    // Uint8Array → Document\n *\n * // Write.\n * const glb = io.writeBinary(document);  // Document → Uint8Array\n * ```\n *\n * @category I/O\n */\nclass DenoIO extends PlatformIO {\n  constructor(path) {\n    super();\n    this._path = void 0;\n    this._path = path;\n  }\n  async readURI(uri, type) {\n    switch (type) {\n      case 'view':\n        return Deno.readFile(uri);\n      case 'text':\n        return Deno.readTextFile(uri);\n    }\n  }\n  resolve(base, path) {\n    // https://github.com/KhronosGroup/glTF/issues/1449\n    // https://stackoverflow.com/a/27278490/1314762\n    return this._path.resolve(base, decodeURIComponent(path));\n  }\n  dirname(uri) {\n    return this._path.dirname(uri);\n  }\n}\n\n/**\n * *I/O service for Node.js.*\n *\n * The most common use of the I/O service is to read/write a {@link Document} with a given path.\n * Methods are also available for converting in-memory representations of raw glTF files, both\n * binary (*Uint8Array*) and JSON ({@link JSONDocument}).\n *\n * Usage:\n *\n * ```typescript\n * import { NodeIO } from '@gltf-transform/core';\n *\n * const io = new NodeIO();\n *\n * // Read.\n * let document;\n * document = await io.read('model.glb'); // → Document\n * document = await io.readBinary(glb);   // Uint8Array → Document\n *\n * // Write.\n * await io.write('model.glb', document);      // → void\n * const glb = await io.writeBinary(document); // Document → Uint8Array\n * ```\n *\n * By default, NodeIO can only read/write paths on disk. To enable network requests, provide a Fetch\n * API implementation (global [`fetch()`](https://nodejs.org/api/globals.html#fetch) is stable in\n * Node.js v21+, or [`node-fetch`](https://www.npmjs.com/package/node-fetch) may be installed) and enable\n * {@link NodeIO.setAllowNetwork setAllowNetwork}. Network requests may optionally be configured with\n * [RequestInit](https://developer.mozilla.org/en-US/docs/Web/API/fetch#parameters) parameters.\n *\n * ```typescript\n * const io = new NodeIO(fetch, {headers: {...}}).setAllowNetwork(true);\n *\n * const document = await io.read('https://example.com/path/to/model.glb');\n * ```\n *\n * @category I/O\n */\nclass NodeIO extends PlatformIO {\n  /**\n   * Constructs a new NodeIO service. Instances are reusable. By default, only NodeIO can only\n   * read/write paths on disk. To enable HTTP requests, provide a Fetch API implementation and\n   * enable {@link NodeIO.setAllowNetwork setAllowNetwork}.\n   *\n   * @param fetch Implementation of Fetch API.\n   * @param fetchConfig Configuration object for Fetch API.\n   */\n  constructor(_fetch = null, _fetchConfig = HTTPUtils.DEFAULT_INIT) {\n    super();\n    this._fetch = void 0;\n    this._fetchConfig = void 0;\n    this._init = void 0;\n    this._fetchEnabled = false;\n    this._fetch = _fetch;\n    this._fetchConfig = _fetchConfig;\n    this._init = this.init();\n  }\n  async init() {\n    if (this._init) return this._init;\n    return Promise.all([import('fs'), import('path')]).then(([fs, path]) => {\n      this._fs = fs.promises;\n      this._path = path;\n    });\n  }\n  setAllowNetwork(allow) {\n    if (allow && !this._fetch) {\n      throw new Error('NodeIO requires a Fetch API implementation for HTTP requests.');\n    }\n    this._fetchEnabled = allow;\n    return this;\n  }\n  async readURI(uri, type) {\n    await this.init();\n    if (HTTPUtils.isAbsoluteURL(uri)) {\n      if (!this._fetchEnabled || !this._fetch) {\n        throw new Error('Network request blocked. Allow HTTP requests explicitly, if needed.');\n      }\n      const response = await this._fetch(uri, this._fetchConfig);\n      switch (type) {\n        case 'view':\n          return new Uint8Array(await response.arrayBuffer());\n        case 'text':\n          return response.text();\n      }\n    } else {\n      switch (type) {\n        case 'view':\n          return this._fs.readFile(uri);\n        case 'text':\n          return this._fs.readFile(uri, 'utf8');\n      }\n    }\n  }\n  resolve(base, path) {\n    if (HTTPUtils.isAbsoluteURL(base) || HTTPUtils.isAbsoluteURL(path)) {\n      return HTTPUtils.resolve(base, path);\n    }\n    // https://github.com/KhronosGroup/glTF/issues/1449\n    // https://stackoverflow.com/a/27278490/1314762\n    return this._path.resolve(base, decodeURIComponent(path));\n  }\n  dirname(uri) {\n    if (HTTPUtils.isAbsoluteURL(uri)) {\n      return HTTPUtils.dirname(uri);\n    }\n    return this._path.dirname(uri);\n  }\n  /**********************************************************************************************\n   * Public.\n   */\n  /** Writes a {@link Document} instance to a local path. */\n  async write(uri, doc) {\n    await this.init();\n    const isGLB = !!uri.match(/\\.glb$/);\n    await (isGLB ? this._writeGLB(uri, doc) : this._writeGLTF(uri, doc));\n  }\n  /**********************************************************************************************\n   * Private.\n   */\n  /** @internal */\n  async _writeGLTF(uri, doc) {\n    var _this = this;\n    this.lastWriteBytes = 0;\n    const {\n      json,\n      resources\n    } = await this.writeJSON(doc, {\n      format: Format.GLTF,\n      basename: FileUtils.basename(uri)\n    });\n    const {\n      _fs: fs,\n      _path: path\n    } = this;\n    const dir = path.dirname(uri);\n    // write json\n    const jsonContent = JSON.stringify(json, null, 2);\n    await fs.writeFile(uri, jsonContent);\n    this.lastWriteBytes += jsonContent.length;\n    // write resources\n    for (const batch of listBatches(Object.keys(resources), 10)) {\n      await Promise.all(batch.map(async function (resourceURI) {\n        if (HTTPUtils.isAbsoluteURL(resourceURI)) {\n          if (HTTPUtils.extension(resourceURI) === 'bin') {\n            throw new Error(`Cannot write buffer to path \"${resourceURI}\".`);\n          }\n          return;\n        }\n        const resourcePath = path.join(dir, decodeURIComponent(resourceURI));\n        await fs.mkdir(path.dirname(resourcePath), {\n          recursive: true\n        });\n        await fs.writeFile(resourcePath, resources[resourceURI]);\n        _this.lastWriteBytes += resources[resourceURI].byteLength;\n      }));\n    }\n  }\n  /** @internal */\n  async _writeGLB(uri, doc) {\n    const buffer = await this.writeBinary(doc);\n    await this._fs.writeFile(uri, buffer);\n    this.lastWriteBytes = buffer.byteLength;\n  }\n}\n/** Divides a flat input array into batches of size `batchSize`. */\nfunction listBatches(array, batchSize) {\n  const batches = [];\n  for (let i = 0, il = array.length; i < il; i += batchSize) {\n    const batch = [];\n    for (let j = 0; j < batchSize && i + j < il; j++) {\n      batch.push(array[i + j]);\n    }\n    batches.push(batch);\n  }\n  return batches;\n}\n\n/**\n * *I/O service for Web.*\n *\n * The most common use of the I/O service is to read/write a {@link Document} with a given path.\n * Methods are also available for converting in-memory representations of raw glTF files, both\n * binary (*Uint8Array*) and JSON ({@link JSONDocument}).\n *\n * Usage:\n *\n * ```typescript\n * import { WebIO } from '@gltf-transform/core';\n *\n * const io = new WebIO({credentials: 'include'});\n *\n * // Read.\n * let document;\n * document = await io.read('model.glb');  // → Document\n * document = await io.readBinary(glb);    // Uint8Array → Document\n *\n * // Write.\n * const glb = await io.writeBinary(document); // Document → Uint8Array\n * ```\n *\n * @category I/O\n */\nclass WebIO extends PlatformIO {\n  /**\n   * Constructs a new WebIO service. Instances are reusable.\n   * @param fetchConfig Configuration object for Fetch API.\n   */\n  constructor(fetchConfig = HTTPUtils.DEFAULT_INIT) {\n    super();\n    this._fetchConfig = void 0;\n    this._fetchConfig = fetchConfig;\n  }\n  async readURI(uri, type) {\n    const response = await fetch(uri, this._fetchConfig);\n    switch (type) {\n      case 'view':\n        return new Uint8Array(await response.arrayBuffer());\n      case 'text':\n        return response.text();\n    }\n  }\n  resolve(base, path) {\n    return HTTPUtils.resolve(base, path);\n  }\n  dirname(uri) {\n    return HTTPUtils.dirname(uri);\n  }\n}\n\nexport { Accessor, Animation, AnimationChannel, AnimationSampler, Buffer$1 as Buffer, BufferUtils, COPY_IDENTITY, Camera, ColorUtils, ComponentTypeToTypedArray, DenoIO, Document, ExtensibleProperty, Extension, ExtensionProperty, FileUtils, Format, GLB_BUFFER, HTTPUtils, ImageUtils, Logger, Material, MathUtils, Mesh, Node, NodeIO, PlatformIO, Primitive, PrimitiveTarget, Property, PropertyType, ReaderContext, Root, Scene, Skin, Texture, TextureChannel, TextureInfo, VERSION, Verbosity, VertexLayout, WebIO, WriterContext, getBounds, uuid };\n//# sourceMappingURL=index.modern.js.map\n","// Copyright 2022-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nconst { cos, sin, PI } = Math;\nconst TAU = PI * 2;\nexport function euler2quat(rotation) {\n    // https://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles#Source_code\n    const cr = cos(rotation[2] * 0.5 * TAU / 360);\n    const sr = sin(rotation[2] * 0.5 * TAU / 360);\n    const cp = cos(rotation[1] * 0.5 * TAU / 360);\n    const sp = sin(rotation[1] * 0.5 * TAU / 360);\n    const cy = cos(rotation[0] * 0.5 * TAU / 360);\n    const sy = sin(rotation[0] * 0.5 * TAU / 360);\n    const q = [0, 0, 0, 0];\n    q[3] = cr * cp * cy + sr * sp * sy;\n    q[2] = sr * cp * cy - cr * sp * sy;\n    q[1] = cr * sp * cy + sr * cp * sy;\n    q[0] = cr * cp * sy - sr * sp * cy;\n    return q;\n}\n;\n//# sourceMappingURL=math.js.map","// Copyright 2022-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { Accessor } from '@gltf-transform/core';\nimport { euler2quat } from \"./math.js\";\nlet animationMode = 'loop';\nlet animationDuration = 1;\nlet animationFPS = 30;\n/**\n * Set the animation repeat mode.\n *\n * @param mode 'loop' or 'ping-pong'\n * @group Global Settings\n */\nexport const setAnimationMode = (mode) => {\n    animationMode = mode;\n};\n/**\n * Get the current animation repeat mode.\n * @group Global Settings\n */\nexport const getAnimationMode = () => animationMode;\n/**\n * Set the duration of the animation, in seconds.\n *\n * @param duration in seconds.\n * @group Global Settings\n */\nexport const setAnimationDuration = (duration) => {\n    animationDuration = duration;\n};\n/**\n * Get the current duruation of the animation, in seconds.\n * @group Global Settings\n */\nexport const getAnimationDuration = () => animationDuration;\n/**\n * Set the animation frame rate.\n *\n * @param fps in frames per second.\n * @group Global Settings\n */\nexport const setAnimationFPS = (fps) => {\n    animationFPS = fps;\n};\n/**\n * Get the current animation frame rate.\n * @group Global Settings\n */\nexport const getAnimationFPS = () => animationFPS;\nconst manifold2morph = new Map();\nlet animation;\nlet timesAccessor;\nlet weightsAccessor;\nlet weightsSampler;\nlet hasAnimation;\nexport function cleanup() {\n    manifold2morph.clear();\n    animationMode = 'loop';\n    animationDuration = 1;\n    animationFPS = 30;\n}\n/**\n *\n * @internal\n */\nexport function addMotion(doc, type, node, out) {\n    const motion = node[type];\n    if (motion == null) {\n        return null;\n    }\n    if (typeof motion !== 'function') {\n        return motion;\n    }\n    const nFrames = timesAccessor.getCount();\n    const nEl = type == 'rotation' ? 4 : 3;\n    const frames = new Float32Array(nEl * nFrames);\n    for (let i = 0; i < nFrames; ++i) {\n        const x = i / (nFrames - 1);\n        const m = motion(animationMode !== 'ping-pong' ? x :\n            (1 - Math.cos(x * 2 * Math.PI)) / 2);\n        frames.set(nEl === 4 ? euler2quat(m) : m, nEl * i);\n    }\n    const framesAccessor = doc.createAccessor(node.name + ' ' + type + ' frames')\n        .setBuffer(doc.getRoot().listBuffers()[0])\n        .setArray(frames)\n        .setType(nEl === 4 ? Accessor.Type.VEC4 : Accessor.Type.VEC3);\n    const sampler = doc.createAnimationSampler()\n        .setInput(timesAccessor)\n        .setOutput(framesAccessor)\n        .setInterpolation('LINEAR');\n    const channel = doc.createAnimationChannel()\n        .setTargetPath(type)\n        .setTargetNode(out)\n        .setSampler(sampler);\n    animation.addSampler(sampler);\n    animation.addChannel(channel);\n    hasAnimation = true;\n    return motion(0);\n}\n/**\n *\n * @internal\n */\nexport function setMorph(doc, node, manifold) {\n    if (manifold2morph.has(manifold)) {\n        const channel = doc.createAnimationChannel()\n            .setTargetPath('weights')\n            .setTargetNode(node)\n            .setSampler(weightsSampler);\n        animation.addChannel(channel);\n        hasAnimation = true;\n    }\n}\n/**\n *\n * @internal\n */\nexport const getMorph = (manifold) => manifold2morph.get(manifold);\n/**\n *\n * @internal\n */\nexport function morphStart(manifoldMesh, morph) {\n    const inputPositions = [];\n    if (morph == null) {\n        return inputPositions;\n    }\n    for (let i = 0; i < manifoldMesh.numVert; ++i) {\n        for (let j = 0; j < 3; ++j)\n            inputPositions[i * 3 + j] =\n                manifoldMesh.vertProperties[i * manifoldMesh.numProp + j];\n    }\n    if (morph.start) {\n        for (let i = 0; i < manifoldMesh.numVert; ++i) {\n            const vertProp = manifoldMesh.vertProperties;\n            const offset = i * manifoldMesh.numProp;\n            const pos = inputPositions.slice(offset, offset + 3);\n            morph.start(pos);\n            for (let j = 0; j < 3; ++j)\n                vertProp[offset + j] = pos[j];\n        }\n    }\n    return inputPositions;\n}\n/**\n *\n * @internal\n */\nexport function morphEnd(doc, manifoldMesh, mesh, inputPositions, morph) {\n    if (morph == null) {\n        return;\n    }\n    mesh.setWeights([0]);\n    mesh.listPrimitives().forEach((primitive, i) => {\n        if (morph.end) {\n            for (let i = 0; i < manifoldMesh.numVert; ++i) {\n                const pos = inputPositions.slice(3 * i, 3 * (i + 1));\n                morph.end(pos);\n                inputPositions.splice(3 * i, 3, ...pos);\n            }\n        }\n        const startPosition = primitive.getAttribute('POSITION').getArray();\n        const array = new Float32Array(startPosition.length);\n        const offset = manifoldMesh.runIndex[i];\n        for (let j = 0; j < array.length; ++j) {\n            array[j] = inputPositions[offset + j] - startPosition[j];\n        }\n        const morphAccessor = doc.createAccessor(mesh.getName() + ' morph target')\n            .setBuffer(doc.getRoot().listBuffers()[0])\n            .setArray(array)\n            .setType(Accessor.Type.VEC3);\n        const morphTarget = doc.createPrimitiveTarget().setAttribute('POSITION', morphAccessor);\n        primitive.addTarget(morphTarget);\n    });\n}\n/**\n * Apply a morphing animation to the input manifold. Specify the start\n * function which will be applied to the vertex positions of the first frame and\n * linearly interpolated across the length of the overall animation. This\n * animation will only be shown if this manifold is used directly on a GLTFNode.\n *\n * @group Modelling Functions\n * @param manifold The object to add morphing animation to.\n * @param func A warping function to apply to the first animation frame.\n */\nexport const setMorphStart = (manifold, func) => {\n    const morph = manifold2morph.get(manifold);\n    if (morph != null) {\n        morph.start = func;\n    }\n    else {\n        manifold2morph.set(manifold, { start: func });\n    }\n};\n/**\n * Apply a morphing animation to the input manifold. Specify the end\n * function which will be applied to the vertex positions of the last frame and\n * linearly interpolated across the length of the overall animation. This\n * animation will only be shown if this manifold is used directly on a GLTFNode.\n *\n * @group Modelling Functions\n * @param manifold The object to add morphing animation to.\n * @param func A warping function to apply to the last animation frame.\n */\nexport const setMorphEnd = (manifold, func) => {\n    const morph = manifold2morph.get(manifold);\n    if (morph != null) {\n        morph.end = func;\n    }\n    else {\n        manifold2morph.set(manifold, { end: func });\n    }\n};\n/**\n *\n * @internal\n */\nexport function addAnimationToDoc(doc) {\n    animation = doc.createAnimation('');\n    hasAnimation = false;\n    const nFrames = Math.round(animationDuration * animationFPS) + 1;\n    const times = new Float32Array(nFrames);\n    const weights = new Float32Array(nFrames);\n    for (let i = 0; i < nFrames; ++i) {\n        const x = i / (nFrames - 1);\n        times[i] = x * animationDuration;\n        weights[i] =\n            animationMode !== 'ping-pong' ? x : (1 - Math.cos(x * 2 * Math.PI)) / 2;\n    }\n    timesAccessor = doc.createAccessor('animation times')\n        .setBuffer(doc.createBuffer())\n        .setArray(times)\n        .setType(Accessor.Type.SCALAR);\n    weightsAccessor = doc.createAccessor('animation weights')\n        .setBuffer(doc.getRoot().listBuffers()[0])\n        .setArray(weights)\n        .setType(Accessor.Type.SCALAR);\n    weightsSampler = doc.createAnimationSampler()\n        .setInput(timesAccessor)\n        .setOutput(weightsAccessor)\n        .setInterpolation('LINEAR');\n    animation.addSampler(weightsSampler);\n}\n/**\n *\n * @internal\n */\nexport function cleanupAnimationInDoc() {\n    if (!hasAnimation) {\n        timesAccessor.dispose();\n        weightsAccessor.dispose();\n        weightsSampler.dispose();\n        animation.dispose();\n    }\n}\n//# sourceMappingURL=animation.js.map","(module=>{\n\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// lib/npm/browser.ts\nvar browser_exports = {};\n__export(browser_exports, {\n  analyzeMetafile: () => analyzeMetafile,\n  analyzeMetafileSync: () => analyzeMetafileSync,\n  build: () => build,\n  buildSync: () => buildSync,\n  context: () => context,\n  default: () => browser_default,\n  formatMessages: () => formatMessages,\n  formatMessagesSync: () => formatMessagesSync,\n  initialize: () => initialize,\n  stop: () => stop,\n  transform: () => transform,\n  transformSync: () => transformSync,\n  version: () => version\n});\nmodule.exports = __toCommonJS(browser_exports);\n\n// lib/shared/stdio_protocol.ts\nfunction encodePacket(packet) {\n  let visit = (value) => {\n    if (value === null) {\n      bb.write8(0);\n    } else if (typeof value === \"boolean\") {\n      bb.write8(1);\n      bb.write8(+value);\n    } else if (typeof value === \"number\") {\n      bb.write8(2);\n      bb.write32(value | 0);\n    } else if (typeof value === \"string\") {\n      bb.write8(3);\n      bb.write(encodeUTF8(value));\n    } else if (value instanceof Uint8Array) {\n      bb.write8(4);\n      bb.write(value);\n    } else if (value instanceof Array) {\n      bb.write8(5);\n      bb.write32(value.length);\n      for (let item of value) {\n        visit(item);\n      }\n    } else {\n      let keys = Object.keys(value);\n      bb.write8(6);\n      bb.write32(keys.length);\n      for (let key of keys) {\n        bb.write(encodeUTF8(key));\n        visit(value[key]);\n      }\n    }\n  };\n  let bb = new ByteBuffer();\n  bb.write32(0);\n  bb.write32(packet.id << 1 | +!packet.isRequest);\n  visit(packet.value);\n  writeUInt32LE(bb.buf, bb.len - 4, 0);\n  return bb.buf.subarray(0, bb.len);\n}\nfunction decodePacket(bytes) {\n  let visit = () => {\n    switch (bb.read8()) {\n      case 0:\n        return null;\n      case 1:\n        return !!bb.read8();\n      case 2:\n        return bb.read32();\n      case 3:\n        return decodeUTF8(bb.read());\n      case 4:\n        return bb.read();\n      case 5: {\n        let count = bb.read32();\n        let value2 = [];\n        for (let i = 0; i < count; i++) {\n          value2.push(visit());\n        }\n        return value2;\n      }\n      case 6: {\n        let count = bb.read32();\n        let value2 = {};\n        for (let i = 0; i < count; i++) {\n          value2[decodeUTF8(bb.read())] = visit();\n        }\n        return value2;\n      }\n      default:\n        throw new Error(\"Invalid packet\");\n    }\n  };\n  let bb = new ByteBuffer(bytes);\n  let id = bb.read32();\n  let isRequest = (id & 1) === 0;\n  id >>>= 1;\n  let value = visit();\n  if (bb.ptr !== bytes.length) {\n    throw new Error(\"Invalid packet\");\n  }\n  return { id, isRequest, value };\n}\nvar ByteBuffer = class {\n  constructor(buf = new Uint8Array(1024)) {\n    this.buf = buf;\n    this.len = 0;\n    this.ptr = 0;\n  }\n  _write(delta) {\n    if (this.len + delta > this.buf.length) {\n      let clone = new Uint8Array((this.len + delta) * 2);\n      clone.set(this.buf);\n      this.buf = clone;\n    }\n    this.len += delta;\n    return this.len - delta;\n  }\n  write8(value) {\n    let offset = this._write(1);\n    this.buf[offset] = value;\n  }\n  write32(value) {\n    let offset = this._write(4);\n    writeUInt32LE(this.buf, value, offset);\n  }\n  write(bytes) {\n    let offset = this._write(4 + bytes.length);\n    writeUInt32LE(this.buf, bytes.length, offset);\n    this.buf.set(bytes, offset + 4);\n  }\n  _read(delta) {\n    if (this.ptr + delta > this.buf.length) {\n      throw new Error(\"Invalid packet\");\n    }\n    this.ptr += delta;\n    return this.ptr - delta;\n  }\n  read8() {\n    return this.buf[this._read(1)];\n  }\n  read32() {\n    return readUInt32LE(this.buf, this._read(4));\n  }\n  read() {\n    let length = this.read32();\n    let bytes = new Uint8Array(length);\n    let ptr = this._read(bytes.length);\n    bytes.set(this.buf.subarray(ptr, ptr + length));\n    return bytes;\n  }\n};\nvar encodeUTF8;\nvar decodeUTF8;\nvar encodeInvariant;\nif (typeof TextEncoder !== \"undefined\" && typeof TextDecoder !== \"undefined\") {\n  let encoder = new TextEncoder();\n  let decoder = new TextDecoder();\n  encodeUTF8 = (text) => encoder.encode(text);\n  decodeUTF8 = (bytes) => decoder.decode(bytes);\n  encodeInvariant = 'new TextEncoder().encode(\"\")';\n} else if (typeof Buffer !== \"undefined\") {\n  encodeUTF8 = (text) => Buffer.from(text);\n  decodeUTF8 = (bytes) => {\n    let { buffer, byteOffset, byteLength } = bytes;\n    return Buffer.from(buffer, byteOffset, byteLength).toString();\n  };\n  encodeInvariant = 'Buffer.from(\"\")';\n} else {\n  throw new Error(\"No UTF-8 codec found\");\n}\nif (!(encodeUTF8(\"\") instanceof Uint8Array))\n  throw new Error(`Invariant violation: \"${encodeInvariant} instanceof Uint8Array\" is incorrectly false\n\nThis indicates that your JavaScript environment is broken. You cannot use\nesbuild in this environment because esbuild relies on this invariant. This\nis not a problem with esbuild. You need to fix your environment instead.\n`);\nfunction readUInt32LE(buffer, offset) {\n  return buffer[offset++] | buffer[offset++] << 8 | buffer[offset++] << 16 | buffer[offset++] << 24;\n}\nfunction writeUInt32LE(buffer, value, offset) {\n  buffer[offset++] = value;\n  buffer[offset++] = value >> 8;\n  buffer[offset++] = value >> 16;\n  buffer[offset++] = value >> 24;\n}\n\n// lib/shared/common.ts\nvar quote = JSON.stringify;\nvar buildLogLevelDefault = \"warning\";\nvar transformLogLevelDefault = \"silent\";\nfunction validateAndJoinStringArray(values, what) {\n  const toJoin = [];\n  for (const value of values) {\n    validateStringValue(value, what);\n    if (value.indexOf(\",\") >= 0) throw new Error(`Invalid ${what}: ${value}`);\n    toJoin.push(value);\n  }\n  return toJoin.join(\",\");\n}\nvar canBeAnything = () => null;\nvar mustBeBoolean = (value) => typeof value === \"boolean\" ? null : \"a boolean\";\nvar mustBeString = (value) => typeof value === \"string\" ? null : \"a string\";\nvar mustBeRegExp = (value) => value instanceof RegExp ? null : \"a RegExp object\";\nvar mustBeInteger = (value) => typeof value === \"number\" && value === (value | 0) ? null : \"an integer\";\nvar mustBeValidPortNumber = (value) => typeof value === \"number\" && value === (value | 0) && value >= 0 && value <= 65535 ? null : \"a valid port number\";\nvar mustBeFunction = (value) => typeof value === \"function\" ? null : \"a function\";\nvar mustBeArray = (value) => Array.isArray(value) ? null : \"an array\";\nvar mustBeArrayOfStrings = (value) => Array.isArray(value) && value.every((x) => typeof x === \"string\") ? null : \"an array of strings\";\nvar mustBeObject = (value) => typeof value === \"object\" && value !== null && !Array.isArray(value) ? null : \"an object\";\nvar mustBeEntryPoints = (value) => typeof value === \"object\" && value !== null ? null : \"an array or an object\";\nvar mustBeWebAssemblyModule = (value) => value instanceof WebAssembly.Module ? null : \"a WebAssembly.Module\";\nvar mustBeObjectOrNull = (value) => typeof value === \"object\" && !Array.isArray(value) ? null : \"an object or null\";\nvar mustBeStringOrBoolean = (value) => typeof value === \"string\" || typeof value === \"boolean\" ? null : \"a string or a boolean\";\nvar mustBeStringOrObject = (value) => typeof value === \"string\" || typeof value === \"object\" && value !== null && !Array.isArray(value) ? null : \"a string or an object\";\nvar mustBeStringOrArrayOfStrings = (value) => typeof value === \"string\" || Array.isArray(value) && value.every((x) => typeof x === \"string\") ? null : \"a string or an array of strings\";\nvar mustBeStringOrUint8Array = (value) => typeof value === \"string\" || value instanceof Uint8Array ? null : \"a string or a Uint8Array\";\nvar mustBeStringOrURL = (value) => typeof value === \"string\" || value instanceof URL ? null : \"a string or a URL\";\nfunction getFlag(object, keys, key, mustBeFn) {\n  let value = object[key];\n  keys[key + \"\"] = true;\n  if (value === void 0) return void 0;\n  let mustBe = mustBeFn(value);\n  if (mustBe !== null) throw new Error(`${quote(key)} must be ${mustBe}`);\n  return value;\n}\nfunction checkForInvalidFlags(object, keys, where) {\n  for (let key in object) {\n    if (!(key in keys)) {\n      throw new Error(`Invalid option ${where}: ${quote(key)}`);\n    }\n  }\n}\nfunction validateInitializeOptions(options) {\n  let keys = /* @__PURE__ */ Object.create(null);\n  let wasmURL = getFlag(options, keys, \"wasmURL\", mustBeStringOrURL);\n  let wasmModule = getFlag(options, keys, \"wasmModule\", mustBeWebAssemblyModule);\n  let worker = getFlag(options, keys, \"worker\", mustBeBoolean);\n  checkForInvalidFlags(options, keys, \"in initialize() call\");\n  return {\n    wasmURL,\n    wasmModule,\n    worker\n  };\n}\nfunction validateMangleCache(mangleCache) {\n  let validated;\n  if (mangleCache !== void 0) {\n    validated = /* @__PURE__ */ Object.create(null);\n    for (let key in mangleCache) {\n      let value = mangleCache[key];\n      if (typeof value === \"string\" || value === false) {\n        validated[key] = value;\n      } else {\n        throw new Error(`Expected ${quote(key)} in mangle cache to map to either a string or false`);\n      }\n    }\n  }\n  return validated;\n}\nfunction pushLogFlags(flags, options, keys, isTTY, logLevelDefault) {\n  let color = getFlag(options, keys, \"color\", mustBeBoolean);\n  let logLevel = getFlag(options, keys, \"logLevel\", mustBeString);\n  let logLimit = getFlag(options, keys, \"logLimit\", mustBeInteger);\n  if (color !== void 0) flags.push(`--color=${color}`);\n  else if (isTTY) flags.push(`--color=true`);\n  flags.push(`--log-level=${logLevel || logLevelDefault}`);\n  flags.push(`--log-limit=${logLimit || 0}`);\n}\nfunction validateStringValue(value, what, key) {\n  if (typeof value !== \"string\") {\n    throw new Error(`Expected value for ${what}${key !== void 0 ? \" \" + quote(key) : \"\"} to be a string, got ${typeof value} instead`);\n  }\n  return value;\n}\nfunction pushCommonFlags(flags, options, keys) {\n  let legalComments = getFlag(options, keys, \"legalComments\", mustBeString);\n  let sourceRoot = getFlag(options, keys, \"sourceRoot\", mustBeString);\n  let sourcesContent = getFlag(options, keys, \"sourcesContent\", mustBeBoolean);\n  let target = getFlag(options, keys, \"target\", mustBeStringOrArrayOfStrings);\n  let format = getFlag(options, keys, \"format\", mustBeString);\n  let globalName = getFlag(options, keys, \"globalName\", mustBeString);\n  let mangleProps = getFlag(options, keys, \"mangleProps\", mustBeRegExp);\n  let reserveProps = getFlag(options, keys, \"reserveProps\", mustBeRegExp);\n  let mangleQuoted = getFlag(options, keys, \"mangleQuoted\", mustBeBoolean);\n  let minify = getFlag(options, keys, \"minify\", mustBeBoolean);\n  let minifySyntax = getFlag(options, keys, \"minifySyntax\", mustBeBoolean);\n  let minifyWhitespace = getFlag(options, keys, \"minifyWhitespace\", mustBeBoolean);\n  let minifyIdentifiers = getFlag(options, keys, \"minifyIdentifiers\", mustBeBoolean);\n  let lineLimit = getFlag(options, keys, \"lineLimit\", mustBeInteger);\n  let drop = getFlag(options, keys, \"drop\", mustBeArrayOfStrings);\n  let dropLabels = getFlag(options, keys, \"dropLabels\", mustBeArrayOfStrings);\n  let charset = getFlag(options, keys, \"charset\", mustBeString);\n  let treeShaking = getFlag(options, keys, \"treeShaking\", mustBeBoolean);\n  let ignoreAnnotations = getFlag(options, keys, \"ignoreAnnotations\", mustBeBoolean);\n  let jsx = getFlag(options, keys, \"jsx\", mustBeString);\n  let jsxFactory = getFlag(options, keys, \"jsxFactory\", mustBeString);\n  let jsxFragment = getFlag(options, keys, \"jsxFragment\", mustBeString);\n  let jsxImportSource = getFlag(options, keys, \"jsxImportSource\", mustBeString);\n  let jsxDev = getFlag(options, keys, \"jsxDev\", mustBeBoolean);\n  let jsxSideEffects = getFlag(options, keys, \"jsxSideEffects\", mustBeBoolean);\n  let define = getFlag(options, keys, \"define\", mustBeObject);\n  let logOverride = getFlag(options, keys, \"logOverride\", mustBeObject);\n  let supported = getFlag(options, keys, \"supported\", mustBeObject);\n  let pure = getFlag(options, keys, \"pure\", mustBeArrayOfStrings);\n  let keepNames = getFlag(options, keys, \"keepNames\", mustBeBoolean);\n  let platform = getFlag(options, keys, \"platform\", mustBeString);\n  let tsconfigRaw = getFlag(options, keys, \"tsconfigRaw\", mustBeStringOrObject);\n  let absPaths = getFlag(options, keys, \"absPaths\", mustBeArrayOfStrings);\n  if (legalComments) flags.push(`--legal-comments=${legalComments}`);\n  if (sourceRoot !== void 0) flags.push(`--source-root=${sourceRoot}`);\n  if (sourcesContent !== void 0) flags.push(`--sources-content=${sourcesContent}`);\n  if (target) flags.push(`--target=${validateAndJoinStringArray(Array.isArray(target) ? target : [target], \"target\")}`);\n  if (format) flags.push(`--format=${format}`);\n  if (globalName) flags.push(`--global-name=${globalName}`);\n  if (platform) flags.push(`--platform=${platform}`);\n  if (tsconfigRaw) flags.push(`--tsconfig-raw=${typeof tsconfigRaw === \"string\" ? tsconfigRaw : JSON.stringify(tsconfigRaw)}`);\n  if (minify) flags.push(\"--minify\");\n  if (minifySyntax) flags.push(\"--minify-syntax\");\n  if (minifyWhitespace) flags.push(\"--minify-whitespace\");\n  if (minifyIdentifiers) flags.push(\"--minify-identifiers\");\n  if (lineLimit) flags.push(`--line-limit=${lineLimit}`);\n  if (charset) flags.push(`--charset=${charset}`);\n  if (treeShaking !== void 0) flags.push(`--tree-shaking=${treeShaking}`);\n  if (ignoreAnnotations) flags.push(`--ignore-annotations`);\n  if (drop) for (let what of drop) flags.push(`--drop:${validateStringValue(what, \"drop\")}`);\n  if (dropLabels) flags.push(`--drop-labels=${validateAndJoinStringArray(dropLabels, \"drop label\")}`);\n  if (absPaths) flags.push(`--abs-paths=${validateAndJoinStringArray(absPaths, \"abs paths\")}`);\n  if (mangleProps) flags.push(`--mangle-props=${jsRegExpToGoRegExp(mangleProps)}`);\n  if (reserveProps) flags.push(`--reserve-props=${jsRegExpToGoRegExp(reserveProps)}`);\n  if (mangleQuoted !== void 0) flags.push(`--mangle-quoted=${mangleQuoted}`);\n  if (jsx) flags.push(`--jsx=${jsx}`);\n  if (jsxFactory) flags.push(`--jsx-factory=${jsxFactory}`);\n  if (jsxFragment) flags.push(`--jsx-fragment=${jsxFragment}`);\n  if (jsxImportSource) flags.push(`--jsx-import-source=${jsxImportSource}`);\n  if (jsxDev) flags.push(`--jsx-dev`);\n  if (jsxSideEffects) flags.push(`--jsx-side-effects`);\n  if (define) {\n    for (let key in define) {\n      if (key.indexOf(\"=\") >= 0) throw new Error(`Invalid define: ${key}`);\n      flags.push(`--define:${key}=${validateStringValue(define[key], \"define\", key)}`);\n    }\n  }\n  if (logOverride) {\n    for (let key in logOverride) {\n      if (key.indexOf(\"=\") >= 0) throw new Error(`Invalid log override: ${key}`);\n      flags.push(`--log-override:${key}=${validateStringValue(logOverride[key], \"log override\", key)}`);\n    }\n  }\n  if (supported) {\n    for (let key in supported) {\n      if (key.indexOf(\"=\") >= 0) throw new Error(`Invalid supported: ${key}`);\n      const value = supported[key];\n      if (typeof value !== \"boolean\") throw new Error(`Expected value for supported ${quote(key)} to be a boolean, got ${typeof value} instead`);\n      flags.push(`--supported:${key}=${value}`);\n    }\n  }\n  if (pure) for (let fn of pure) flags.push(`--pure:${validateStringValue(fn, \"pure\")}`);\n  if (keepNames) flags.push(`--keep-names`);\n}\nfunction flagsForBuildOptions(callName, options, isTTY, logLevelDefault, writeDefault) {\n  var _a;\n  let flags = [];\n  let entries = [];\n  let keys = /* @__PURE__ */ Object.create(null);\n  let stdinContents = null;\n  let stdinResolveDir = null;\n  pushLogFlags(flags, options, keys, isTTY, logLevelDefault);\n  pushCommonFlags(flags, options, keys);\n  let sourcemap = getFlag(options, keys, \"sourcemap\", mustBeStringOrBoolean);\n  let bundle = getFlag(options, keys, \"bundle\", mustBeBoolean);\n  let splitting = getFlag(options, keys, \"splitting\", mustBeBoolean);\n  let preserveSymlinks = getFlag(options, keys, \"preserveSymlinks\", mustBeBoolean);\n  let metafile = getFlag(options, keys, \"metafile\", mustBeBoolean);\n  let outfile = getFlag(options, keys, \"outfile\", mustBeString);\n  let outdir = getFlag(options, keys, \"outdir\", mustBeString);\n  let outbase = getFlag(options, keys, \"outbase\", mustBeString);\n  let tsconfig = getFlag(options, keys, \"tsconfig\", mustBeString);\n  let resolveExtensions = getFlag(options, keys, \"resolveExtensions\", mustBeArrayOfStrings);\n  let nodePathsInput = getFlag(options, keys, \"nodePaths\", mustBeArrayOfStrings);\n  let mainFields = getFlag(options, keys, \"mainFields\", mustBeArrayOfStrings);\n  let conditions = getFlag(options, keys, \"conditions\", mustBeArrayOfStrings);\n  let external = getFlag(options, keys, \"external\", mustBeArrayOfStrings);\n  let packages = getFlag(options, keys, \"packages\", mustBeString);\n  let alias = getFlag(options, keys, \"alias\", mustBeObject);\n  let loader = getFlag(options, keys, \"loader\", mustBeObject);\n  let outExtension = getFlag(options, keys, \"outExtension\", mustBeObject);\n  let publicPath = getFlag(options, keys, \"publicPath\", mustBeString);\n  let entryNames = getFlag(options, keys, \"entryNames\", mustBeString);\n  let chunkNames = getFlag(options, keys, \"chunkNames\", mustBeString);\n  let assetNames = getFlag(options, keys, \"assetNames\", mustBeString);\n  let inject = getFlag(options, keys, \"inject\", mustBeArrayOfStrings);\n  let banner = getFlag(options, keys, \"banner\", mustBeObject);\n  let footer = getFlag(options, keys, \"footer\", mustBeObject);\n  let entryPoints = getFlag(options, keys, \"entryPoints\", mustBeEntryPoints);\n  let absWorkingDir = getFlag(options, keys, \"absWorkingDir\", mustBeString);\n  let stdin = getFlag(options, keys, \"stdin\", mustBeObject);\n  let write = (_a = getFlag(options, keys, \"write\", mustBeBoolean)) != null ? _a : writeDefault;\n  let allowOverwrite = getFlag(options, keys, \"allowOverwrite\", mustBeBoolean);\n  let mangleCache = getFlag(options, keys, \"mangleCache\", mustBeObject);\n  keys.plugins = true;\n  checkForInvalidFlags(options, keys, `in ${callName}() call`);\n  if (sourcemap) flags.push(`--sourcemap${sourcemap === true ? \"\" : `=${sourcemap}`}`);\n  if (bundle) flags.push(\"--bundle\");\n  if (allowOverwrite) flags.push(\"--allow-overwrite\");\n  if (splitting) flags.push(\"--splitting\");\n  if (preserveSymlinks) flags.push(\"--preserve-symlinks\");\n  if (metafile) flags.push(`--metafile`);\n  if (outfile) flags.push(`--outfile=${outfile}`);\n  if (outdir) flags.push(`--outdir=${outdir}`);\n  if (outbase) flags.push(`--outbase=${outbase}`);\n  if (tsconfig) flags.push(`--tsconfig=${tsconfig}`);\n  if (packages) flags.push(`--packages=${packages}`);\n  if (resolveExtensions) flags.push(`--resolve-extensions=${validateAndJoinStringArray(resolveExtensions, \"resolve extension\")}`);\n  if (publicPath) flags.push(`--public-path=${publicPath}`);\n  if (entryNames) flags.push(`--entry-names=${entryNames}`);\n  if (chunkNames) flags.push(`--chunk-names=${chunkNames}`);\n  if (assetNames) flags.push(`--asset-names=${assetNames}`);\n  if (mainFields) flags.push(`--main-fields=${validateAndJoinStringArray(mainFields, \"main field\")}`);\n  if (conditions) flags.push(`--conditions=${validateAndJoinStringArray(conditions, \"condition\")}`);\n  if (external) for (let name of external) flags.push(`--external:${validateStringValue(name, \"external\")}`);\n  if (alias) {\n    for (let old in alias) {\n      if (old.indexOf(\"=\") >= 0) throw new Error(`Invalid package name in alias: ${old}`);\n      flags.push(`--alias:${old}=${validateStringValue(alias[old], \"alias\", old)}`);\n    }\n  }\n  if (banner) {\n    for (let type in banner) {\n      if (type.indexOf(\"=\") >= 0) throw new Error(`Invalid banner file type: ${type}`);\n      flags.push(`--banner:${type}=${validateStringValue(banner[type], \"banner\", type)}`);\n    }\n  }\n  if (footer) {\n    for (let type in footer) {\n      if (type.indexOf(\"=\") >= 0) throw new Error(`Invalid footer file type: ${type}`);\n      flags.push(`--footer:${type}=${validateStringValue(footer[type], \"footer\", type)}`);\n    }\n  }\n  if (inject) for (let path of inject) flags.push(`--inject:${validateStringValue(path, \"inject\")}`);\n  if (loader) {\n    for (let ext in loader) {\n      if (ext.indexOf(\"=\") >= 0) throw new Error(`Invalid loader extension: ${ext}`);\n      flags.push(`--loader:${ext}=${validateStringValue(loader[ext], \"loader\", ext)}`);\n    }\n  }\n  if (outExtension) {\n    for (let ext in outExtension) {\n      if (ext.indexOf(\"=\") >= 0) throw new Error(`Invalid out extension: ${ext}`);\n      flags.push(`--out-extension:${ext}=${validateStringValue(outExtension[ext], \"out extension\", ext)}`);\n    }\n  }\n  if (entryPoints) {\n    if (Array.isArray(entryPoints)) {\n      for (let i = 0, n = entryPoints.length; i < n; i++) {\n        let entryPoint = entryPoints[i];\n        if (typeof entryPoint === \"object\" && entryPoint !== null) {\n          let entryPointKeys = /* @__PURE__ */ Object.create(null);\n          let input = getFlag(entryPoint, entryPointKeys, \"in\", mustBeString);\n          let output = getFlag(entryPoint, entryPointKeys, \"out\", mustBeString);\n          checkForInvalidFlags(entryPoint, entryPointKeys, \"in entry point at index \" + i);\n          if (input === void 0) throw new Error('Missing property \"in\" for entry point at index ' + i);\n          if (output === void 0) throw new Error('Missing property \"out\" for entry point at index ' + i);\n          entries.push([output, input]);\n        } else {\n          entries.push([\"\", validateStringValue(entryPoint, \"entry point at index \" + i)]);\n        }\n      }\n    } else {\n      for (let key in entryPoints) {\n        entries.push([key, validateStringValue(entryPoints[key], \"entry point\", key)]);\n      }\n    }\n  }\n  if (stdin) {\n    let stdinKeys = /* @__PURE__ */ Object.create(null);\n    let contents = getFlag(stdin, stdinKeys, \"contents\", mustBeStringOrUint8Array);\n    let resolveDir = getFlag(stdin, stdinKeys, \"resolveDir\", mustBeString);\n    let sourcefile = getFlag(stdin, stdinKeys, \"sourcefile\", mustBeString);\n    let loader2 = getFlag(stdin, stdinKeys, \"loader\", mustBeString);\n    checkForInvalidFlags(stdin, stdinKeys, 'in \"stdin\" object');\n    if (sourcefile) flags.push(`--sourcefile=${sourcefile}`);\n    if (loader2) flags.push(`--loader=${loader2}`);\n    if (resolveDir) stdinResolveDir = resolveDir;\n    if (typeof contents === \"string\") stdinContents = encodeUTF8(contents);\n    else if (contents instanceof Uint8Array) stdinContents = contents;\n  }\n  let nodePaths = [];\n  if (nodePathsInput) {\n    for (let value of nodePathsInput) {\n      value += \"\";\n      nodePaths.push(value);\n    }\n  }\n  return {\n    entries,\n    flags,\n    write,\n    stdinContents,\n    stdinResolveDir,\n    absWorkingDir,\n    nodePaths,\n    mangleCache: validateMangleCache(mangleCache)\n  };\n}\nfunction flagsForTransformOptions(callName, options, isTTY, logLevelDefault) {\n  let flags = [];\n  let keys = /* @__PURE__ */ Object.create(null);\n  pushLogFlags(flags, options, keys, isTTY, logLevelDefault);\n  pushCommonFlags(flags, options, keys);\n  let sourcemap = getFlag(options, keys, \"sourcemap\", mustBeStringOrBoolean);\n  let sourcefile = getFlag(options, keys, \"sourcefile\", mustBeString);\n  let loader = getFlag(options, keys, \"loader\", mustBeString);\n  let banner = getFlag(options, keys, \"banner\", mustBeString);\n  let footer = getFlag(options, keys, \"footer\", mustBeString);\n  let mangleCache = getFlag(options, keys, \"mangleCache\", mustBeObject);\n  checkForInvalidFlags(options, keys, `in ${callName}() call`);\n  if (sourcemap) flags.push(`--sourcemap=${sourcemap === true ? \"external\" : sourcemap}`);\n  if (sourcefile) flags.push(`--sourcefile=${sourcefile}`);\n  if (loader) flags.push(`--loader=${loader}`);\n  if (banner) flags.push(`--banner=${banner}`);\n  if (footer) flags.push(`--footer=${footer}`);\n  return {\n    flags,\n    mangleCache: validateMangleCache(mangleCache)\n  };\n}\nfunction createChannel(streamIn) {\n  const requestCallbacksByKey = {};\n  const closeData = { didClose: false, reason: \"\" };\n  let responseCallbacks = {};\n  let nextRequestID = 0;\n  let nextBuildKey = 0;\n  let stdout = new Uint8Array(16 * 1024);\n  let stdoutUsed = 0;\n  let readFromStdout = (chunk) => {\n    let limit = stdoutUsed + chunk.length;\n    if (limit > stdout.length) {\n      let swap = new Uint8Array(limit * 2);\n      swap.set(stdout);\n      stdout = swap;\n    }\n    stdout.set(chunk, stdoutUsed);\n    stdoutUsed += chunk.length;\n    let offset = 0;\n    while (offset + 4 <= stdoutUsed) {\n      let length = readUInt32LE(stdout, offset);\n      if (offset + 4 + length > stdoutUsed) {\n        break;\n      }\n      offset += 4;\n      handleIncomingPacket(stdout.subarray(offset, offset + length));\n      offset += length;\n    }\n    if (offset > 0) {\n      stdout.copyWithin(0, offset, stdoutUsed);\n      stdoutUsed -= offset;\n    }\n  };\n  let afterClose = (error) => {\n    closeData.didClose = true;\n    if (error) closeData.reason = \": \" + (error.message || error);\n    const text = \"The service was stopped\" + closeData.reason;\n    for (let id in responseCallbacks) {\n      responseCallbacks[id](text, null);\n    }\n    responseCallbacks = {};\n  };\n  let sendRequest = (refs, value, callback) => {\n    if (closeData.didClose) return callback(\"The service is no longer running\" + closeData.reason, null);\n    let id = nextRequestID++;\n    responseCallbacks[id] = (error, response) => {\n      try {\n        callback(error, response);\n      } finally {\n        if (refs) refs.unref();\n      }\n    };\n    if (refs) refs.ref();\n    streamIn.writeToStdin(encodePacket({ id, isRequest: true, value }));\n  };\n  let sendResponse = (id, value) => {\n    if (closeData.didClose) throw new Error(\"The service is no longer running\" + closeData.reason);\n    streamIn.writeToStdin(encodePacket({ id, isRequest: false, value }));\n  };\n  let handleRequest = (id, request) => __async(null, null, function* () {\n    try {\n      if (request.command === \"ping\") {\n        sendResponse(id, {});\n        return;\n      }\n      if (typeof request.key === \"number\") {\n        const requestCallbacks = requestCallbacksByKey[request.key];\n        if (!requestCallbacks) {\n          return;\n        }\n        const callback = requestCallbacks[request.command];\n        if (callback) {\n          yield callback(id, request);\n          return;\n        }\n      }\n      throw new Error(`Invalid command: ` + request.command);\n    } catch (e) {\n      const errors = [extractErrorMessageV8(e, streamIn, null, void 0, \"\")];\n      try {\n        sendResponse(id, { errors });\n      } catch (e2) {\n      }\n    }\n  });\n  let isFirstPacket = true;\n  let handleIncomingPacket = (bytes) => {\n    if (isFirstPacket) {\n      isFirstPacket = false;\n      let binaryVersion = String.fromCharCode(...bytes);\n      if (binaryVersion !== \"0.25.11\") {\n        throw new Error(`Cannot start service: Host version \"${\"0.25.11\"}\" does not match binary version ${quote(binaryVersion)}`);\n      }\n      return;\n    }\n    let packet = decodePacket(bytes);\n    if (packet.isRequest) {\n      handleRequest(packet.id, packet.value);\n    } else {\n      let callback = responseCallbacks[packet.id];\n      delete responseCallbacks[packet.id];\n      if (packet.value.error) callback(packet.value.error, {});\n      else callback(null, packet.value);\n    }\n  };\n  let buildOrContext = ({ callName, refs, options, isTTY, defaultWD, callback }) => {\n    let refCount = 0;\n    const buildKey = nextBuildKey++;\n    const requestCallbacks = {};\n    const buildRefs = {\n      ref() {\n        if (++refCount === 1) {\n          if (refs) refs.ref();\n        }\n      },\n      unref() {\n        if (--refCount === 0) {\n          delete requestCallbacksByKey[buildKey];\n          if (refs) refs.unref();\n        }\n      }\n    };\n    requestCallbacksByKey[buildKey] = requestCallbacks;\n    buildRefs.ref();\n    buildOrContextImpl(\n      callName,\n      buildKey,\n      sendRequest,\n      sendResponse,\n      buildRefs,\n      streamIn,\n      requestCallbacks,\n      options,\n      isTTY,\n      defaultWD,\n      (err, res) => {\n        try {\n          callback(err, res);\n        } finally {\n          buildRefs.unref();\n        }\n      }\n    );\n  };\n  let transform2 = ({ callName, refs, input, options, isTTY, fs, callback }) => {\n    const details = createObjectStash();\n    let start = (inputPath) => {\n      try {\n        if (typeof input !== \"string\" && !(input instanceof Uint8Array))\n          throw new Error('The input to \"transform\" must be a string or a Uint8Array');\n        let {\n          flags,\n          mangleCache\n        } = flagsForTransformOptions(callName, options, isTTY, transformLogLevelDefault);\n        let request = {\n          command: \"transform\",\n          flags,\n          inputFS: inputPath !== null,\n          input: inputPath !== null ? encodeUTF8(inputPath) : typeof input === \"string\" ? encodeUTF8(input) : input\n        };\n        if (mangleCache) request.mangleCache = mangleCache;\n        sendRequest(refs, request, (error, response) => {\n          if (error) return callback(new Error(error), null);\n          let errors = replaceDetailsInMessages(response.errors, details);\n          let warnings = replaceDetailsInMessages(response.warnings, details);\n          let outstanding = 1;\n          let next = () => {\n            if (--outstanding === 0) {\n              let result = {\n                warnings,\n                code: response.code,\n                map: response.map,\n                mangleCache: void 0,\n                legalComments: void 0\n              };\n              if (\"legalComments\" in response) result.legalComments = response == null ? void 0 : response.legalComments;\n              if (response.mangleCache) result.mangleCache = response == null ? void 0 : response.mangleCache;\n              callback(null, result);\n            }\n          };\n          if (errors.length > 0) return callback(failureErrorWithLog(\"Transform failed\", errors, warnings), null);\n          if (response.codeFS) {\n            outstanding++;\n            fs.readFile(response.code, (err, contents) => {\n              if (err !== null) {\n                callback(err, null);\n              } else {\n                response.code = contents;\n                next();\n              }\n            });\n          }\n          if (response.mapFS) {\n            outstanding++;\n            fs.readFile(response.map, (err, contents) => {\n              if (err !== null) {\n                callback(err, null);\n              } else {\n                response.map = contents;\n                next();\n              }\n            });\n          }\n          next();\n        });\n      } catch (e) {\n        let flags = [];\n        try {\n          pushLogFlags(flags, options, {}, isTTY, transformLogLevelDefault);\n        } catch (e2) {\n        }\n        const error = extractErrorMessageV8(e, streamIn, details, void 0, \"\");\n        sendRequest(refs, { command: \"error\", flags, error }, () => {\n          error.detail = details.load(error.detail);\n          callback(failureErrorWithLog(\"Transform failed\", [error], []), null);\n        });\n      }\n    };\n    if ((typeof input === \"string\" || input instanceof Uint8Array) && input.length > 1024 * 1024) {\n      let next = start;\n      start = () => fs.writeFile(input, next);\n    }\n    start(null);\n  };\n  let formatMessages2 = ({ callName, refs, messages, options, callback }) => {\n    if (!options) throw new Error(`Missing second argument in ${callName}() call`);\n    let keys = {};\n    let kind = getFlag(options, keys, \"kind\", mustBeString);\n    let color = getFlag(options, keys, \"color\", mustBeBoolean);\n    let terminalWidth = getFlag(options, keys, \"terminalWidth\", mustBeInteger);\n    checkForInvalidFlags(options, keys, `in ${callName}() call`);\n    if (kind === void 0) throw new Error(`Missing \"kind\" in ${callName}() call`);\n    if (kind !== \"error\" && kind !== \"warning\") throw new Error(`Expected \"kind\" to be \"error\" or \"warning\" in ${callName}() call`);\n    let request = {\n      command: \"format-msgs\",\n      messages: sanitizeMessages(messages, \"messages\", null, \"\", terminalWidth),\n      isWarning: kind === \"warning\"\n    };\n    if (color !== void 0) request.color = color;\n    if (terminalWidth !== void 0) request.terminalWidth = terminalWidth;\n    sendRequest(refs, request, (error, response) => {\n      if (error) return callback(new Error(error), null);\n      callback(null, response.messages);\n    });\n  };\n  let analyzeMetafile2 = ({ callName, refs, metafile, options, callback }) => {\n    if (options === void 0) options = {};\n    let keys = {};\n    let color = getFlag(options, keys, \"color\", mustBeBoolean);\n    let verbose = getFlag(options, keys, \"verbose\", mustBeBoolean);\n    checkForInvalidFlags(options, keys, `in ${callName}() call`);\n    let request = {\n      command: \"analyze-metafile\",\n      metafile\n    };\n    if (color !== void 0) request.color = color;\n    if (verbose !== void 0) request.verbose = verbose;\n    sendRequest(refs, request, (error, response) => {\n      if (error) return callback(new Error(error), null);\n      callback(null, response.result);\n    });\n  };\n  return {\n    readFromStdout,\n    afterClose,\n    service: {\n      buildOrContext,\n      transform: transform2,\n      formatMessages: formatMessages2,\n      analyzeMetafile: analyzeMetafile2\n    }\n  };\n}\nfunction buildOrContextImpl(callName, buildKey, sendRequest, sendResponse, refs, streamIn, requestCallbacks, options, isTTY, defaultWD, callback) {\n  const details = createObjectStash();\n  const isContext = callName === \"context\";\n  const handleError = (e, pluginName) => {\n    const flags = [];\n    try {\n      pushLogFlags(flags, options, {}, isTTY, buildLogLevelDefault);\n    } catch (e2) {\n    }\n    const message = extractErrorMessageV8(e, streamIn, details, void 0, pluginName);\n    sendRequest(refs, { command: \"error\", flags, error: message }, () => {\n      message.detail = details.load(message.detail);\n      callback(failureErrorWithLog(isContext ? \"Context failed\" : \"Build failed\", [message], []), null);\n    });\n  };\n  let plugins;\n  if (typeof options === \"object\") {\n    const value = options.plugins;\n    if (value !== void 0) {\n      if (!Array.isArray(value)) return handleError(new Error(`\"plugins\" must be an array`), \"\");\n      plugins = value;\n    }\n  }\n  if (plugins && plugins.length > 0) {\n    if (streamIn.isSync) return handleError(new Error(\"Cannot use plugins in synchronous API calls\"), \"\");\n    handlePlugins(\n      buildKey,\n      sendRequest,\n      sendResponse,\n      refs,\n      streamIn,\n      requestCallbacks,\n      options,\n      plugins,\n      details\n    ).then(\n      (result) => {\n        if (!result.ok) return handleError(result.error, result.pluginName);\n        try {\n          buildOrContextContinue(result.requestPlugins, result.runOnEndCallbacks, result.scheduleOnDisposeCallbacks);\n        } catch (e) {\n          handleError(e, \"\");\n        }\n      },\n      (e) => handleError(e, \"\")\n    );\n    return;\n  }\n  try {\n    buildOrContextContinue(null, (result, done) => done([], []), () => {\n    });\n  } catch (e) {\n    handleError(e, \"\");\n  }\n  function buildOrContextContinue(requestPlugins, runOnEndCallbacks, scheduleOnDisposeCallbacks) {\n    const writeDefault = streamIn.hasFS;\n    const {\n      entries,\n      flags,\n      write,\n      stdinContents,\n      stdinResolveDir,\n      absWorkingDir,\n      nodePaths,\n      mangleCache\n    } = flagsForBuildOptions(callName, options, isTTY, buildLogLevelDefault, writeDefault);\n    if (write && !streamIn.hasFS) throw new Error(`The \"write\" option is unavailable in this environment`);\n    const request = {\n      command: \"build\",\n      key: buildKey,\n      entries,\n      flags,\n      write,\n      stdinContents,\n      stdinResolveDir,\n      absWorkingDir: absWorkingDir || defaultWD,\n      nodePaths,\n      context: isContext\n    };\n    if (requestPlugins) request.plugins = requestPlugins;\n    if (mangleCache) request.mangleCache = mangleCache;\n    const buildResponseToResult = (response, callback2) => {\n      const result = {\n        errors: replaceDetailsInMessages(response.errors, details),\n        warnings: replaceDetailsInMessages(response.warnings, details),\n        outputFiles: void 0,\n        metafile: void 0,\n        mangleCache: void 0\n      };\n      const originalErrors = result.errors.slice();\n      const originalWarnings = result.warnings.slice();\n      if (response.outputFiles) result.outputFiles = response.outputFiles.map(convertOutputFiles);\n      if (response.metafile) result.metafile = JSON.parse(response.metafile);\n      if (response.mangleCache) result.mangleCache = response.mangleCache;\n      if (response.writeToStdout !== void 0) console.log(decodeUTF8(response.writeToStdout).replace(/\\n$/, \"\"));\n      runOnEndCallbacks(result, (onEndErrors, onEndWarnings) => {\n        if (originalErrors.length > 0 || onEndErrors.length > 0) {\n          const error = failureErrorWithLog(\"Build failed\", originalErrors.concat(onEndErrors), originalWarnings.concat(onEndWarnings));\n          return callback2(error, null, onEndErrors, onEndWarnings);\n        }\n        callback2(null, result, onEndErrors, onEndWarnings);\n      });\n    };\n    let latestResultPromise;\n    let provideLatestResult;\n    if (isContext)\n      requestCallbacks[\"on-end\"] = (id, request2) => new Promise((resolve) => {\n        buildResponseToResult(request2, (err, result, onEndErrors, onEndWarnings) => {\n          const response = {\n            errors: onEndErrors,\n            warnings: onEndWarnings\n          };\n          if (provideLatestResult) provideLatestResult(err, result);\n          latestResultPromise = void 0;\n          provideLatestResult = void 0;\n          sendResponse(id, response);\n          resolve();\n        });\n      });\n    sendRequest(refs, request, (error, response) => {\n      if (error) return callback(new Error(error), null);\n      if (!isContext) {\n        return buildResponseToResult(response, (err, res) => {\n          scheduleOnDisposeCallbacks();\n          return callback(err, res);\n        });\n      }\n      if (response.errors.length > 0) {\n        return callback(failureErrorWithLog(\"Context failed\", response.errors, response.warnings), null);\n      }\n      let didDispose = false;\n      const result = {\n        rebuild: () => {\n          if (!latestResultPromise) latestResultPromise = new Promise((resolve, reject) => {\n            let settlePromise;\n            provideLatestResult = (err, result2) => {\n              if (!settlePromise) settlePromise = () => err ? reject(err) : resolve(result2);\n            };\n            const triggerAnotherBuild = () => {\n              const request2 = {\n                command: \"rebuild\",\n                key: buildKey\n              };\n              sendRequest(refs, request2, (error2, response2) => {\n                if (error2) {\n                  reject(new Error(error2));\n                } else if (settlePromise) {\n                  settlePromise();\n                } else {\n                  triggerAnotherBuild();\n                }\n              });\n            };\n            triggerAnotherBuild();\n          });\n          return latestResultPromise;\n        },\n        watch: (options2 = {}) => new Promise((resolve, reject) => {\n          if (!streamIn.hasFS) throw new Error(`Cannot use the \"watch\" API in this environment`);\n          const keys = {};\n          const delay = getFlag(options2, keys, \"delay\", mustBeInteger);\n          checkForInvalidFlags(options2, keys, `in watch() call`);\n          const request2 = {\n            command: \"watch\",\n            key: buildKey\n          };\n          if (delay) request2.delay = delay;\n          sendRequest(refs, request2, (error2) => {\n            if (error2) reject(new Error(error2));\n            else resolve(void 0);\n          });\n        }),\n        serve: (options2 = {}) => new Promise((resolve, reject) => {\n          if (!streamIn.hasFS) throw new Error(`Cannot use the \"serve\" API in this environment`);\n          const keys = {};\n          const port = getFlag(options2, keys, \"port\", mustBeValidPortNumber);\n          const host = getFlag(options2, keys, \"host\", mustBeString);\n          const servedir = getFlag(options2, keys, \"servedir\", mustBeString);\n          const keyfile = getFlag(options2, keys, \"keyfile\", mustBeString);\n          const certfile = getFlag(options2, keys, \"certfile\", mustBeString);\n          const fallback = getFlag(options2, keys, \"fallback\", mustBeString);\n          const cors = getFlag(options2, keys, \"cors\", mustBeObject);\n          const onRequest = getFlag(options2, keys, \"onRequest\", mustBeFunction);\n          checkForInvalidFlags(options2, keys, `in serve() call`);\n          const request2 = {\n            command: \"serve\",\n            key: buildKey,\n            onRequest: !!onRequest\n          };\n          if (port !== void 0) request2.port = port;\n          if (host !== void 0) request2.host = host;\n          if (servedir !== void 0) request2.servedir = servedir;\n          if (keyfile !== void 0) request2.keyfile = keyfile;\n          if (certfile !== void 0) request2.certfile = certfile;\n          if (fallback !== void 0) request2.fallback = fallback;\n          if (cors) {\n            const corsKeys = {};\n            const origin = getFlag(cors, corsKeys, \"origin\", mustBeStringOrArrayOfStrings);\n            checkForInvalidFlags(cors, corsKeys, `on \"cors\" object`);\n            if (Array.isArray(origin)) request2.corsOrigin = origin;\n            else if (origin !== void 0) request2.corsOrigin = [origin];\n          }\n          sendRequest(refs, request2, (error2, response2) => {\n            if (error2) return reject(new Error(error2));\n            if (onRequest) {\n              requestCallbacks[\"serve-request\"] = (id, request3) => {\n                onRequest(request3.args);\n                sendResponse(id, {});\n              };\n            }\n            resolve(response2);\n          });\n        }),\n        cancel: () => new Promise((resolve) => {\n          if (didDispose) return resolve();\n          const request2 = {\n            command: \"cancel\",\n            key: buildKey\n          };\n          sendRequest(refs, request2, () => {\n            resolve();\n          });\n        }),\n        dispose: () => new Promise((resolve) => {\n          if (didDispose) return resolve();\n          didDispose = true;\n          const request2 = {\n            command: \"dispose\",\n            key: buildKey\n          };\n          sendRequest(refs, request2, () => {\n            resolve();\n            scheduleOnDisposeCallbacks();\n            refs.unref();\n          });\n        })\n      };\n      refs.ref();\n      callback(null, result);\n    });\n  }\n}\nvar handlePlugins = (buildKey, sendRequest, sendResponse, refs, streamIn, requestCallbacks, initialOptions, plugins, details) => __async(null, null, function* () {\n  let onStartCallbacks = [];\n  let onEndCallbacks = [];\n  let onResolveCallbacks = {};\n  let onLoadCallbacks = {};\n  let onDisposeCallbacks = [];\n  let nextCallbackID = 0;\n  let i = 0;\n  let requestPlugins = [];\n  let isSetupDone = false;\n  plugins = [...plugins];\n  for (let item of plugins) {\n    let keys = {};\n    if (typeof item !== \"object\") throw new Error(`Plugin at index ${i} must be an object`);\n    const name = getFlag(item, keys, \"name\", mustBeString);\n    if (typeof name !== \"string\" || name === \"\") throw new Error(`Plugin at index ${i} is missing a name`);\n    try {\n      let setup = getFlag(item, keys, \"setup\", mustBeFunction);\n      if (typeof setup !== \"function\") throw new Error(`Plugin is missing a setup function`);\n      checkForInvalidFlags(item, keys, `on plugin ${quote(name)}`);\n      let plugin = {\n        name,\n        onStart: false,\n        onEnd: false,\n        onResolve: [],\n        onLoad: []\n      };\n      i++;\n      let resolve = (path, options = {}) => {\n        if (!isSetupDone) throw new Error('Cannot call \"resolve\" before plugin setup has completed');\n        if (typeof path !== \"string\") throw new Error(`The path to resolve must be a string`);\n        let keys2 = /* @__PURE__ */ Object.create(null);\n        let pluginName = getFlag(options, keys2, \"pluginName\", mustBeString);\n        let importer = getFlag(options, keys2, \"importer\", mustBeString);\n        let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n        let resolveDir = getFlag(options, keys2, \"resolveDir\", mustBeString);\n        let kind = getFlag(options, keys2, \"kind\", mustBeString);\n        let pluginData = getFlag(options, keys2, \"pluginData\", canBeAnything);\n        let importAttributes = getFlag(options, keys2, \"with\", mustBeObject);\n        checkForInvalidFlags(options, keys2, \"in resolve() call\");\n        return new Promise((resolve2, reject) => {\n          const request = {\n            command: \"resolve\",\n            path,\n            key: buildKey,\n            pluginName: name\n          };\n          if (pluginName != null) request.pluginName = pluginName;\n          if (importer != null) request.importer = importer;\n          if (namespace != null) request.namespace = namespace;\n          if (resolveDir != null) request.resolveDir = resolveDir;\n          if (kind != null) request.kind = kind;\n          else throw new Error(`Must specify \"kind\" when calling \"resolve\"`);\n          if (pluginData != null) request.pluginData = details.store(pluginData);\n          if (importAttributes != null) request.with = sanitizeStringMap(importAttributes, \"with\");\n          sendRequest(refs, request, (error, response) => {\n            if (error !== null) reject(new Error(error));\n            else resolve2({\n              errors: replaceDetailsInMessages(response.errors, details),\n              warnings: replaceDetailsInMessages(response.warnings, details),\n              path: response.path,\n              external: response.external,\n              sideEffects: response.sideEffects,\n              namespace: response.namespace,\n              suffix: response.suffix,\n              pluginData: details.load(response.pluginData)\n            });\n          });\n        });\n      };\n      let promise = setup({\n        initialOptions,\n        resolve,\n        onStart(callback) {\n          let registeredText = `This error came from the \"onStart\" callback registered here:`;\n          let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onStart\");\n          onStartCallbacks.push({ name, callback, note: registeredNote });\n          plugin.onStart = true;\n        },\n        onEnd(callback) {\n          let registeredText = `This error came from the \"onEnd\" callback registered here:`;\n          let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onEnd\");\n          onEndCallbacks.push({ name, callback, note: registeredNote });\n          plugin.onEnd = true;\n        },\n        onResolve(options, callback) {\n          let registeredText = `This error came from the \"onResolve\" callback registered here:`;\n          let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onResolve\");\n          let keys2 = {};\n          let filter = getFlag(options, keys2, \"filter\", mustBeRegExp);\n          let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n          checkForInvalidFlags(options, keys2, `in onResolve() call for plugin ${quote(name)}`);\n          if (filter == null) throw new Error(`onResolve() call is missing a filter`);\n          let id = nextCallbackID++;\n          onResolveCallbacks[id] = { name, callback, note: registeredNote };\n          plugin.onResolve.push({ id, filter: jsRegExpToGoRegExp(filter), namespace: namespace || \"\" });\n        },\n        onLoad(options, callback) {\n          let registeredText = `This error came from the \"onLoad\" callback registered here:`;\n          let registeredNote = extractCallerV8(new Error(registeredText), streamIn, \"onLoad\");\n          let keys2 = {};\n          let filter = getFlag(options, keys2, \"filter\", mustBeRegExp);\n          let namespace = getFlag(options, keys2, \"namespace\", mustBeString);\n          checkForInvalidFlags(options, keys2, `in onLoad() call for plugin ${quote(name)}`);\n          if (filter == null) throw new Error(`onLoad() call is missing a filter`);\n          let id = nextCallbackID++;\n          onLoadCallbacks[id] = { name, callback, note: registeredNote };\n          plugin.onLoad.push({ id, filter: jsRegExpToGoRegExp(filter), namespace: namespace || \"\" });\n        },\n        onDispose(callback) {\n          onDisposeCallbacks.push(callback);\n        },\n        esbuild: streamIn.esbuild\n      });\n      if (promise) yield promise;\n      requestPlugins.push(plugin);\n    } catch (e) {\n      return { ok: false, error: e, pluginName: name };\n    }\n  }\n  requestCallbacks[\"on-start\"] = (id, request) => __async(null, null, function* () {\n    details.clear();\n    let response = { errors: [], warnings: [] };\n    yield Promise.all(onStartCallbacks.map((_0) => __async(null, [_0], function* ({ name, callback, note }) {\n      try {\n        let result = yield callback();\n        if (result != null) {\n          if (typeof result !== \"object\") throw new Error(`Expected onStart() callback in plugin ${quote(name)} to return an object`);\n          let keys = {};\n          let errors = getFlag(result, keys, \"errors\", mustBeArray);\n          let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n          checkForInvalidFlags(result, keys, `from onStart() callback in plugin ${quote(name)}`);\n          if (errors != null) response.errors.push(...sanitizeMessages(errors, \"errors\", details, name, void 0));\n          if (warnings != null) response.warnings.push(...sanitizeMessages(warnings, \"warnings\", details, name, void 0));\n        }\n      } catch (e) {\n        response.errors.push(extractErrorMessageV8(e, streamIn, details, note && note(), name));\n      }\n    })));\n    sendResponse(id, response);\n  });\n  requestCallbacks[\"on-resolve\"] = (id, request) => __async(null, null, function* () {\n    let response = {}, name = \"\", callback, note;\n    for (let id2 of request.ids) {\n      try {\n        ({ name, callback, note } = onResolveCallbacks[id2]);\n        let result = yield callback({\n          path: request.path,\n          importer: request.importer,\n          namespace: request.namespace,\n          resolveDir: request.resolveDir,\n          kind: request.kind,\n          pluginData: details.load(request.pluginData),\n          with: request.with\n        });\n        if (result != null) {\n          if (typeof result !== \"object\") throw new Error(`Expected onResolve() callback in plugin ${quote(name)} to return an object`);\n          let keys = {};\n          let pluginName = getFlag(result, keys, \"pluginName\", mustBeString);\n          let path = getFlag(result, keys, \"path\", mustBeString);\n          let namespace = getFlag(result, keys, \"namespace\", mustBeString);\n          let suffix = getFlag(result, keys, \"suffix\", mustBeString);\n          let external = getFlag(result, keys, \"external\", mustBeBoolean);\n          let sideEffects = getFlag(result, keys, \"sideEffects\", mustBeBoolean);\n          let pluginData = getFlag(result, keys, \"pluginData\", canBeAnything);\n          let errors = getFlag(result, keys, \"errors\", mustBeArray);\n          let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n          let watchFiles = getFlag(result, keys, \"watchFiles\", mustBeArrayOfStrings);\n          let watchDirs = getFlag(result, keys, \"watchDirs\", mustBeArrayOfStrings);\n          checkForInvalidFlags(result, keys, `from onResolve() callback in plugin ${quote(name)}`);\n          response.id = id2;\n          if (pluginName != null) response.pluginName = pluginName;\n          if (path != null) response.path = path;\n          if (namespace != null) response.namespace = namespace;\n          if (suffix != null) response.suffix = suffix;\n          if (external != null) response.external = external;\n          if (sideEffects != null) response.sideEffects = sideEffects;\n          if (pluginData != null) response.pluginData = details.store(pluginData);\n          if (errors != null) response.errors = sanitizeMessages(errors, \"errors\", details, name, void 0);\n          if (warnings != null) response.warnings = sanitizeMessages(warnings, \"warnings\", details, name, void 0);\n          if (watchFiles != null) response.watchFiles = sanitizeStringArray(watchFiles, \"watchFiles\");\n          if (watchDirs != null) response.watchDirs = sanitizeStringArray(watchDirs, \"watchDirs\");\n          break;\n        }\n      } catch (e) {\n        response = { id: id2, errors: [extractErrorMessageV8(e, streamIn, details, note && note(), name)] };\n        break;\n      }\n    }\n    sendResponse(id, response);\n  });\n  requestCallbacks[\"on-load\"] = (id, request) => __async(null, null, function* () {\n    let response = {}, name = \"\", callback, note;\n    for (let id2 of request.ids) {\n      try {\n        ({ name, callback, note } = onLoadCallbacks[id2]);\n        let result = yield callback({\n          path: request.path,\n          namespace: request.namespace,\n          suffix: request.suffix,\n          pluginData: details.load(request.pluginData),\n          with: request.with\n        });\n        if (result != null) {\n          if (typeof result !== \"object\") throw new Error(`Expected onLoad() callback in plugin ${quote(name)} to return an object`);\n          let keys = {};\n          let pluginName = getFlag(result, keys, \"pluginName\", mustBeString);\n          let contents = getFlag(result, keys, \"contents\", mustBeStringOrUint8Array);\n          let resolveDir = getFlag(result, keys, \"resolveDir\", mustBeString);\n          let pluginData = getFlag(result, keys, \"pluginData\", canBeAnything);\n          let loader = getFlag(result, keys, \"loader\", mustBeString);\n          let errors = getFlag(result, keys, \"errors\", mustBeArray);\n          let warnings = getFlag(result, keys, \"warnings\", mustBeArray);\n          let watchFiles = getFlag(result, keys, \"watchFiles\", mustBeArrayOfStrings);\n          let watchDirs = getFlag(result, keys, \"watchDirs\", mustBeArrayOfStrings);\n          checkForInvalidFlags(result, keys, `from onLoad() callback in plugin ${quote(name)}`);\n          response.id = id2;\n          if (pluginName != null) response.pluginName = pluginName;\n          if (contents instanceof Uint8Array) response.contents = contents;\n          else if (contents != null) response.contents = encodeUTF8(contents);\n          if (resolveDir != null) response.resolveDir = resolveDir;\n          if (pluginData != null) response.pluginData = details.store(pluginData);\n          if (loader != null) response.loader = loader;\n          if (errors != null) response.errors = sanitizeMessages(errors, \"errors\", details, name, void 0);\n          if (warnings != null) response.warnings = sanitizeMessages(warnings, \"warnings\", details, name, void 0);\n          if (watchFiles != null) response.watchFiles = sanitizeStringArray(watchFiles, \"watchFiles\");\n          if (watchDirs != null) response.watchDirs = sanitizeStringArray(watchDirs, \"watchDirs\");\n          break;\n        }\n      } catch (e) {\n        response = { id: id2, errors: [extractErrorMessageV8(e, streamIn, details, note && note(), name)] };\n        break;\n      }\n    }\n    sendResponse(id, response);\n  });\n  let runOnEndCallbacks = (result, done) => done([], []);\n  if (onEndCallbacks.length > 0) {\n    runOnEndCallbacks = (result, done) => {\n      (() => __async(null, null, function* () {\n        const onEndErrors = [];\n        const onEndWarnings = [];\n        for (const { name, callback, note } of onEndCallbacks) {\n          let newErrors;\n          let newWarnings;\n          try {\n            const value = yield callback(result);\n            if (value != null) {\n              if (typeof value !== \"object\") throw new Error(`Expected onEnd() callback in plugin ${quote(name)} to return an object`);\n              let keys = {};\n              let errors = getFlag(value, keys, \"errors\", mustBeArray);\n              let warnings = getFlag(value, keys, \"warnings\", mustBeArray);\n              checkForInvalidFlags(value, keys, `from onEnd() callback in plugin ${quote(name)}`);\n              if (errors != null) newErrors = sanitizeMessages(errors, \"errors\", details, name, void 0);\n              if (warnings != null) newWarnings = sanitizeMessages(warnings, \"warnings\", details, name, void 0);\n            }\n          } catch (e) {\n            newErrors = [extractErrorMessageV8(e, streamIn, details, note && note(), name)];\n          }\n          if (newErrors) {\n            onEndErrors.push(...newErrors);\n            try {\n              result.errors.push(...newErrors);\n            } catch (e) {\n            }\n          }\n          if (newWarnings) {\n            onEndWarnings.push(...newWarnings);\n            try {\n              result.warnings.push(...newWarnings);\n            } catch (e) {\n            }\n          }\n        }\n        done(onEndErrors, onEndWarnings);\n      }))();\n    };\n  }\n  let scheduleOnDisposeCallbacks = () => {\n    for (const cb of onDisposeCallbacks) {\n      setTimeout(() => cb(), 0);\n    }\n  };\n  isSetupDone = true;\n  return {\n    ok: true,\n    requestPlugins,\n    runOnEndCallbacks,\n    scheduleOnDisposeCallbacks\n  };\n});\nfunction createObjectStash() {\n  const map = /* @__PURE__ */ new Map();\n  let nextID = 0;\n  return {\n    clear() {\n      map.clear();\n    },\n    load(id) {\n      return map.get(id);\n    },\n    store(value) {\n      if (value === void 0) return -1;\n      const id = nextID++;\n      map.set(id, value);\n      return id;\n    }\n  };\n}\nfunction extractCallerV8(e, streamIn, ident) {\n  let note;\n  let tried = false;\n  return () => {\n    if (tried) return note;\n    tried = true;\n    try {\n      let lines = (e.stack + \"\").split(\"\\n\");\n      lines.splice(1, 1);\n      let location2 = parseStackLinesV8(streamIn, lines, ident);\n      if (location2) {\n        note = { text: e.message, location: location2 };\n        return note;\n      }\n    } catch (e2) {\n    }\n  };\n}\nfunction extractErrorMessageV8(e, streamIn, stash, note, pluginName) {\n  let text = \"Internal error\";\n  let location2 = null;\n  try {\n    text = (e && e.message || e) + \"\";\n  } catch (e2) {\n  }\n  try {\n    location2 = parseStackLinesV8(streamIn, (e.stack + \"\").split(\"\\n\"), \"\");\n  } catch (e2) {\n  }\n  return { id: \"\", pluginName, text, location: location2, notes: note ? [note] : [], detail: stash ? stash.store(e) : -1 };\n}\nfunction parseStackLinesV8(streamIn, lines, ident) {\n  let at = \"    at \";\n  if (streamIn.readFileSync && !lines[0].startsWith(at) && lines[1].startsWith(at)) {\n    for (let i = 1; i < lines.length; i++) {\n      let line = lines[i];\n      if (!line.startsWith(at)) continue;\n      line = line.slice(at.length);\n      while (true) {\n        let match = /^(?:new |async )?\\S+ \\((.*)\\)$/.exec(line);\n        if (match) {\n          line = match[1];\n          continue;\n        }\n        match = /^eval at \\S+ \\((.*)\\)(?:, \\S+:\\d+:\\d+)?$/.exec(line);\n        if (match) {\n          line = match[1];\n          continue;\n        }\n        match = /^(\\S+):(\\d+):(\\d+)$/.exec(line);\n        if (match) {\n          let contents;\n          try {\n            contents = streamIn.readFileSync(match[1], \"utf8\");\n          } catch (e) {\n            break;\n          }\n          let lineText = contents.split(/\\r\\n|\\r|\\n|\\u2028|\\u2029/)[+match[2] - 1] || \"\";\n          let column = +match[3] - 1;\n          let length = lineText.slice(column, column + ident.length) === ident ? ident.length : 0;\n          return {\n            file: match[1],\n            namespace: \"file\",\n            line: +match[2],\n            column: encodeUTF8(lineText.slice(0, column)).length,\n            length: encodeUTF8(lineText.slice(column, column + length)).length,\n            lineText: lineText + \"\\n\" + lines.slice(1).join(\"\\n\"),\n            suggestion: \"\"\n          };\n        }\n        break;\n      }\n    }\n  }\n  return null;\n}\nfunction failureErrorWithLog(text, errors, warnings) {\n  let limit = 5;\n  text += errors.length < 1 ? \"\" : ` with ${errors.length} error${errors.length < 2 ? \"\" : \"s\"}:` + errors.slice(0, limit + 1).map((e, i) => {\n    if (i === limit) return \"\\n...\";\n    if (!e.location) return `\nerror: ${e.text}`;\n    let { file, line, column } = e.location;\n    let pluginText = e.pluginName ? `[plugin: ${e.pluginName}] ` : \"\";\n    return `\n${file}:${line}:${column}: ERROR: ${pluginText}${e.text}`;\n  }).join(\"\");\n  let error = new Error(text);\n  for (const [key, value] of [[\"errors\", errors], [\"warnings\", warnings]]) {\n    Object.defineProperty(error, key, {\n      configurable: true,\n      enumerable: true,\n      get: () => value,\n      set: (value2) => Object.defineProperty(error, key, {\n        configurable: true,\n        enumerable: true,\n        value: value2\n      })\n    });\n  }\n  return error;\n}\nfunction replaceDetailsInMessages(messages, stash) {\n  for (const message of messages) {\n    message.detail = stash.load(message.detail);\n  }\n  return messages;\n}\nfunction sanitizeLocation(location2, where, terminalWidth) {\n  if (location2 == null) return null;\n  let keys = {};\n  let file = getFlag(location2, keys, \"file\", mustBeString);\n  let namespace = getFlag(location2, keys, \"namespace\", mustBeString);\n  let line = getFlag(location2, keys, \"line\", mustBeInteger);\n  let column = getFlag(location2, keys, \"column\", mustBeInteger);\n  let length = getFlag(location2, keys, \"length\", mustBeInteger);\n  let lineText = getFlag(location2, keys, \"lineText\", mustBeString);\n  let suggestion = getFlag(location2, keys, \"suggestion\", mustBeString);\n  checkForInvalidFlags(location2, keys, where);\n  if (lineText) {\n    const relevantASCII = lineText.slice(\n      0,\n      (column && column > 0 ? column : 0) + (length && length > 0 ? length : 0) + (terminalWidth && terminalWidth > 0 ? terminalWidth : 80)\n    );\n    if (!/[\\x7F-\\uFFFF]/.test(relevantASCII) && !/\\n/.test(lineText)) {\n      lineText = relevantASCII;\n    }\n  }\n  return {\n    file: file || \"\",\n    namespace: namespace || \"\",\n    line: line || 0,\n    column: column || 0,\n    length: length || 0,\n    lineText: lineText || \"\",\n    suggestion: suggestion || \"\"\n  };\n}\nfunction sanitizeMessages(messages, property, stash, fallbackPluginName, terminalWidth) {\n  let messagesClone = [];\n  let index = 0;\n  for (const message of messages) {\n    let keys = {};\n    let id = getFlag(message, keys, \"id\", mustBeString);\n    let pluginName = getFlag(message, keys, \"pluginName\", mustBeString);\n    let text = getFlag(message, keys, \"text\", mustBeString);\n    let location2 = getFlag(message, keys, \"location\", mustBeObjectOrNull);\n    let notes = getFlag(message, keys, \"notes\", mustBeArray);\n    let detail = getFlag(message, keys, \"detail\", canBeAnything);\n    let where = `in element ${index} of \"${property}\"`;\n    checkForInvalidFlags(message, keys, where);\n    let notesClone = [];\n    if (notes) {\n      for (const note of notes) {\n        let noteKeys = {};\n        let noteText = getFlag(note, noteKeys, \"text\", mustBeString);\n        let noteLocation = getFlag(note, noteKeys, \"location\", mustBeObjectOrNull);\n        checkForInvalidFlags(note, noteKeys, where);\n        notesClone.push({\n          text: noteText || \"\",\n          location: sanitizeLocation(noteLocation, where, terminalWidth)\n        });\n      }\n    }\n    messagesClone.push({\n      id: id || \"\",\n      pluginName: pluginName || fallbackPluginName,\n      text: text || \"\",\n      location: sanitizeLocation(location2, where, terminalWidth),\n      notes: notesClone,\n      detail: stash ? stash.store(detail) : -1\n    });\n    index++;\n  }\n  return messagesClone;\n}\nfunction sanitizeStringArray(values, property) {\n  const result = [];\n  for (const value of values) {\n    if (typeof value !== \"string\") throw new Error(`${quote(property)} must be an array of strings`);\n    result.push(value);\n  }\n  return result;\n}\nfunction sanitizeStringMap(map, property) {\n  const result = /* @__PURE__ */ Object.create(null);\n  for (const key in map) {\n    const value = map[key];\n    if (typeof value !== \"string\") throw new Error(`key ${quote(key)} in object ${quote(property)} must be a string`);\n    result[key] = value;\n  }\n  return result;\n}\nfunction convertOutputFiles({ path, contents, hash }) {\n  let text = null;\n  return {\n    path,\n    contents,\n    hash,\n    get text() {\n      const binary = this.contents;\n      if (text === null || binary !== contents) {\n        contents = binary;\n        text = decodeUTF8(binary);\n      }\n      return text;\n    }\n  };\n}\nfunction jsRegExpToGoRegExp(regexp) {\n  let result = regexp.source;\n  if (regexp.flags) result = `(?${regexp.flags})${result}`;\n  return result;\n}\n\n// lib/npm/browser.ts\nvar version = \"0.25.11\";\nvar build = (options) => ensureServiceIsRunning().build(options);\nvar context = (options) => ensureServiceIsRunning().context(options);\nvar transform = (input, options) => ensureServiceIsRunning().transform(input, options);\nvar formatMessages = (messages, options) => ensureServiceIsRunning().formatMessages(messages, options);\nvar analyzeMetafile = (metafile, options) => ensureServiceIsRunning().analyzeMetafile(metafile, options);\nvar buildSync = () => {\n  throw new Error(`The \"buildSync\" API only works in node`);\n};\nvar transformSync = () => {\n  throw new Error(`The \"transformSync\" API only works in node`);\n};\nvar formatMessagesSync = () => {\n  throw new Error(`The \"formatMessagesSync\" API only works in node`);\n};\nvar analyzeMetafileSync = () => {\n  throw new Error(`The \"analyzeMetafileSync\" API only works in node`);\n};\nvar stop = () => {\n  if (stopService) stopService();\n  return Promise.resolve();\n};\nvar initializePromise;\nvar stopService;\nvar longLivedService;\nvar ensureServiceIsRunning = () => {\n  if (longLivedService) return longLivedService;\n  if (initializePromise) throw new Error('You need to wait for the promise returned from \"initialize\" to be resolved before calling this');\n  throw new Error('You need to call \"initialize\" before calling this');\n};\nvar initialize = (options) => {\n  options = validateInitializeOptions(options || {});\n  let wasmURL = options.wasmURL;\n  let wasmModule = options.wasmModule;\n  let useWorker = options.worker !== false;\n  if (!wasmURL && !wasmModule) throw new Error('Must provide either the \"wasmURL\" option or the \"wasmModule\" option');\n  if (initializePromise) throw new Error('Cannot call \"initialize\" more than once');\n  initializePromise = startRunningService(wasmURL || \"\", wasmModule, useWorker);\n  initializePromise.catch(() => {\n    initializePromise = void 0;\n  });\n  return initializePromise;\n};\nvar startRunningService = (wasmURL, wasmModule, useWorker) => __async(null, null, function* () {\n  let worker;\n  let rejectAllWith;\n  const rejectAllPromise = new Promise((resolve) => rejectAllWith = resolve);\n  if (useWorker) {\n    let blob = new Blob([`onmessage=${'((postMessage) => {\\n      // Copyright 2018 The Go Authors. All rights reserved.\\n      // Use of this source code is governed by a BSD-style\\n      // license that can be found in the LICENSE file.\\n      var __async = (__this, __arguments, generator) => {\\n        return new Promise((resolve, reject) => {\\n          var fulfilled = (value) => {\\n            try {\\n              step(generator.next(value));\\n            } catch (e) {\\n              reject(e);\\n            }\\n          };\\n          var rejected = (value) => {\\n            try {\\n              step(generator.throw(value));\\n            } catch (e) {\\n              reject(e);\\n            }\\n          };\\n          var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\\n          step((generator = generator.apply(__this, __arguments)).next());\\n        });\\n      };\\n      let onmessage;\\n      let globalThis = {};\\n      for (let o = self; o; o = Object.getPrototypeOf(o))\\n        for (let k of Object.getOwnPropertyNames(o))\\n          if (!(k in globalThis))\\n            Object.defineProperty(globalThis, k, { get: () => self[k] });\\n      \"use strict\";\\n      (() => {\\n        const enosys = () => {\\n          const err = new Error(\"not implemented\");\\n          err.code = \"ENOSYS\";\\n          return err;\\n        };\\n        if (!globalThis.fs) {\\n          let outputBuf = \"\";\\n          globalThis.fs = {\\n            constants: { O_WRONLY: -1, O_RDWR: -1, O_CREAT: -1, O_TRUNC: -1, O_APPEND: -1, O_EXCL: -1 },\\n            // unused\\n            writeSync(fd, buf) {\\n              outputBuf += decoder.decode(buf);\\n              const nl = outputBuf.lastIndexOf(\"\\\\n\");\\n              if (nl != -1) {\\n                console.log(outputBuf.substring(0, nl));\\n                outputBuf = outputBuf.substring(nl + 1);\\n              }\\n              return buf.length;\\n            },\\n            write(fd, buf, offset, length, position, callback) {\\n              if (offset !== 0 || length !== buf.length || position !== null) {\\n                callback(enosys());\\n                return;\\n              }\\n              const n = this.writeSync(fd, buf);\\n              callback(null, n);\\n            },\\n            chmod(path, mode, callback) {\\n              callback(enosys());\\n            },\\n            chown(path, uid, gid, callback) {\\n              callback(enosys());\\n            },\\n            close(fd, callback) {\\n              callback(enosys());\\n            },\\n            fchmod(fd, mode, callback) {\\n              callback(enosys());\\n            },\\n            fchown(fd, uid, gid, callback) {\\n              callback(enosys());\\n            },\\n            fstat(fd, callback) {\\n              callback(enosys());\\n            },\\n            fsync(fd, callback) {\\n              callback(null);\\n            },\\n            ftruncate(fd, length, callback) {\\n              callback(enosys());\\n            },\\n            lchown(path, uid, gid, callback) {\\n              callback(enosys());\\n            },\\n            link(path, link, callback) {\\n              callback(enosys());\\n            },\\n            lstat(path, callback) {\\n              callback(enosys());\\n            },\\n            mkdir(path, perm, callback) {\\n              callback(enosys());\\n            },\\n            open(path, flags, mode, callback) {\\n              callback(enosys());\\n            },\\n            read(fd, buffer, offset, length, position, callback) {\\n              callback(enosys());\\n            },\\n            readdir(path, callback) {\\n              callback(enosys());\\n            },\\n            readlink(path, callback) {\\n              callback(enosys());\\n            },\\n            rename(from, to, callback) {\\n              callback(enosys());\\n            },\\n            rmdir(path, callback) {\\n              callback(enosys());\\n            },\\n            stat(path, callback) {\\n              callback(enosys());\\n            },\\n            symlink(path, link, callback) {\\n              callback(enosys());\\n            },\\n            truncate(path, length, callback) {\\n              callback(enosys());\\n            },\\n            unlink(path, callback) {\\n              callback(enosys());\\n            },\\n            utimes(path, atime, mtime, callback) {\\n              callback(enosys());\\n            }\\n          };\\n        }\\n        if (!globalThis.process) {\\n          globalThis.process = {\\n            getuid() {\\n              return -1;\\n            },\\n            getgid() {\\n              return -1;\\n            },\\n            geteuid() {\\n              return -1;\\n            },\\n            getegid() {\\n              return -1;\\n            },\\n            getgroups() {\\n              throw enosys();\\n            },\\n            pid: -1,\\n            ppid: -1,\\n            umask() {\\n              throw enosys();\\n            },\\n            cwd() {\\n              throw enosys();\\n            },\\n            chdir() {\\n              throw enosys();\\n            }\\n          };\\n        }\\n        if (!globalThis.crypto) {\\n          throw new Error(\"globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)\");\\n        }\\n        if (!globalThis.performance) {\\n          throw new Error(\"globalThis.performance is not available, polyfill required (performance.now only)\");\\n        }\\n        if (!globalThis.TextEncoder) {\\n          throw new Error(\"globalThis.TextEncoder is not available, polyfill required\");\\n        }\\n        if (!globalThis.TextDecoder) {\\n          throw new Error(\"globalThis.TextDecoder is not available, polyfill required\");\\n        }\\n        const encoder = new TextEncoder(\"utf-8\");\\n        const decoder = new TextDecoder(\"utf-8\");\\n        globalThis.Go = class {\\n          constructor() {\\n            this.argv = [\"js\"];\\n            this.env = {};\\n            this.exit = (code) => {\\n              if (code !== 0) {\\n                console.warn(\"exit code:\", code);\\n              }\\n            };\\n            this._exitPromise = new Promise((resolve) => {\\n              this._resolveExitPromise = resolve;\\n            });\\n            this._pendingEvent = null;\\n            this._scheduledTimeouts = /* @__PURE__ */ new Map();\\n            this._nextCallbackTimeoutID = 1;\\n            const setInt64 = (addr, v) => {\\n              this.mem.setUint32(addr + 0, v, true);\\n              this.mem.setUint32(addr + 4, Math.floor(v / 4294967296), true);\\n            };\\n            const setInt32 = (addr, v) => {\\n              this.mem.setUint32(addr + 0, v, true);\\n            };\\n            const getInt64 = (addr) => {\\n              const low = this.mem.getUint32(addr + 0, true);\\n              const high = this.mem.getInt32(addr + 4, true);\\n              return low + high * 4294967296;\\n            };\\n            const loadValue = (addr) => {\\n              const f = this.mem.getFloat64(addr, true);\\n              if (f === 0) {\\n                return void 0;\\n              }\\n              if (!isNaN(f)) {\\n                return f;\\n              }\\n              const id = this.mem.getUint32(addr, true);\\n              return this._values[id];\\n            };\\n            const storeValue = (addr, v) => {\\n              const nanHead = 2146959360;\\n              if (typeof v === \"number\" && v !== 0) {\\n                if (isNaN(v)) {\\n                  this.mem.setUint32(addr + 4, nanHead, true);\\n                  this.mem.setUint32(addr, 0, true);\\n                  return;\\n                }\\n                this.mem.setFloat64(addr, v, true);\\n                return;\\n              }\\n              if (v === void 0) {\\n                this.mem.setFloat64(addr, 0, true);\\n                return;\\n              }\\n              let id = this._ids.get(v);\\n              if (id === void 0) {\\n                id = this._idPool.pop();\\n                if (id === void 0) {\\n                  id = this._values.length;\\n                }\\n                this._values[id] = v;\\n                this._goRefCounts[id] = 0;\\n                this._ids.set(v, id);\\n              }\\n              this._goRefCounts[id]++;\\n              let typeFlag = 0;\\n              switch (typeof v) {\\n                case \"object\":\\n                  if (v !== null) {\\n                    typeFlag = 1;\\n                  }\\n                  break;\\n                case \"string\":\\n                  typeFlag = 2;\\n                  break;\\n                case \"symbol\":\\n                  typeFlag = 3;\\n                  break;\\n                case \"function\":\\n                  typeFlag = 4;\\n                  break;\\n              }\\n              this.mem.setUint32(addr + 4, nanHead | typeFlag, true);\\n              this.mem.setUint32(addr, id, true);\\n            };\\n            const loadSlice = (addr) => {\\n              const array = getInt64(addr + 0);\\n              const len = getInt64(addr + 8);\\n              return new Uint8Array(this._inst.exports.mem.buffer, array, len);\\n            };\\n            const loadSliceOfValues = (addr) => {\\n              const array = getInt64(addr + 0);\\n              const len = getInt64(addr + 8);\\n              const a = new Array(len);\\n              for (let i = 0; i < len; i++) {\\n                a[i] = loadValue(array + i * 8);\\n              }\\n              return a;\\n            };\\n            const loadString = (addr) => {\\n              const saddr = getInt64(addr + 0);\\n              const len = getInt64(addr + 8);\\n              return decoder.decode(new DataView(this._inst.exports.mem.buffer, saddr, len));\\n            };\\n            const timeOrigin = Date.now() - performance.now();\\n            this.importObject = {\\n              _gotest: {\\n                add: (a, b) => a + b\\n              },\\n              gojs: {\\n                // Go\\'s SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)\\n                // may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported\\n                // function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).\\n                // This changes the SP, thus we have to update the SP used by the imported function.\\n                // func wasmExit(code int32)\\n                \"runtime.wasmExit\": (sp) => {\\n                  sp >>>= 0;\\n                  const code = this.mem.getInt32(sp + 8, true);\\n                  this.exited = true;\\n                  delete this._inst;\\n                  delete this._values;\\n                  delete this._goRefCounts;\\n                  delete this._ids;\\n                  delete this._idPool;\\n                  this.exit(code);\\n                },\\n                // func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)\\n                \"runtime.wasmWrite\": (sp) => {\\n                  sp >>>= 0;\\n                  const fd = getInt64(sp + 8);\\n                  const p = getInt64(sp + 16);\\n                  const n = this.mem.getInt32(sp + 24, true);\\n                  globalThis.fs.writeSync(fd, new Uint8Array(this._inst.exports.mem.buffer, p, n));\\n                },\\n                // func resetMemoryDataView()\\n                \"runtime.resetMemoryDataView\": (sp) => {\\n                  sp >>>= 0;\\n                  this.mem = new DataView(this._inst.exports.mem.buffer);\\n                },\\n                // func nanotime1() int64\\n                \"runtime.nanotime1\": (sp) => {\\n                  sp >>>= 0;\\n                  setInt64(sp + 8, (timeOrigin + performance.now()) * 1e6);\\n                },\\n                // func walltime() (sec int64, nsec int32)\\n                \"runtime.walltime\": (sp) => {\\n                  sp >>>= 0;\\n                  const msec = (/* @__PURE__ */ new Date()).getTime();\\n                  setInt64(sp + 8, msec / 1e3);\\n                  this.mem.setInt32(sp + 16, msec % 1e3 * 1e6, true);\\n                },\\n                // func scheduleTimeoutEvent(delay int64) int32\\n                \"runtime.scheduleTimeoutEvent\": (sp) => {\\n                  sp >>>= 0;\\n                  const id = this._nextCallbackTimeoutID;\\n                  this._nextCallbackTimeoutID++;\\n                  this._scheduledTimeouts.set(id, setTimeout(\\n                    () => {\\n                      this._resume();\\n                      while (this._scheduledTimeouts.has(id)) {\\n                        console.warn(\"scheduleTimeoutEvent: missed timeout event\");\\n                        this._resume();\\n                      }\\n                    },\\n                    getInt64(sp + 8)\\n                  ));\\n                  this.mem.setInt32(sp + 16, id, true);\\n                },\\n                // func clearTimeoutEvent(id int32)\\n                \"runtime.clearTimeoutEvent\": (sp) => {\\n                  sp >>>= 0;\\n                  const id = this.mem.getInt32(sp + 8, true);\\n                  clearTimeout(this._scheduledTimeouts.get(id));\\n                  this._scheduledTimeouts.delete(id);\\n                },\\n                // func getRandomData(r []byte)\\n                \"runtime.getRandomData\": (sp) => {\\n                  sp >>>= 0;\\n                  crypto.getRandomValues(loadSlice(sp + 8));\\n                },\\n                // func finalizeRef(v ref)\\n                \"syscall/js.finalizeRef\": (sp) => {\\n                  sp >>>= 0;\\n                  const id = this.mem.getUint32(sp + 8, true);\\n                  this._goRefCounts[id]--;\\n                  if (this._goRefCounts[id] === 0) {\\n                    const v = this._values[id];\\n                    this._values[id] = null;\\n                    this._ids.delete(v);\\n                    this._idPool.push(id);\\n                  }\\n                },\\n                // func stringVal(value string) ref\\n                \"syscall/js.stringVal\": (sp) => {\\n                  sp >>>= 0;\\n                  storeValue(sp + 24, loadString(sp + 8));\\n                },\\n                // func valueGet(v ref, p string) ref\\n                \"syscall/js.valueGet\": (sp) => {\\n                  sp >>>= 0;\\n                  const result = Reflect.get(loadValue(sp + 8), loadString(sp + 16));\\n                  sp = this._inst.exports.getsp() >>> 0;\\n                  storeValue(sp + 32, result);\\n                },\\n                // func valueSet(v ref, p string, x ref)\\n                \"syscall/js.valueSet\": (sp) => {\\n                  sp >>>= 0;\\n                  Reflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32));\\n                },\\n                // func valueDelete(v ref, p string)\\n                \"syscall/js.valueDelete\": (sp) => {\\n                  sp >>>= 0;\\n                  Reflect.deleteProperty(loadValue(sp + 8), loadString(sp + 16));\\n                },\\n                // func valueIndex(v ref, i int) ref\\n                \"syscall/js.valueIndex\": (sp) => {\\n                  sp >>>= 0;\\n                  storeValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)));\\n                },\\n                // valueSetIndex(v ref, i int, x ref)\\n                \"syscall/js.valueSetIndex\": (sp) => {\\n                  sp >>>= 0;\\n                  Reflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24));\\n                },\\n                // func valueCall(v ref, m string, args []ref) (ref, bool)\\n                \"syscall/js.valueCall\": (sp) => {\\n                  sp >>>= 0;\\n                  try {\\n                    const v = loadValue(sp + 8);\\n                    const m = Reflect.get(v, loadString(sp + 16));\\n                    const args = loadSliceOfValues(sp + 32);\\n                    const result = Reflect.apply(m, v, args);\\n                    sp = this._inst.exports.getsp() >>> 0;\\n                    storeValue(sp + 56, result);\\n                    this.mem.setUint8(sp + 64, 1);\\n                  } catch (err) {\\n                    sp = this._inst.exports.getsp() >>> 0;\\n                    storeValue(sp + 56, err);\\n                    this.mem.setUint8(sp + 64, 0);\\n                  }\\n                },\\n                // func valueInvoke(v ref, args []ref) (ref, bool)\\n                \"syscall/js.valueInvoke\": (sp) => {\\n                  sp >>>= 0;\\n                  try {\\n                    const v = loadValue(sp + 8);\\n                    const args = loadSliceOfValues(sp + 16);\\n                    const result = Reflect.apply(v, void 0, args);\\n                    sp = this._inst.exports.getsp() >>> 0;\\n                    storeValue(sp + 40, result);\\n                    this.mem.setUint8(sp + 48, 1);\\n                  } catch (err) {\\n                    sp = this._inst.exports.getsp() >>> 0;\\n                    storeValue(sp + 40, err);\\n                    this.mem.setUint8(sp + 48, 0);\\n                  }\\n                },\\n                // func valueNew(v ref, args []ref) (ref, bool)\\n                \"syscall/js.valueNew\": (sp) => {\\n                  sp >>>= 0;\\n                  try {\\n                    const v = loadValue(sp + 8);\\n                    const args = loadSliceOfValues(sp + 16);\\n                    const result = Reflect.construct(v, args);\\n                    sp = this._inst.exports.getsp() >>> 0;\\n                    storeValue(sp + 40, result);\\n                    this.mem.setUint8(sp + 48, 1);\\n                  } catch (err) {\\n                    sp = this._inst.exports.getsp() >>> 0;\\n                    storeValue(sp + 40, err);\\n                    this.mem.setUint8(sp + 48, 0);\\n                  }\\n                },\\n                // func valueLength(v ref) int\\n                \"syscall/js.valueLength\": (sp) => {\\n                  sp >>>= 0;\\n                  setInt64(sp + 16, parseInt(loadValue(sp + 8).length));\\n                },\\n                // valuePrepareString(v ref) (ref, int)\\n                \"syscall/js.valuePrepareString\": (sp) => {\\n                  sp >>>= 0;\\n                  const str = encoder.encode(String(loadValue(sp + 8)));\\n                  storeValue(sp + 16, str);\\n                  setInt64(sp + 24, str.length);\\n                },\\n                // valueLoadString(v ref, b []byte)\\n                \"syscall/js.valueLoadString\": (sp) => {\\n                  sp >>>= 0;\\n                  const str = loadValue(sp + 8);\\n                  loadSlice(sp + 16).set(str);\\n                },\\n                // func valueInstanceOf(v ref, t ref) bool\\n                \"syscall/js.valueInstanceOf\": (sp) => {\\n                  sp >>>= 0;\\n                  this.mem.setUint8(sp + 24, loadValue(sp + 8) instanceof loadValue(sp + 16) ? 1 : 0);\\n                },\\n                // func copyBytesToGo(dst []byte, src ref) (int, bool)\\n                \"syscall/js.copyBytesToGo\": (sp) => {\\n                  sp >>>= 0;\\n                  const dst = loadSlice(sp + 8);\\n                  const src = loadValue(sp + 32);\\n                  if (!(src instanceof Uint8Array || src instanceof Uint8ClampedArray)) {\\n                    this.mem.setUint8(sp + 48, 0);\\n                    return;\\n                  }\\n                  const toCopy = src.subarray(0, dst.length);\\n                  dst.set(toCopy);\\n                  setInt64(sp + 40, toCopy.length);\\n                  this.mem.setUint8(sp + 48, 1);\\n                },\\n                // func copyBytesToJS(dst ref, src []byte) (int, bool)\\n                \"syscall/js.copyBytesToJS\": (sp) => {\\n                  sp >>>= 0;\\n                  const dst = loadValue(sp + 8);\\n                  const src = loadSlice(sp + 16);\\n                  if (!(dst instanceof Uint8Array || dst instanceof Uint8ClampedArray)) {\\n                    this.mem.setUint8(sp + 48, 0);\\n                    return;\\n                  }\\n                  const toCopy = src.subarray(0, dst.length);\\n                  dst.set(toCopy);\\n                  setInt64(sp + 40, toCopy.length);\\n                  this.mem.setUint8(sp + 48, 1);\\n                },\\n                \"debug\": (value) => {\\n                  console.log(value);\\n                }\\n              }\\n            };\\n          }\\n          run(instance) {\\n            return __async(this, null, function* () {\\n              if (!(instance instanceof WebAssembly.Instance)) {\\n                throw new Error(\"Go.run: WebAssembly.Instance expected\");\\n              }\\n              this._inst = instance;\\n              this.mem = new DataView(this._inst.exports.mem.buffer);\\n              this._values = [\\n                // JS values that Go currently has references to, indexed by reference id\\n                NaN,\\n                0,\\n                null,\\n                true,\\n                false,\\n                globalThis,\\n                this\\n              ];\\n              this._goRefCounts = new Array(this._values.length).fill(Infinity);\\n              this._ids = /* @__PURE__ */ new Map([\\n                // mapping from JS values to reference ids\\n                [0, 1],\\n                [null, 2],\\n                [true, 3],\\n                [false, 4],\\n                [globalThis, 5],\\n                [this, 6]\\n              ]);\\n              this._idPool = [];\\n              this.exited = false;\\n              let offset = 4096;\\n              const strPtr = (str) => {\\n                const ptr = offset;\\n                const bytes = encoder.encode(str + \"\\\\0\");\\n                new Uint8Array(this.mem.buffer, offset, bytes.length).set(bytes);\\n                offset += bytes.length;\\n                if (offset % 8 !== 0) {\\n                  offset += 8 - offset % 8;\\n                }\\n                return ptr;\\n              };\\n              const argc = this.argv.length;\\n              const argvPtrs = [];\\n              this.argv.forEach((arg) => {\\n                argvPtrs.push(strPtr(arg));\\n              });\\n              argvPtrs.push(0);\\n              const keys = Object.keys(this.env).sort();\\n              keys.forEach((key) => {\\n                argvPtrs.push(strPtr(`${key}=${this.env[key]}`));\\n              });\\n              argvPtrs.push(0);\\n              const argv = offset;\\n              argvPtrs.forEach((ptr) => {\\n                this.mem.setUint32(offset, ptr, true);\\n                this.mem.setUint32(offset + 4, 0, true);\\n                offset += 8;\\n              });\\n              const wasmMinDataAddr = 4096 + 8192;\\n              if (offset >= wasmMinDataAddr) {\\n                throw new Error(\"total length of command line and environment variables exceeds limit\");\\n              }\\n              this._inst.exports.run(argc, argv);\\n              if (this.exited) {\\n                this._resolveExitPromise();\\n              }\\n              yield this._exitPromise;\\n            });\\n          }\\n          _resume() {\\n            if (this.exited) {\\n              throw new Error(\"Go program has already exited\");\\n            }\\n            this._inst.exports.resume();\\n            if (this.exited) {\\n              this._resolveExitPromise();\\n            }\\n          }\\n          _makeFuncWrapper(id) {\\n            const go = this;\\n            return function() {\\n              const event = { id, this: this, args: arguments };\\n              go._pendingEvent = event;\\n              go._resume();\\n              return event.result;\\n            };\\n          }\\n        };\\n      })();\\n      onmessage = ({ data: wasm }) => {\\n        let decoder = new TextDecoder();\\n        let fs = globalThis.fs;\\n        let stderr = \"\";\\n        fs.writeSync = (fd, buffer) => {\\n          if (fd === 1) {\\n            postMessage(buffer);\\n          } else if (fd === 2) {\\n            stderr += decoder.decode(buffer);\\n            let parts = stderr.split(\"\\\\n\");\\n            if (parts.length > 1) console.log(parts.slice(0, -1).join(\"\\\\n\"));\\n            stderr = parts[parts.length - 1];\\n          } else {\\n            throw new Error(\"Bad write\");\\n          }\\n          return buffer.length;\\n        };\\n        let stdin = [];\\n        let resumeStdin;\\n        let stdinPos = 0;\\n        onmessage = ({ data }) => {\\n          if (data.length > 0) {\\n            stdin.push(data);\\n            if (resumeStdin) resumeStdin();\\n          }\\n          return go;\\n        };\\n        fs.read = (fd, buffer, offset, length, position, callback) => {\\n          if (fd !== 0 || offset !== 0 || length !== buffer.length || position !== null) {\\n            throw new Error(\"Bad read\");\\n          }\\n          if (stdin.length === 0) {\\n            resumeStdin = () => fs.read(fd, buffer, offset, length, position, callback);\\n            return;\\n          }\\n          let first = stdin[0];\\n          let count = Math.max(0, Math.min(length, first.length - stdinPos));\\n          buffer.set(first.subarray(stdinPos, stdinPos + count), offset);\\n          stdinPos += count;\\n          if (stdinPos === first.length) {\\n            stdin.shift();\\n            stdinPos = 0;\\n          }\\n          callback(null, count);\\n        };\\n        let go = new globalThis.Go();\\n        go.argv = [\"\", `--service=${\"0.25.11\"}`];\\n        tryToInstantiateModule(wasm, go).then(\\n          (instance) => {\\n            postMessage(null);\\n            go.run(instance);\\n          },\\n          (error) => {\\n            postMessage(error);\\n          }\\n        );\\n        return go;\\n      };\\n      function tryToInstantiateModule(wasm, go) {\\n        return __async(this, null, function* () {\\n          if (wasm instanceof WebAssembly.Module) {\\n            return WebAssembly.instantiate(wasm, go.importObject);\\n          }\\n          const res = yield fetch(wasm);\\n          if (!res.ok) throw new Error(`Failed to download ${JSON.stringify(wasm)}`);\\n          if (\"instantiateStreaming\" in WebAssembly && /^application\\\\/wasm($|;)/i.test(res.headers.get(\"Content-Type\") || \"\")) {\\n            const result2 = yield WebAssembly.instantiateStreaming(res, go.importObject);\\n            return result2.instance;\\n          }\\n          const bytes = yield res.arrayBuffer();\\n          const result = yield WebAssembly.instantiate(bytes, go.importObject);\\n          return result.instance;\\n        });\\n      }\\n      return (m) => onmessage(m);\\n    })'}(postMessage)`], { type: \"text/javascript\" });\n    worker = new Worker(URL.createObjectURL(blob));\n  } else {\n    let onmessage = ((postMessage) => {\n      // Copyright 2018 The Go Authors. All rights reserved.\n      // Use of this source code is governed by a BSD-style\n      // license that can be found in the LICENSE file.\n      var __async = (__this, __arguments, generator) => {\n        return new Promise((resolve, reject) => {\n          var fulfilled = (value) => {\n            try {\n              step(generator.next(value));\n            } catch (e) {\n              reject(e);\n            }\n          };\n          var rejected = (value) => {\n            try {\n              step(generator.throw(value));\n            } catch (e) {\n              reject(e);\n            }\n          };\n          var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n          step((generator = generator.apply(__this, __arguments)).next());\n        });\n      };\n      let onmessage;\n      let globalThis = {};\n      for (let o = self; o; o = Object.getPrototypeOf(o))\n        for (let k of Object.getOwnPropertyNames(o))\n          if (!(k in globalThis))\n            Object.defineProperty(globalThis, k, { get: () => self[k] });\n      \"use strict\";\n      (() => {\n        const enosys = () => {\n          const err = new Error(\"not implemented\");\n          err.code = \"ENOSYS\";\n          return err;\n        };\n        if (!globalThis.fs) {\n          let outputBuf = \"\";\n          globalThis.fs = {\n            constants: { O_WRONLY: -1, O_RDWR: -1, O_CREAT: -1, O_TRUNC: -1, O_APPEND: -1, O_EXCL: -1 },\n            // unused\n            writeSync(fd, buf) {\n              outputBuf += decoder.decode(buf);\n              const nl = outputBuf.lastIndexOf(\"\\n\");\n              if (nl != -1) {\n                console.log(outputBuf.substring(0, nl));\n                outputBuf = outputBuf.substring(nl + 1);\n              }\n              return buf.length;\n            },\n            write(fd, buf, offset, length, position, callback) {\n              if (offset !== 0 || length !== buf.length || position !== null) {\n                callback(enosys());\n                return;\n              }\n              const n = this.writeSync(fd, buf);\n              callback(null, n);\n            },\n            chmod(path, mode, callback) {\n              callback(enosys());\n            },\n            chown(path, uid, gid, callback) {\n              callback(enosys());\n            },\n            close(fd, callback) {\n              callback(enosys());\n            },\n            fchmod(fd, mode, callback) {\n              callback(enosys());\n            },\n            fchown(fd, uid, gid, callback) {\n              callback(enosys());\n            },\n            fstat(fd, callback) {\n              callback(enosys());\n            },\n            fsync(fd, callback) {\n              callback(null);\n            },\n            ftruncate(fd, length, callback) {\n              callback(enosys());\n            },\n            lchown(path, uid, gid, callback) {\n              callback(enosys());\n            },\n            link(path, link, callback) {\n              callback(enosys());\n            },\n            lstat(path, callback) {\n              callback(enosys());\n            },\n            mkdir(path, perm, callback) {\n              callback(enosys());\n            },\n            open(path, flags, mode, callback) {\n              callback(enosys());\n            },\n            read(fd, buffer, offset, length, position, callback) {\n              callback(enosys());\n            },\n            readdir(path, callback) {\n              callback(enosys());\n            },\n            readlink(path, callback) {\n              callback(enosys());\n            },\n            rename(from, to, callback) {\n              callback(enosys());\n            },\n            rmdir(path, callback) {\n              callback(enosys());\n            },\n            stat(path, callback) {\n              callback(enosys());\n            },\n            symlink(path, link, callback) {\n              callback(enosys());\n            },\n            truncate(path, length, callback) {\n              callback(enosys());\n            },\n            unlink(path, callback) {\n              callback(enosys());\n            },\n            utimes(path, atime, mtime, callback) {\n              callback(enosys());\n            }\n          };\n        }\n        if (!globalThis.process) {\n          globalThis.process = {\n            getuid() {\n              return -1;\n            },\n            getgid() {\n              return -1;\n            },\n            geteuid() {\n              return -1;\n            },\n            getegid() {\n              return -1;\n            },\n            getgroups() {\n              throw enosys();\n            },\n            pid: -1,\n            ppid: -1,\n            umask() {\n              throw enosys();\n            },\n            cwd() {\n              throw enosys();\n            },\n            chdir() {\n              throw enosys();\n            }\n          };\n        }\n        if (!globalThis.crypto) {\n          throw new Error(\"globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)\");\n        }\n        if (!globalThis.performance) {\n          throw new Error(\"globalThis.performance is not available, polyfill required (performance.now only)\");\n        }\n        if (!globalThis.TextEncoder) {\n          throw new Error(\"globalThis.TextEncoder is not available, polyfill required\");\n        }\n        if (!globalThis.TextDecoder) {\n          throw new Error(\"globalThis.TextDecoder is not available, polyfill required\");\n        }\n        const encoder = new TextEncoder(\"utf-8\");\n        const decoder = new TextDecoder(\"utf-8\");\n        globalThis.Go = class {\n          constructor() {\n            this.argv = [\"js\"];\n            this.env = {};\n            this.exit = (code) => {\n              if (code !== 0) {\n                console.warn(\"exit code:\", code);\n              }\n            };\n            this._exitPromise = new Promise((resolve) => {\n              this._resolveExitPromise = resolve;\n            });\n            this._pendingEvent = null;\n            this._scheduledTimeouts = /* @__PURE__ */ new Map();\n            this._nextCallbackTimeoutID = 1;\n            const setInt64 = (addr, v) => {\n              this.mem.setUint32(addr + 0, v, true);\n              this.mem.setUint32(addr + 4, Math.floor(v / 4294967296), true);\n            };\n            const setInt32 = (addr, v) => {\n              this.mem.setUint32(addr + 0, v, true);\n            };\n            const getInt64 = (addr) => {\n              const low = this.mem.getUint32(addr + 0, true);\n              const high = this.mem.getInt32(addr + 4, true);\n              return low + high * 4294967296;\n            };\n            const loadValue = (addr) => {\n              const f = this.mem.getFloat64(addr, true);\n              if (f === 0) {\n                return void 0;\n              }\n              if (!isNaN(f)) {\n                return f;\n              }\n              const id = this.mem.getUint32(addr, true);\n              return this._values[id];\n            };\n            const storeValue = (addr, v) => {\n              const nanHead = 2146959360;\n              if (typeof v === \"number\" && v !== 0) {\n                if (isNaN(v)) {\n                  this.mem.setUint32(addr + 4, nanHead, true);\n                  this.mem.setUint32(addr, 0, true);\n                  return;\n                }\n                this.mem.setFloat64(addr, v, true);\n                return;\n              }\n              if (v === void 0) {\n                this.mem.setFloat64(addr, 0, true);\n                return;\n              }\n              let id = this._ids.get(v);\n              if (id === void 0) {\n                id = this._idPool.pop();\n                if (id === void 0) {\n                  id = this._values.length;\n                }\n                this._values[id] = v;\n                this._goRefCounts[id] = 0;\n                this._ids.set(v, id);\n              }\n              this._goRefCounts[id]++;\n              let typeFlag = 0;\n              switch (typeof v) {\n                case \"object\":\n                  if (v !== null) {\n                    typeFlag = 1;\n                  }\n                  break;\n                case \"string\":\n                  typeFlag = 2;\n                  break;\n                case \"symbol\":\n                  typeFlag = 3;\n                  break;\n                case \"function\":\n                  typeFlag = 4;\n                  break;\n              }\n              this.mem.setUint32(addr + 4, nanHead | typeFlag, true);\n              this.mem.setUint32(addr, id, true);\n            };\n            const loadSlice = (addr) => {\n              const array = getInt64(addr + 0);\n              const len = getInt64(addr + 8);\n              return new Uint8Array(this._inst.exports.mem.buffer, array, len);\n            };\n            const loadSliceOfValues = (addr) => {\n              const array = getInt64(addr + 0);\n              const len = getInt64(addr + 8);\n              const a = new Array(len);\n              for (let i = 0; i < len; i++) {\n                a[i] = loadValue(array + i * 8);\n              }\n              return a;\n            };\n            const loadString = (addr) => {\n              const saddr = getInt64(addr + 0);\n              const len = getInt64(addr + 8);\n              return decoder.decode(new DataView(this._inst.exports.mem.buffer, saddr, len));\n            };\n            const timeOrigin = Date.now() - performance.now();\n            this.importObject = {\n              _gotest: {\n                add: (a, b) => a + b\n              },\n              gojs: {\n                // Go's SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)\n                // may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported\n                // function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).\n                // This changes the SP, thus we have to update the SP used by the imported function.\n                // func wasmExit(code int32)\n                \"runtime.wasmExit\": (sp) => {\n                  sp >>>= 0;\n                  const code = this.mem.getInt32(sp + 8, true);\n                  this.exited = true;\n                  delete this._inst;\n                  delete this._values;\n                  delete this._goRefCounts;\n                  delete this._ids;\n                  delete this._idPool;\n                  this.exit(code);\n                },\n                // func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)\n                \"runtime.wasmWrite\": (sp) => {\n                  sp >>>= 0;\n                  const fd = getInt64(sp + 8);\n                  const p = getInt64(sp + 16);\n                  const n = this.mem.getInt32(sp + 24, true);\n                  globalThis.fs.writeSync(fd, new Uint8Array(this._inst.exports.mem.buffer, p, n));\n                },\n                // func resetMemoryDataView()\n                \"runtime.resetMemoryDataView\": (sp) => {\n                  sp >>>= 0;\n                  this.mem = new DataView(this._inst.exports.mem.buffer);\n                },\n                // func nanotime1() int64\n                \"runtime.nanotime1\": (sp) => {\n                  sp >>>= 0;\n                  setInt64(sp + 8, (timeOrigin + performance.now()) * 1e6);\n                },\n                // func walltime() (sec int64, nsec int32)\n                \"runtime.walltime\": (sp) => {\n                  sp >>>= 0;\n                  const msec = (/* @__PURE__ */ new Date()).getTime();\n                  setInt64(sp + 8, msec / 1e3);\n                  this.mem.setInt32(sp + 16, msec % 1e3 * 1e6, true);\n                },\n                // func scheduleTimeoutEvent(delay int64) int32\n                \"runtime.scheduleTimeoutEvent\": (sp) => {\n                  sp >>>= 0;\n                  const id = this._nextCallbackTimeoutID;\n                  this._nextCallbackTimeoutID++;\n                  this._scheduledTimeouts.set(id, setTimeout(\n                    () => {\n                      this._resume();\n                      while (this._scheduledTimeouts.has(id)) {\n                        console.warn(\"scheduleTimeoutEvent: missed timeout event\");\n                        this._resume();\n                      }\n                    },\n                    getInt64(sp + 8)\n                  ));\n                  this.mem.setInt32(sp + 16, id, true);\n                },\n                // func clearTimeoutEvent(id int32)\n                \"runtime.clearTimeoutEvent\": (sp) => {\n                  sp >>>= 0;\n                  const id = this.mem.getInt32(sp + 8, true);\n                  clearTimeout(this._scheduledTimeouts.get(id));\n                  this._scheduledTimeouts.delete(id);\n                },\n                // func getRandomData(r []byte)\n                \"runtime.getRandomData\": (sp) => {\n                  sp >>>= 0;\n                  crypto.getRandomValues(loadSlice(sp + 8));\n                },\n                // func finalizeRef(v ref)\n                \"syscall/js.finalizeRef\": (sp) => {\n                  sp >>>= 0;\n                  const id = this.mem.getUint32(sp + 8, true);\n                  this._goRefCounts[id]--;\n                  if (this._goRefCounts[id] === 0) {\n                    const v = this._values[id];\n                    this._values[id] = null;\n                    this._ids.delete(v);\n                    this._idPool.push(id);\n                  }\n                },\n                // func stringVal(value string) ref\n                \"syscall/js.stringVal\": (sp) => {\n                  sp >>>= 0;\n                  storeValue(sp + 24, loadString(sp + 8));\n                },\n                // func valueGet(v ref, p string) ref\n                \"syscall/js.valueGet\": (sp) => {\n                  sp >>>= 0;\n                  const result = Reflect.get(loadValue(sp + 8), loadString(sp + 16));\n                  sp = this._inst.exports.getsp() >>> 0;\n                  storeValue(sp + 32, result);\n                },\n                // func valueSet(v ref, p string, x ref)\n                \"syscall/js.valueSet\": (sp) => {\n                  sp >>>= 0;\n                  Reflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32));\n                },\n                // func valueDelete(v ref, p string)\n                \"syscall/js.valueDelete\": (sp) => {\n                  sp >>>= 0;\n                  Reflect.deleteProperty(loadValue(sp + 8), loadString(sp + 16));\n                },\n                // func valueIndex(v ref, i int) ref\n                \"syscall/js.valueIndex\": (sp) => {\n                  sp >>>= 0;\n                  storeValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)));\n                },\n                // valueSetIndex(v ref, i int, x ref)\n                \"syscall/js.valueSetIndex\": (sp) => {\n                  sp >>>= 0;\n                  Reflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24));\n                },\n                // func valueCall(v ref, m string, args []ref) (ref, bool)\n                \"syscall/js.valueCall\": (sp) => {\n                  sp >>>= 0;\n                  try {\n                    const v = loadValue(sp + 8);\n                    const m = Reflect.get(v, loadString(sp + 16));\n                    const args = loadSliceOfValues(sp + 32);\n                    const result = Reflect.apply(m, v, args);\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 56, result);\n                    this.mem.setUint8(sp + 64, 1);\n                  } catch (err) {\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 56, err);\n                    this.mem.setUint8(sp + 64, 0);\n                  }\n                },\n                // func valueInvoke(v ref, args []ref) (ref, bool)\n                \"syscall/js.valueInvoke\": (sp) => {\n                  sp >>>= 0;\n                  try {\n                    const v = loadValue(sp + 8);\n                    const args = loadSliceOfValues(sp + 16);\n                    const result = Reflect.apply(v, void 0, args);\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 40, result);\n                    this.mem.setUint8(sp + 48, 1);\n                  } catch (err) {\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 40, err);\n                    this.mem.setUint8(sp + 48, 0);\n                  }\n                },\n                // func valueNew(v ref, args []ref) (ref, bool)\n                \"syscall/js.valueNew\": (sp) => {\n                  sp >>>= 0;\n                  try {\n                    const v = loadValue(sp + 8);\n                    const args = loadSliceOfValues(sp + 16);\n                    const result = Reflect.construct(v, args);\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 40, result);\n                    this.mem.setUint8(sp + 48, 1);\n                  } catch (err) {\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 40, err);\n                    this.mem.setUint8(sp + 48, 0);\n                  }\n                },\n                // func valueLength(v ref) int\n                \"syscall/js.valueLength\": (sp) => {\n                  sp >>>= 0;\n                  setInt64(sp + 16, parseInt(loadValue(sp + 8).length));\n                },\n                // valuePrepareString(v ref) (ref, int)\n                \"syscall/js.valuePrepareString\": (sp) => {\n                  sp >>>= 0;\n                  const str = encoder.encode(String(loadValue(sp + 8)));\n                  storeValue(sp + 16, str);\n                  setInt64(sp + 24, str.length);\n                },\n                // valueLoadString(v ref, b []byte)\n                \"syscall/js.valueLoadString\": (sp) => {\n                  sp >>>= 0;\n                  const str = loadValue(sp + 8);\n                  loadSlice(sp + 16).set(str);\n                },\n                // func valueInstanceOf(v ref, t ref) bool\n                \"syscall/js.valueInstanceOf\": (sp) => {\n                  sp >>>= 0;\n                  this.mem.setUint8(sp + 24, loadValue(sp + 8) instanceof loadValue(sp + 16) ? 1 : 0);\n                },\n                // func copyBytesToGo(dst []byte, src ref) (int, bool)\n                \"syscall/js.copyBytesToGo\": (sp) => {\n                  sp >>>= 0;\n                  const dst = loadSlice(sp + 8);\n                  const src = loadValue(sp + 32);\n                  if (!(src instanceof Uint8Array || src instanceof Uint8ClampedArray)) {\n                    this.mem.setUint8(sp + 48, 0);\n                    return;\n                  }\n                  const toCopy = src.subarray(0, dst.length);\n                  dst.set(toCopy);\n                  setInt64(sp + 40, toCopy.length);\n                  this.mem.setUint8(sp + 48, 1);\n                },\n                // func copyBytesToJS(dst ref, src []byte) (int, bool)\n                \"syscall/js.copyBytesToJS\": (sp) => {\n                  sp >>>= 0;\n                  const dst = loadValue(sp + 8);\n                  const src = loadSlice(sp + 16);\n                  if (!(dst instanceof Uint8Array || dst instanceof Uint8ClampedArray)) {\n                    this.mem.setUint8(sp + 48, 0);\n                    return;\n                  }\n                  const toCopy = src.subarray(0, dst.length);\n                  dst.set(toCopy);\n                  setInt64(sp + 40, toCopy.length);\n                  this.mem.setUint8(sp + 48, 1);\n                },\n                \"debug\": (value) => {\n                  console.log(value);\n                }\n              }\n            };\n          }\n          run(instance) {\n            return __async(this, null, function* () {\n              if (!(instance instanceof WebAssembly.Instance)) {\n                throw new Error(\"Go.run: WebAssembly.Instance expected\");\n              }\n              this._inst = instance;\n              this.mem = new DataView(this._inst.exports.mem.buffer);\n              this._values = [\n                // JS values that Go currently has references to, indexed by reference id\n                NaN,\n                0,\n                null,\n                true,\n                false,\n                globalThis,\n                this\n              ];\n              this._goRefCounts = new Array(this._values.length).fill(Infinity);\n              this._ids = /* @__PURE__ */ new Map([\n                // mapping from JS values to reference ids\n                [0, 1],\n                [null, 2],\n                [true, 3],\n                [false, 4],\n                [globalThis, 5],\n                [this, 6]\n              ]);\n              this._idPool = [];\n              this.exited = false;\n              let offset = 4096;\n              const strPtr = (str) => {\n                const ptr = offset;\n                const bytes = encoder.encode(str + \"\\0\");\n                new Uint8Array(this.mem.buffer, offset, bytes.length).set(bytes);\n                offset += bytes.length;\n                if (offset % 8 !== 0) {\n                  offset += 8 - offset % 8;\n                }\n                return ptr;\n              };\n              const argc = this.argv.length;\n              const argvPtrs = [];\n              this.argv.forEach((arg) => {\n                argvPtrs.push(strPtr(arg));\n              });\n              argvPtrs.push(0);\n              const keys = Object.keys(this.env).sort();\n              keys.forEach((key) => {\n                argvPtrs.push(strPtr(`${key}=${this.env[key]}`));\n              });\n              argvPtrs.push(0);\n              const argv = offset;\n              argvPtrs.forEach((ptr) => {\n                this.mem.setUint32(offset, ptr, true);\n                this.mem.setUint32(offset + 4, 0, true);\n                offset += 8;\n              });\n              const wasmMinDataAddr = 4096 + 8192;\n              if (offset >= wasmMinDataAddr) {\n                throw new Error(\"total length of command line and environment variables exceeds limit\");\n              }\n              this._inst.exports.run(argc, argv);\n              if (this.exited) {\n                this._resolveExitPromise();\n              }\n              yield this._exitPromise;\n            });\n          }\n          _resume() {\n            if (this.exited) {\n              throw new Error(\"Go program has already exited\");\n            }\n            this._inst.exports.resume();\n            if (this.exited) {\n              this._resolveExitPromise();\n            }\n          }\n          _makeFuncWrapper(id) {\n            const go = this;\n            return function() {\n              const event = { id, this: this, args: arguments };\n              go._pendingEvent = event;\n              go._resume();\n              return event.result;\n            };\n          }\n        };\n      })();\n      onmessage = ({ data: wasm }) => {\n        let decoder = new TextDecoder();\n        let fs = globalThis.fs;\n        let stderr = \"\";\n        fs.writeSync = (fd, buffer) => {\n          if (fd === 1) {\n            postMessage(buffer);\n          } else if (fd === 2) {\n            stderr += decoder.decode(buffer);\n            let parts = stderr.split(\"\\n\");\n            if (parts.length > 1) console.log(parts.slice(0, -1).join(\"\\n\"));\n            stderr = parts[parts.length - 1];\n          } else {\n            throw new Error(\"Bad write\");\n          }\n          return buffer.length;\n        };\n        let stdin = [];\n        let resumeStdin;\n        let stdinPos = 0;\n        onmessage = ({ data }) => {\n          if (data.length > 0) {\n            stdin.push(data);\n            if (resumeStdin) resumeStdin();\n          }\n          return go;\n        };\n        fs.read = (fd, buffer, offset, length, position, callback) => {\n          if (fd !== 0 || offset !== 0 || length !== buffer.length || position !== null) {\n            throw new Error(\"Bad read\");\n          }\n          if (stdin.length === 0) {\n            resumeStdin = () => fs.read(fd, buffer, offset, length, position, callback);\n            return;\n          }\n          let first = stdin[0];\n          let count = Math.max(0, Math.min(length, first.length - stdinPos));\n          buffer.set(first.subarray(stdinPos, stdinPos + count), offset);\n          stdinPos += count;\n          if (stdinPos === first.length) {\n            stdin.shift();\n            stdinPos = 0;\n          }\n          callback(null, count);\n        };\n        let go = new globalThis.Go();\n        go.argv = [\"\", `--service=${\"0.25.11\"}`];\n        tryToInstantiateModule(wasm, go).then(\n          (instance) => {\n            postMessage(null);\n            go.run(instance);\n          },\n          (error) => {\n            postMessage(error);\n          }\n        );\n        return go;\n      };\n      function tryToInstantiateModule(wasm, go) {\n        return __async(this, null, function* () {\n          if (wasm instanceof WebAssembly.Module) {\n            return WebAssembly.instantiate(wasm, go.importObject);\n          }\n          const res = yield fetch(wasm);\n          if (!res.ok) throw new Error(`Failed to download ${JSON.stringify(wasm)}`);\n          if (\"instantiateStreaming\" in WebAssembly && /^application\\/wasm($|;)/i.test(res.headers.get(\"Content-Type\") || \"\")) {\n            const result2 = yield WebAssembly.instantiateStreaming(res, go.importObject);\n            return result2.instance;\n          }\n          const bytes = yield res.arrayBuffer();\n          const result = yield WebAssembly.instantiate(bytes, go.importObject);\n          return result.instance;\n        });\n      }\n      return (m) => onmessage(m);\n    })((data) => worker.onmessage({ data }));\n    let go;\n    worker = {\n      onmessage: null,\n      postMessage: (data) => setTimeout(() => {\n        try {\n          go = onmessage({ data });\n        } catch (error) {\n          rejectAllWith(error);\n        }\n      }),\n      terminate() {\n        if (go)\n          for (let timeout of go._scheduledTimeouts.values())\n            clearTimeout(timeout);\n      }\n    };\n  }\n  let firstMessageResolve;\n  let firstMessageReject;\n  const firstMessagePromise = new Promise((resolve, reject) => {\n    firstMessageResolve = resolve;\n    firstMessageReject = reject;\n  });\n  worker.onmessage = ({ data: error }) => {\n    worker.onmessage = ({ data }) => readFromStdout(data);\n    if (error) firstMessageReject(error);\n    else firstMessageResolve();\n  };\n  worker.postMessage(wasmModule || new URL(wasmURL, location.href).toString());\n  let { readFromStdout, service } = createChannel({\n    writeToStdin(bytes) {\n      worker.postMessage(bytes);\n    },\n    isSync: false,\n    hasFS: false,\n    esbuild: browser_exports\n  });\n  yield firstMessagePromise;\n  stopService = () => {\n    worker.terminate();\n    initializePromise = void 0;\n    stopService = void 0;\n    longLivedService = void 0;\n  };\n  longLivedService = {\n    build: (options) => new Promise((resolve, reject) => {\n      rejectAllPromise.then(reject);\n      service.buildOrContext({\n        callName: \"build\",\n        refs: null,\n        options,\n        isTTY: false,\n        defaultWD: \"/\",\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      });\n    }),\n    context: (options) => new Promise((resolve, reject) => {\n      rejectAllPromise.then(reject);\n      service.buildOrContext({\n        callName: \"context\",\n        refs: null,\n        options,\n        isTTY: false,\n        defaultWD: \"/\",\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      });\n    }),\n    transform: (input, options) => new Promise((resolve, reject) => {\n      rejectAllPromise.then(reject);\n      service.transform({\n        callName: \"transform\",\n        refs: null,\n        input,\n        options: options || {},\n        isTTY: false,\n        fs: {\n          readFile(_, callback) {\n            callback(new Error(\"Internal error\"), null);\n          },\n          writeFile(_, callback) {\n            callback(null);\n          }\n        },\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      });\n    }),\n    formatMessages: (messages, options) => new Promise((resolve, reject) => {\n      rejectAllPromise.then(reject);\n      service.formatMessages({\n        callName: \"formatMessages\",\n        refs: null,\n        messages,\n        options,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      });\n    }),\n    analyzeMetafile: (metafile, options) => new Promise((resolve, reject) => {\n      rejectAllPromise.then(reject);\n      service.analyzeMetafile({\n        callName: \"analyzeMetafile\",\n        refs: null,\n        metafile: typeof metafile === \"string\" ? metafile : JSON.stringify(metafile),\n        options,\n        callback: (err, res) => err ? reject(err) : resolve(res)\n      });\n    })\n  };\n});\nvar browser_default = browser_exports;\n})(typeof module===\"object\"?module:{set exports(x){(typeof self!==\"undefined\"?self:this).esbuild=x}});\n","// Copyright 2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nexport class BundlerError extends Error {\n    location;\n    error;\n    manifoldStack;\n    constructor(failure, options) {\n        super(undefined, options);\n        this.cause = failure;\n        this.error = failure.errors[0];\n        if (this.error.location) {\n            const { file, line, column } = this.error.location;\n            this.manifoldStack =\n                `${this.toString()}\\n    at ${file}:${line}:${column}`;\n        }\n    }\n    get name() {\n        return 'BundlerError';\n    }\n    get message() {\n        return this.error.text;\n    }\n}\n;\nexport class RuntimeError extends Error {\n    manifoldStack;\n    cause;\n    constructor(cause, message, options) {\n        super(message ?? cause.message, options);\n        this.cause = cause;\n    }\n    get name() {\n        return this.cause.name;\n    }\n}\n//# sourceMappingURL=error.js.map","// src/vlq.ts\nvar comma = \",\".charCodeAt(0);\nvar semicolon = \";\".charCodeAt(0);\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nvar intToChar = new Uint8Array(64);\nvar charToInt = new Uint8Array(128);\nfor (let i = 0; i < chars.length; i++) {\n  const c = chars.charCodeAt(i);\n  intToChar[i] = c;\n  charToInt[c] = i;\n}\nfunction decodeInteger(reader, relative) {\n  let value = 0;\n  let shift = 0;\n  let integer = 0;\n  do {\n    const c = reader.next();\n    integer = charToInt[c];\n    value |= (integer & 31) << shift;\n    shift += 5;\n  } while (integer & 32);\n  const shouldNegate = value & 1;\n  value >>>= 1;\n  if (shouldNegate) {\n    value = -2147483648 | -value;\n  }\n  return relative + value;\n}\nfunction encodeInteger(builder, num, relative) {\n  let delta = num - relative;\n  delta = delta < 0 ? -delta << 1 | 1 : delta << 1;\n  do {\n    let clamped = delta & 31;\n    delta >>>= 5;\n    if (delta > 0) clamped |= 32;\n    builder.write(intToChar[clamped]);\n  } while (delta > 0);\n  return num;\n}\nfunction hasMoreVlq(reader, max) {\n  if (reader.pos >= max) return false;\n  return reader.peek() !== comma;\n}\n\n// src/strings.ts\nvar bufLength = 1024 * 16;\nvar td = typeof TextDecoder !== \"undefined\" ? /* @__PURE__ */ new TextDecoder() : typeof Buffer !== \"undefined\" ? {\n  decode(buf) {\n    const out = Buffer.from(buf.buffer, buf.byteOffset, buf.byteLength);\n    return out.toString();\n  }\n} : {\n  decode(buf) {\n    let out = \"\";\n    for (let i = 0; i < buf.length; i++) {\n      out += String.fromCharCode(buf[i]);\n    }\n    return out;\n  }\n};\nvar StringWriter = class {\n  constructor() {\n    this.pos = 0;\n    this.out = \"\";\n    this.buffer = new Uint8Array(bufLength);\n  }\n  write(v) {\n    const { buffer } = this;\n    buffer[this.pos++] = v;\n    if (this.pos === bufLength) {\n      this.out += td.decode(buffer);\n      this.pos = 0;\n    }\n  }\n  flush() {\n    const { buffer, out, pos } = this;\n    return pos > 0 ? out + td.decode(buffer.subarray(0, pos)) : out;\n  }\n};\nvar StringReader = class {\n  constructor(buffer) {\n    this.pos = 0;\n    this.buffer = buffer;\n  }\n  next() {\n    return this.buffer.charCodeAt(this.pos++);\n  }\n  peek() {\n    return this.buffer.charCodeAt(this.pos);\n  }\n  indexOf(char) {\n    const { buffer, pos } = this;\n    const idx = buffer.indexOf(char, pos);\n    return idx === -1 ? buffer.length : idx;\n  }\n};\n\n// src/scopes.ts\nvar EMPTY = [];\nfunction decodeOriginalScopes(input) {\n  const { length } = input;\n  const reader = new StringReader(input);\n  const scopes = [];\n  const stack = [];\n  let line = 0;\n  for (; reader.pos < length; reader.pos++) {\n    line = decodeInteger(reader, line);\n    const column = decodeInteger(reader, 0);\n    if (!hasMoreVlq(reader, length)) {\n      const last = stack.pop();\n      last[2] = line;\n      last[3] = column;\n      continue;\n    }\n    const kind = decodeInteger(reader, 0);\n    const fields = decodeInteger(reader, 0);\n    const hasName = fields & 1;\n    const scope = hasName ? [line, column, 0, 0, kind, decodeInteger(reader, 0)] : [line, column, 0, 0, kind];\n    let vars = EMPTY;\n    if (hasMoreVlq(reader, length)) {\n      vars = [];\n      do {\n        const varsIndex = decodeInteger(reader, 0);\n        vars.push(varsIndex);\n      } while (hasMoreVlq(reader, length));\n    }\n    scope.vars = vars;\n    scopes.push(scope);\n    stack.push(scope);\n  }\n  return scopes;\n}\nfunction encodeOriginalScopes(scopes) {\n  const writer = new StringWriter();\n  for (let i = 0; i < scopes.length; ) {\n    i = _encodeOriginalScopes(scopes, i, writer, [0]);\n  }\n  return writer.flush();\n}\nfunction _encodeOriginalScopes(scopes, index, writer, state) {\n  const scope = scopes[index];\n  const { 0: startLine, 1: startColumn, 2: endLine, 3: endColumn, 4: kind, vars } = scope;\n  if (index > 0) writer.write(comma);\n  state[0] = encodeInteger(writer, startLine, state[0]);\n  encodeInteger(writer, startColumn, 0);\n  encodeInteger(writer, kind, 0);\n  const fields = scope.length === 6 ? 1 : 0;\n  encodeInteger(writer, fields, 0);\n  if (scope.length === 6) encodeInteger(writer, scope[5], 0);\n  for (const v of vars) {\n    encodeInteger(writer, v, 0);\n  }\n  for (index++; index < scopes.length; ) {\n    const next = scopes[index];\n    const { 0: l, 1: c } = next;\n    if (l > endLine || l === endLine && c >= endColumn) {\n      break;\n    }\n    index = _encodeOriginalScopes(scopes, index, writer, state);\n  }\n  writer.write(comma);\n  state[0] = encodeInteger(writer, endLine, state[0]);\n  encodeInteger(writer, endColumn, 0);\n  return index;\n}\nfunction decodeGeneratedRanges(input) {\n  const { length } = input;\n  const reader = new StringReader(input);\n  const ranges = [];\n  const stack = [];\n  let genLine = 0;\n  let definitionSourcesIndex = 0;\n  let definitionScopeIndex = 0;\n  let callsiteSourcesIndex = 0;\n  let callsiteLine = 0;\n  let callsiteColumn = 0;\n  let bindingLine = 0;\n  let bindingColumn = 0;\n  do {\n    const semi = reader.indexOf(\";\");\n    let genColumn = 0;\n    for (; reader.pos < semi; reader.pos++) {\n      genColumn = decodeInteger(reader, genColumn);\n      if (!hasMoreVlq(reader, semi)) {\n        const last = stack.pop();\n        last[2] = genLine;\n        last[3] = genColumn;\n        continue;\n      }\n      const fields = decodeInteger(reader, 0);\n      const hasDefinition = fields & 1;\n      const hasCallsite = fields & 2;\n      const hasScope = fields & 4;\n      let callsite = null;\n      let bindings = EMPTY;\n      let range;\n      if (hasDefinition) {\n        const defSourcesIndex = decodeInteger(reader, definitionSourcesIndex);\n        definitionScopeIndex = decodeInteger(\n          reader,\n          definitionSourcesIndex === defSourcesIndex ? definitionScopeIndex : 0\n        );\n        definitionSourcesIndex = defSourcesIndex;\n        range = [genLine, genColumn, 0, 0, defSourcesIndex, definitionScopeIndex];\n      } else {\n        range = [genLine, genColumn, 0, 0];\n      }\n      range.isScope = !!hasScope;\n      if (hasCallsite) {\n        const prevCsi = callsiteSourcesIndex;\n        const prevLine = callsiteLine;\n        callsiteSourcesIndex = decodeInteger(reader, callsiteSourcesIndex);\n        const sameSource = prevCsi === callsiteSourcesIndex;\n        callsiteLine = decodeInteger(reader, sameSource ? callsiteLine : 0);\n        callsiteColumn = decodeInteger(\n          reader,\n          sameSource && prevLine === callsiteLine ? callsiteColumn : 0\n        );\n        callsite = [callsiteSourcesIndex, callsiteLine, callsiteColumn];\n      }\n      range.callsite = callsite;\n      if (hasMoreVlq(reader, semi)) {\n        bindings = [];\n        do {\n          bindingLine = genLine;\n          bindingColumn = genColumn;\n          const expressionsCount = decodeInteger(reader, 0);\n          let expressionRanges;\n          if (expressionsCount < -1) {\n            expressionRanges = [[decodeInteger(reader, 0)]];\n            for (let i = -1; i > expressionsCount; i--) {\n              const prevBl = bindingLine;\n              bindingLine = decodeInteger(reader, bindingLine);\n              bindingColumn = decodeInteger(reader, bindingLine === prevBl ? bindingColumn : 0);\n              const expression = decodeInteger(reader, 0);\n              expressionRanges.push([expression, bindingLine, bindingColumn]);\n            }\n          } else {\n            expressionRanges = [[expressionsCount]];\n          }\n          bindings.push(expressionRanges);\n        } while (hasMoreVlq(reader, semi));\n      }\n      range.bindings = bindings;\n      ranges.push(range);\n      stack.push(range);\n    }\n    genLine++;\n    reader.pos = semi + 1;\n  } while (reader.pos < length);\n  return ranges;\n}\nfunction encodeGeneratedRanges(ranges) {\n  if (ranges.length === 0) return \"\";\n  const writer = new StringWriter();\n  for (let i = 0; i < ranges.length; ) {\n    i = _encodeGeneratedRanges(ranges, i, writer, [0, 0, 0, 0, 0, 0, 0]);\n  }\n  return writer.flush();\n}\nfunction _encodeGeneratedRanges(ranges, index, writer, state) {\n  const range = ranges[index];\n  const {\n    0: startLine,\n    1: startColumn,\n    2: endLine,\n    3: endColumn,\n    isScope,\n    callsite,\n    bindings\n  } = range;\n  if (state[0] < startLine) {\n    catchupLine(writer, state[0], startLine);\n    state[0] = startLine;\n    state[1] = 0;\n  } else if (index > 0) {\n    writer.write(comma);\n  }\n  state[1] = encodeInteger(writer, range[1], state[1]);\n  const fields = (range.length === 6 ? 1 : 0) | (callsite ? 2 : 0) | (isScope ? 4 : 0);\n  encodeInteger(writer, fields, 0);\n  if (range.length === 6) {\n    const { 4: sourcesIndex, 5: scopesIndex } = range;\n    if (sourcesIndex !== state[2]) {\n      state[3] = 0;\n    }\n    state[2] = encodeInteger(writer, sourcesIndex, state[2]);\n    state[3] = encodeInteger(writer, scopesIndex, state[3]);\n  }\n  if (callsite) {\n    const { 0: sourcesIndex, 1: callLine, 2: callColumn } = range.callsite;\n    if (sourcesIndex !== state[4]) {\n      state[5] = 0;\n      state[6] = 0;\n    } else if (callLine !== state[5]) {\n      state[6] = 0;\n    }\n    state[4] = encodeInteger(writer, sourcesIndex, state[4]);\n    state[5] = encodeInteger(writer, callLine, state[5]);\n    state[6] = encodeInteger(writer, callColumn, state[6]);\n  }\n  if (bindings) {\n    for (const binding of bindings) {\n      if (binding.length > 1) encodeInteger(writer, -binding.length, 0);\n      const expression = binding[0][0];\n      encodeInteger(writer, expression, 0);\n      let bindingStartLine = startLine;\n      let bindingStartColumn = startColumn;\n      for (let i = 1; i < binding.length; i++) {\n        const expRange = binding[i];\n        bindingStartLine = encodeInteger(writer, expRange[1], bindingStartLine);\n        bindingStartColumn = encodeInteger(writer, expRange[2], bindingStartColumn);\n        encodeInteger(writer, expRange[0], 0);\n      }\n    }\n  }\n  for (index++; index < ranges.length; ) {\n    const next = ranges[index];\n    const { 0: l, 1: c } = next;\n    if (l > endLine || l === endLine && c >= endColumn) {\n      break;\n    }\n    index = _encodeGeneratedRanges(ranges, index, writer, state);\n  }\n  if (state[0] < endLine) {\n    catchupLine(writer, state[0], endLine);\n    state[0] = endLine;\n    state[1] = 0;\n  } else {\n    writer.write(comma);\n  }\n  state[1] = encodeInteger(writer, endColumn, state[1]);\n  return index;\n}\nfunction catchupLine(writer, lastLine, line) {\n  do {\n    writer.write(semicolon);\n  } while (++lastLine < line);\n}\n\n// src/sourcemap-codec.ts\nfunction decode(mappings) {\n  const { length } = mappings;\n  const reader = new StringReader(mappings);\n  const decoded = [];\n  let genColumn = 0;\n  let sourcesIndex = 0;\n  let sourceLine = 0;\n  let sourceColumn = 0;\n  let namesIndex = 0;\n  do {\n    const semi = reader.indexOf(\";\");\n    const line = [];\n    let sorted = true;\n    let lastCol = 0;\n    genColumn = 0;\n    while (reader.pos < semi) {\n      let seg;\n      genColumn = decodeInteger(reader, genColumn);\n      if (genColumn < lastCol) sorted = false;\n      lastCol = genColumn;\n      if (hasMoreVlq(reader, semi)) {\n        sourcesIndex = decodeInteger(reader, sourcesIndex);\n        sourceLine = decodeInteger(reader, sourceLine);\n        sourceColumn = decodeInteger(reader, sourceColumn);\n        if (hasMoreVlq(reader, semi)) {\n          namesIndex = decodeInteger(reader, namesIndex);\n          seg = [genColumn, sourcesIndex, sourceLine, sourceColumn, namesIndex];\n        } else {\n          seg = [genColumn, sourcesIndex, sourceLine, sourceColumn];\n        }\n      } else {\n        seg = [genColumn];\n      }\n      line.push(seg);\n      reader.pos++;\n    }\n    if (!sorted) sort(line);\n    decoded.push(line);\n    reader.pos = semi + 1;\n  } while (reader.pos <= length);\n  return decoded;\n}\nfunction sort(line) {\n  line.sort(sortComparator);\n}\nfunction sortComparator(a, b) {\n  return a[0] - b[0];\n}\nfunction encode(decoded) {\n  const writer = new StringWriter();\n  let sourcesIndex = 0;\n  let sourceLine = 0;\n  let sourceColumn = 0;\n  let namesIndex = 0;\n  for (let i = 0; i < decoded.length; i++) {\n    const line = decoded[i];\n    if (i > 0) writer.write(semicolon);\n    if (line.length === 0) continue;\n    let genColumn = 0;\n    for (let j = 0; j < line.length; j++) {\n      const segment = line[j];\n      if (j > 0) writer.write(comma);\n      genColumn = encodeInteger(writer, segment[0], genColumn);\n      if (segment.length === 1) continue;\n      sourcesIndex = encodeInteger(writer, segment[1], sourcesIndex);\n      sourceLine = encodeInteger(writer, segment[2], sourceLine);\n      sourceColumn = encodeInteger(writer, segment[3], sourceColumn);\n      if (segment.length === 4) continue;\n      namesIndex = encodeInteger(writer, segment[4], namesIndex);\n    }\n  }\n  return writer.flush();\n}\nexport {\n  decode,\n  decodeGeneratedRanges,\n  decodeOriginalScopes,\n  encode,\n  encodeGeneratedRanges,\n  encodeOriginalScopes\n};\n//# sourceMappingURL=sourcemap-codec.mjs.map\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.resolveURI = factory());\n})(this, (function () { 'use strict';\n\n    // Matches the scheme of a URL, eg \"http://\"\n    const schemeRegex = /^[\\w+.-]+:\\/\\//;\n    /**\n     * Matches the parts of a URL:\n     * 1. Scheme, including \":\", guaranteed.\n     * 2. User/password, including \"@\", optional.\n     * 3. Host, guaranteed.\n     * 4. Port, including \":\", optional.\n     * 5. Path, including \"/\", optional.\n     * 6. Query, including \"?\", optional.\n     * 7. Hash, including \"#\", optional.\n     */\n    const urlRegex = /^([\\w+.-]+:)\\/\\/([^@/#?]*@)?([^:/#?]*)(:\\d+)?(\\/[^#?]*)?(\\?[^#]*)?(#.*)?/;\n    /**\n     * File URLs are weird. They dont' need the regular `//` in the scheme, they may or may not start\n     * with a leading `/`, they can have a domain (but only if they don't start with a Windows drive).\n     *\n     * 1. Host, optional.\n     * 2. Path, which may include \"/\", guaranteed.\n     * 3. Query, including \"?\", optional.\n     * 4. Hash, including \"#\", optional.\n     */\n    const fileRegex = /^file:(?:\\/\\/((?![a-z]:)[^/#?]*)?)?(\\/?[^#?]*)(\\?[^#]*)?(#.*)?/i;\n    function isAbsoluteUrl(input) {\n        return schemeRegex.test(input);\n    }\n    function isSchemeRelativeUrl(input) {\n        return input.startsWith('//');\n    }\n    function isAbsolutePath(input) {\n        return input.startsWith('/');\n    }\n    function isFileUrl(input) {\n        return input.startsWith('file:');\n    }\n    function isRelative(input) {\n        return /^[.?#]/.test(input);\n    }\n    function parseAbsoluteUrl(input) {\n        const match = urlRegex.exec(input);\n        return makeUrl(match[1], match[2] || '', match[3], match[4] || '', match[5] || '/', match[6] || '', match[7] || '');\n    }\n    function parseFileUrl(input) {\n        const match = fileRegex.exec(input);\n        const path = match[2];\n        return makeUrl('file:', '', match[1] || '', '', isAbsolutePath(path) ? path : '/' + path, match[3] || '', match[4] || '');\n    }\n    function makeUrl(scheme, user, host, port, path, query, hash) {\n        return {\n            scheme,\n            user,\n            host,\n            port,\n            path,\n            query,\n            hash,\n            type: 7 /* Absolute */,\n        };\n    }\n    function parseUrl(input) {\n        if (isSchemeRelativeUrl(input)) {\n            const url = parseAbsoluteUrl('http:' + input);\n            url.scheme = '';\n            url.type = 6 /* SchemeRelative */;\n            return url;\n        }\n        if (isAbsolutePath(input)) {\n            const url = parseAbsoluteUrl('http://foo.com' + input);\n            url.scheme = '';\n            url.host = '';\n            url.type = 5 /* AbsolutePath */;\n            return url;\n        }\n        if (isFileUrl(input))\n            return parseFileUrl(input);\n        if (isAbsoluteUrl(input))\n            return parseAbsoluteUrl(input);\n        const url = parseAbsoluteUrl('http://foo.com/' + input);\n        url.scheme = '';\n        url.host = '';\n        url.type = input\n            ? input.startsWith('?')\n                ? 3 /* Query */\n                : input.startsWith('#')\n                    ? 2 /* Hash */\n                    : 4 /* RelativePath */\n            : 1 /* Empty */;\n        return url;\n    }\n    function stripPathFilename(path) {\n        // If a path ends with a parent directory \"..\", then it's a relative path with excess parent\n        // paths. It's not a file, so we can't strip it.\n        if (path.endsWith('/..'))\n            return path;\n        const index = path.lastIndexOf('/');\n        return path.slice(0, index + 1);\n    }\n    function mergePaths(url, base) {\n        normalizePath(base, base.type);\n        // If the path is just a \"/\", then it was an empty path to begin with (remember, we're a relative\n        // path).\n        if (url.path === '/') {\n            url.path = base.path;\n        }\n        else {\n            // Resolution happens relative to the base path's directory, not the file.\n            url.path = stripPathFilename(base.path) + url.path;\n        }\n    }\n    /**\n     * The path can have empty directories \"//\", unneeded parents \"foo/..\", or current directory\n     * \"foo/.\". We need to normalize to a standard representation.\n     */\n    function normalizePath(url, type) {\n        const rel = type <= 4 /* RelativePath */;\n        const pieces = url.path.split('/');\n        // We need to preserve the first piece always, so that we output a leading slash. The item at\n        // pieces[0] is an empty string.\n        let pointer = 1;\n        // Positive is the number of real directories we've output, used for popping a parent directory.\n        // Eg, \"foo/bar/..\" will have a positive 2, and we can decrement to be left with just \"foo\".\n        let positive = 0;\n        // We need to keep a trailing slash if we encounter an empty directory (eg, splitting \"foo/\" will\n        // generate `[\"foo\", \"\"]` pieces). And, if we pop a parent directory. But once we encounter a\n        // real directory, we won't need to append, unless the other conditions happen again.\n        let addTrailingSlash = false;\n        for (let i = 1; i < pieces.length; i++) {\n            const piece = pieces[i];\n            // An empty directory, could be a trailing slash, or just a double \"//\" in the path.\n            if (!piece) {\n                addTrailingSlash = true;\n                continue;\n            }\n            // If we encounter a real directory, then we don't need to append anymore.\n            addTrailingSlash = false;\n            // A current directory, which we can always drop.\n            if (piece === '.')\n                continue;\n            // A parent directory, we need to see if there are any real directories we can pop. Else, we\n            // have an excess of parents, and we'll need to keep the \"..\".\n            if (piece === '..') {\n                if (positive) {\n                    addTrailingSlash = true;\n                    positive--;\n                    pointer--;\n                }\n                else if (rel) {\n                    // If we're in a relativePath, then we need to keep the excess parents. Else, in an absolute\n                    // URL, protocol relative URL, or an absolute path, we don't need to keep excess.\n                    pieces[pointer++] = piece;\n                }\n                continue;\n            }\n            // We've encountered a real directory. Move it to the next insertion pointer, which accounts for\n            // any popped or dropped directories.\n            pieces[pointer++] = piece;\n            positive++;\n        }\n        let path = '';\n        for (let i = 1; i < pointer; i++) {\n            path += '/' + pieces[i];\n        }\n        if (!path || (addTrailingSlash && !path.endsWith('/..'))) {\n            path += '/';\n        }\n        url.path = path;\n    }\n    /**\n     * Attempts to resolve `input` URL/path relative to `base`.\n     */\n    function resolve(input, base) {\n        if (!input && !base)\n            return '';\n        const url = parseUrl(input);\n        let inputType = url.type;\n        if (base && inputType !== 7 /* Absolute */) {\n            const baseUrl = parseUrl(base);\n            const baseType = baseUrl.type;\n            switch (inputType) {\n                case 1 /* Empty */:\n                    url.hash = baseUrl.hash;\n                // fall through\n                case 2 /* Hash */:\n                    url.query = baseUrl.query;\n                // fall through\n                case 3 /* Query */:\n                case 4 /* RelativePath */:\n                    mergePaths(url, baseUrl);\n                // fall through\n                case 5 /* AbsolutePath */:\n                    // The host, user, and port are joined, you can't copy one without the others.\n                    url.user = baseUrl.user;\n                    url.host = baseUrl.host;\n                    url.port = baseUrl.port;\n                // fall through\n                case 6 /* SchemeRelative */:\n                    // The input doesn't have a schema at least, so we need to copy at least that over.\n                    url.scheme = baseUrl.scheme;\n            }\n            if (baseType > inputType)\n                inputType = baseType;\n        }\n        normalizePath(url, inputType);\n        const queryHash = url.query + url.hash;\n        switch (inputType) {\n            // This is impossible, because of the empty checks at the start of the function.\n            // case UrlType.Empty:\n            case 2 /* Hash */:\n            case 3 /* Query */:\n                return queryHash;\n            case 4 /* RelativePath */: {\n                // The first char is always a \"/\", and we need it to be relative.\n                const path = url.path.slice(1);\n                if (!path)\n                    return queryHash || '.';\n                if (isRelative(base || input) && !isRelative(path)) {\n                    // If base started with a leading \".\", or there is no base and input started with a \".\",\n                    // then we need to ensure that the relative path starts with a \".\". We don't know if\n                    // relative starts with a \"..\", though, so check before prepending.\n                    return './' + path + queryHash;\n                }\n                return path + queryHash;\n            }\n            case 5 /* AbsolutePath */:\n                return url.path + queryHash;\n            default:\n                return url.scheme + '//' + url.user + url.host + url.port + url.path + queryHash;\n        }\n    }\n\n    return resolve;\n\n}));\n//# sourceMappingURL=resolve-uri.umd.js.map\n","// src/trace-mapping.ts\nimport { encode, decode } from \"@jridgewell/sourcemap-codec\";\n\n// src/resolve.ts\nimport resolveUri from \"@jridgewell/resolve-uri\";\n\n// src/strip-filename.ts\nfunction stripFilename(path) {\n  if (!path) return \"\";\n  const index = path.lastIndexOf(\"/\");\n  return path.slice(0, index + 1);\n}\n\n// src/resolve.ts\nfunction resolver(mapUrl, sourceRoot) {\n  const from = stripFilename(mapUrl);\n  const prefix = sourceRoot ? sourceRoot + \"/\" : \"\";\n  return (source) => resolveUri(prefix + (source || \"\"), from);\n}\n\n// src/sourcemap-segment.ts\nvar COLUMN = 0;\nvar SOURCES_INDEX = 1;\nvar SOURCE_LINE = 2;\nvar SOURCE_COLUMN = 3;\nvar NAMES_INDEX = 4;\nvar REV_GENERATED_LINE = 1;\nvar REV_GENERATED_COLUMN = 2;\n\n// src/sort.ts\nfunction maybeSort(mappings, owned) {\n  const unsortedIndex = nextUnsortedSegmentLine(mappings, 0);\n  if (unsortedIndex === mappings.length) return mappings;\n  if (!owned) mappings = mappings.slice();\n  for (let i = unsortedIndex; i < mappings.length; i = nextUnsortedSegmentLine(mappings, i + 1)) {\n    mappings[i] = sortSegments(mappings[i], owned);\n  }\n  return mappings;\n}\nfunction nextUnsortedSegmentLine(mappings, start) {\n  for (let i = start; i < mappings.length; i++) {\n    if (!isSorted(mappings[i])) return i;\n  }\n  return mappings.length;\n}\nfunction isSorted(line) {\n  for (let j = 1; j < line.length; j++) {\n    if (line[j][COLUMN] < line[j - 1][COLUMN]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction sortSegments(line, owned) {\n  if (!owned) line = line.slice();\n  return line.sort(sortComparator);\n}\nfunction sortComparator(a, b) {\n  return a[COLUMN] - b[COLUMN];\n}\n\n// src/by-source.ts\nfunction buildBySources(decoded, memos) {\n  const sources = memos.map(() => []);\n  for (let i = 0; i < decoded.length; i++) {\n    const line = decoded[i];\n    for (let j = 0; j < line.length; j++) {\n      const seg = line[j];\n      if (seg.length === 1) continue;\n      const sourceIndex2 = seg[SOURCES_INDEX];\n      const sourceLine = seg[SOURCE_LINE];\n      const sourceColumn = seg[SOURCE_COLUMN];\n      const source = sources[sourceIndex2];\n      const segs = source[sourceLine] || (source[sourceLine] = []);\n      segs.push([sourceColumn, i, seg[COLUMN]]);\n    }\n  }\n  for (let i = 0; i < sources.length; i++) {\n    const source = sources[i];\n    for (let j = 0; j < source.length; j++) {\n      const line = source[j];\n      if (line) line.sort(sortComparator);\n    }\n  }\n  return sources;\n}\n\n// src/binary-search.ts\nvar found = false;\nfunction binarySearch(haystack, needle, low, high) {\n  while (low <= high) {\n    const mid = low + (high - low >> 1);\n    const cmp = haystack[mid][COLUMN] - needle;\n    if (cmp === 0) {\n      found = true;\n      return mid;\n    }\n    if (cmp < 0) {\n      low = mid + 1;\n    } else {\n      high = mid - 1;\n    }\n  }\n  found = false;\n  return low - 1;\n}\nfunction upperBound(haystack, needle, index) {\n  for (let i = index + 1; i < haystack.length; index = i++) {\n    if (haystack[i][COLUMN] !== needle) break;\n  }\n  return index;\n}\nfunction lowerBound(haystack, needle, index) {\n  for (let i = index - 1; i >= 0; index = i--) {\n    if (haystack[i][COLUMN] !== needle) break;\n  }\n  return index;\n}\nfunction memoizedState() {\n  return {\n    lastKey: -1,\n    lastNeedle: -1,\n    lastIndex: -1\n  };\n}\nfunction memoizedBinarySearch(haystack, needle, state, key) {\n  const { lastKey, lastNeedle, lastIndex } = state;\n  let low = 0;\n  let high = haystack.length - 1;\n  if (key === lastKey) {\n    if (needle === lastNeedle) {\n      found = lastIndex !== -1 && haystack[lastIndex][COLUMN] === needle;\n      return lastIndex;\n    }\n    if (needle >= lastNeedle) {\n      low = lastIndex === -1 ? 0 : lastIndex;\n    } else {\n      high = lastIndex;\n    }\n  }\n  state.lastKey = key;\n  state.lastNeedle = needle;\n  return state.lastIndex = binarySearch(haystack, needle, low, high);\n}\n\n// src/types.ts\nfunction parse(map) {\n  return typeof map === \"string\" ? JSON.parse(map) : map;\n}\n\n// src/flatten-map.ts\nvar FlattenMap = function(map, mapUrl) {\n  const parsed = parse(map);\n  if (!(\"sections\" in parsed)) {\n    return new TraceMap(parsed, mapUrl);\n  }\n  const mappings = [];\n  const sources = [];\n  const sourcesContent = [];\n  const names = [];\n  const ignoreList = [];\n  recurse(\n    parsed,\n    mapUrl,\n    mappings,\n    sources,\n    sourcesContent,\n    names,\n    ignoreList,\n    0,\n    0,\n    Infinity,\n    Infinity\n  );\n  const joined = {\n    version: 3,\n    file: parsed.file,\n    names,\n    sources,\n    sourcesContent,\n    mappings,\n    ignoreList\n  };\n  return presortedDecodedMap(joined);\n};\nfunction recurse(input, mapUrl, mappings, sources, sourcesContent, names, ignoreList, lineOffset, columnOffset, stopLine, stopColumn) {\n  const { sections } = input;\n  for (let i = 0; i < sections.length; i++) {\n    const { map, offset } = sections[i];\n    let sl = stopLine;\n    let sc = stopColumn;\n    if (i + 1 < sections.length) {\n      const nextOffset = sections[i + 1].offset;\n      sl = Math.min(stopLine, lineOffset + nextOffset.line);\n      if (sl === stopLine) {\n        sc = Math.min(stopColumn, columnOffset + nextOffset.column);\n      } else if (sl < stopLine) {\n        sc = columnOffset + nextOffset.column;\n      }\n    }\n    addSection(\n      map,\n      mapUrl,\n      mappings,\n      sources,\n      sourcesContent,\n      names,\n      ignoreList,\n      lineOffset + offset.line,\n      columnOffset + offset.column,\n      sl,\n      sc\n    );\n  }\n}\nfunction addSection(input, mapUrl, mappings, sources, sourcesContent, names, ignoreList, lineOffset, columnOffset, stopLine, stopColumn) {\n  const parsed = parse(input);\n  if (\"sections\" in parsed) return recurse(...arguments);\n  const map = new TraceMap(parsed, mapUrl);\n  const sourcesOffset = sources.length;\n  const namesOffset = names.length;\n  const decoded = decodedMappings(map);\n  const { resolvedSources, sourcesContent: contents, ignoreList: ignores } = map;\n  append(sources, resolvedSources);\n  append(names, map.names);\n  if (contents) append(sourcesContent, contents);\n  else for (let i = 0; i < resolvedSources.length; i++) sourcesContent.push(null);\n  if (ignores) for (let i = 0; i < ignores.length; i++) ignoreList.push(ignores[i] + sourcesOffset);\n  for (let i = 0; i < decoded.length; i++) {\n    const lineI = lineOffset + i;\n    if (lineI > stopLine) return;\n    const out = getLine(mappings, lineI);\n    const cOffset = i === 0 ? columnOffset : 0;\n    const line = decoded[i];\n    for (let j = 0; j < line.length; j++) {\n      const seg = line[j];\n      const column = cOffset + seg[COLUMN];\n      if (lineI === stopLine && column >= stopColumn) return;\n      if (seg.length === 1) {\n        out.push([column]);\n        continue;\n      }\n      const sourcesIndex = sourcesOffset + seg[SOURCES_INDEX];\n      const sourceLine = seg[SOURCE_LINE];\n      const sourceColumn = seg[SOURCE_COLUMN];\n      out.push(\n        seg.length === 4 ? [column, sourcesIndex, sourceLine, sourceColumn] : [column, sourcesIndex, sourceLine, sourceColumn, namesOffset + seg[NAMES_INDEX]]\n      );\n    }\n  }\n}\nfunction append(arr, other) {\n  for (let i = 0; i < other.length; i++) arr.push(other[i]);\n}\nfunction getLine(arr, index) {\n  for (let i = arr.length; i <= index; i++) arr[i] = [];\n  return arr[index];\n}\n\n// src/trace-mapping.ts\nvar LINE_GTR_ZERO = \"`line` must be greater than 0 (lines start at line 1)\";\nvar COL_GTR_EQ_ZERO = \"`column` must be greater than or equal to 0 (columns start at column 0)\";\nvar LEAST_UPPER_BOUND = -1;\nvar GREATEST_LOWER_BOUND = 1;\nvar TraceMap = class {\n  constructor(map, mapUrl) {\n    const isString = typeof map === \"string\";\n    if (!isString && map._decodedMemo) return map;\n    const parsed = parse(map);\n    const { version, file, names, sourceRoot, sources, sourcesContent } = parsed;\n    this.version = version;\n    this.file = file;\n    this.names = names || [];\n    this.sourceRoot = sourceRoot;\n    this.sources = sources;\n    this.sourcesContent = sourcesContent;\n    this.ignoreList = parsed.ignoreList || parsed.x_google_ignoreList || void 0;\n    const resolve = resolver(mapUrl, sourceRoot);\n    this.resolvedSources = sources.map(resolve);\n    const { mappings } = parsed;\n    if (typeof mappings === \"string\") {\n      this._encoded = mappings;\n      this._decoded = void 0;\n    } else if (Array.isArray(mappings)) {\n      this._encoded = void 0;\n      this._decoded = maybeSort(mappings, isString);\n    } else if (parsed.sections) {\n      throw new Error(`TraceMap passed sectioned source map, please use FlattenMap export instead`);\n    } else {\n      throw new Error(`invalid source map: ${JSON.stringify(parsed)}`);\n    }\n    this._decodedMemo = memoizedState();\n    this._bySources = void 0;\n    this._bySourceMemos = void 0;\n  }\n};\nfunction cast(map) {\n  return map;\n}\nfunction encodedMappings(map) {\n  var _a, _b;\n  return (_b = (_a = cast(map))._encoded) != null ? _b : _a._encoded = encode(cast(map)._decoded);\n}\nfunction decodedMappings(map) {\n  var _a;\n  return (_a = cast(map))._decoded || (_a._decoded = decode(cast(map)._encoded));\n}\nfunction traceSegment(map, line, column) {\n  const decoded = decodedMappings(map);\n  if (line >= decoded.length) return null;\n  const segments = decoded[line];\n  const index = traceSegmentInternal(\n    segments,\n    cast(map)._decodedMemo,\n    line,\n    column,\n    GREATEST_LOWER_BOUND\n  );\n  return index === -1 ? null : segments[index];\n}\nfunction originalPositionFor(map, needle) {\n  let { line, column, bias } = needle;\n  line--;\n  if (line < 0) throw new Error(LINE_GTR_ZERO);\n  if (column < 0) throw new Error(COL_GTR_EQ_ZERO);\n  const decoded = decodedMappings(map);\n  if (line >= decoded.length) return OMapping(null, null, null, null);\n  const segments = decoded[line];\n  const index = traceSegmentInternal(\n    segments,\n    cast(map)._decodedMemo,\n    line,\n    column,\n    bias || GREATEST_LOWER_BOUND\n  );\n  if (index === -1) return OMapping(null, null, null, null);\n  const segment = segments[index];\n  if (segment.length === 1) return OMapping(null, null, null, null);\n  const { names, resolvedSources } = map;\n  return OMapping(\n    resolvedSources[segment[SOURCES_INDEX]],\n    segment[SOURCE_LINE] + 1,\n    segment[SOURCE_COLUMN],\n    segment.length === 5 ? names[segment[NAMES_INDEX]] : null\n  );\n}\nfunction generatedPositionFor(map, needle) {\n  const { source, line, column, bias } = needle;\n  return generatedPosition(map, source, line, column, bias || GREATEST_LOWER_BOUND, false);\n}\nfunction allGeneratedPositionsFor(map, needle) {\n  const { source, line, column, bias } = needle;\n  return generatedPosition(map, source, line, column, bias || LEAST_UPPER_BOUND, true);\n}\nfunction eachMapping(map, cb) {\n  const decoded = decodedMappings(map);\n  const { names, resolvedSources } = map;\n  for (let i = 0; i < decoded.length; i++) {\n    const line = decoded[i];\n    for (let j = 0; j < line.length; j++) {\n      const seg = line[j];\n      const generatedLine = i + 1;\n      const generatedColumn = seg[0];\n      let source = null;\n      let originalLine = null;\n      let originalColumn = null;\n      let name = null;\n      if (seg.length !== 1) {\n        source = resolvedSources[seg[1]];\n        originalLine = seg[2] + 1;\n        originalColumn = seg[3];\n      }\n      if (seg.length === 5) name = names[seg[4]];\n      cb({\n        generatedLine,\n        generatedColumn,\n        source,\n        originalLine,\n        originalColumn,\n        name\n      });\n    }\n  }\n}\nfunction sourceIndex(map, source) {\n  const { sources, resolvedSources } = map;\n  let index = sources.indexOf(source);\n  if (index === -1) index = resolvedSources.indexOf(source);\n  return index;\n}\nfunction sourceContentFor(map, source) {\n  const { sourcesContent } = map;\n  if (sourcesContent == null) return null;\n  const index = sourceIndex(map, source);\n  return index === -1 ? null : sourcesContent[index];\n}\nfunction isIgnored(map, source) {\n  const { ignoreList } = map;\n  if (ignoreList == null) return false;\n  const index = sourceIndex(map, source);\n  return index === -1 ? false : ignoreList.includes(index);\n}\nfunction presortedDecodedMap(map, mapUrl) {\n  const tracer = new TraceMap(clone(map, []), mapUrl);\n  cast(tracer)._decoded = map.mappings;\n  return tracer;\n}\nfunction decodedMap(map) {\n  return clone(map, decodedMappings(map));\n}\nfunction encodedMap(map) {\n  return clone(map, encodedMappings(map));\n}\nfunction clone(map, mappings) {\n  return {\n    version: map.version,\n    file: map.file,\n    names: map.names,\n    sourceRoot: map.sourceRoot,\n    sources: map.sources,\n    sourcesContent: map.sourcesContent,\n    mappings,\n    ignoreList: map.ignoreList || map.x_google_ignoreList\n  };\n}\nfunction OMapping(source, line, column, name) {\n  return { source, line, column, name };\n}\nfunction GMapping(line, column) {\n  return { line, column };\n}\nfunction traceSegmentInternal(segments, memo, line, column, bias) {\n  let index = memoizedBinarySearch(segments, column, memo, line);\n  if (found) {\n    index = (bias === LEAST_UPPER_BOUND ? upperBound : lowerBound)(segments, column, index);\n  } else if (bias === LEAST_UPPER_BOUND) index++;\n  if (index === -1 || index === segments.length) return -1;\n  return index;\n}\nfunction sliceGeneratedPositions(segments, memo, line, column, bias) {\n  let min = traceSegmentInternal(segments, memo, line, column, GREATEST_LOWER_BOUND);\n  if (!found && bias === LEAST_UPPER_BOUND) min++;\n  if (min === -1 || min === segments.length) return [];\n  const matchedColumn = found ? column : segments[min][COLUMN];\n  if (!found) min = lowerBound(segments, matchedColumn, min);\n  const max = upperBound(segments, matchedColumn, min);\n  const result = [];\n  for (; min <= max; min++) {\n    const segment = segments[min];\n    result.push(GMapping(segment[REV_GENERATED_LINE] + 1, segment[REV_GENERATED_COLUMN]));\n  }\n  return result;\n}\nfunction generatedPosition(map, source, line, column, bias, all) {\n  var _a, _b;\n  line--;\n  if (line < 0) throw new Error(LINE_GTR_ZERO);\n  if (column < 0) throw new Error(COL_GTR_EQ_ZERO);\n  const { sources, resolvedSources } = map;\n  let sourceIndex2 = sources.indexOf(source);\n  if (sourceIndex2 === -1) sourceIndex2 = resolvedSources.indexOf(source);\n  if (sourceIndex2 === -1) return all ? [] : GMapping(null, null);\n  const bySourceMemos = (_a = cast(map))._bySourceMemos || (_a._bySourceMemos = sources.map(memoizedState));\n  const generated = (_b = cast(map))._bySources || (_b._bySources = buildBySources(decodedMappings(map), bySourceMemos));\n  const segments = generated[sourceIndex2][line];\n  if (segments == null) return all ? [] : GMapping(null, null);\n  const memo = bySourceMemos[sourceIndex2];\n  if (all) return sliceGeneratedPositions(segments, memo, line, column, bias);\n  const index = traceSegmentInternal(segments, memo, line, column, bias);\n  if (index === -1) return GMapping(null, null);\n  const segment = segments[index];\n  return GMapping(segment[REV_GENERATED_LINE] + 1, segment[REV_GENERATED_COLUMN]);\n}\nexport {\n  FlattenMap as AnyMap,\n  FlattenMap,\n  GREATEST_LOWER_BOUND,\n  LEAST_UPPER_BOUND,\n  TraceMap,\n  allGeneratedPositionsFor,\n  decodedMap,\n  decodedMappings,\n  eachMapping,\n  encodedMap,\n  encodedMappings,\n  generatedPositionFor,\n  isIgnored,\n  originalPositionFor,\n  presortedDecodedMap,\n  sourceContentFor,\n  traceSegment\n};\n//# sourceMappingURL=trace-mapping.mjs.map\n","'use strict';\n\nObject.defineProperty(exports, 'commentRegex', {\n  get: function getCommentRegex () {\n    // Groups: 1: media type, 2: MIME type, 3: charset, 4: encoding, 5: data.\n    return /^\\s*?\\/[\\/\\*][@#]\\s+?sourceMappingURL=data:(((?:application|text)\\/json)(?:;charset=([^;,]+?)?)?)?(?:;(base64))?,(.*?)$/mg;\n  }\n});\n\n\nObject.defineProperty(exports, 'mapFileCommentRegex', {\n  get: function getMapFileCommentRegex () {\n    // Matches sourceMappingURL in either // or /* comment styles.\n    return /(?:\\/\\/[@#][ \\t]+?sourceMappingURL=([^\\s'\"`]+?)[ \\t]*?$)|(?:\\/\\*[@#][ \\t]+sourceMappingURL=([^*]+?)[ \\t]*?(?:\\*\\/){1}[ \\t]*?$)/mg;\n  }\n});\n\nvar decodeBase64;\nif (typeof Buffer !== 'undefined') {\n  if (typeof Buffer.from === 'function') {\n    decodeBase64 = decodeBase64WithBufferFrom;\n  } else {\n    decodeBase64 = decodeBase64WithNewBuffer;\n  }\n} else {\n  decodeBase64 = decodeBase64WithAtob;\n}\n\nfunction decodeBase64WithBufferFrom(base64) {\n  return Buffer.from(base64, 'base64').toString();\n}\n\nfunction decodeBase64WithNewBuffer(base64) {\n  if (typeof value === 'number') {\n    throw new TypeError('The value to decode must not be of type number.');\n  }\n  return new Buffer(base64, 'base64').toString();\n}\n\nfunction decodeBase64WithAtob(base64) {\n  return decodeURIComponent(escape(atob(base64)));\n}\n\nfunction stripComment(sm) {\n  return sm.split(',').pop();\n}\n\nfunction readFromFileMap(sm, read) {\n  var r = exports.mapFileCommentRegex.exec(sm);\n  // for some odd reason //# .. captures in 1 and /* .. */ in 2\n  var filename = r[1] || r[2];\n\n  try {\n    var sm = read(filename);\n    if (sm != null && typeof sm.catch === 'function') {\n      return sm.catch(throwError);\n    } else {\n      return sm;\n    }\n  } catch (e) {\n    throwError(e);\n  }\n\n  function throwError(e) {\n    throw new Error('An error occurred while trying to read the map file at ' + filename + '\\n' + e.stack);\n  }\n}\n\nfunction Converter (sm, opts) {\n  opts = opts || {};\n\n  if (opts.hasComment) {\n    sm = stripComment(sm);\n  }\n\n  if (opts.encoding === 'base64') {\n    sm = decodeBase64(sm);\n  } else if (opts.encoding === 'uri') {\n    sm = decodeURIComponent(sm);\n  }\n\n  if (opts.isJSON || opts.encoding) {\n    sm = JSON.parse(sm);\n  }\n\n  this.sourcemap = sm;\n}\n\nConverter.prototype.toJSON = function (space) {\n  return JSON.stringify(this.sourcemap, null, space);\n};\n\nif (typeof Buffer !== 'undefined') {\n  if (typeof Buffer.from === 'function') {\n    Converter.prototype.toBase64 = encodeBase64WithBufferFrom;\n  } else {\n    Converter.prototype.toBase64 = encodeBase64WithNewBuffer;\n  }\n} else {\n  Converter.prototype.toBase64 = encodeBase64WithBtoa;\n}\n\nfunction encodeBase64WithBufferFrom() {\n  var json = this.toJSON();\n  return Buffer.from(json, 'utf8').toString('base64');\n}\n\nfunction encodeBase64WithNewBuffer() {\n  var json = this.toJSON();\n  if (typeof json === 'number') {\n    throw new TypeError('The json to encode must not be of type number.');\n  }\n  return new Buffer(json, 'utf8').toString('base64');\n}\n\nfunction encodeBase64WithBtoa() {\n  var json = this.toJSON();\n  return btoa(unescape(encodeURIComponent(json)));\n}\n\nConverter.prototype.toURI = function () {\n  var json = this.toJSON();\n  return encodeURIComponent(json);\n};\n\nConverter.prototype.toComment = function (options) {\n  var encoding, content, data;\n  if (options != null && options.encoding === 'uri') {\n    encoding = '';\n    content = this.toURI();\n  } else {\n    encoding = ';base64';\n    content = this.toBase64();\n  }\n  data = 'sourceMappingURL=data:application/json;charset=utf-8' + encoding + ',' + content;\n  return options != null && options.multiline ? '/*# ' + data + ' */' : '//# ' + data;\n};\n\n// returns copy instead of original\nConverter.prototype.toObject = function () {\n  return JSON.parse(this.toJSON());\n};\n\nConverter.prototype.addProperty = function (key, value) {\n  if (this.sourcemap.hasOwnProperty(key)) throw new Error('property \"' + key + '\" already exists on the sourcemap, use set property instead');\n  return this.setProperty(key, value);\n};\n\nConverter.prototype.setProperty = function (key, value) {\n  this.sourcemap[key] = value;\n  return this;\n};\n\nConverter.prototype.getProperty = function (key) {\n  return this.sourcemap[key];\n};\n\nexports.fromObject = function (obj) {\n  return new Converter(obj);\n};\n\nexports.fromJSON = function (json) {\n  return new Converter(json, { isJSON: true });\n};\n\nexports.fromURI = function (uri) {\n  return new Converter(uri, { encoding: 'uri' });\n};\n\nexports.fromBase64 = function (base64) {\n  return new Converter(base64, { encoding: 'base64' });\n};\n\nexports.fromComment = function (comment) {\n  var m, encoding;\n  comment = comment\n    .replace(/^\\/\\*/g, '//')\n    .replace(/\\*\\/$/g, '');\n  m = exports.commentRegex.exec(comment);\n  encoding = m && m[4] || 'uri';\n  return new Converter(comment, { encoding: encoding, hasComment: true });\n};\n\nfunction makeConverter(sm) {\n  return new Converter(sm, { isJSON: true });\n}\n\nexports.fromMapFileComment = function (comment, read) {\n  if (typeof read === 'string') {\n    throw new Error(\n      'String directory paths are no longer supported with `fromMapFileComment`\\n' +\n      'Please review the Upgrading documentation at https://github.com/thlorenz/convert-source-map#upgrading'\n    )\n  }\n\n  var sm = readFromFileMap(comment, read);\n  if (sm != null && typeof sm.then === 'function') {\n    return sm.then(makeConverter);\n  } else {\n    return makeConverter(sm);\n  }\n};\n\n// Finds last sourcemap comment in file or returns null if none was found\nexports.fromSource = function (content) {\n  var m = content.match(exports.commentRegex);\n  return m ? exports.fromComment(m.pop()) : null;\n};\n\n// Finds last sourcemap comment in file or returns null if none was found\nexports.fromMapFileSource = function (content, read) {\n  if (typeof read === 'string') {\n    throw new Error(\n      'String directory paths are no longer supported with `fromMapFileSource`\\n' +\n      'Please review the Upgrading documentation at https://github.com/thlorenz/convert-source-map#upgrading'\n    )\n  }\n  var m = content.match(exports.mapFileCommentRegex);\n  return m ? exports.fromMapFileComment(m.pop(), read) : null;\n};\n\nexports.removeComments = function (src) {\n  return src.replace(exports.commentRegex, '');\n};\n\nexports.removeMapFileComments = function (src) {\n  return src.replace(exports.mapFileCommentRegex, '');\n};\n\nexports.generateMapFileComment = function (file, options) {\n  var data = 'sourceMappingURL=' + file;\n  return options && options.multiline ? '/*# ' + data + ' */' : '//# ' + data;\n};\n","// Copyright 2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { originalPositionFor, TraceMap } from '@jridgewell/trace-mapping';\nimport convert from 'convert-source-map';\n/**\n * Are we in a web worker?\n *\n * @returns A boolean.\n */\nexport const isWebWorker = () => typeof self !== 'undefined' && typeof self.document == 'undefined';\n/**\n * Are we in Node?\n *\n * @returns A boolean.\n */\nexport const isNode = () => typeof process !== 'undefined' && !!process?.versions?.node;\nconst parseV8StackTrace = (stack) => stack.split('\\n').filter(frame => frame.match(/<anonymous>/)).map(frame => {\n    const matches = frame.matchAll(/:([0-9]+):([0-9]+)\\)$/g).next().value;\n    const [line, column] = [parseInt(matches[1]), parseInt(matches[2])];\n    const methodName = frame.match(/^\\s+at\\s([^\\s]+)/)[1];\n    return {\n        line,\n        column,\n        // In Node or Chrome, a function constructor shows as 'eval'.\n        methodName: methodName === 'eval' ? null : methodName\n    };\n});\nconst parseSpiderMonkeyStackTrace = (stack) => stack.split('\\n')\n    .filter(frame => frame.match(/AsyncFunction/))\n    .map(frame => {\n    const matches = frame.matchAll(/AsyncFunction:([0-9]+):([0-9]+)/g).next().value;\n    const [line, column] = [parseInt(matches[1]), parseInt(matches[2])];\n    const methodName = frame.match(/^[^@]+/)[0];\n    return {\n        line,\n        column,\n        // In Firefox, a function constructor shows as 'anonymous'.\n        methodName: methodName === 'anonymous' ? null : methodName\n    };\n});\n/**\n * Attempt to parse a stack trace from a dynamically created function.\n *\n *  This makes the stack trace more readable at the potential cost of confusion\n * if a manifoldCAD user is also constructing new Functions within their model.\n *\n * @internal\n */\nexport const parseStackTrace = (stack) => {\n    if (stack.match(/^\\s+at\\s/gm)) {\n        // V8 -- Chrome, NodeJS\n        return parseV8StackTrace(stack);\n    }\n    else if (stack.match(/^([^@]+)@/gm)) {\n        // SpiderMonkey -- Firefox\n        return parseSpiderMonkeyStackTrace(stack);\n    }\n    else\n        return [];\n};\nexport const getSourceMappedStackTrace = (code, error, lineOffset = 0) => {\n    const converter = convert.fromSource(code);\n    if (!converter || !error.stack) {\n        // No inline source map.  We can't do anything.\n        return error.stack;\n    }\n    const parsed = parseStackTrace(error.stack);\n    if (!parsed.length) {\n        // We can't parse this.  Chances are, it's someone in Safari.\n        return error.stack;\n    }\n    const tracer = new TraceMap(converter.toObject());\n    const stack = parsed.map(frame => {\n        if ((frame.line + lineOffset) < 1) {\n            return frame; // Line number is out of range.\n        }\n        const { line, column, source: file } = originalPositionFor(tracer, { line: frame.line + lineOffset, column: frame.column });\n        const { methodName } = frame;\n        // column numbers should be 1 indexed.  Results are 0 indexed.\n        return { line, column: column + 1, file, methodName };\n    });\n    return [\n        error.toString(), ...stack.map((frame) => {\n            const location = `${frame.file}:${frame.line}:${frame.column}`;\n            if (frame.methodName) {\n                return `    at ${frame.methodName} (${location})`;\n            }\n            else {\n                return `    at ${location}`;\n            }\n        })\n    ].reduce((acc, cur) => `${acc}\\n${cur}`);\n};\n//# sourceMappingURL=util.js.map","// Copyright 2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport * as esbuild from 'esbuild-wasm';\nimport { BundlerError } from \"./error.js\";\nimport { isNode } from \"./util.js\";\nlet esbuildWasmUrl = null;\nlet esbuildHasOwnWorker = false;\nexport const setWasmUrl = (url) => {\n    esbuildWasmUrl = url;\n};\nexport const setHasOwnWorker = (x) => {\n    esbuildHasOwnWorker = x;\n};\n/**\n * These content delivery networks provide NPM modules as ES modules,\n * whether they were published that way or not.\n */\nexport const cdnUrlHelpers = {\n    'esm.sh': (specifier) => `https://esm.sh/${specifier}`,\n    'jsDelivr': (specifier) => `https://cdn.jsdelivr.net/npm/${specifier}/+esm`,\n    'skypack': (specifier) => `https://cdn.skypack.dev/${specifier}`\n};\nconst cdnUrl = (specifier, jsCDN) => {\n    if (!jsCDN)\n        return specifier;\n    const helper = cdnUrlHelpers[jsCDN];\n    return helper ? helper(specifier) : `${jsCDN}${specifier}`;\n};\n// Swallow informational logs in testing framework\nfunction log(...args) {\n    if (typeof self !== 'undefined' && self.console) {\n        self.console.log(...args);\n    }\n}\n/**\n * This is a plugin for esbuild that has three functions:\n *   * It resolves NPM packages to urls served by various CDNs.\n *   * It fetches imports from http/https urls.\n *   * It provides evaluation context to npm packages.\n *\n * ManifoldCAD libraries can include `manifold-3d/manifoldCAD` to get access to\n * the evaluator context.  Outside of the evaluator, this involves importing a\n * module.  Inside the evaluator, imports are in the global namespace.  The\n * imported module will not be able to see the actual evaluator context.  Here,\n * we will swap it out for an object we will inject at evaluation time.\n */\nexport const esbuildManifoldPlugin = (options = {}) => ({\n    name: 'esbuild-manifold-plugin',\n    async setup(build) {\n        let manifoldCADExportPath = null;\n        const manifoldCADExportSpecifier = 'manifold-3d/manifoldCAD';\n        const ManifoldCADExportMatch = /^manifold-3d\\/manifoldCAD(.ts|.js)?$/;\n        const manifoldCADExportNames = [\n            // Manifold classes.\n            'Mesh', 'Manifold', 'CrossSection',\n            // Manifold methods.\n            'setMinCircularAngle', 'setMinCircularEdgeLength', 'setCircularSegments',\n            'getCircularSegments', 'resetToCircularDefaults', 'triangulate',\n            // Scene builder exports.\n            'show', 'only', 'setMaterial', 'setMorphStart', 'setMorphEnd',\n            // GLTFNode and utilities.\n            'GLTFNode', 'getGLTFNodes', 'resetGLTFNodes',\n            // ManifoldCAD specific exports.\n            'isManifoldCAD'\n        ];\n        if (isNode()) {\n            // We only need to check against the local manifoldCAD context on disk if\n            // we happen to be running in node.  Truthfully, this is really only\n            // necessary in development.  End users will almost always import\n            // `manifold-3d/manifoldCAD` instead of `some/path/to/manifoldCAD`.\n            (async () => {\n                const { resolve, dirname } = await import('node:path');\n                const { fileURLToPath } = await import('node:url');\n                const dir = __dirname ?? import.meta?.dirname ??\n                    dirname(fileURLToPath(import.meta.url));\n                manifoldCADExportPath = resolve(dir, './manifoldCAD.ts');\n            })();\n        }\n        const skipResolve = {};\n        // Try to resolve local files.  If we can't, blindly resolve them to a CDN.\n        build.onResolve({ filter: /.*/ }, async (args) => {\n            // skipResolve used to avoid loops.\n            // https://github.com/evanw/esbuild/issues/2198#issuecomment-1104566397\n            if (args.pluginData === skipResolve)\n                return null;\n            // Skip a few cases handled elsewhere.\n            if (args.namespace === 'http-url')\n                return null;\n            if (args.path.match(/^https?:\\/\\//))\n                return null;\n            // Is this a manifoldCAD context import?\n            const pluginData = {\n                toplevel: args.importer === options.filename || args.importer === '<stdin>'\n            };\n            if (args.path.match(ManifoldCADExportMatch)) {\n                return { namespace: 'manifold-cad-globals', path: args.path, pluginData };\n            }\n            // Is this a virtual file?\n            if (options.files && Object.keys(options.files).includes(args.path)) {\n                return { namespace: 'virtual-file', path: args.path };\n            }\n            // Try esbuilds' resolver first.\n            const result = await build.resolve(args.path, {\n                resolveDir: args.resolveDir,\n                kind: 'import-statement',\n                pluginData: skipResolve\n            });\n            // We found a local file!\n            if (result.errors.length === 0) {\n                if (manifoldCADExportPath && manifoldCADExportPath === result.path) {\n                    // It resolved to our local manifoldCAD context.\n                    return {\n                        namespace: 'manifold-cad-globals',\n                        path: args.path,\n                        pluginData\n                    };\n                }\n                return result;\n            }\n            // Built in resolver failed.  Are we fetching remote packages?\n            if (options.fetchRemotePackages !== false && options.jsCDN) {\n                return {\n                    path: cdnUrl(args.path, options.jsCDN),\n                    namespace: 'http-url',\n                };\n            }\n            // Okay fine.  I give up.\n            return null;\n        });\n        // Inject context.\n        build.onLoad({ filter: /.*/, namespace: 'manifold-cad-globals' }, (args) => {\n            // This is a string replace.\n            const globals = args.pluginData?.toplevel ?\n                '_manifold_cad_top_level' :\n                '_manifold_cad_library';\n            return {\n                // Type hinting isn't necessary.  Only esbuild will see the swap,\n                // and it doesn't do type validation.\n                contents: `export const {${manifoldCADExportNames}} = ${globals};`,\n            };\n        });\n        // Virtual files.\n        build.onLoad({ filter: /.*/, namespace: 'virtual-file' }, (args) => ({ contents: (options.files)[args.path] }));\n        // Unless disabled, handle HTTP/HTTPs urls.\n        if (options.fetchRemotePackages !== false) {\n            // Resolve absolute urls.\n            build.onResolve({ filter: /^https?:\\/\\// }, args => {\n                return { path: args.path, namespace: 'http-url' };\n            });\n            // Resolve relative http urls into absolute urls.\n            build.onResolve({ filter: /.*/, namespace: 'http-url' }, args => {\n                const path = new URL(args.path, args.importer).toString();\n                // Is this a manifoldCAD context import from a remote package?\n                // e.g.: `/npm/manifold-3d/manifoldCAD/+esm`\n                if (path === cdnUrl(manifoldCADExportSpecifier, options.jsCDN)) {\n                    const response = {\n                        path,\n                        namespace: 'manifold-cad-globals',\n                        pluginData: { toplevel: false }\n                    };\n                    return response;\n                }\n                return { path, namespace: 'http-url' };\n            });\n            // Fetch urls.\n            build.onLoad({ filter: /.*/, namespace: 'http-url' }, async (args) => {\n                const response = await fetch(args.path);\n                if (response.ok) {\n                    log(`Fetching ${args.path}.`);\n                    return { contents: await response.text() };\n                }\n                else {\n                    return { errors: [{ text: await response.text() }] };\n                }\n            });\n        }\n    },\n});\nlet esbuild_initialized = false;\nconst getEsbuildConfig = async (options = {}) => {\n    if (!esbuild_initialized) {\n        const esbuildOptions = {};\n        if (typeof esbuildWasmUrl === 'string' && esbuildWasmUrl) {\n            esbuildOptions.wasmURL = esbuildWasmUrl;\n            esbuildOptions.worker = esbuildHasOwnWorker === true;\n        }\n        await esbuild.initialize(esbuildOptions);\n        esbuild_initialized = true;\n    }\n    return {\n        // Create a bundle in memory.\n        bundle: true,\n        write: false,\n        platform: 'neutral',\n        treeShaking: false,\n        sourcemap: 'inline',\n        sourcesContent: false, // We have the source handy already.\n        format: 'cjs',\n        logLevel: 'silent',\n        plugins: [\n            esbuildManifoldPlugin(options),\n        ],\n        // Some CDN imports will check import.meta.env.  This is only present when\n        // generating an ESM bundle.  In other cases, it generates log noise, so\n        // let's drop it down a log level.\n        logOverride: { 'empty-import-meta': 'info' }\n    };\n};\nexport const bundleFile = async (entrypoint, options = {}) => {\n    try {\n        const built = await esbuild.build({\n            ...(await getEsbuildConfig({ ...options, filename: entrypoint })),\n            entryPoints: [entrypoint],\n        });\n        return built.outputFiles[0].text;\n    }\n    catch (error) {\n        if (error.errors?.length) {\n            throw new BundlerError(error);\n        }\n        else {\n            throw error;\n        }\n    }\n};\nexport const bundleCode = async (code, options = {}) => {\n    try {\n        let resolveDir;\n        if (isNode() && options.filename) {\n            const { dirname } = await import('node:path');\n            resolveDir = dirname(options.filename);\n        }\n        const built = await esbuild.build({\n            ...(await getEsbuildConfig(options)),\n            stdin: {\n                contents: code,\n                sourcefile: options.filename,\n                resolveDir,\n                loader: 'ts',\n            }\n        });\n        return built.outputFiles[0].text;\n    }\n    catch (error) {\n        if (error.errors?.length) {\n            throw new BundlerError(error);\n        }\n        else {\n            throw error;\n        }\n    }\n};\n//# sourceMappingURL=bundler.js.map","/* prettier-ignore */\r\nexport const defMatrix = [\r\n    1, 0, 0, 0,\r\n    0, 1, 0, 0,\r\n    0, 0, 1, 0,\r\n    0, 0, 0, 1\r\n  ]\r\n","\r\n/** transform for attribute as specifiend in 3mf format\r\n * \r\n * When objects need to be transformed for rotation, scaling, or translation purposes, \r\n * row-major affine 3D matrices (4x4) are used. The matrix SHOULD NOT be singular or nearly singular.\r\n * Transforms are of the form, where only the first 3 column values are specified. \r\n * The last column is never provided, and has the fixed values 0.0, 0.0, 0.0, 1.0. \r\n * When specified as an attribute value, \r\n * matrices have the form \"m00 m01 m02 m10 m11 m12 m20 m21 m22 m30 m31 m32\" \r\n * where each value is a decimal number of arbitrary precision.\r\n * \r\n * @param {mat4} matrix\r\n * @return string tarnsform attribute value\r\n*/\r\nexport const matrix2str = m=>{\r\n    let str = ''\r\n    for(let i=0; i<16; i++){\r\n        if(i % 4 == 3) continue\r\n        if(i>0) str += ' '\r\n        str += m[i] || 0\r\n    }\r\n    return str\r\n}","import { defMatrix } from './defMatrix.js'\r\nimport { matrix2str } from './matrix2str.js'\r\n/**\r\n * \r\n * @param {string} id - must start with 1, can not be zero by spec\r\n * @param {mat4} matrix \r\n * @returns \r\n */\r\nexport const makeItem = (id = 1, matrix = defMatrix) =>\r\n  `    <item objectid=\"${id}\" transform=\"${matrix2str(matrix)}\" />\\n`\r\n","export const toDate3mf = d => (d ? d.toISOString().substring(0, 10) : '')\r\n","import { toDate3mf } from './toDate3mf.js'\r\n\r\n/**\r\n * @typedef Header\r\n * @prop {'micron'|'millimeter'|'centimeter'|'inch'|'foot'|'meter'} unit\r\n * @prop {string} [title]\r\n * @prop {string} [author]\r\n * @prop {string} [description]\r\n * @prop {string} [application]\r\n * @prop {string} [creationDate]\r\n * @prop {string} [license]\r\n * @prop {string} [modificationDate] \r\n * \r\n * \r\n * @param {Array<string>} out \r\n * @param {Header} param1 \r\n */\r\nexport function pushHeader(out,{\r\n  unit = 'millimeter',\r\n  title = 'jscad model',\r\n  author = '',\r\n  description = '',\r\n  application = 'jscad',\r\n  creationDate = new Date(),\r\n  license = '',\r\n  modificationDate,\r\n}={}) {\r\n  out.push(\r\n    `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<model unit=\"${unit}\" xml:lang=\"en-US\" xmlns=\"http://schemas.microsoft.com/3dmanufacturing/core/2015/02\" xmlns:slic3rpe=\"http://schemas.slic3r.org/3mf/2017/06\">\r\n  <metadata name=\"slic3rpe:Version3mf\">1</metadata>\r\n  <metadata name=\"Title\">${title}</metadata>\r\n  <metadata name=\"Designer\">${author}</metadata>\r\n  <metadata name=\"Description\">${description || title}</metadata>\r\n  <metadata name=\"Copyright\"></metadata>\r\n  <metadata name=\"LicenseTerms\">${license}</metadata>\r\n  <metadata name=\"Rating\"></metadata>\r\n  <metadata name=\"CreationDate\">${toDate3mf(creationDate)}</metadata>\r\n  <metadata name=\"ModificationDate\">${toDate3mf(modificationDate || creationDate)}</metadata>\r\n  <metadata name=\"Application\">${application}</metadata>\r\n   `,\r\n  )\r\n}\r\n","import {defMatrix} from './defMatrix.js'\r\nimport {matrix2str} from './matrix2str.js'\r\n\r\n/**\r\n * \r\n * @param {Array<String>} out \r\n * @param {string} id \r\n * @param {Array<import('../index.js').Component3MF>} children \r\n * @param {string} name \r\n */\r\nexport function pushObjectWithComponents(out, id, children, name) {\r\n  out.push(`<object id=\"${id}\" type=\"model\"${\r\n      name == null ? '' : ' name=\"' + name + '\"'}>\\n`)\r\n  out.push(` <components>\\n`)\r\n  children.forEach(\r\n      ({objectID, transform}) => {addComp(out, objectID, transform)})\r\n  out.push(` </components>\\n`)\r\n  out.push(`</object>\\n`)\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} out \r\n * @param {*} id - must start with 1, can not be zero by spec \r\n * @param {*} matrix \r\n */\r\nconst addComp = (out, id = 1, matrix = defMatrix) => {\r\n  out.push(\r\n      `    <component objectid=\"${id}\" transform=\"${matrix2str(matrix)}\" />\\n`)\r\n}\r\n","/**\r\n *\r\n * @param {Arrray<string>} out\r\n * @param {string} id\r\n * @param {Float32Array} vertices\r\n * @param {Uint32Array} indices\r\n * @param {number} precision\r\n * @param {string} [name]\r\n * @returns\r\n */\r\nexport function pushObjectWithMesh(\r\n    out, id, vertices, indices, precision, name) {\r\n  out.push(`  <object id=\"${id}\" type=\"model\"${\r\n      !name ? '' : ' name=\"' + name + '\"'}>\r\n   <mesh>\r\n    <vertices>\r\n`)\r\n\r\n  for (let i = 0; i < vertices.length; i += 3) {\r\n    out.push(`     <vertex x=\"${vertices[i].toPrecision(precision)}\" y=\"${\r\n        vertices[i + 1].toPrecision(\r\n            precision)}\" z=\"${vertices[i + 2].toPrecision(precision)}\" />\\n`)\r\n  }\r\n\r\n  out.push(`    </vertices>\r\n    <triangles>\r\n`)\r\n\r\n  for (let i = 0; i < indices.length; i += 3) {\r\n    out.push(`     <triangle v1=\"${indices[i]}\" v2=\"${indices[i + 1]}\" v3=\"${\r\n        indices[i + 2]}\" />\\n`)\r\n  }\r\n\r\n\r\n  out.push(`    </triangles>\r\n   </mesh>\r\n  </object>\r\n`)\r\n\r\n  return out\r\n}","\r\n/** File that describes content types inside a 3mf  */\r\nexport const fileForContentTypes = {\r\n  name:'[Content_Types].xml',\r\n  content: `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\">\r\n<Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\" />\r\n<Default Extension=\"model\" ContentType=\"application/vnd.ms-package.3dmanufacturing-3dmodel+xml\" />\r\n<Default Extension=\"png\" ContentType=\"image/png\" />\r\n</Types>`\r\n}\r\n\r\n","// this implementation exports to 3mf by filling array of strings and doing join\r\n// at the encoding tests for large files have shown significant speedup related\r\n// to using string concatenation\r\nimport { makeItem } from './src/makeItem.js'\r\nimport { pushHeader } from './src/pushHeader.js'\r\nimport { pushObjectWithComponents } from './src/pushObjectComponent.js'\r\nimport { pushObjectWithMesh } from './src/pushObjectMesh.js'\r\n\r\nexport * from './src/staticFiles.js'\r\n\r\n/**\r\n * @typedef Mesh3MF\r\n * @prop {string} id\r\n * @prop {Float32Array} vertices\r\n * @prop {Uint32Array} indices\r\n * @prop {string} [name]\r\n *\r\n * @typedef Mesh3MFSimpleExt\r\n * @prop {mat4} transform\r\n *\r\n * @typedef {Mesh3MF & Mesh3MFSimpleExt} Mesh3MFSimple\r\n *\r\n * @typedef Component3MF\r\n * @prop {string} id\r\n * @prop {string} name\r\n * @prop {Array<Child3MF>} children\r\n *\r\n * @typedef Child3MF\r\n * @prop {string} objectID\r\n * @prop {mat4} transform\r\n *\r\n * @typedef To3MF\r\n * @prop {Array<Mesh3MF>} meshes - manually declare meshes\r\n * @prop {Array<Component3MF>} [components] - components can combine items\r\n * @prop {Array<Child3MF>} items - output items, each pointing to component or mesh with objectID\r\n * @prop {number} precision\r\n * @prop {import('./src/pushHeader.js').Header} header\r\n */\r\n\r\n/**\r\n * @param {To3MF} options\r\n * @returns string\r\n */\r\nexport function to3dmodel({ meshes = [], components = [], items = [], precision = 17, header }) {\r\n  // items to be placed on the scene (build section of 3mf)\r\n  const out = []\r\n\r\n  // <model> tag is opened here\r\n  pushHeader(out, header)\r\n\r\n  // #region resources\r\n  out.push('  <resources>\\n')\r\n\r\n  if (items.length == 0) {\r\n    console.error('3MF empty build! Include items or simple.')\r\n  }\r\n\r\n  meshes.forEach(({ id, vertices, indices, name }) => pushObjectWithMesh(out, id, vertices, indices, precision, name))\r\n\r\n  components.forEach(({ id, children, name }) => {\r\n    pushObjectWithComponents(out, id, children, name)\r\n  })\r\n\r\n  out.push('  </resources>\\n')\r\n  // #endregion\r\n\r\n  out.push(`<build>\\n`)\r\n  items.forEach(({ objectID, transform }) => {\r\n    out.push(makeItem(objectID, transform))\r\n  })\r\n  out.push('</build>\\n')\r\n\r\n  out.push('</model>\\n') // model tag was opened in the pushHeader()\r\n\r\n  return out.join('')\r\n}\r\n\r\n/** Simple export provided meshes that have transform attached to them and autocreate items and pass to to3dmodel.\r\n *\r\n * @param {Array<Mesh3MFSimple>} meshes\r\n * @param {import('./src/pushHeader.js').Header} header\r\n * @param {number} precision\r\n * @returns string\r\n */\r\nexport function to3dmodelSimple(meshes, header, precision) {\r\n  const items = []\r\n  meshes.forEach(({ id, transform }) => {\r\n    items.push({ objectID: id, transform })\r\n  })\r\n  return to3dmodel({ meshes, items, header, precision })\r\n}\r\n\r\n/** File that describes file relationships inside a 3mf  */\r\nexport class FileForRelThumbnail {\r\n  constructor() {\r\n    this.idSeq = 0\r\n    this.lines = [\r\n      `<?xml version=\"1.0\" encoding=\"UTF-8\"?>`,\r\n      `<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">`,\r\n    ]\r\n  }\r\n  get name() {\r\n    return '_rels/.rels'\r\n  }\r\n    /**\r\n   *\r\n   * @param {*} target file path\r\n   * @param {*} xmlType xml schema url\r\n   */\r\n  addRel(target, xmlType) {\r\n    this.lines.push(`  <Relationship Target=\"${target}\" Id=\"rel-${++this.idSeq}\" Type=\"${xmlType}\" />`)\r\n  }\r\n  add3dModel(path) {\r\n    this.addRel(path, 'http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel')\r\n  }\r\n  addThumbnail(path) {\r\n    this.addRel(path, 'http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail')\r\n  }\r\n\r\n  get content() {\r\n    return this.lines.join('\\n') + `\\n</Relationships>`\r\n  }\r\n}\r\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) {\n        if (ev.data.length) {\n            strm.push(ev.data[0], ev.data[1]);\n            postMessage([ev.data[0].length]);\n        }\n        else\n            strm.flush();\n    };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else if (dat.length == 1) {\n            strm.queuedSize -= dat[0];\n            if (strm.ondrain)\n                strm.ondrain(dat[0]);\n        }\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.queuedSize = 0;\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        strm.queuedSize += d.length;\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n    if (flush) {\n        strm.flush = function () { w.postMessage([]); };\n    }\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            this.b.set(chunk.subarray(0, split), this.s.z);\n            this.s.z = this.b.length;\n            this.p(this.b, false);\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * deflated output for small inputs.\n     */\n    Deflate.prototype.flush = function () {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        this.p(this.b, false);\n        this.s.w = this.s.i, this.s.i -= 2;\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6, 1);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7, 0);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * GZIPped output for small inputs.\n     */\n    Gzip.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8, 1);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l && !final) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * zlibbed output for small inputs.\n     */\n    Zlib.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10, 1);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11, 0);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.o = StrmOpt.call(this, opts, cb) || {};\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n    }\n    // init substream\n    // overriden by AsyncDecompress\n    Decompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (dat, final) {\n            _this.ondata(dat, final);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o)\n                        : new this.Z(this.o);\n                this.i();\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        Decompress.call(this, opts, cb);\n        this.queuedSize = 0;\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n    }\n    AsyncDecompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        };\n        this.s.ondrain = function (size) {\n            _this.queuedSize -= size;\n            if (_this.ondrain)\n                _this.ondrain(size);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        this.queuedSize += chunk.length;\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this.ondata(err, dat, final);\n                    _this.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this.d & 1))\n                        return;\n                    _this.u.splice(-1, 1);\n                    _this.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this = this;\n        this.i = new Inflate(function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this.k[0] == chks_3 && _this.c)\n                                        _this.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    // Synchronously decompress under 512KB, or barely-compressed data\n                    if (su < 524288 || sc > 0.8 * su) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n","// Copyright 2023-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { fileForContentTypes, FileForRelThumbnail, to3dmodel } from '@jscadui/3mf-export';\nimport { strToU8, zipSync } from 'fflate';\n/**\n * Object to convert GLTF documents to a 3MF binary.\n *\n * @property unit\n * @property title\n * @property author\n * @property description\n * @property application\n * @property creationDate\n * @property license\n * @property modificationDate\n */\nexport class Export3MF {\n    extensions = ['3mf'];\n    unit = 'millimeter';\n    title = 'ManifoldCAD.org model';\n    author;\n    description = 'ManifoldCAD.org model';\n    application = 'ManifoldCAD.org';\n    creationDate;\n    license;\n    modificationDate;\n    /**\n     * Convert a GLTF-Transform document to a 3MF model.\n     *\n     * @param doc The GLTF document to convert.\n     * @returns A blob containing the converted model.\n     */\n    async asBlob(doc) {\n        const to3mf = {\n            meshes: [],\n            components: [],\n            items: [],\n            precision: 7,\n            header: {\n                unit: this.unit,\n                title: this.title,\n                description: this.description,\n                application: this.application,\n                creationDate: this.creationDate,\n                license: this.license,\n                modificationDate: this.modificationDate\n            }\n        };\n        // GLTF references by array index.\n        // 3MF references by ID.\n        let nextGlobalID = 1;\n        const object2globalID = new Map();\n        const getObjectID = (obj) => `${object2globalID.get(obj)}`;\n        const getMeshID = (mesh) => {\n            // If a mesh has been cloned with a different material, find\n            // the original mesh.  This isn't a general GLTF feature; this is set\n            // by the ManifoldCAD GLTF exporter.\n            const { clonedFrom } = mesh.getExtras();\n            if (clonedFrom) {\n                return object2globalID.get(clonedFrom);\n            }\n            return object2globalID.get(mesh);\n        };\n        const setObjectID = (obj) => {\n            const objectID = `${nextGlobalID++}`;\n            object2globalID.set(obj, objectID);\n            return objectID;\n        };\n        // Get meshes in place first.\n        for (const mesh of doc.getRoot().listMeshes()) {\n            const manifoldPrimitive = mesh.getExtension('EXT_mesh_manifold');\n            if (manifoldPrimitive) {\n                // This mesh has a list of triangle vertices already.\n                const indices = manifoldPrimitive.getIndices();\n                const positionAccessor = mesh.listPrimitives()[0].getAttribute('POSITION');\n                const objectID = setObjectID(mesh);\n                to3mf.meshes.push({\n                    vertices: positionAccessor.getArray(),\n                    indices: indices.getArray(),\n                    id: objectID\n                });\n            }\n            const { clonedFrom } = mesh.getExtras();\n            if (!manifoldPrimitive && clonedFrom) {\n                // GLTF Mesh, instance of another mesh.\n                // getMeshID will find this when adding it to components.\n                continue;\n            }\n            if (!manifoldPrimitive && !clonedFrom) {\n                // GLTF Mesh, no manifold primitive,\n                // not an instance of another mesh.\n                // We should handle this case, but for now we do not.\n                console.log('skipping non-ManifoldCAD mesh');\n            }\n        }\n        // Some 3MF parsers (like PrusaSlicer) expect child nodes\n        // to be defined before their parents.\n        const nodes = doc.getRoot().listNodes().reverse();\n        for (const node of nodes) {\n            const meshID = node.getMesh() && getMeshID(node.getMesh());\n            to3mf.components.push({\n                id: setObjectID(node),\n                name: node.getName(),\n                children: meshID ? [{ objectID: meshID }] : [],\n                transform: node.getMatrix().map(n => n.toFixed(to3mf.precision))\n            });\n        }\n        // Now we can work out our node hierarchy.\n        for (const node of doc.getRoot().listNodes()) {\n            const objectID = getObjectID(node);\n            if (!objectID) {\n                console.log(`Could not find object ID for ${node.getName()}`);\n                continue;\n            }\n            const child = {\n                objectID,\n                // Most 3MF parsers will not accept a number in scientific notation.\n                // Transforms are serialized to a string, containing 12 numbers\n                // separated by spaces.  If we force a number to a string here,\n                // 3mf-export passes it through.\n                transform: node.getMatrix().map(n => n.toFixed(to3mf?.precision ?? 7))\n            };\n            const parent = node.getParentNode();\n            if (parent) {\n                // This is a child node, add it to its parent.\n                const parentID = getObjectID(parent);\n                const parent3mf = to3mf.components.find((comp) => comp.id == parentID);\n                parent3mf.children.push(child);\n            }\n            else {\n                // This is a root node.\n                // Add it to the build list.\n                to3mf.items.push({ objectID });\n            }\n        }\n        const fileForRelThumbnail = new FileForRelThumbnail();\n        fileForRelThumbnail.add3dModel('3D/3dmodel.model');\n        const model = to3dmodel(to3mf);\n        const files = {};\n        files['3D/3dmodel.model'] = strToU8(model);\n        files[fileForContentTypes.name] = strToU8(fileForContentTypes.content);\n        files[fileForRelThumbnail.name] = strToU8(fileForRelThumbnail.content);\n        const zipFile = zipSync(files);\n        return new Blob([zipFile], { type: 'application/vnd.ms-package.3dmanufacturing-3dmodel+xml' });\n    }\n}\n//# sourceMappingURL=export-3mf.js.map","///////////////////////////////////////////////////\n// KTX2 Header.\n///////////////////////////////////////////////////\nconst KHR_SUPERCOMPRESSION_NONE = 0;\nconst KHR_SUPERCOMPRESSION_BASISLZ = 1;\nconst KHR_SUPERCOMPRESSION_ZSTD = 2;\nconst KHR_SUPERCOMPRESSION_ZLIB = 3;\n///////////////////////////////////////////////////\n// Data Format Descriptor (DFD).\n///////////////////////////////////////////////////\nconst KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT = 0;\nconst KHR_DF_VENDORID_KHRONOS = 0;\nconst KHR_DF_VERSION = 2;\nconst KHR_DF_MODEL_UNSPECIFIED = 0;\nconst KHR_DF_MODEL_RGBSDA = 1;\n// ...\nconst KHR_DF_MODEL_ETC1 = 160;\nconst KHR_DF_MODEL_ETC2 = 161;\nconst KHR_DF_MODEL_ASTC = 162;\nconst KHR_DF_MODEL_ETC1S = 163;\nconst KHR_DF_MODEL_UASTC = 166;\nconst KHR_DF_FLAG_ALPHA_STRAIGHT = 0;\nconst KHR_DF_FLAG_ALPHA_PREMULTIPLIED = 1;\nconst KHR_DF_TRANSFER_UNSPECIFIED = 0;\nconst KHR_DF_TRANSFER_LINEAR = 1;\nconst KHR_DF_TRANSFER_SRGB = 2;\nconst KHR_DF_TRANSFER_ITU = 3;\nconst KHR_DF_TRANSFER_NTSC = 4;\nconst KHR_DF_TRANSFER_SLOG = 5;\nconst KHR_DF_TRANSFER_SLOG2 = 6;\nconst KHR_DF_TRANSFER_BT1886 = 7;\nconst KHR_DF_TRANSFER_HLG_OETF = 8;\nconst KHR_DF_TRANSFER_HLG_EOTF = 9;\nconst KHR_DF_TRANSFER_PQ_EOTF = 10;\nconst KHR_DF_TRANSFER_PQ_OETF = 11;\nconst KHR_DF_TRANSFER_DCIP3 = 12;\nconst KHR_DF_TRANSFER_PAL_OETF = 13;\nconst KHR_DF_TRANSFER_PAL625_EOTF = 14;\nconst KHR_DF_TRANSFER_ST240 = 15;\nconst KHR_DF_TRANSFER_ACESCC = 16;\nconst KHR_DF_TRANSFER_ACESCCT = 17;\nconst KHR_DF_TRANSFER_ADOBERGB = 18;\nconst KHR_DF_PRIMARIES_UNSPECIFIED = 0;\nconst KHR_DF_PRIMARIES_BT709 = 1;\nconst KHR_DF_PRIMARIES_BT601_EBU = 2;\nconst KHR_DF_PRIMARIES_BT601_SMPTE = 3;\nconst KHR_DF_PRIMARIES_BT2020 = 4;\nconst KHR_DF_PRIMARIES_CIEXYZ = 5;\nconst KHR_DF_PRIMARIES_ACES = 6;\nconst KHR_DF_PRIMARIES_ACESCC = 7;\nconst KHR_DF_PRIMARIES_NTSC1953 = 8;\nconst KHR_DF_PRIMARIES_PAL525 = 9;\nconst KHR_DF_PRIMARIES_DISPLAYP3 = 10;\nconst KHR_DF_PRIMARIES_ADOBERGB = 11;\nconst KHR_DF_CHANNEL_RGBSDA_RED = 0;\nconst KHR_DF_CHANNEL_RGBSDA_GREEN = 1;\nconst KHR_DF_CHANNEL_RGBSDA_BLUE = 2;\nconst KHR_DF_CHANNEL_RGBSDA_STENCIL = 13;\nconst KHR_DF_CHANNEL_RGBSDA_DEPTH = 14;\nconst KHR_DF_CHANNEL_RGBSDA_ALPHA = 15;\nconst KHR_DF_SAMPLE_DATATYPE_FLOAT = 0x80;\nconst KHR_DF_SAMPLE_DATATYPE_SIGNED = 0x40;\nconst KHR_DF_SAMPLE_DATATYPE_EXPONENT = 0x20;\nconst KHR_DF_SAMPLE_DATATYPE_LINEAR = 0x10;\n///////////////////////////////////////////////////\n// VK FORMAT.\n///////////////////////////////////////////////////\nconst VK_FORMAT_UNDEFINED = 0;\nconst VK_FORMAT_R4G4_UNORM_PACK8 = 1;\nconst VK_FORMAT_R4G4B4A4_UNORM_PACK16 = 2;\nconst VK_FORMAT_B4G4R4A4_UNORM_PACK16 = 3;\nconst VK_FORMAT_R5G6B5_UNORM_PACK16 = 4;\nconst VK_FORMAT_B5G6R5_UNORM_PACK16 = 5;\nconst VK_FORMAT_R5G5B5A1_UNORM_PACK16 = 6;\nconst VK_FORMAT_B5G5R5A1_UNORM_PACK16 = 7;\nconst VK_FORMAT_A1R5G5B5_UNORM_PACK16 = 8;\nconst VK_FORMAT_R8_UNORM = 9;\nconst VK_FORMAT_R8_SNORM = 10;\nconst VK_FORMAT_R8_UINT = 13;\nconst VK_FORMAT_R8_SINT = 14;\nconst VK_FORMAT_R8_SRGB = 15;\nconst VK_FORMAT_R8G8_UNORM = 16;\nconst VK_FORMAT_R8G8_SNORM = 17;\nconst VK_FORMAT_R8G8_UINT = 20;\nconst VK_FORMAT_R8G8_SINT = 21;\nconst VK_FORMAT_R8G8_SRGB = 22;\nconst VK_FORMAT_R8G8B8_UNORM = 23;\nconst VK_FORMAT_R8G8B8_SNORM = 24;\nconst VK_FORMAT_R8G8B8_UINT = 27;\nconst VK_FORMAT_R8G8B8_SINT = 28;\nconst VK_FORMAT_R8G8B8_SRGB = 29;\nconst VK_FORMAT_B8G8R8_UNORM = 30;\nconst VK_FORMAT_B8G8R8_SNORM = 31;\nconst VK_FORMAT_B8G8R8_UINT = 34;\nconst VK_FORMAT_B8G8R8_SINT = 35;\nconst VK_FORMAT_B8G8R8_SRGB = 36;\nconst VK_FORMAT_R8G8B8A8_UNORM = 37;\nconst VK_FORMAT_R8G8B8A8_SNORM = 38;\nconst VK_FORMAT_R8G8B8A8_UINT = 41;\nconst VK_FORMAT_R8G8B8A8_SINT = 42;\nconst VK_FORMAT_R8G8B8A8_SRGB = 43;\nconst VK_FORMAT_B8G8R8A8_UNORM = 44;\nconst VK_FORMAT_B8G8R8A8_SNORM = 45;\nconst VK_FORMAT_B8G8R8A8_UINT = 48;\nconst VK_FORMAT_B8G8R8A8_SINT = 49;\nconst VK_FORMAT_B8G8R8A8_SRGB = 50;\nconst VK_FORMAT_A2R10G10B10_UNORM_PACK32 = 58;\nconst VK_FORMAT_A2R10G10B10_SNORM_PACK32 = 59;\nconst VK_FORMAT_A2R10G10B10_UINT_PACK32 = 62;\nconst VK_FORMAT_A2R10G10B10_SINT_PACK32 = 63;\nconst VK_FORMAT_A2B10G10R10_UNORM_PACK32 = 64;\nconst VK_FORMAT_A2B10G10R10_SNORM_PACK32 = 65;\nconst VK_FORMAT_A2B10G10R10_UINT_PACK32 = 68;\nconst VK_FORMAT_A2B10G10R10_SINT_PACK32 = 69;\nconst VK_FORMAT_R16_UNORM = 70;\nconst VK_FORMAT_R16_SNORM = 71;\nconst VK_FORMAT_R16_UINT = 74;\nconst VK_FORMAT_R16_SINT = 75;\nconst VK_FORMAT_R16_SFLOAT = 76;\nconst VK_FORMAT_R16G16_UNORM = 77;\nconst VK_FORMAT_R16G16_SNORM = 78;\nconst VK_FORMAT_R16G16_UINT = 81;\nconst VK_FORMAT_R16G16_SINT = 82;\nconst VK_FORMAT_R16G16_SFLOAT = 83;\nconst VK_FORMAT_R16G16B16_UNORM = 84;\nconst VK_FORMAT_R16G16B16_SNORM = 85;\nconst VK_FORMAT_R16G16B16_UINT = 88;\nconst VK_FORMAT_R16G16B16_SINT = 89;\nconst VK_FORMAT_R16G16B16_SFLOAT = 90;\nconst VK_FORMAT_R16G16B16A16_UNORM = 91;\nconst VK_FORMAT_R16G16B16A16_SNORM = 92;\nconst VK_FORMAT_R16G16B16A16_UINT = 95;\nconst VK_FORMAT_R16G16B16A16_SINT = 96;\nconst VK_FORMAT_R16G16B16A16_SFLOAT = 97;\nconst VK_FORMAT_R32_UINT = 98;\nconst VK_FORMAT_R32_SINT = 99;\nconst VK_FORMAT_R32_SFLOAT = 100;\nconst VK_FORMAT_R32G32_UINT = 101;\nconst VK_FORMAT_R32G32_SINT = 102;\nconst VK_FORMAT_R32G32_SFLOAT = 103;\nconst VK_FORMAT_R32G32B32_UINT = 104;\nconst VK_FORMAT_R32G32B32_SINT = 105;\nconst VK_FORMAT_R32G32B32_SFLOAT = 106;\nconst VK_FORMAT_R32G32B32A32_UINT = 107;\nconst VK_FORMAT_R32G32B32A32_SINT = 108;\nconst VK_FORMAT_R32G32B32A32_SFLOAT = 109;\nconst VK_FORMAT_R64_UINT = 110;\nconst VK_FORMAT_R64_SINT = 111;\nconst VK_FORMAT_R64_SFLOAT = 112;\nconst VK_FORMAT_R64G64_UINT = 113;\nconst VK_FORMAT_R64G64_SINT = 114;\nconst VK_FORMAT_R64G64_SFLOAT = 115;\nconst VK_FORMAT_R64G64B64_UINT = 116;\nconst VK_FORMAT_R64G64B64_SINT = 117;\nconst VK_FORMAT_R64G64B64_SFLOAT = 118;\nconst VK_FORMAT_R64G64B64A64_UINT = 119;\nconst VK_FORMAT_R64G64B64A64_SINT = 120;\nconst VK_FORMAT_R64G64B64A64_SFLOAT = 121;\nconst VK_FORMAT_B10G11R11_UFLOAT_PACK32 = 122;\nconst VK_FORMAT_E5B9G9R9_UFLOAT_PACK32 = 123;\nconst VK_FORMAT_D16_UNORM = 124;\nconst VK_FORMAT_X8_D24_UNORM_PACK32 = 125;\nconst VK_FORMAT_D32_SFLOAT = 126;\nconst VK_FORMAT_S8_UINT = 127;\nconst VK_FORMAT_D16_UNORM_S8_UINT = 128;\nconst VK_FORMAT_D24_UNORM_S8_UINT = 129;\nconst VK_FORMAT_D32_SFLOAT_S8_UINT = 130;\nconst VK_FORMAT_BC1_RGB_UNORM_BLOCK = 131;\nconst VK_FORMAT_BC1_RGB_SRGB_BLOCK = 132;\nconst VK_FORMAT_BC1_RGBA_UNORM_BLOCK = 133;\nconst VK_FORMAT_BC1_RGBA_SRGB_BLOCK = 134;\nconst VK_FORMAT_BC2_UNORM_BLOCK = 135;\nconst VK_FORMAT_BC2_SRGB_BLOCK = 136;\nconst VK_FORMAT_BC3_UNORM_BLOCK = 137;\nconst VK_FORMAT_BC3_SRGB_BLOCK = 138;\nconst VK_FORMAT_BC4_UNORM_BLOCK = 139;\nconst VK_FORMAT_BC4_SNORM_BLOCK = 140;\nconst VK_FORMAT_BC5_UNORM_BLOCK = 141;\nconst VK_FORMAT_BC5_SNORM_BLOCK = 142;\nconst VK_FORMAT_BC6H_UFLOAT_BLOCK = 143;\nconst VK_FORMAT_BC6H_SFLOAT_BLOCK = 144;\nconst VK_FORMAT_BC7_UNORM_BLOCK = 145;\nconst VK_FORMAT_BC7_SRGB_BLOCK = 146;\nconst VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK = 147;\nconst VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK = 148;\nconst VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK = 149;\nconst VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK = 150;\nconst VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK = 151;\nconst VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK = 152;\nconst VK_FORMAT_EAC_R11_UNORM_BLOCK = 153;\nconst VK_FORMAT_EAC_R11_SNORM_BLOCK = 154;\nconst VK_FORMAT_EAC_R11G11_UNORM_BLOCK = 155;\nconst VK_FORMAT_EAC_R11G11_SNORM_BLOCK = 156;\nconst VK_FORMAT_ASTC_4x4_UNORM_BLOCK = 157;\nconst VK_FORMAT_ASTC_4x4_SRGB_BLOCK = 158;\nconst VK_FORMAT_ASTC_5x4_UNORM_BLOCK = 159;\nconst VK_FORMAT_ASTC_5x4_SRGB_BLOCK = 160;\nconst VK_FORMAT_ASTC_5x5_UNORM_BLOCK = 161;\nconst VK_FORMAT_ASTC_5x5_SRGB_BLOCK = 162;\nconst VK_FORMAT_ASTC_6x5_UNORM_BLOCK = 163;\nconst VK_FORMAT_ASTC_6x5_SRGB_BLOCK = 164;\nconst VK_FORMAT_ASTC_6x6_UNORM_BLOCK = 165;\nconst VK_FORMAT_ASTC_6x6_SRGB_BLOCK = 166;\nconst VK_FORMAT_ASTC_8x5_UNORM_BLOCK = 167;\nconst VK_FORMAT_ASTC_8x5_SRGB_BLOCK = 168;\nconst VK_FORMAT_ASTC_8x6_UNORM_BLOCK = 169;\nconst VK_FORMAT_ASTC_8x6_SRGB_BLOCK = 170;\nconst VK_FORMAT_ASTC_8x8_UNORM_BLOCK = 171;\nconst VK_FORMAT_ASTC_8x8_SRGB_BLOCK = 172;\nconst VK_FORMAT_ASTC_10x5_UNORM_BLOCK = 173;\nconst VK_FORMAT_ASTC_10x5_SRGB_BLOCK = 174;\nconst VK_FORMAT_ASTC_10x6_UNORM_BLOCK = 175;\nconst VK_FORMAT_ASTC_10x6_SRGB_BLOCK = 176;\nconst VK_FORMAT_ASTC_10x8_UNORM_BLOCK = 177;\nconst VK_FORMAT_ASTC_10x8_SRGB_BLOCK = 178;\nconst VK_FORMAT_ASTC_10x10_UNORM_BLOCK = 179;\nconst VK_FORMAT_ASTC_10x10_SRGB_BLOCK = 180;\nconst VK_FORMAT_ASTC_12x10_UNORM_BLOCK = 181;\nconst VK_FORMAT_ASTC_12x10_SRGB_BLOCK = 182;\nconst VK_FORMAT_ASTC_12x12_UNORM_BLOCK = 183;\nconst VK_FORMAT_ASTC_12x12_SRGB_BLOCK = 184;\nconst VK_FORMAT_R10X6_UNORM_PACK16 = 1000156007;\nconst VK_FORMAT_R10X6G10X6_UNORM_2PACK16 = 1000156008;\nconst VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16 = 1000156009;\nconst VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16 = 1000156010;\nconst VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16 = 1000156011;\nconst VK_FORMAT_R12X4_UNORM_PACK16 = 1000156017;\nconst VK_FORMAT_R12X4G12X4_UNORM_2PACK16 = 1000156018;\nconst VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16 = 1000156019;\nconst VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16 = 1000156020;\nconst VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16 = 1000156021;\nconst VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG = 1000054000;\nconst VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG = 1000054001;\nconst VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG = 1000054002;\nconst VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG = 1000054003;\nconst VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG = 1000054004;\nconst VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG = 1000054005;\nconst VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG = 1000054006;\nconst VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG = 1000054007;\nconst VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT = 1000066000;\nconst VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT = 1000066001;\nconst VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT = 1000066002;\nconst VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT = 1000066003;\nconst VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT = 1000066004;\nconst VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT = 1000066005;\nconst VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT = 1000066006;\nconst VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT = 1000066007;\nconst VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT = 1000066008;\nconst VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT = 1000066009;\nconst VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT = 1000066010;\nconst VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT = 1000066011;\nconst VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT = 1000066012;\nconst VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT = 1000066013;\nconst VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT = 1000340000;\nconst VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT = 1000340001;\n\n/**\n * Creates a 'default' {@link KTX2Container} object, initialized with common\n * configuration wfor BT709 primaries and sRGB transfer, without pixel data.\n * There's nothing particularly special about the 'default' container; creating\n * the KTX2Container object explicitly is also fine.\n */\nfunction createDefaultContainer() {\n  return {\n    vkFormat: VK_FORMAT_UNDEFINED,\n    typeSize: 1,\n    pixelWidth: 0,\n    pixelHeight: 0,\n    pixelDepth: 0,\n    layerCount: 0,\n    faceCount: 1,\n    levelCount: 0,\n    supercompressionScheme: KHR_SUPERCOMPRESSION_NONE,\n    levels: [],\n    dataFormatDescriptor: [{\n      vendorId: KHR_DF_VENDORID_KHRONOS,\n      descriptorType: KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,\n      versionNumber: KHR_DF_VERSION,\n      colorModel: KHR_DF_MODEL_UNSPECIFIED,\n      colorPrimaries: KHR_DF_PRIMARIES_BT709,\n      transferFunction: KHR_DF_TRANSFER_SRGB,\n      flags: KHR_DF_FLAG_ALPHA_STRAIGHT,\n      texelBlockDimension: [0, 0, 0, 0],\n      bytesPlane: [0, 0, 0, 0, 0, 0, 0, 0],\n      samples: []\n    }],\n    keyValue: {},\n    globalData: null\n  };\n}\n\nclass BufferReader {\n  constructor(data, byteOffset, byteLength, littleEndian) {\n    this._dataView = void 0;\n    this._littleEndian = void 0;\n    this._offset = void 0;\n    this._dataView = new DataView(data.buffer, data.byteOffset + byteOffset, byteLength);\n    this._littleEndian = littleEndian;\n    this._offset = 0;\n  }\n  _nextUint8() {\n    const value = this._dataView.getUint8(this._offset);\n    this._offset += 1;\n    return value;\n  }\n  _nextUint16() {\n    const value = this._dataView.getUint16(this._offset, this._littleEndian);\n    this._offset += 2;\n    return value;\n  }\n  _nextUint32() {\n    const value = this._dataView.getUint32(this._offset, this._littleEndian);\n    this._offset += 4;\n    return value;\n  }\n  _nextUint64() {\n    const left = this._dataView.getUint32(this._offset, this._littleEndian);\n    const right = this._dataView.getUint32(this._offset + 4, this._littleEndian);\n    // TODO(cleanup): Just test this...\n    // const value = this._littleEndian ? left + (2 ** 32 * right) : (2 ** 32 * left) + right;\n    const value = left + 2 ** 32 * right;\n    this._offset += 8;\n    return value;\n  }\n  _nextInt32() {\n    const value = this._dataView.getInt32(this._offset, this._littleEndian);\n    this._offset += 4;\n    return value;\n  }\n  _nextUint8Array(len) {\n    const value = new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + this._offset, len);\n    this._offset += len;\n    return value;\n  }\n  _skip(bytes) {\n    this._offset += bytes;\n    return this;\n  }\n  _scan(maxByteLength, term = 0x00) {\n    const byteOffset = this._offset;\n    let byteLength = 0;\n    while (this._dataView.getUint8(this._offset) !== term && byteLength < maxByteLength) {\n      byteLength++;\n      this._offset++;\n    }\n    if (byteLength < maxByteLength) this._offset++;\n    return new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + byteOffset, byteLength);\n  }\n}\n\n///////////////////////////////////////////////////\n// Common.\n///////////////////////////////////////////////////\nconst KTX_WRITER = `KTX-Parse v${\"1.1.0\"}`;\nconst NUL = new Uint8Array([0x00]);\n///////////////////////////////////////////////////\n// KTX2 Header.\n///////////////////////////////////////////////////\nconst KTX2_ID = [\n// '´', 'K', 'T', 'X', '2', '0', 'ª', '\\r', '\\n', '\\x1A', '\\n'\n0xab, 0x4b, 0x54, 0x58, 0x20, 0x32, 0x30, 0xbb, 0x0d, 0x0a, 0x1a, 0x0a];\nconst HEADER_BYTE_LENGTH = 68; // 13 * 4 + 2 * 8\n\n/** Encodes text to an ArrayBuffer. */\nfunction encodeText(text) {\n  return new TextEncoder().encode(text);\n}\n/** Decodes an ArrayBuffer to text. */\nfunction decodeText(buffer) {\n  return new TextDecoder().decode(buffer);\n}\n/** Concatenates N ArrayBuffers. */\nfunction concat(buffers) {\n  let totalByteLength = 0;\n  for (const buffer of buffers) {\n    totalByteLength += buffer.byteLength;\n  }\n  const result = new Uint8Array(totalByteLength);\n  let byteOffset = 0;\n  for (const buffer of buffers) {\n    result.set(new Uint8Array(buffer), byteOffset);\n    byteOffset += buffer.byteLength;\n  }\n  return result;\n}\n/** Returns the least common multiple (LCM) for two positive integers. */\nfunction leastCommonMultiple(a, b) {\n  const max = Math.max(a, b);\n  const min = Math.min(a, b);\n  let lcm = max;\n  while (lcm % min !== 0) {\n    lcm += max;\n  }\n  return lcm;\n}\n/**\n * Returns amount of padding, in bytes, required to pad a value V to N-byte\n * boundaries. Both V and N must be positive integers.\n */\nfunction getPadding(v, n = 4) {\n  return Math.ceil(v / n) * n - v;\n}\n/** Returns byte length per texel block. */\nfunction getBlockByteLength(container) {\n  return container.levels[0].levelData.byteLength / getBlockCount(container, 0);\n}\n/**\n * Returns total number of blocks for given level. For VK_FORMAT_UNDEFINED, DFD is required.\n *\n * References:\n * - https://github.khronos.org/KTX-Specification/ktxspec.v2.html#levelImages\n */\nfunction getBlockCount(container, levelIndex) {\n  let blockCount = 1;\n  const pixelDimensions = [container.pixelWidth, container.pixelHeight, container.pixelDepth];\n  const blockDimensions = getBlockDimensions(container);\n  for (let i = 0; i < 3; i++) {\n    if (pixelDimensions[i] > 0) {\n      const dimBlockCount = Math.ceil(Math.floor(pixelDimensions[i] * 2 ** -levelIndex) / blockDimensions[i]);\n      blockCount *= Math.max(1, dimBlockCount);\n    }\n  }\n  if (container.layerCount > 0) {\n    blockCount *= container.layerCount;\n  }\n  if (container.faceCount > 0) {\n    blockCount *= container.faceCount;\n  }\n  return blockCount;\n}\n/**\n * Given a KTX2 container, returns block dimensions as [width, height, depth]. Requires valid DFD.\n */\nfunction getBlockDimensions(container) {\n  const [x, y, z] = container.dataFormatDescriptor[0].texelBlockDimension;\n  return [x + 1, y + 1, z + 1];\n}\n\n/**\n * Parses a KTX 2.0 file, returning an unpacked {@link KTX2Container} instance with all associated\n * data. The container's mip levels and other binary data are pointers into the original file, not\n * copies, so the original file should not be overwritten after reading.\n *\n * @param data Bytes of KTX 2.0 file, as Uint8Array or Buffer.\n */\nfunction read(data) {\n  ///////////////////////////////////////////////////\n  // KTX 2.0 Identifier.\n  ///////////////////////////////////////////////////\n  const id = new Uint8Array(data.buffer, data.byteOffset, KTX2_ID.length);\n  if (id[0] !== KTX2_ID[0] ||\n  // '´'\n  id[1] !== KTX2_ID[1] ||\n  // 'K'\n  id[2] !== KTX2_ID[2] ||\n  // 'T'\n  id[3] !== KTX2_ID[3] ||\n  // 'X'\n  id[4] !== KTX2_ID[4] ||\n  // ' '\n  id[5] !== KTX2_ID[5] ||\n  // '2'\n  id[6] !== KTX2_ID[6] ||\n  // '0'\n  id[7] !== KTX2_ID[7] ||\n  // 'ª'\n  id[8] !== KTX2_ID[8] ||\n  // '\\r'\n  id[9] !== KTX2_ID[9] ||\n  // '\\n'\n  id[10] !== KTX2_ID[10] ||\n  // '\\x1A'\n  id[11] !== KTX2_ID[11] // '\\n'\n  ) {\n    throw new Error('Missing KTX 2.0 identifier.');\n  }\n  const container = createDefaultContainer();\n  ///////////////////////////////////////////////////\n  // Header.\n  ///////////////////////////////////////////////////\n  const headerByteLength = 17 * Uint32Array.BYTES_PER_ELEMENT;\n  const headerReader = new BufferReader(data, KTX2_ID.length, headerByteLength, true);\n  container.vkFormat = headerReader._nextUint32();\n  container.typeSize = headerReader._nextUint32();\n  container.pixelWidth = headerReader._nextUint32();\n  container.pixelHeight = headerReader._nextUint32();\n  container.pixelDepth = headerReader._nextUint32();\n  container.layerCount = headerReader._nextUint32();\n  container.faceCount = headerReader._nextUint32();\n  container.levelCount = headerReader._nextUint32();\n  container.supercompressionScheme = headerReader._nextUint32();\n  const dfdByteOffset = headerReader._nextUint32();\n  const dfdByteLength = headerReader._nextUint32();\n  const kvdByteOffset = headerReader._nextUint32();\n  const kvdByteLength = headerReader._nextUint32();\n  const sgdByteOffset = headerReader._nextUint64();\n  const sgdByteLength = headerReader._nextUint64();\n  ///////////////////////////////////////////////////\n  // Level Index.\n  ///////////////////////////////////////////////////\n  const levelByteLength = Math.max(container.levelCount, 1) * 3 * 8;\n  const levelReader = new BufferReader(data, KTX2_ID.length + headerByteLength, levelByteLength, true);\n  for (let i = 0, il = Math.max(container.levelCount, 1); i < il; i++) {\n    container.levels.push({\n      levelData: new Uint8Array(data.buffer, data.byteOffset + levelReader._nextUint64(), levelReader._nextUint64()),\n      uncompressedByteLength: levelReader._nextUint64()\n    });\n  }\n  ///////////////////////////////////////////////////\n  // Data Format Descriptor (DFD).\n  ///////////////////////////////////////////////////\n  const dfdReader = new BufferReader(data, dfdByteOffset, dfdByteLength, true);\n  dfdReader._skip(4); // totalSize\n  const vendorId = dfdReader._nextUint16();\n  const descriptorType = dfdReader._nextUint16();\n  const versionNumber = dfdReader._nextUint16();\n  const descriptorBlockSize = dfdReader._nextUint16();\n  const colorModel = dfdReader._nextUint8();\n  const colorPrimaries = dfdReader._nextUint8();\n  const transferFunction = dfdReader._nextUint8();\n  const flags = dfdReader._nextUint8();\n  const texelBlockDimension = [dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8()];\n  const bytesPlane = [dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8()];\n  const samples = [];\n  const dfd = {\n    vendorId,\n    descriptorType,\n    versionNumber,\n    colorModel,\n    colorPrimaries,\n    transferFunction,\n    flags,\n    texelBlockDimension,\n    bytesPlane,\n    samples\n  };\n  const sampleStart = 6;\n  const sampleWords = 4;\n  const numSamples = (descriptorBlockSize / 4 - sampleStart) / sampleWords;\n  for (let i = 0; i < numSamples; i++) {\n    const sample = {\n      bitOffset: dfdReader._nextUint16(),\n      bitLength: dfdReader._nextUint8(),\n      channelType: dfdReader._nextUint8(),\n      samplePosition: [dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8(), dfdReader._nextUint8()],\n      sampleLower: Number.NEGATIVE_INFINITY,\n      sampleUpper: Number.POSITIVE_INFINITY\n    };\n    if (sample.channelType & KHR_DF_SAMPLE_DATATYPE_SIGNED) {\n      sample.sampleLower = dfdReader._nextInt32();\n      sample.sampleUpper = dfdReader._nextInt32();\n    } else {\n      sample.sampleLower = dfdReader._nextUint32();\n      sample.sampleUpper = dfdReader._nextUint32();\n    }\n    dfd.samples[i] = sample;\n  }\n  container.dataFormatDescriptor.length = 0;\n  container.dataFormatDescriptor.push(dfd);\n  ///////////////////////////////////////////////////\n  // Key/Value Data (KVD).\n  ///////////////////////////////////////////////////\n  const kvdReader = new BufferReader(data, kvdByteOffset, kvdByteLength, true);\n  while (kvdReader._offset < kvdByteLength) {\n    const keyValueByteLength = kvdReader._nextUint32();\n    const keyData = kvdReader._scan(keyValueByteLength);\n    const key = decodeText(keyData);\n    container.keyValue[key] = kvdReader._nextUint8Array(keyValueByteLength - keyData.byteLength - 1);\n    if (key.match(/^ktx/i)) {\n      const text = decodeText(container.keyValue[key]);\n      container.keyValue[key] = text.substring(0, text.lastIndexOf('\\x00'));\n    }\n    const kvPadding = keyValueByteLength % 4 ? 4 - keyValueByteLength % 4 : 0; // align(4)\n    // 4-byte alignment.\n    kvdReader._skip(kvPadding);\n  }\n  ///////////////////////////////////////////////////\n  // Supercompression Global Data (SGD).\n  ///////////////////////////////////////////////////\n  if (sgdByteLength <= 0) return container;\n  const sgdReader = new BufferReader(data, sgdByteOffset, sgdByteLength, true);\n  const endpointCount = sgdReader._nextUint16();\n  const selectorCount = sgdReader._nextUint16();\n  const endpointsByteLength = sgdReader._nextUint32();\n  const selectorsByteLength = sgdReader._nextUint32();\n  const tablesByteLength = sgdReader._nextUint32();\n  const extendedByteLength = sgdReader._nextUint32();\n  const imageDescs = [];\n  for (let i = 0, il = Math.max(container.levelCount, 1); i < il; i++) {\n    imageDescs.push({\n      imageFlags: sgdReader._nextUint32(),\n      rgbSliceByteOffset: sgdReader._nextUint32(),\n      rgbSliceByteLength: sgdReader._nextUint32(),\n      alphaSliceByteOffset: sgdReader._nextUint32(),\n      alphaSliceByteLength: sgdReader._nextUint32()\n    });\n  }\n  const endpointsByteOffset = sgdByteOffset + sgdReader._offset;\n  const selectorsByteOffset = endpointsByteOffset + endpointsByteLength;\n  const tablesByteOffset = selectorsByteOffset + selectorsByteLength;\n  const extendedByteOffset = tablesByteOffset + tablesByteLength;\n  const endpointsData = new Uint8Array(data.buffer, data.byteOffset + endpointsByteOffset, endpointsByteLength);\n  const selectorsData = new Uint8Array(data.buffer, data.byteOffset + selectorsByteOffset, selectorsByteLength);\n  const tablesData = new Uint8Array(data.buffer, data.byteOffset + tablesByteOffset, tablesByteLength);\n  const extendedData = new Uint8Array(data.buffer, data.byteOffset + extendedByteOffset, extendedByteLength);\n  container.globalData = {\n    endpointCount,\n    selectorCount,\n    imageDescs,\n    endpointsData,\n    selectorsData,\n    tablesData,\n    extendedData\n  };\n  return container;\n}\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nconst DEFAULT_OPTIONS = {\n  keepWriter: false\n};\n/**\n * Serializes a {@link KTX2Container} instance to a KTX 2.0 file. Mip levels and other binary data\n * are copied into the resulting Uint8Array, so the original container can safely be edited or\n * destroyed after it is serialized.\n *\n * Options:\n * - keepWriter: If true, 'KTXWriter' key/value field is written as provided by the container.\n * \t\tOtherwise, a string for the current ktx-parse version is generated. Default: false.\n *\n * @param container\n * @param options\n */\nfunction write(container, options = {}) {\n  // biome-ignore lint/style/noParameterAssign: Merging defaults only.\n  options = _extends({}, DEFAULT_OPTIONS, options);\n  ///////////////////////////////////////////////////\n  // Supercompression Global Data (SGD).\n  ///////////////////////////////////////////////////\n  let sgdBuffer = new ArrayBuffer(0);\n  if (container.globalData) {\n    const sgdHeaderBuffer = new ArrayBuffer(20 + container.globalData.imageDescs.length * 5 * 4);\n    const sgdHeaderView = new DataView(sgdHeaderBuffer);\n    sgdHeaderView.setUint16(0, container.globalData.endpointCount, true);\n    sgdHeaderView.setUint16(2, container.globalData.selectorCount, true);\n    sgdHeaderView.setUint32(4, container.globalData.endpointsData.byteLength, true);\n    sgdHeaderView.setUint32(8, container.globalData.selectorsData.byteLength, true);\n    sgdHeaderView.setUint32(12, container.globalData.tablesData.byteLength, true);\n    sgdHeaderView.setUint32(16, container.globalData.extendedData.byteLength, true);\n    for (let i = 0; i < container.globalData.imageDescs.length; i++) {\n      const imageDesc = container.globalData.imageDescs[i];\n      sgdHeaderView.setUint32(20 + i * 5 * 4 + 0, imageDesc.imageFlags, true);\n      sgdHeaderView.setUint32(20 + i * 5 * 4 + 4, imageDesc.rgbSliceByteOffset, true);\n      sgdHeaderView.setUint32(20 + i * 5 * 4 + 8, imageDesc.rgbSliceByteLength, true);\n      sgdHeaderView.setUint32(20 + i * 5 * 4 + 12, imageDesc.alphaSliceByteOffset, true);\n      sgdHeaderView.setUint32(20 + i * 5 * 4 + 16, imageDesc.alphaSliceByteLength, true);\n    }\n    sgdBuffer = concat([sgdHeaderBuffer, container.globalData.endpointsData, container.globalData.selectorsData, container.globalData.tablesData, container.globalData.extendedData]);\n  }\n  ///////////////////////////////////////////////////\n  // Key/Value Data (KVD).\n  ///////////////////////////////////////////////////\n  const keyValueData = [];\n  const keyValueList = Object.entries(_extends({}, container.keyValue, !options.keepWriter && {\n    KTXwriter: KTX_WRITER\n  }));\n  keyValueList.sort((a, b) => a[0] > b[0] ? 1 : -1);\n  for (const [key, value] of keyValueList) {\n    const keyData = encodeText(key);\n    const valueData = typeof value === 'string' ? concat([encodeText(value), NUL]) : value;\n    const kvByteLength = keyData.byteLength + 1 + valueData.byteLength;\n    const kvPadding = getPadding(kvByteLength, 4); // align(4)\n    keyValueData.push(concat([new Uint32Array([kvByteLength]), keyData, NUL, valueData, new Uint8Array(kvPadding).fill(0x00) // align(4)\n    ]));\n  }\n  const kvdBuffer = concat(keyValueData);\n  ///////////////////////////////////////////////////\n  // Data Format Descriptor (DFD).\n  ///////////////////////////////////////////////////\n  if (container.dataFormatDescriptor.length !== 1 || container.dataFormatDescriptor[0].descriptorType !== KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT) {\n    throw new Error('Only BASICFORMAT Data Format Descriptor output supported.');\n  }\n  const dfd = container.dataFormatDescriptor[0];\n  const dfdBuffer = new ArrayBuffer(28 + dfd.samples.length * 16);\n  const dfdView = new DataView(dfdBuffer);\n  const descriptorBlockSize = 24 + dfd.samples.length * 16;\n  dfdView.setUint32(0, dfdBuffer.byteLength, true);\n  dfdView.setUint16(4, dfd.vendorId, true);\n  dfdView.setUint16(6, dfd.descriptorType, true);\n  dfdView.setUint16(8, dfd.versionNumber, true);\n  dfdView.setUint16(10, descriptorBlockSize, true);\n  dfdView.setUint8(12, dfd.colorModel);\n  dfdView.setUint8(13, dfd.colorPrimaries);\n  dfdView.setUint8(14, dfd.transferFunction);\n  dfdView.setUint8(15, dfd.flags);\n  if (!Array.isArray(dfd.texelBlockDimension)) {\n    throw new Error('texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.');\n  }\n  dfdView.setUint8(16, dfd.texelBlockDimension[0]);\n  dfdView.setUint8(17, dfd.texelBlockDimension[1]);\n  dfdView.setUint8(18, dfd.texelBlockDimension[2]);\n  dfdView.setUint8(19, dfd.texelBlockDimension[3]);\n  for (let i = 0; i < 8; i++) dfdView.setUint8(20 + i, dfd.bytesPlane[i]);\n  for (let i = 0; i < dfd.samples.length; i++) {\n    const sample = dfd.samples[i];\n    const sampleByteOffset = 28 + i * 16;\n    dfdView.setUint16(sampleByteOffset + 0, sample.bitOffset, true);\n    dfdView.setUint8(sampleByteOffset + 2, sample.bitLength);\n    dfdView.setUint8(sampleByteOffset + 3, sample.channelType);\n    dfdView.setUint8(sampleByteOffset + 4, sample.samplePosition[0]);\n    dfdView.setUint8(sampleByteOffset + 5, sample.samplePosition[1]);\n    dfdView.setUint8(sampleByteOffset + 6, sample.samplePosition[2]);\n    dfdView.setUint8(sampleByteOffset + 7, sample.samplePosition[3]);\n    if (sample.channelType & KHR_DF_SAMPLE_DATATYPE_SIGNED) {\n      dfdView.setInt32(sampleByteOffset + 8, sample.sampleLower, true);\n      dfdView.setInt32(sampleByteOffset + 12, sample.sampleUpper, true);\n    } else {\n      dfdView.setUint32(sampleByteOffset + 8, sample.sampleLower, true);\n      dfdView.setUint32(sampleByteOffset + 12, sample.sampleUpper, true);\n    }\n  }\n  ///////////////////////////////////////////////////\n  // Data alignment.\n  ///////////////////////////////////////////////////\n  const dfdByteOffset = KTX2_ID.length + HEADER_BYTE_LENGTH + container.levels.length * 3 * 8;\n  const kvdByteOffset = dfdByteOffset + dfdBuffer.byteLength;\n  let sgdByteOffset = sgdBuffer.byteLength > 0 ? kvdByteOffset + kvdBuffer.byteLength : 0;\n  if (sgdByteOffset % 8) sgdByteOffset += 8 - sgdByteOffset % 8; // align(8)\n  ///////////////////////////////////////////////////\n  // Level Index.\n  ///////////////////////////////////////////////////\n  const levelData = [];\n  const levelIndex = new DataView(new ArrayBuffer(container.levels.length * 3 * 8));\n  const levelDataByteOffsets = new Uint32Array(container.levels.length);\n  let levelAlign = 0;\n  if (container.supercompressionScheme === KHR_SUPERCOMPRESSION_NONE) {\n    levelAlign = leastCommonMultiple(getBlockByteLength(container), 4);\n  }\n  // Level data is ordered small → large.\n  let levelDataByteOffset = (sgdByteOffset || kvdByteOffset + kvdBuffer.byteLength) + sgdBuffer.byteLength;\n  for (let i = container.levels.length - 1; i >= 0; i--) {\n    // Level padding.\n    if (levelDataByteOffset % levelAlign) {\n      const paddingBytes = getPadding(levelDataByteOffset, levelAlign);\n      levelData.push(new Uint8Array(paddingBytes));\n      levelDataByteOffset += paddingBytes;\n    }\n    // Level data.\n    const level = container.levels[i];\n    levelData.push(level.levelData);\n    levelDataByteOffsets[i] = levelDataByteOffset;\n    levelDataByteOffset += level.levelData.byteLength;\n  }\n  // Level index is ordered large → small.\n  for (let i = 0; i < container.levels.length; i++) {\n    const level = container.levels[i];\n    levelIndex.setBigUint64(i * 24 + 0, BigInt(levelDataByteOffsets[i]), true);\n    levelIndex.setBigUint64(i * 24 + 8, BigInt(level.levelData.byteLength), true);\n    levelIndex.setBigUint64(i * 24 + 16, BigInt(level.uncompressedByteLength), true);\n  }\n  ///////////////////////////////////////////////////\n  // Header.\n  ///////////////////////////////////////////////////\n  const headerBuffer = new ArrayBuffer(HEADER_BYTE_LENGTH);\n  const headerView = new DataView(headerBuffer);\n  headerView.setUint32(0, container.vkFormat, true);\n  headerView.setUint32(4, container.typeSize, true);\n  headerView.setUint32(8, container.pixelWidth, true);\n  headerView.setUint32(12, container.pixelHeight, true);\n  headerView.setUint32(16, container.pixelDepth, true);\n  headerView.setUint32(20, container.layerCount, true);\n  headerView.setUint32(24, container.faceCount, true);\n  headerView.setUint32(28, container.levelCount, true);\n  headerView.setUint32(32, container.supercompressionScheme, true);\n  headerView.setUint32(36, dfdByteOffset, true);\n  headerView.setUint32(40, dfdBuffer.byteLength, true);\n  headerView.setUint32(44, kvdByteOffset, true);\n  headerView.setUint32(48, kvdBuffer.byteLength, true);\n  headerView.setBigUint64(52, BigInt(sgdBuffer.byteLength > 0 ? sgdByteOffset : 0), true);\n  headerView.setBigUint64(60, BigInt(sgdBuffer.byteLength), true);\n  ///////////////////////////////////////////////////\n  // Compose.\n  ///////////////////////////////////////////////////\n  return new Uint8Array(concat([new Uint8Array(KTX2_ID).buffer, headerBuffer, levelIndex.buffer, dfdBuffer, kvdBuffer, sgdByteOffset > 0 ? new ArrayBuffer(sgdByteOffset - (kvdByteOffset + kvdBuffer.byteLength)) // align(8)\n  : new ArrayBuffer(0), sgdBuffer, ...levelData]));\n}\n\nexport { KHR_DF_CHANNEL_RGBSDA_ALPHA, KHR_DF_CHANNEL_RGBSDA_BLUE, KHR_DF_CHANNEL_RGBSDA_DEPTH, KHR_DF_CHANNEL_RGBSDA_GREEN, KHR_DF_CHANNEL_RGBSDA_RED, KHR_DF_CHANNEL_RGBSDA_STENCIL, KHR_DF_FLAG_ALPHA_PREMULTIPLIED, KHR_DF_FLAG_ALPHA_STRAIGHT, KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT, KHR_DF_MODEL_ASTC, KHR_DF_MODEL_ETC1, KHR_DF_MODEL_ETC1S, KHR_DF_MODEL_ETC2, KHR_DF_MODEL_RGBSDA, KHR_DF_MODEL_UASTC, KHR_DF_MODEL_UNSPECIFIED, KHR_DF_PRIMARIES_ACES, KHR_DF_PRIMARIES_ACESCC, KHR_DF_PRIMARIES_ADOBERGB, KHR_DF_PRIMARIES_BT2020, KHR_DF_PRIMARIES_BT601_EBU, KHR_DF_PRIMARIES_BT601_SMPTE, KHR_DF_PRIMARIES_BT709, KHR_DF_PRIMARIES_CIEXYZ, KHR_DF_PRIMARIES_DISPLAYP3, KHR_DF_PRIMARIES_NTSC1953, KHR_DF_PRIMARIES_PAL525, KHR_DF_PRIMARIES_UNSPECIFIED, KHR_DF_SAMPLE_DATATYPE_EXPONENT, KHR_DF_SAMPLE_DATATYPE_FLOAT, KHR_DF_SAMPLE_DATATYPE_LINEAR, KHR_DF_SAMPLE_DATATYPE_SIGNED, KHR_DF_TRANSFER_ACESCC, KHR_DF_TRANSFER_ACESCCT, KHR_DF_TRANSFER_ADOBERGB, KHR_DF_TRANSFER_BT1886, KHR_DF_TRANSFER_DCIP3, KHR_DF_TRANSFER_HLG_EOTF, KHR_DF_TRANSFER_HLG_OETF, KHR_DF_TRANSFER_ITU, KHR_DF_TRANSFER_LINEAR, KHR_DF_TRANSFER_NTSC, KHR_DF_TRANSFER_PAL625_EOTF, KHR_DF_TRANSFER_PAL_OETF, KHR_DF_TRANSFER_PQ_EOTF, KHR_DF_TRANSFER_PQ_OETF, KHR_DF_TRANSFER_SLOG, KHR_DF_TRANSFER_SLOG2, KHR_DF_TRANSFER_SRGB, KHR_DF_TRANSFER_ST240, KHR_DF_TRANSFER_UNSPECIFIED, KHR_DF_VENDORID_KHRONOS, KHR_DF_VERSION, KHR_SUPERCOMPRESSION_BASISLZ, KHR_SUPERCOMPRESSION_NONE, KHR_SUPERCOMPRESSION_ZLIB, KHR_SUPERCOMPRESSION_ZSTD, VK_FORMAT_A1R5G5B5_UNORM_PACK16, VK_FORMAT_A2B10G10R10_SINT_PACK32, VK_FORMAT_A2B10G10R10_SNORM_PACK32, VK_FORMAT_A2B10G10R10_UINT_PACK32, VK_FORMAT_A2B10G10R10_UNORM_PACK32, VK_FORMAT_A2R10G10B10_SINT_PACK32, VK_FORMAT_A2R10G10B10_SNORM_PACK32, VK_FORMAT_A2R10G10B10_UINT_PACK32, VK_FORMAT_A2R10G10B10_UNORM_PACK32, VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT, VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT, VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_10x10_SRGB_BLOCK, VK_FORMAT_ASTC_10x10_UNORM_BLOCK, VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_10x5_SRGB_BLOCK, VK_FORMAT_ASTC_10x5_UNORM_BLOCK, VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_10x6_SRGB_BLOCK, VK_FORMAT_ASTC_10x6_UNORM_BLOCK, VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_10x8_SRGB_BLOCK, VK_FORMAT_ASTC_10x8_UNORM_BLOCK, VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_12x10_SRGB_BLOCK, VK_FORMAT_ASTC_12x10_UNORM_BLOCK, VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_12x12_SRGB_BLOCK, VK_FORMAT_ASTC_12x12_UNORM_BLOCK, VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_4x4_SRGB_BLOCK, VK_FORMAT_ASTC_4x4_UNORM_BLOCK, VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_5x4_SRGB_BLOCK, VK_FORMAT_ASTC_5x4_UNORM_BLOCK, VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_5x5_SRGB_BLOCK, VK_FORMAT_ASTC_5x5_UNORM_BLOCK, VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_6x5_SRGB_BLOCK, VK_FORMAT_ASTC_6x5_UNORM_BLOCK, VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_6x6_SRGB_BLOCK, VK_FORMAT_ASTC_6x6_UNORM_BLOCK, VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_8x5_SRGB_BLOCK, VK_FORMAT_ASTC_8x5_UNORM_BLOCK, VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_8x6_SRGB_BLOCK, VK_FORMAT_ASTC_8x6_UNORM_BLOCK, VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT, VK_FORMAT_ASTC_8x8_SRGB_BLOCK, VK_FORMAT_ASTC_8x8_UNORM_BLOCK, VK_FORMAT_B10G11R11_UFLOAT_PACK32, VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16, VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16, VK_FORMAT_B4G4R4A4_UNORM_PACK16, VK_FORMAT_B5G5R5A1_UNORM_PACK16, VK_FORMAT_B5G6R5_UNORM_PACK16, VK_FORMAT_B8G8R8A8_SINT, VK_FORMAT_B8G8R8A8_SNORM, VK_FORMAT_B8G8R8A8_SRGB, VK_FORMAT_B8G8R8A8_UINT, VK_FORMAT_B8G8R8A8_UNORM, VK_FORMAT_B8G8R8_SINT, VK_FORMAT_B8G8R8_SNORM, VK_FORMAT_B8G8R8_SRGB, VK_FORMAT_B8G8R8_UINT, VK_FORMAT_B8G8R8_UNORM, VK_FORMAT_BC1_RGBA_SRGB_BLOCK, VK_FORMAT_BC1_RGBA_UNORM_BLOCK, VK_FORMAT_BC1_RGB_SRGB_BLOCK, VK_FORMAT_BC1_RGB_UNORM_BLOCK, VK_FORMAT_BC2_SRGB_BLOCK, VK_FORMAT_BC2_UNORM_BLOCK, VK_FORMAT_BC3_SRGB_BLOCK, VK_FORMAT_BC3_UNORM_BLOCK, VK_FORMAT_BC4_SNORM_BLOCK, VK_FORMAT_BC4_UNORM_BLOCK, VK_FORMAT_BC5_SNORM_BLOCK, VK_FORMAT_BC5_UNORM_BLOCK, VK_FORMAT_BC6H_SFLOAT_BLOCK, VK_FORMAT_BC6H_UFLOAT_BLOCK, VK_FORMAT_BC7_SRGB_BLOCK, VK_FORMAT_BC7_UNORM_BLOCK, VK_FORMAT_D16_UNORM, VK_FORMAT_D16_UNORM_S8_UINT, VK_FORMAT_D24_UNORM_S8_UINT, VK_FORMAT_D32_SFLOAT, VK_FORMAT_D32_SFLOAT_S8_UINT, VK_FORMAT_E5B9G9R9_UFLOAT_PACK32, VK_FORMAT_EAC_R11G11_SNORM_BLOCK, VK_FORMAT_EAC_R11G11_UNORM_BLOCK, VK_FORMAT_EAC_R11_SNORM_BLOCK, VK_FORMAT_EAC_R11_UNORM_BLOCK, VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK, VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK, VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK, VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK, VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK, VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK, VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16, VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16, VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG, VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG, VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG, VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG, VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG, VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG, VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG, VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG, VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16, VK_FORMAT_R10X6G10X6_UNORM_2PACK16, VK_FORMAT_R10X6_UNORM_PACK16, VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16, VK_FORMAT_R12X4G12X4_UNORM_2PACK16, VK_FORMAT_R12X4_UNORM_PACK16, VK_FORMAT_R16G16B16A16_SFLOAT, VK_FORMAT_R16G16B16A16_SINT, VK_FORMAT_R16G16B16A16_SNORM, VK_FORMAT_R16G16B16A16_UINT, VK_FORMAT_R16G16B16A16_UNORM, VK_FORMAT_R16G16B16_SFLOAT, VK_FORMAT_R16G16B16_SINT, VK_FORMAT_R16G16B16_SNORM, VK_FORMAT_R16G16B16_UINT, VK_FORMAT_R16G16B16_UNORM, VK_FORMAT_R16G16_SFLOAT, VK_FORMAT_R16G16_SINT, VK_FORMAT_R16G16_SNORM, VK_FORMAT_R16G16_UINT, VK_FORMAT_R16G16_UNORM, VK_FORMAT_R16_SFLOAT, VK_FORMAT_R16_SINT, VK_FORMAT_R16_SNORM, VK_FORMAT_R16_UINT, VK_FORMAT_R16_UNORM, VK_FORMAT_R32G32B32A32_SFLOAT, VK_FORMAT_R32G32B32A32_SINT, VK_FORMAT_R32G32B32A32_UINT, VK_FORMAT_R32G32B32_SFLOAT, VK_FORMAT_R32G32B32_SINT, VK_FORMAT_R32G32B32_UINT, VK_FORMAT_R32G32_SFLOAT, VK_FORMAT_R32G32_SINT, VK_FORMAT_R32G32_UINT, VK_FORMAT_R32_SFLOAT, VK_FORMAT_R32_SINT, VK_FORMAT_R32_UINT, VK_FORMAT_R4G4B4A4_UNORM_PACK16, VK_FORMAT_R4G4_UNORM_PACK8, VK_FORMAT_R5G5B5A1_UNORM_PACK16, VK_FORMAT_R5G6B5_UNORM_PACK16, VK_FORMAT_R64G64B64A64_SFLOAT, VK_FORMAT_R64G64B64A64_SINT, VK_FORMAT_R64G64B64A64_UINT, VK_FORMAT_R64G64B64_SFLOAT, VK_FORMAT_R64G64B64_SINT, VK_FORMAT_R64G64B64_UINT, VK_FORMAT_R64G64_SFLOAT, VK_FORMAT_R64G64_SINT, VK_FORMAT_R64G64_UINT, VK_FORMAT_R64_SFLOAT, VK_FORMAT_R64_SINT, VK_FORMAT_R64_UINT, VK_FORMAT_R8G8B8A8_SINT, VK_FORMAT_R8G8B8A8_SNORM, VK_FORMAT_R8G8B8A8_SRGB, VK_FORMAT_R8G8B8A8_UINT, VK_FORMAT_R8G8B8A8_UNORM, VK_FORMAT_R8G8B8_SINT, VK_FORMAT_R8G8B8_SNORM, VK_FORMAT_R8G8B8_SRGB, VK_FORMAT_R8G8B8_UINT, VK_FORMAT_R8G8B8_UNORM, VK_FORMAT_R8G8_SINT, VK_FORMAT_R8G8_SNORM, VK_FORMAT_R8G8_SRGB, VK_FORMAT_R8G8_UINT, VK_FORMAT_R8G8_UNORM, VK_FORMAT_R8_SINT, VK_FORMAT_R8_SNORM, VK_FORMAT_R8_SRGB, VK_FORMAT_R8_UINT, VK_FORMAT_R8_UNORM, VK_FORMAT_S8_UINT, VK_FORMAT_UNDEFINED, VK_FORMAT_X8_D24_UNORM_PACK32, createDefaultContainer, read, write };\n//# sourceMappingURL=ktx-parse.modern.js.map\n","import { ExtensionProperty, PropertyType, RefMap, Extension, BufferUtils, WriterContext, Primitive, Root, AnimationSampler, AnimationChannel, Accessor, MathUtils, GLB_BUFFER, ImageUtils, getBounds, TextureInfo, TextureChannel, RefSet } from '@gltf-transform/core';\nimport { read, KHR_DF_MODEL_ETC1S, KHR_DF_MODEL_UASTC } from 'ktx-parse';\n\nconst EXT_MESH_GPU_INSTANCING = 'EXT_mesh_gpu_instancing';\nconst EXT_MESHOPT_COMPRESSION = 'EXT_meshopt_compression';\nconst EXT_TEXTURE_WEBP = 'EXT_texture_webp';\nconst EXT_TEXTURE_AVIF = 'EXT_texture_avif';\nconst KHR_DRACO_MESH_COMPRESSION = 'KHR_draco_mesh_compression';\nconst KHR_LIGHTS_PUNCTUAL = 'KHR_lights_punctual';\nconst KHR_MATERIALS_ANISOTROPY = 'KHR_materials_anisotropy';\nconst KHR_MATERIALS_CLEARCOAT = 'KHR_materials_clearcoat';\nconst KHR_MATERIALS_DIFFUSE_TRANSMISSION = 'KHR_materials_diffuse_transmission';\nconst KHR_MATERIALS_DISPERSION = 'KHR_materials_dispersion';\nconst KHR_MATERIALS_EMISSIVE_STRENGTH = 'KHR_materials_emissive_strength';\nconst KHR_MATERIALS_IOR = 'KHR_materials_ior';\nconst KHR_MATERIALS_IRIDESCENCE = 'KHR_materials_iridescence';\nconst KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS = 'KHR_materials_pbrSpecularGlossiness';\nconst KHR_MATERIALS_SHEEN = 'KHR_materials_sheen';\nconst KHR_MATERIALS_SPECULAR = 'KHR_materials_specular';\nconst KHR_MATERIALS_TRANSMISSION = 'KHR_materials_transmission';\nconst KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\nconst KHR_MATERIALS_VOLUME = 'KHR_materials_volume';\nconst KHR_MATERIALS_VARIANTS = 'KHR_materials_variants';\nconst KHR_MESH_QUANTIZATION = 'KHR_mesh_quantization';\nconst KHR_TEXTURE_BASISU = 'KHR_texture_basisu';\nconst KHR_TEXTURE_TRANSFORM = 'KHR_texture_transform';\nconst KHR_XMP_JSON_LD = 'KHR_xmp_json_ld';\n\n// See BufferViewUsage in `writer-context.ts`.\nconst INSTANCE_ATTRIBUTE = 'INSTANCE_ATTRIBUTE';\n/**\n * Defines GPU instances of a {@link Mesh} under one {@link Node}. See {@link EXTMeshGPUInstancing}.\n */\nclass InstancedMesh extends ExtensionProperty {\n  init() {\n    this.extensionName = EXT_MESH_GPU_INSTANCING;\n    this.propertyType = 'InstancedMesh';\n    this.parentTypes = [PropertyType.NODE];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      attributes: new RefMap()\n    });\n  }\n  /** Returns an instance attribute as an {@link Accessor}. */\n  getAttribute(semantic) {\n    return this.getRefMap('attributes', semantic);\n  }\n  /**\n   * Sets an instance attribute to an {@link Accessor}. All attributes must have the same\n   * instance count.\n   */\n  setAttribute(semantic, accessor) {\n    return this.setRefMap('attributes', semantic, accessor, {\n      usage: INSTANCE_ATTRIBUTE\n    });\n  }\n  /**\n   * Lists all instance attributes {@link Accessor}s associated with the InstancedMesh. Order\n   * will be consistent with the order returned by {@link .listSemantics}().\n   */\n  listAttributes() {\n    return this.listRefMapValues('attributes');\n  }\n  /**\n   * Lists all instance attribute semantics associated with the primitive. Order will be\n   * consistent with the order returned by {@link .listAttributes}().\n   */\n  listSemantics() {\n    return this.listRefMapKeys('attributes');\n  }\n}\nInstancedMesh.EXTENSION_NAME = EXT_MESH_GPU_INSTANCING;\n\n/**\n * [`EXT_mesh_gpu_instancing`](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing/)\n * prepares mesh data for efficient GPU instancing.\n *\n * GPU instancing allows engines to render many copies of a single mesh at once using a small number\n * of draw calls. Instancing is particularly useful for things like trees, grass, road signs, etc.\n * Keep in mind that predefined batches, as used in this extension, may prevent frustum culling\n * within a batch. Dividing batches into collocated cells may be preferable to using a single large\n * batch.\n *\n * > _**NOTICE:** While this extension stores mesh data optimized for GPU instancing, it\n * > is important to note that (1) GPU instancing and other optimizations are possible — and\n * > encouraged — even without this extension, and (2) other common meanings of the term\n * > \"instancing\" exist, distinct from this extension. See\n * > [Appendix: Motivation and Purpose](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing#appendix-motivation-and-purpose)\n * > of the `EXT_mesh_gpu_instancing` specification._\n *\n * Properties:\n * - {@link InstancedMesh}\n *\n * ### Example\n *\n * The `EXTMeshGPUInstancing` class provides a single {@link ExtensionProperty} type, `InstancedMesh`,\n * which may be attached to any {@link Node} instance. For example:\n *\n * ```typescript\n * import { EXTMeshGPUInstancing } from '@gltf-transform/extensions';\n *\n * // Create standard mesh, node, and scene hierarchy.\n * // ...\n *\n * // Assign positions for each instance.\n * const batchPositions = doc.createAccessor('instance_positions')\n * \t.setArray(new Float32Array([\n * \t\t0, 0, 0,\n * \t\t1, 0, 0,\n * \t\t2, 0, 0,\n * \t]))\n * \t.setType(Accessor.Type.VEC3)\n * \t.setBuffer(buffer);\n *\n * // Assign IDs for each instance.\n * const batchIDs = doc.createAccessor('instance_ids')\n * \t.setArray(new Uint8Array([0, 1, 2]))\n * \t.setType(Accessor.Type.SCALAR)\n * \t.setBuffer(buffer);\n *\n * // Create an Extension attached to the Document.\n * const batchExtension = document.createExtension(EXTMeshGPUInstancing)\n * \t.setRequired(true);\n * const batch = batchExtension.createInstancedMesh()\n * \t.setAttribute('TRANSLATION', batchPositions)\n * \t.setAttribute('_ID', batchIDs);\n *\n * node\n * \t.setMesh(mesh)\n * \t.setExtension('EXT_mesh_gpu_instancing', batch);\n * ```\n *\n * Standard instance attributes are `TRANSLATION`, `ROTATION`, and `SCALE`, and support the accessor\n * types allowed by the extension specification. Custom instance attributes are allowed, and should\n * be prefixed with an underscore (`_*`).\n */\nclass EXTMeshGPUInstancing extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = EXT_MESH_GPU_INSTANCING;\n    /** @hidden */\n    this.provideTypes = [PropertyType.NODE];\n    /** @hidden */\n    this.prewriteTypes = [PropertyType.ACCESSOR];\n  }\n  /** Creates a new InstancedMesh property for use on a {@link Node}. */\n  createInstancedMesh() {\n    return new InstancedMesh(this.document.getGraph());\n  }\n  /** @hidden */\n  read(context) {\n    const jsonDoc = context.jsonDoc;\n    const nodeDefs = jsonDoc.json.nodes || [];\n    nodeDefs.forEach((nodeDef, nodeIndex) => {\n      if (!nodeDef.extensions || !nodeDef.extensions[EXT_MESH_GPU_INSTANCING]) return;\n      const instancedMeshDef = nodeDef.extensions[EXT_MESH_GPU_INSTANCING];\n      const instancedMesh = this.createInstancedMesh();\n      for (const semantic in instancedMeshDef.attributes) {\n        instancedMesh.setAttribute(semantic, context.accessors[instancedMeshDef.attributes[semantic]]);\n      }\n      context.nodes[nodeIndex].setExtension(EXT_MESH_GPU_INSTANCING, instancedMesh);\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    // Set usage for instance attribute accessors, so they are stored in separate buffer\n    // views grouped by parent reference.\n    context.accessorUsageGroupedByParent.add(INSTANCE_ATTRIBUTE);\n    for (const prop of this.properties) {\n      for (const attribute of prop.listAttributes()) {\n        context.addAccessorToUsageGroup(attribute, INSTANCE_ATTRIBUTE);\n      }\n    }\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listNodes().forEach(node => {\n      const instancedMesh = node.getExtension(EXT_MESH_GPU_INSTANCING);\n      if (instancedMesh) {\n        const nodeIndex = context.nodeIndexMap.get(node);\n        const nodeDef = jsonDoc.json.nodes[nodeIndex];\n        const instancedMeshDef = {\n          attributes: {}\n        };\n        instancedMesh.listSemantics().forEach(semantic => {\n          const attribute = instancedMesh.getAttribute(semantic);\n          instancedMeshDef.attributes[semantic] = context.accessorIndexMap.get(attribute);\n        });\n        nodeDef.extensions = nodeDef.extensions || {};\n        nodeDef.extensions[EXT_MESH_GPU_INSTANCING] = instancedMeshDef;\n      }\n    });\n    return this;\n  }\n}\nEXTMeshGPUInstancing.EXTENSION_NAME = EXT_MESH_GPU_INSTANCING;\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nvar EncoderMethod$1;\n(function (EncoderMethod) {\n  EncoderMethod[\"QUANTIZE\"] = \"quantize\";\n  EncoderMethod[\"FILTER\"] = \"filter\";\n})(EncoderMethod$1 || (EncoderMethod$1 = {}));\nvar MeshoptMode;\n(function (MeshoptMode) {\n  MeshoptMode[\"ATTRIBUTES\"] = \"ATTRIBUTES\";\n  MeshoptMode[\"TRIANGLES\"] = \"TRIANGLES\";\n  MeshoptMode[\"INDICES\"] = \"INDICES\";\n})(MeshoptMode || (MeshoptMode = {}));\nvar MeshoptFilter;\n(function (MeshoptFilter) {\n  /** No filter — quantize only. */\n  MeshoptFilter[\"NONE\"] = \"NONE\";\n  /** Four 8- or 16-bit normalized values. */\n  MeshoptFilter[\"OCTAHEDRAL\"] = \"OCTAHEDRAL\";\n  /** Four 16-bit normalized values. */\n  MeshoptFilter[\"QUATERNION\"] = \"QUATERNION\";\n  /** K single-precision floating point values. */\n  MeshoptFilter[\"EXPONENTIAL\"] = \"EXPONENTIAL\";\n})(MeshoptFilter || (MeshoptFilter = {}));\n\n/**\n * Returns true for a fallback buffer, else false.\n *\n *   - All references to the fallback buffer must come from bufferViews that\n *     have a EXT_meshopt_compression extension specified.\n *   - No references to the fallback buffer may come from\n *     EXT_meshopt_compression extension JSON.\n */\nfunction isFallbackBuffer(bufferDef) {\n  if (!bufferDef.extensions || !bufferDef.extensions[EXT_MESHOPT_COMPRESSION]) return false;\n  const fallbackDef = bufferDef.extensions[EXT_MESHOPT_COMPRESSION];\n  return !!fallbackDef.fallback;\n}\n\nconst {\n  BYTE,\n  SHORT,\n  FLOAT\n} = Accessor.ComponentType;\nconst {\n  encodeNormalizedInt,\n  decodeNormalizedInt\n} = MathUtils;\n/** Pre-processes array with required filters or padding. */\nfunction prepareAccessor(accessor, encoder, mode, filterOptions) {\n  const {\n    filter,\n    bits\n  } = filterOptions;\n  const result = {\n    array: accessor.getArray(),\n    byteStride: accessor.getElementSize() * accessor.getComponentSize(),\n    componentType: accessor.getComponentType(),\n    normalized: accessor.getNormalized()\n  };\n  if (mode !== MeshoptMode.ATTRIBUTES) return result;\n  if (filter !== MeshoptFilter.NONE) {\n    let array = accessor.getNormalized() ? decodeNormalizedIntArray(accessor) : new Float32Array(result.array);\n    switch (filter) {\n      case MeshoptFilter.EXPONENTIAL:\n        // → K single-precision floating point values.\n        result.byteStride = accessor.getElementSize() * 4;\n        result.componentType = FLOAT;\n        result.normalized = false;\n        result.array = encoder.encodeFilterExp(array, accessor.getCount(), result.byteStride, bits);\n        break;\n      case MeshoptFilter.OCTAHEDRAL:\n        // → four 8- or 16-bit normalized values.\n        result.byteStride = bits > 8 ? 8 : 4;\n        result.componentType = bits > 8 ? SHORT : BYTE;\n        result.normalized = true;\n        array = accessor.getElementSize() === 3 ? padNormals(array) : array;\n        result.array = encoder.encodeFilterOct(array, accessor.getCount(), result.byteStride, bits);\n        break;\n      case MeshoptFilter.QUATERNION:\n        // → four 16-bit normalized values.\n        result.byteStride = 8;\n        result.componentType = SHORT;\n        result.normalized = true;\n        result.array = encoder.encodeFilterQuat(array, accessor.getCount(), result.byteStride, bits);\n        break;\n      default:\n        throw new Error('Invalid filter.');\n    }\n    result.min = accessor.getMin([]);\n    result.max = accessor.getMax([]);\n    if (accessor.getNormalized()) {\n      result.min = result.min.map(v => decodeNormalizedInt(v, accessor.getComponentType()));\n      result.max = result.max.map(v => decodeNormalizedInt(v, accessor.getComponentType()));\n    }\n    if (result.normalized) {\n      result.min = result.min.map(v => encodeNormalizedInt(v, result.componentType));\n      result.max = result.max.map(v => encodeNormalizedInt(v, result.componentType));\n    }\n  } else if (result.byteStride % 4) {\n    result.array = padArrayElements(result.array, accessor.getElementSize());\n    result.byteStride = result.array.byteLength / accessor.getCount();\n  }\n  return result;\n}\nfunction decodeNormalizedIntArray(attribute) {\n  const componentType = attribute.getComponentType();\n  const srcArray = attribute.getArray();\n  const dstArray = new Float32Array(srcArray.length);\n  for (let i = 0; i < srcArray.length; i++) {\n    dstArray[i] = decodeNormalizedInt(srcArray[i], componentType);\n  }\n  return dstArray;\n}\n/** Pads array to 4 byte alignment, required for Meshopt ATTRIBUTE buffer views. */\nfunction padArrayElements(srcArray, elementSize) {\n  const byteStride = BufferUtils.padNumber(srcArray.BYTES_PER_ELEMENT * elementSize);\n  const elementStride = byteStride / srcArray.BYTES_PER_ELEMENT;\n  const elementCount = srcArray.length / elementSize;\n  const dstArray = new srcArray.constructor(elementCount * elementStride);\n  for (let i = 0; i * elementSize < srcArray.length; i++) {\n    for (let j = 0; j < elementSize; j++) {\n      dstArray[i * elementStride + j] = srcArray[i * elementSize + j];\n    }\n  }\n  return dstArray;\n}\n/** Pad normals with a .w component for octahedral encoding. */\nfunction padNormals(srcArray) {\n  const dstArray = new Float32Array(srcArray.length * 4 / 3);\n  for (let i = 0, il = srcArray.length / 3; i < il; i++) {\n    dstArray[i * 4] = srcArray[i * 3];\n    dstArray[i * 4 + 1] = srcArray[i * 3 + 1];\n    dstArray[i * 4 + 2] = srcArray[i * 3 + 2];\n  }\n  return dstArray;\n}\nfunction getMeshoptMode(accessor, usage) {\n  if (usage === WriterContext.BufferViewUsage.ELEMENT_ARRAY_BUFFER) {\n    const isTriangles = accessor.listParents().some(parent => {\n      return parent instanceof Primitive && parent.getMode() === Primitive.Mode.TRIANGLES;\n    });\n    return isTriangles ? MeshoptMode.TRIANGLES : MeshoptMode.INDICES;\n  }\n  return MeshoptMode.ATTRIBUTES;\n}\nfunction getMeshoptFilter(accessor, doc) {\n  const refs = doc.getGraph().listParentEdges(accessor).filter(edge => !(edge.getParent() instanceof Root));\n  for (const ref of refs) {\n    const refName = ref.getName();\n    const refKey = ref.getAttributes().key || '';\n    const isDelta = ref.getParent().propertyType === PropertyType.PRIMITIVE_TARGET;\n    // Indices.\n    if (refName === 'indices') return {\n      filter: MeshoptFilter.NONE\n    };\n    // Attributes.\n    //\n    // NOTES:\n    // - Vertex attributes should be filtered IFF they are _not_ quantized in\n    //   'packages/cli/src/transforms/meshopt.ts'.\n    // - POSITION and TEXCOORD_0 could use exponential filtering, but this produces broken\n    //   output in some cases (e.g. Matilda.glb), for unknown reasons. gltfpack uses manual\n    //   quantization for these attributes.\n    // - NORMAL and TANGENT attributes use Octahedral filters, but deltas in morphs do not.\n    // - When specifying bit depth for vertex attributes, check the defaults in `quantize.ts`\n    //\t and overrides in `meshopt.ts`. Don't store deltas at higher precision than base.\n    if (refName === 'attributes') {\n      if (refKey === 'POSITION') return {\n        filter: MeshoptFilter.NONE\n      };\n      if (refKey === 'TEXCOORD_0') return {\n        filter: MeshoptFilter.NONE\n      };\n      if (refKey.startsWith('JOINTS_')) return {\n        filter: MeshoptFilter.NONE\n      };\n      if (refKey.startsWith('WEIGHTS_')) return {\n        filter: MeshoptFilter.NONE\n      };\n      if (refKey === 'NORMAL' || refKey === 'TANGENT') {\n        return isDelta ? {\n          filter: MeshoptFilter.NONE\n        } : {\n          filter: MeshoptFilter.OCTAHEDRAL,\n          bits: 8\n        };\n      }\n    }\n    // Animation.\n    if (refName === 'output') {\n      const targetPath = getTargetPath(accessor);\n      if (targetPath === 'rotation') return {\n        filter: MeshoptFilter.QUATERNION,\n        bits: 16\n      };\n      if (targetPath === 'translation') return {\n        filter: MeshoptFilter.EXPONENTIAL,\n        bits: 12\n      };\n      if (targetPath === 'scale') return {\n        filter: MeshoptFilter.EXPONENTIAL,\n        bits: 12\n      };\n      return {\n        filter: MeshoptFilter.NONE\n      };\n    }\n    // See: https://github.com/donmccurdy/glTF-Transform/issues/489\n    if (refName === 'input') return {\n      filter: MeshoptFilter.NONE\n    };\n    if (refName === 'inverseBindMatrices') return {\n      filter: MeshoptFilter.NONE\n    };\n  }\n  return {\n    filter: MeshoptFilter.NONE\n  };\n}\nfunction getTargetPath(accessor) {\n  for (const sampler of accessor.listParents()) {\n    if (!(sampler instanceof AnimationSampler)) continue;\n    for (const channel of sampler.listParents()) {\n      if (!(channel instanceof AnimationChannel)) continue;\n      return channel.getTargetPath();\n    }\n  }\n  return null;\n}\n\nconst DEFAULT_ENCODER_OPTIONS$1 = {\n  method: EncoderMethod$1.QUANTIZE\n};\n/**\n * [`EXT_meshopt_compression`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Vendor/EXT_meshopt_compression/)\n * provides compression and fast decoding for geometry, morph targets, and animations.\n *\n * Meshopt compression (based on the [meshoptimizer](https://github.com/zeux/meshoptimizer)\n * library) offers a lightweight decoder with very fast runtime decompression, and is\n * appropriate for models of any size. Meshopt can reduce the transmission sizes of geometry,\n * morph targets, animation, and other numeric data stored in buffer views. When textures are\n * large, other complementary compression methods should be used as well.\n *\n * For the full benefits of meshopt compression, **apply gzip, brotli, or another lossless\n * compression method** to the resulting .glb, .gltf, or .bin files. Meshopt specifically\n * pre-optimizes assets for this purpose — without this secondary compression, the size\n * reduction is considerably less.\n *\n * Be aware that decompression happens before uploading to the GPU. While Meshopt decoding is\n * considerably faster than Draco decoding, neither compression method will improve runtime\n * performance directly. To improve framerate, you'll need to simplify the geometry by reducing\n * vertex count or draw calls — not just compress it. Finally, be aware that Meshopt compression is\n * lossy: repeatedly compressing and decompressing a model in a pipeline will lose precision, so\n * compression should generally be the last stage of an art workflow, and uncompressed original\n * files should be kept.\n *\n * The meshoptimizer library ([github](https://github.com/zeux/meshoptimizer/tree/master/js),\n * [npm](https://www.npmjs.com/package/meshoptimizer)) is a required dependency for reading or\n * writing files, and must be provided by the application. Compression may alternatively be applied\n * with the [gltfpack](https://github.com/zeux/meshoptimizer/tree/master/gltf) tool.\n *\n * ### Example — Read\n *\n * To read glTF files using Meshopt compression, ensure that the extension\n * and a decoder are registered. Geometry and other data are decompressed\n * while reading the file.\n *\n * ```typescript\n * import { NodeIO } from '@gltf-transform/core';\n * import { EXTMeshoptCompression } from '@gltf-transform/extensions';\n * import { MeshoptDecoder } from 'meshoptimizer';\n *\n * await MeshoptDecoder.ready;\n *\n * const io = new NodeIO()\n * \t.registerExtensions([EXTMeshoptCompression])\n * \t.registerDependencies({ 'meshopt.decoder': MeshoptDecoder });\n *\n * // Read and decode.\n * const document = await io.read('compressed.glb');\n * ```\n *\n * ### Example — Write\n *\n * The simplest way to apply Meshopt compression is with the {@link meshopt}\n * transform. The extension and an encoder must be registered.\n *\n * ```typescript\n * import { NodeIO } from '@gltf-transform/core';\n * import { EXTMeshoptCompression } from '@gltf-transform/extensions';\n * import { meshopt } from '@gltf-transform/functions';\n * import { MeshoptEncoder } from 'meshoptimizer';\n *\n * await MeshoptEncoder.ready;\n *\n * const io = new NodeIO()\n * \t.registerExtensions([EXTMeshoptCompression])\n * \t.registerDependencies({ 'meshopt.encoder': MeshoptEncoder });\n *\n * await document.transform(\n *   meshopt({encoder: MeshoptEncoder, level: 'medium'})\n * );\n *\n * await io.write('compressed-medium.glb', document);\n * ```\n *\n * ### Example — Advanced\n *\n * Internally, the {@link meshopt} transform reorders and quantizes vertex data\n * to preparate for compression. If you prefer different pre-processing, the\n * EXTMeshoptCompression extension can be added to the document manually:\n *\n * ```typescript\n * import { reorder, quantize } from '@gltf-transform/functions';\n * import { EXTMeshoptCompression } from '@gltf-transform/extensions';\n * import { MeshoptEncoder } from 'meshoptimizer';\n *\n * await document.transform(\n * \treorder({encoder: MeshoptEncoder}),\n * \tquantize()\n * );\n *\n * document.createExtension(EXTMeshoptCompression)\n * \t.setRequired(true)\n * \t.setEncoderOptions({ method: EXTMeshoptCompression.EncoderMethod.QUANTIZE });\n * ```\n *\n * In either case, compression is deferred until generating output with an I/O\n * class.\n */\nclass EXTMeshoptCompression extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = EXT_MESHOPT_COMPRESSION;\n    /** @hidden */\n    this.prereadTypes = [PropertyType.BUFFER, PropertyType.PRIMITIVE];\n    /** @hidden */\n    this.prewriteTypes = [PropertyType.BUFFER, PropertyType.ACCESSOR];\n    /** @hidden */\n    this.readDependencies = ['meshopt.decoder'];\n    /** @hidden */\n    this.writeDependencies = ['meshopt.encoder'];\n    this._decoder = null;\n    this._decoderFallbackBufferMap = new Map();\n    this._encoder = null;\n    this._encoderOptions = DEFAULT_ENCODER_OPTIONS$1;\n    this._encoderFallbackBuffer = null;\n    this._encoderBufferViews = {};\n    this._encoderBufferViewData = {};\n    this._encoderBufferViewAccessors = {};\n  }\n  /** @hidden */\n  install(key, dependency) {\n    if (key === 'meshopt.decoder') {\n      this._decoder = dependency;\n    }\n    if (key === 'meshopt.encoder') {\n      this._encoder = dependency;\n    }\n    return this;\n  }\n  /**\n   * Configures Meshopt options for quality/compression tuning. The two methods rely on different\n   * pre-processing before compression, and should be compared on the basis of (a) quality/loss\n   * and (b) final asset size after _also_ applying a lossless compression such as gzip or brotli.\n   *\n   * - QUANTIZE: Default. Pre-process with {@link quantize quantize()} (lossy to specified\n   * \tprecision) before applying lossless Meshopt compression. Offers a considerable compression\n   * \tratio with or without further supercompression. Equivalent to `gltfpack -c`.\n   * - FILTER: Pre-process with lossy filters to improve compression, before applying lossless\n   *\tMeshopt compression. While output may initially be larger than with the QUANTIZE method,\n   *\tthis method will benefit more from supercompression (e.g. gzip or brotli). Equivalent to\n   * \t`gltfpack -cc`.\n   *\n   * Output with the FILTER method will generally be smaller after supercompression (e.g. gzip or\n   * brotli) is applied, but may be larger than QUANTIZE output without it. Decoding is very fast\n   * with both methods.\n   *\n   * Example:\n   *\n   * ```ts\n   * import { EXTMeshoptCompression } from '@gltf-transform/extensions';\n   *\n   * doc.createExtension(EXTMeshoptCompression)\n   * \t.setRequired(true)\n   * \t.setEncoderOptions({\n   * \t\tmethod: EXTMeshoptCompression.EncoderMethod.QUANTIZE\n   * \t});\n   * ```\n   */\n  setEncoderOptions(options) {\n    this._encoderOptions = _extends({}, DEFAULT_ENCODER_OPTIONS$1, options);\n    return this;\n  }\n  /**********************************************************************************************\n   * Decoding.\n   */\n  /** @internal Checks preconditions, decodes buffer views, and creates decoded primitives. */\n  preread(context, propertyType) {\n    if (!this._decoder) {\n      if (!this.isRequired()) return this;\n      throw new Error(`[${EXT_MESHOPT_COMPRESSION}] Please install extension dependency, \"meshopt.decoder\".`);\n    }\n    if (!this._decoder.supported) {\n      if (!this.isRequired()) return this;\n      throw new Error(`[${EXT_MESHOPT_COMPRESSION}]: Missing WASM support.`);\n    }\n    if (propertyType === PropertyType.BUFFER) {\n      this._prereadBuffers(context);\n    } else if (propertyType === PropertyType.PRIMITIVE) {\n      this._prereadPrimitives(context);\n    }\n    return this;\n  }\n  /** @internal Decode buffer views. */\n  _prereadBuffers(context) {\n    const jsonDoc = context.jsonDoc;\n    const viewDefs = jsonDoc.json.bufferViews || [];\n    viewDefs.forEach((viewDef, index) => {\n      if (!viewDef.extensions || !viewDef.extensions[EXT_MESHOPT_COMPRESSION]) return;\n      const meshoptDef = viewDef.extensions[EXT_MESHOPT_COMPRESSION];\n      const byteOffset = meshoptDef.byteOffset || 0;\n      const byteLength = meshoptDef.byteLength || 0;\n      const count = meshoptDef.count;\n      const stride = meshoptDef.byteStride;\n      const result = new Uint8Array(count * stride);\n      const bufferDef = jsonDoc.json.buffers[meshoptDef.buffer];\n      // TODO(cleanup): Should be encapsulated in writer-context.ts.\n      const resource = bufferDef.uri ? jsonDoc.resources[bufferDef.uri] : jsonDoc.resources[GLB_BUFFER];\n      const source = BufferUtils.toView(resource, byteOffset, byteLength);\n      this._decoder.decodeGltfBuffer(result, count, stride, source, meshoptDef.mode, meshoptDef.filter);\n      context.bufferViews[index] = result;\n    });\n  }\n  /**\n   * Mark fallback buffers and replacements.\n   *\n   * Note: Alignment with primitives is arbitrary; this just needs to happen\n   * after Buffers have been parsed.\n   * @internal\n   */\n  _prereadPrimitives(context) {\n    const jsonDoc = context.jsonDoc;\n    const viewDefs = jsonDoc.json.bufferViews || [];\n    //\n    viewDefs.forEach(viewDef => {\n      if (!viewDef.extensions || !viewDef.extensions[EXT_MESHOPT_COMPRESSION]) return;\n      const meshoptDef = viewDef.extensions[EXT_MESHOPT_COMPRESSION];\n      const buffer = context.buffers[meshoptDef.buffer];\n      const fallbackBuffer = context.buffers[viewDef.buffer];\n      const fallbackBufferDef = jsonDoc.json.buffers[viewDef.buffer];\n      if (isFallbackBuffer(fallbackBufferDef)) {\n        this._decoderFallbackBufferMap.set(fallbackBuffer, buffer);\n      }\n    });\n  }\n  /** @hidden Removes Fallback buffers, if extension is required. */\n  read(_context) {\n    if (!this.isRequired()) return this;\n    // Replace fallback buffers.\n    for (const [fallbackBuffer, buffer] of this._decoderFallbackBufferMap) {\n      for (const parent of fallbackBuffer.listParents()) {\n        if (parent instanceof Accessor) {\n          parent.swap(fallbackBuffer, buffer);\n        }\n      }\n      fallbackBuffer.dispose();\n    }\n    return this;\n  }\n  /**********************************************************************************************\n   * Encoding.\n   */\n  /** @internal Claims accessors that can be compressed and writes compressed buffer views. */\n  prewrite(context, propertyType) {\n    if (propertyType === PropertyType.ACCESSOR) {\n      this._prewriteAccessors(context);\n    } else if (propertyType === PropertyType.BUFFER) {\n      this._prewriteBuffers(context);\n    }\n    return this;\n  }\n  /** @internal Claims accessors that can be compressed. */\n  _prewriteAccessors(context) {\n    const json = context.jsonDoc.json;\n    const encoder = this._encoder;\n    const options = this._encoderOptions;\n    const graph = this.document.getGraph();\n    const fallbackBuffer = this.document.createBuffer(); // Disposed on write.\n    const fallbackBufferIndex = this.document.getRoot().listBuffers().indexOf(fallbackBuffer);\n    let nextID = 1;\n    const parentToID = new Map();\n    const getParentID = property => {\n      for (const parent of graph.listParents(property)) {\n        if (parent.propertyType === PropertyType.ROOT) continue;\n        let id = parentToID.get(property);\n        if (id === undefined) parentToID.set(property, id = nextID++);\n        return id;\n      }\n      return -1;\n    };\n    this._encoderFallbackBuffer = fallbackBuffer;\n    this._encoderBufferViews = {};\n    this._encoderBufferViewData = {};\n    this._encoderBufferViewAccessors = {};\n    for (const accessor of this.document.getRoot().listAccessors()) {\n      // See: https://github.com/donmccurdy/glTF-Transform/pull/323#issuecomment-898791251\n      // Example: https://skfb.ly/6qAD8\n      if (getTargetPath(accessor) === 'weights') continue;\n      // See: https://github.com/donmccurdy/glTF-Transform/issues/289\n      if (accessor.getSparse()) continue;\n      const usage = context.getAccessorUsage(accessor);\n      const parentID = context.accessorUsageGroupedByParent.has(usage) ? getParentID(accessor) : null;\n      const mode = getMeshoptMode(accessor, usage);\n      const filter = options.method === EncoderMethod$1.FILTER ? getMeshoptFilter(accessor, this.document) : {\n        filter: MeshoptFilter.NONE\n      };\n      const preparedAccessor = prepareAccessor(accessor, encoder, mode, filter);\n      const {\n        array,\n        byteStride\n      } = preparedAccessor;\n      const buffer = accessor.getBuffer();\n      if (!buffer) throw new Error(`${EXT_MESHOPT_COMPRESSION}: Missing buffer for accessor.`);\n      const bufferIndex = this.document.getRoot().listBuffers().indexOf(buffer);\n      // Buffer view grouping key.\n      const key = [usage, parentID, mode, filter.filter, byteStride, bufferIndex].join(':');\n      let bufferView = this._encoderBufferViews[key];\n      let bufferViewData = this._encoderBufferViewData[key];\n      let bufferViewAccessors = this._encoderBufferViewAccessors[key];\n      // Write new buffer view, if needed.\n      if (!bufferView || !bufferViewData) {\n        bufferViewAccessors = this._encoderBufferViewAccessors[key] = [];\n        bufferViewData = this._encoderBufferViewData[key] = [];\n        bufferView = this._encoderBufferViews[key] = {\n          buffer: fallbackBufferIndex,\n          target: WriterContext.USAGE_TO_TARGET[usage],\n          byteOffset: 0,\n          byteLength: 0,\n          byteStride: usage === WriterContext.BufferViewUsage.ARRAY_BUFFER ? byteStride : undefined,\n          extensions: {\n            [EXT_MESHOPT_COMPRESSION]: {\n              buffer: bufferIndex,\n              byteOffset: 0,\n              byteLength: 0,\n              mode: mode,\n              filter: filter.filter !== MeshoptFilter.NONE ? filter.filter : undefined,\n              byteStride: byteStride,\n              count: 0\n            }\n          }\n        };\n      }\n      // Write accessor.\n      const accessorDef = context.createAccessorDef(accessor);\n      accessorDef.componentType = preparedAccessor.componentType;\n      accessorDef.normalized = preparedAccessor.normalized;\n      accessorDef.byteOffset = bufferView.byteLength;\n      if (accessorDef.min && preparedAccessor.min) accessorDef.min = preparedAccessor.min;\n      if (accessorDef.max && preparedAccessor.max) accessorDef.max = preparedAccessor.max;\n      context.accessorIndexMap.set(accessor, json.accessors.length);\n      json.accessors.push(accessorDef);\n      bufferViewAccessors.push(accessorDef);\n      // Update buffer view.\n      bufferViewData.push(new Uint8Array(array.buffer, array.byteOffset, array.byteLength));\n      bufferView.byteLength += array.byteLength;\n      bufferView.extensions.EXT_meshopt_compression.count += accessor.getCount();\n    }\n  }\n  /** @internal Writes compressed buffer views. */\n  _prewriteBuffers(context) {\n    const encoder = this._encoder;\n    for (const key in this._encoderBufferViews) {\n      const bufferView = this._encoderBufferViews[key];\n      const bufferViewData = this._encoderBufferViewData[key];\n      const buffer = this.document.getRoot().listBuffers()[bufferView.extensions[EXT_MESHOPT_COMPRESSION].buffer];\n      const otherBufferViews = context.otherBufferViews.get(buffer) || [];\n      const {\n        count,\n        byteStride,\n        mode\n      } = bufferView.extensions[EXT_MESHOPT_COMPRESSION];\n      const srcArray = BufferUtils.concat(bufferViewData);\n      const dstArray = encoder.encodeGltfBuffer(srcArray, count, byteStride, mode);\n      const compressedData = BufferUtils.pad(dstArray);\n      bufferView.extensions[EXT_MESHOPT_COMPRESSION].byteLength = dstArray.byteLength;\n      bufferViewData.length = 0;\n      bufferViewData.push(compressedData);\n      otherBufferViews.push(compressedData);\n      context.otherBufferViews.set(buffer, otherBufferViews);\n    }\n  }\n  /** @hidden Puts encoded data into glTF output. */\n  write(context) {\n    let fallbackBufferByteOffset = 0;\n    // Write final encoded buffer view properties.\n    for (const key in this._encoderBufferViews) {\n      const bufferView = this._encoderBufferViews[key];\n      const bufferViewData = this._encoderBufferViewData[key][0];\n      const bufferViewIndex = context.otherBufferViewsIndexMap.get(bufferViewData);\n      const bufferViewAccessors = this._encoderBufferViewAccessors[key];\n      for (const accessorDef of bufferViewAccessors) {\n        accessorDef.bufferView = bufferViewIndex;\n      }\n      const finalBufferViewDef = context.jsonDoc.json.bufferViews[bufferViewIndex];\n      const compressedByteOffset = finalBufferViewDef.byteOffset || 0;\n      Object.assign(finalBufferViewDef, bufferView);\n      finalBufferViewDef.byteOffset = fallbackBufferByteOffset;\n      const bufferViewExtensionDef = finalBufferViewDef.extensions[EXT_MESHOPT_COMPRESSION];\n      bufferViewExtensionDef.byteOffset = compressedByteOffset;\n      fallbackBufferByteOffset += BufferUtils.padNumber(bufferView.byteLength);\n    }\n    // Write final fallback buffer.\n    const fallbackBuffer = this._encoderFallbackBuffer;\n    const fallbackBufferIndex = context.bufferIndexMap.get(fallbackBuffer);\n    const fallbackBufferDef = context.jsonDoc.json.buffers[fallbackBufferIndex];\n    fallbackBufferDef.byteLength = fallbackBufferByteOffset;\n    fallbackBufferDef.extensions = {\n      [EXT_MESHOPT_COMPRESSION]: {\n        fallback: true\n      }\n    };\n    fallbackBuffer.dispose();\n    return this;\n  }\n}\nEXTMeshoptCompression.EXTENSION_NAME = EXT_MESHOPT_COMPRESSION;\nEXTMeshoptCompression.EncoderMethod = EncoderMethod$1;\n\nclass AVIFImageUtils {\n  match(array) {\n    return array.length >= 12 && BufferUtils.decodeText(array.slice(4, 12)) === 'ftypavif';\n  }\n  /**\n   * Probes size of AVIF or HEIC image. Assumes a single static image, without\n   * orientation or other metadata that would affect dimensions.\n   */\n  getSize(array) {\n    if (!this.match(array)) return null;\n    // References:\n    // - https://stackoverflow.com/questions/66222773/how-to-get-image-dimensions-from-an-avif-file\n    // - https://github.com/nodeca/probe-image-size/blob/master/lib/parse_sync/avif.js\n    const view = new DataView(array.buffer, array.byteOffset, array.byteLength);\n    let box = unbox(view, 0);\n    if (!box) return null;\n    let offset = box.end;\n    while (box = unbox(view, offset)) {\n      if (box.type === 'meta') {\n        offset = box.start + 4; // version + flags\n      } else if (box.type === 'iprp' || box.type === 'ipco') {\n        offset = box.start;\n      } else if (box.type === 'ispe') {\n        return [view.getUint32(box.start + 4), view.getUint32(box.start + 8)];\n      } else if (box.type === 'mdat') {\n        break; // mdat should be last, unlikely to find metadata past here.\n      } else {\n        offset = box.end;\n      }\n    }\n    return null;\n  }\n  getChannels(_buffer) {\n    return 4;\n  }\n}\n/**\n * [`EXT_texture_avif`](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif/)\n * enables AVIF images for any material texture.\n *\n * AVIF offers greatly reduced transmission size, but\n * [requires browser support](https://caniuse.com/avif). Like PNG and JPEG, an AVIF image is\n * *fully decompressed* when uploaded to the GPU, which increases upload time and GPU memory cost.\n * For seamless uploads and minimal GPU memory cost, it is necessary to use a GPU texture format\n * like Basis Universal, with the `KHR_texture_basisu` extension.\n *\n * Defining no {@link ExtensionProperty} types, this {@link Extension} is simply attached to the\n * {@link Document}, and affects the entire Document by allowing use of the `image/avif` MIME type\n * and passing AVIF image data to the {@link Texture.setImage} method. Without the Extension, the\n * same MIME types and image data would yield an invalid glTF document, under the stricter core glTF\n * specification.\n *\n * Properties:\n * - N/A\n *\n * ### Example\n *\n * ```typescript\n * import { TextureAVIF } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const avifExtension = document.createExtension(TextureAVIF)\n * \t.setRequired(true);\n * document.createTexture('MyAVIFTexture')\n * \t.setMimeType('image/avif')\n * \t.setImage(fs.readFileSync('my-texture.avif'));\n * ```\n *\n * AVIF conversion is not done automatically when adding the extension as shown above — you must\n * convert the image data first, then pass the `.avif` payload to {@link Texture.setImage}.\n *\n * When the `EXT_texture_avif` extension is added to a file by glTF-Transform, the extension should\n * always be required. This tool does not support writing assets that \"fall back\" to optional PNG or\n * JPEG image data.\n */\nclass EXTTextureAVIF extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = EXT_TEXTURE_AVIF;\n    /** @hidden */\n    this.prereadTypes = [PropertyType.TEXTURE];\n  }\n  /** @hidden */\n  static register() {\n    ImageUtils.registerFormat('image/avif', new AVIFImageUtils());\n  }\n  /** @hidden */\n  preread(context) {\n    const textureDefs = context.jsonDoc.json.textures || [];\n    textureDefs.forEach(textureDef => {\n      if (textureDef.extensions && textureDef.extensions[EXT_TEXTURE_AVIF]) {\n        textureDef.source = textureDef.extensions[EXT_TEXTURE_AVIF].source;\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listTextures().forEach(texture => {\n      if (texture.getMimeType() === 'image/avif') {\n        const imageIndex = context.imageIndexMap.get(texture);\n        const textureDefs = jsonDoc.json.textures || [];\n        textureDefs.forEach(textureDef => {\n          if (textureDef.source === imageIndex) {\n            textureDef.extensions = textureDef.extensions || {};\n            textureDef.extensions[EXT_TEXTURE_AVIF] = {\n              source: textureDef.source\n            };\n            delete textureDef.source;\n          }\n        });\n      }\n    });\n    return this;\n  }\n}\nEXTTextureAVIF.EXTENSION_NAME = EXT_TEXTURE_AVIF;\nfunction unbox(data, offset) {\n  if (data.byteLength < 4 + offset) return null;\n  // size includes first 4 bytes (length)\n  const size = data.getUint32(offset);\n  if (data.byteLength < size + offset || size < 8) return null;\n  return {\n    type: BufferUtils.decodeText(new Uint8Array(data.buffer, data.byteOffset + offset + 4, 4)),\n    start: offset + 8,\n    end: offset + size\n  };\n}\n\nclass WEBPImageUtils {\n  match(array) {\n    return array.length >= 12 && array[8] === 87 && array[9] === 69 && array[10] === 66 && array[11] === 80;\n  }\n  getSize(array) {\n    // Reference: http://tools.ietf.org/html/rfc6386\n    const RIFF = BufferUtils.decodeText(array.slice(0, 4));\n    const WEBP = BufferUtils.decodeText(array.slice(8, 12));\n    if (RIFF !== 'RIFF' || WEBP !== 'WEBP') return null;\n    const view = new DataView(array.buffer, array.byteOffset);\n    // Reference: https://wiki.tcl-lang.org/page/Reading+WEBP+image+dimensions\n    let offset = 12;\n    while (offset < view.byteLength) {\n      const chunkId = BufferUtils.decodeText(new Uint8Array([view.getUint8(offset), view.getUint8(offset + 1), view.getUint8(offset + 2), view.getUint8(offset + 3)]));\n      const chunkByteLength = view.getUint32(offset + 4, true);\n      if (chunkId === 'VP8 ') {\n        const width = view.getInt16(offset + 14, true) & 0x3fff;\n        const height = view.getInt16(offset + 16, true) & 0x3fff;\n        return [width, height];\n      } else if (chunkId === 'VP8L') {\n        const b0 = view.getUint8(offset + 9);\n        const b1 = view.getUint8(offset + 10);\n        const b2 = view.getUint8(offset + 11);\n        const b3 = view.getUint8(offset + 12);\n        const width = 1 + ((b1 & 0x3f) << 8 | b0);\n        const height = 1 + ((b3 & 0xf) << 10 | b2 << 2 | (b1 & 0xc0) >> 6);\n        return [width, height];\n      }\n      offset += 8 + chunkByteLength + chunkByteLength % 2;\n    }\n    return null;\n  }\n  getChannels(_buffer) {\n    return 4;\n  }\n}\n/**\n * [`EXT_texture_webp`](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp/)\n * enables WebP images for any material texture.\n *\n * WebP offers greatly reduced transmission size, but\n * [requires browser support](https://caniuse.com/webp). Like PNG and JPEG, a WebP image is\n * *fully decompressed* when uploaded to the GPU, which increases upload time and GPU memory cost.\n * For seamless uploads and minimal GPU memory cost, it is necessary to use a GPU texture format\n * like Basis Universal, with the `KHR_texture_basisu` extension.\n *\n * Defining no {@link ExtensionProperty} types, this {@link Extension} is simply attached to the\n * {@link Document}, and affects the entire Document by allowing use of the `image/webp` MIME type\n * and passing WebP image data to the {@link Texture.setImage} method. Without the Extension, the\n * same MIME types and image data would yield an invalid glTF document, under the stricter core glTF\n * specification.\n *\n * Properties:\n * - N/A\n *\n * ### Example\n *\n * ```typescript\n * import { EXTTextureWebP } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const webpExtension = document.createExtension(EXTTextureWebP)\n * \t.setRequired(true);\n * document.createTexture('MyWebPTexture')\n * \t.setMimeType('image/webp')\n * \t.setImage(fs.readFileSync('my-texture.webp'));\n * ```\n *\n * WebP conversion is not done automatically when adding the extension as shown above — you must\n * convert the image data first, then pass the `.webp` payload to {@link Texture.setImage}.\n *\n * When the `EXT_texture_webp` extension is added to a file by glTF-Transform, the extension should\n * always be required. This tool does not support writing assets that \"fall back\" to optional PNG or\n * JPEG image data.\n */\nclass EXTTextureWebP extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = EXT_TEXTURE_WEBP;\n    /** @hidden */\n    this.prereadTypes = [PropertyType.TEXTURE];\n  }\n  /** @hidden */\n  static register() {\n    ImageUtils.registerFormat('image/webp', new WEBPImageUtils());\n  }\n  /** @hidden */\n  preread(context) {\n    const textureDefs = context.jsonDoc.json.textures || [];\n    textureDefs.forEach(textureDef => {\n      if (textureDef.extensions && textureDef.extensions[EXT_TEXTURE_WEBP]) {\n        textureDef.source = textureDef.extensions[EXT_TEXTURE_WEBP].source;\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listTextures().forEach(texture => {\n      if (texture.getMimeType() === 'image/webp') {\n        const imageIndex = context.imageIndexMap.get(texture);\n        const textureDefs = jsonDoc.json.textures || [];\n        textureDefs.forEach(textureDef => {\n          if (textureDef.source === imageIndex) {\n            textureDef.extensions = textureDef.extensions || {};\n            textureDef.extensions[EXT_TEXTURE_WEBP] = {\n              source: textureDef.source\n            };\n            delete textureDef.source;\n          }\n        });\n      }\n    });\n    return this;\n  }\n}\nEXTTextureWebP.EXTENSION_NAME = EXT_TEXTURE_WEBP;\n\nlet decoderModule;\n// Initialized when decoder module loads.\nlet COMPONENT_ARRAY;\nlet DATA_TYPE;\nfunction decodeGeometry(decoder, data) {\n  const buffer = new decoderModule.DecoderBuffer();\n  try {\n    buffer.Init(data, data.length);\n    const geometryType = decoder.GetEncodedGeometryType(buffer);\n    if (geometryType !== decoderModule.TRIANGULAR_MESH) {\n      throw new Error(`[${KHR_DRACO_MESH_COMPRESSION}] Unknown geometry type.`);\n    }\n    const dracoMesh = new decoderModule.Mesh();\n    const status = decoder.DecodeBufferToMesh(buffer, dracoMesh);\n    if (!status.ok() || dracoMesh.ptr === 0) {\n      throw new Error(`[${KHR_DRACO_MESH_COMPRESSION}] Decoding failure.`);\n    }\n    return dracoMesh;\n  } finally {\n    decoderModule.destroy(buffer);\n  }\n}\nfunction decodeIndex(decoder, mesh) {\n  const numFaces = mesh.num_faces();\n  const numIndices = numFaces * 3;\n  let ptr;\n  let indices;\n  if (mesh.num_points() <= 65534) {\n    const byteLength = numIndices * Uint16Array.BYTES_PER_ELEMENT;\n    ptr = decoderModule._malloc(byteLength);\n    decoder.GetTrianglesUInt16Array(mesh, byteLength, ptr);\n    indices = new Uint16Array(decoderModule.HEAPU16.buffer, ptr, numIndices).slice();\n  } else {\n    const byteLength = numIndices * Uint32Array.BYTES_PER_ELEMENT;\n    ptr = decoderModule._malloc(byteLength);\n    decoder.GetTrianglesUInt32Array(mesh, byteLength, ptr);\n    indices = new Uint32Array(decoderModule.HEAPU32.buffer, ptr, numIndices).slice();\n  }\n  decoderModule._free(ptr);\n  return indices;\n}\nfunction decodeAttribute(decoder, mesh, attribute, accessorDef) {\n  const dataType = DATA_TYPE[accessorDef.componentType];\n  const ArrayCtor = COMPONENT_ARRAY[accessorDef.componentType];\n  const numComponents = attribute.num_components();\n  const numPoints = mesh.num_points();\n  const numValues = numPoints * numComponents;\n  const byteLength = numValues * ArrayCtor.BYTES_PER_ELEMENT;\n  const ptr = decoderModule._malloc(byteLength);\n  decoder.GetAttributeDataArrayForAllPoints(mesh, attribute, dataType, byteLength, ptr);\n  const array = new ArrayCtor(decoderModule.HEAPF32.buffer, ptr, numValues).slice();\n  decoderModule._free(ptr);\n  return array;\n}\nfunction initDecoderModule(_decoderModule) {\n  decoderModule = _decoderModule;\n  COMPONENT_ARRAY = {\n    [Accessor.ComponentType.FLOAT]: Float32Array,\n    [Accessor.ComponentType.UNSIGNED_INT]: Uint32Array,\n    [Accessor.ComponentType.UNSIGNED_SHORT]: Uint16Array,\n    [Accessor.ComponentType.UNSIGNED_BYTE]: Uint8Array,\n    [Accessor.ComponentType.SHORT]: Int16Array,\n    [Accessor.ComponentType.BYTE]: Int8Array\n  };\n  DATA_TYPE = {\n    [Accessor.ComponentType.FLOAT]: decoderModule.DT_FLOAT32,\n    [Accessor.ComponentType.UNSIGNED_INT]: decoderModule.DT_UINT32,\n    [Accessor.ComponentType.UNSIGNED_SHORT]: decoderModule.DT_UINT16,\n    [Accessor.ComponentType.UNSIGNED_BYTE]: decoderModule.DT_UINT8,\n    [Accessor.ComponentType.SHORT]: decoderModule.DT_INT16,\n    [Accessor.ComponentType.BYTE]: decoderModule.DT_INT8\n  };\n}\n\nlet encoderModule;\nvar EncoderMethod;\n(function (EncoderMethod) {\n  EncoderMethod[EncoderMethod[\"EDGEBREAKER\"] = 1] = \"EDGEBREAKER\";\n  EncoderMethod[EncoderMethod[\"SEQUENTIAL\"] = 0] = \"SEQUENTIAL\";\n})(EncoderMethod || (EncoderMethod = {}));\nvar AttributeEnum;\n(function (AttributeEnum) {\n  AttributeEnum[\"POSITION\"] = \"POSITION\";\n  AttributeEnum[\"NORMAL\"] = \"NORMAL\";\n  AttributeEnum[\"COLOR\"] = \"COLOR\";\n  AttributeEnum[\"TEX_COORD\"] = \"TEX_COORD\";\n  AttributeEnum[\"GENERIC\"] = \"GENERIC\";\n})(AttributeEnum || (AttributeEnum = {}));\nconst DEFAULT_QUANTIZATION_BITS = {\n  [AttributeEnum.POSITION]: 14,\n  [AttributeEnum.NORMAL]: 10,\n  [AttributeEnum.COLOR]: 8,\n  [AttributeEnum.TEX_COORD]: 12,\n  [AttributeEnum.GENERIC]: 12\n};\nconst DEFAULT_ENCODER_OPTIONS = {\n  decodeSpeed: 5,\n  encodeSpeed: 5,\n  method: EncoderMethod.EDGEBREAKER,\n  quantizationBits: DEFAULT_QUANTIZATION_BITS,\n  quantizationVolume: 'mesh'\n};\nfunction initEncoderModule(_encoderModule) {\n  encoderModule = _encoderModule;\n}\n/**\n * References:\n * - https://github.com/mrdoob/three.js/blob/dev/examples/js/exporters/DRACOExporter.js\n * - https://github.com/CesiumGS/gltf-pipeline/blob/master/lib/compressDracoMeshes.js\n */\nfunction encodeGeometry(prim, _options = DEFAULT_ENCODER_OPTIONS) {\n  const options = _extends({}, DEFAULT_ENCODER_OPTIONS, _options);\n  options.quantizationBits = _extends({}, DEFAULT_QUANTIZATION_BITS, _options.quantizationBits);\n  const builder = new encoderModule.MeshBuilder();\n  const mesh = new encoderModule.Mesh();\n  const encoder = new encoderModule.ExpertEncoder(mesh);\n  const attributeIDs = {};\n  const dracoBuffer = new encoderModule.DracoInt8Array();\n  const hasMorphTargets = prim.listTargets().length > 0;\n  let hasSparseAttributes = false;\n  for (const semantic of prim.listSemantics()) {\n    const attribute = prim.getAttribute(semantic);\n    if (attribute.getSparse()) {\n      hasSparseAttributes = true;\n      continue;\n    }\n    const attributeEnum = getAttributeEnum(semantic);\n    const attributeID = addAttribute(builder, attribute.getComponentType(), mesh, encoderModule[attributeEnum], attribute.getCount(), attribute.getElementSize(), attribute.getArray());\n    if (attributeID === -1) throw new Error(`Error compressing \"${semantic}\" attribute.`);\n    attributeIDs[semantic] = attributeID;\n    if (options.quantizationVolume === 'mesh' || semantic !== 'POSITION') {\n      encoder.SetAttributeQuantization(attributeID, options.quantizationBits[attributeEnum]);\n    } else if (typeof options.quantizationVolume === 'object') {\n      const {\n        quantizationVolume\n      } = options;\n      const range = Math.max(quantizationVolume.max[0] - quantizationVolume.min[0], quantizationVolume.max[1] - quantizationVolume.min[1], quantizationVolume.max[2] - quantizationVolume.min[2]);\n      encoder.SetAttributeExplicitQuantization(attributeID, options.quantizationBits[attributeEnum], attribute.getElementSize(), quantizationVolume.min, range);\n    } else {\n      throw new Error('Invalid quantization volume state.');\n    }\n  }\n  const indices = prim.getIndices();\n  if (!indices) throw new EncodingError('Primitive must have indices.');\n  builder.AddFacesToMesh(mesh, indices.getCount() / 3, indices.getArray());\n  encoder.SetSpeedOptions(options.encodeSpeed, options.decodeSpeed);\n  encoder.SetTrackEncodedProperties(true);\n  // TODO(cleanup): Use edgebreaker without deduplication if possible.\n  // See https://github.com/google/draco/issues/929.\n  if (options.method === EncoderMethod.SEQUENTIAL || hasMorphTargets || hasSparseAttributes) {\n    encoder.SetEncodingMethod(encoderModule.MESH_SEQUENTIAL_ENCODING);\n  } else {\n    encoder.SetEncodingMethod(encoderModule.MESH_EDGEBREAKER_ENCODING);\n  }\n  // Encode, preserving vertex order for primitives with morph targets and sparse accessors.\n  const byteLength = encoder.EncodeToDracoBuffer(!(hasMorphTargets || hasSparseAttributes), dracoBuffer);\n  if (byteLength <= 0) throw new EncodingError('Error applying Draco compression.');\n  const data = new Uint8Array(byteLength);\n  for (let i = 0; i < byteLength; ++i) {\n    data[i] = dracoBuffer.GetValue(i);\n  }\n  const numVertices = encoder.GetNumberOfEncodedPoints();\n  const numIndices = encoder.GetNumberOfEncodedFaces() * 3;\n  encoderModule.destroy(dracoBuffer);\n  encoderModule.destroy(mesh);\n  encoderModule.destroy(builder);\n  encoderModule.destroy(encoder);\n  return {\n    numVertices,\n    numIndices,\n    data,\n    attributeIDs\n  };\n}\nfunction getAttributeEnum(semantic) {\n  if (semantic === 'POSITION') {\n    return AttributeEnum.POSITION;\n  } else if (semantic === 'NORMAL') {\n    return AttributeEnum.NORMAL;\n  } else if (semantic.startsWith('COLOR_')) {\n    return AttributeEnum.COLOR;\n  } else if (semantic.startsWith('TEXCOORD_')) {\n    return AttributeEnum.TEX_COORD;\n  }\n  return AttributeEnum.GENERIC;\n}\nfunction addAttribute(builder, componentType, mesh, attribute, count, itemSize, array) {\n  switch (componentType) {\n    case Accessor.ComponentType.UNSIGNED_BYTE:\n      return builder.AddUInt8Attribute(mesh, attribute, count, itemSize, array);\n    case Accessor.ComponentType.BYTE:\n      return builder.AddInt8Attribute(mesh, attribute, count, itemSize, array);\n    case Accessor.ComponentType.UNSIGNED_SHORT:\n      return builder.AddUInt16Attribute(mesh, attribute, count, itemSize, array);\n    case Accessor.ComponentType.SHORT:\n      return builder.AddInt16Attribute(mesh, attribute, count, itemSize, array);\n    case Accessor.ComponentType.UNSIGNED_INT:\n      return builder.AddUInt32Attribute(mesh, attribute, count, itemSize, array);\n    case Accessor.ComponentType.FLOAT:\n      return builder.AddFloatAttribute(mesh, attribute, count, itemSize, array);\n    default:\n      throw new Error(`Unexpected component type, \"${componentType}\".`);\n  }\n}\nclass EncodingError extends Error {}\n\n/**\n * [`KHR_draco_mesh_compression`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_draco_mesh_compression/)\n * provides advanced compression for mesh geometry.\n *\n * For models where geometry is a significant factor (>1 MB), Draco can reduce filesize by ~95%\n * in many cases. When animation or textures are large, other complementary compression methods\n * should be used as well. For geometry <1MB, the size of the WASM decoder library may outweigh\n * size savings.\n *\n * Be aware that decompression happens before uploading to the GPU — this will add some latency to\n * the parsing process, and means that compressing geometry with  Draco does _not_ affect runtime\n * performance. To improve framerate, you'll need to simplify the geometry by reducing vertex count\n * or draw calls — not just compress it. Finally, be aware that Draco compression is lossy:\n * repeatedly compressing and decompressing a model in a pipeline will lose precision, so\n * compression should generally be the last stage of an art workflow, and uncompressed original\n * files should be kept.\n *\n * A decoder or encoder from the `draco3dgltf` npm module for Node.js (or\n * [elsewhere for web](https://stackoverflow.com/a/66978236/1314762)) is required for reading and writing,\n * and must be provided by the application.\n *\n * ### Encoding options\n *\n * Two compression methods are available: 'edgebreaker' and 'sequential'. The\n * edgebreaker method will give higher compression in general, but changes the\n * order of the model's vertices. To preserve index order, use sequential\n * compression. When a mesh uses morph targets, or a high decoding speed is\n * selected, sequential compression will automatically be chosen.\n *\n * Both speed options affect the encoder's choice of algorithms. For example, a\n * requirement for fast decoding may prevent the encoder from using the best\n * compression methods even if the encoding speed is set to 0. In general, the\n * faster of the two options limits the choice of features that can be used by the\n * encoder. Setting --decodeSpeed to be faster than the --encodeSpeed may allow\n * the encoder to choose the optimal method out of the available features for the\n * given --decodeSpeed.\n *\n * ### Example — Read\n *\n * To read glTF files using Draco compression, ensure that the extension\n * and a decoder are registered. Geometry is decompressed while reading.\n *\n * ```typescript\n * import { NodeIO } from '@gltf-transform/core';\n * import { KHRDracoMeshCompression } from '@gltf-transform/extensions';\n * import draco3d from 'draco3dgltf';\n *\n * const io = new NodeIO()\n * \t.registerExtensions([KHRDracoMeshCompression])\n * \t.registerDependencies({\n * \t\t'draco3d.decoder': await draco3d.createDecoderModule()\n * \t});\n *\n * // Read and decode.\n * const document = await io.read('compressed.glb');\n * ```\n *\n * ### Example — Write\n *\n * The simplest way to apply Draco compression is with the {@link draco}\n * transform. The extension and an encoder must be registered.\n *\n * ```typescript\n * import { NodeIO } from '@gltf-transform/core';\n * import { KHRDracoMeshCompression } from '@gltf-transform/extensions';\n * import { draco } from '@gltf-transform/functions';\n * import draco3d from 'draco3dgltf';\n *\n * const io = new NodeIO()\n * \t.registerExtensions([KHRDracoMeshCompression])\n * \t.registerDependencies({\n * \t\t'draco3d.encoder': await draco3d.createEncoderModule()\n * \t});\n *\n * await document.transform(\n *   draco({method: 'edgebreaker'})\n * );\n *\n * await io.write('compressed.glb', document);\n * ```\n *\n * ### Example\n *\n * Equivalently, the KHRDracoMeshCompression extension can be added manually to a document.\n *\n * ```typescript\n * import { KHRDracoMeshCompression } from '@gltf-transform/extensions';\n *\n * document.createExtension(KHRDracoMeshCompression)\n * \t.setRequired(true)\n * \t.setEncoderOptions({\n * \t\tmethod: KHRDracoMeshCompression.EncoderMethod.EDGEBREAKER,\n * \t\tencodeSpeed: 5,\n * \t\tdecodeSpeed: 5,\n * \t});\n *\n * await io.write('compressed.glb', document);\n * ```\n *\n * In either case, Compression is deferred until generating output with an\n * I/O class.\n */\nclass KHRDracoMeshCompression extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_DRACO_MESH_COMPRESSION;\n    /** @hidden */\n    this.prereadTypes = [PropertyType.PRIMITIVE];\n    /** @hidden */\n    this.prewriteTypes = [PropertyType.ACCESSOR];\n    /** @hidden */\n    this.readDependencies = ['draco3d.decoder'];\n    /** @hidden */\n    this.writeDependencies = ['draco3d.encoder'];\n    this._decoderModule = null;\n    this._encoderModule = null;\n    this._encoderOptions = {};\n  }\n  /** @hidden */\n  install(key, dependency) {\n    if (key === 'draco3d.decoder') {\n      this._decoderModule = dependency;\n      initDecoderModule(this._decoderModule);\n    }\n    if (key === 'draco3d.encoder') {\n      this._encoderModule = dependency;\n      initEncoderModule(this._encoderModule);\n    }\n    return this;\n  }\n  /**\n   * Sets Draco compression options. Compression does not take effect until the Document is\n   * written with an I/O class.\n   *\n   * Defaults:\n   * ```\n   * decodeSpeed?: number = 5;\n   * encodeSpeed?: number = 5;\n   * method?: EncoderMethod = EncoderMethod.EDGEBREAKER;\n   * quantizationBits?: {[ATTRIBUTE_NAME]: bits};\n   * quantizationVolume?: 'mesh' | 'scene' | bbox = 'mesh';\n   * ```\n   */\n  setEncoderOptions(options) {\n    this._encoderOptions = options;\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    if (!this._decoderModule) {\n      throw new Error(`[${KHR_DRACO_MESH_COMPRESSION}] Please install extension dependency, \"draco3d.decoder\".`);\n    }\n    const logger = this.document.getLogger();\n    const jsonDoc = context.jsonDoc;\n    const dracoMeshes = new Map();\n    try {\n      const meshDefs = jsonDoc.json.meshes || [];\n      for (const meshDef of meshDefs) {\n        for (const primDef of meshDef.primitives) {\n          if (!primDef.extensions || !primDef.extensions[KHR_DRACO_MESH_COMPRESSION]) continue;\n          const dracoDef = primDef.extensions[KHR_DRACO_MESH_COMPRESSION];\n          let [decoder, dracoMesh] = dracoMeshes.get(dracoDef.bufferView) || [];\n          if (!dracoMesh || !decoder) {\n            const bufferViewDef = jsonDoc.json.bufferViews[dracoDef.bufferView];\n            const bufferDef = jsonDoc.json.buffers[bufferViewDef.buffer];\n            // TODO(cleanup): Should be encapsulated in writer-context.ts.\n            const resource = bufferDef.uri ? jsonDoc.resources[bufferDef.uri] : jsonDoc.resources[GLB_BUFFER];\n            const byteOffset = bufferViewDef.byteOffset || 0;\n            const byteLength = bufferViewDef.byteLength;\n            const compressedData = BufferUtils.toView(resource, byteOffset, byteLength);\n            decoder = new this._decoderModule.Decoder();\n            dracoMesh = decodeGeometry(decoder, compressedData);\n            dracoMeshes.set(dracoDef.bufferView, [decoder, dracoMesh]);\n            logger.debug(`[${KHR_DRACO_MESH_COMPRESSION}] Decompressed ${compressedData.byteLength} bytes.`);\n          }\n          // Attributes.\n          for (const semantic in dracoDef.attributes) {\n            const accessorDef = context.jsonDoc.json.accessors[primDef.attributes[semantic]];\n            const dracoAttribute = decoder.GetAttributeByUniqueId(dracoMesh, dracoDef.attributes[semantic]);\n            const attributeArray = decodeAttribute(decoder, dracoMesh, dracoAttribute, accessorDef);\n            context.accessors[primDef.attributes[semantic]].setArray(attributeArray);\n          }\n          // Indices. Optional, see https://github.com/google/draco/issues/720.\n          if (primDef.indices !== undefined) {\n            context.accessors[primDef.indices].setArray(decodeIndex(decoder, dracoMesh));\n          }\n        }\n      }\n    } finally {\n      for (const [decoder, dracoMesh] of Array.from(dracoMeshes.values())) {\n        this._decoderModule.destroy(decoder);\n        this._decoderModule.destroy(dracoMesh);\n      }\n    }\n    return this;\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  prewrite(context, _propertyType) {\n    if (!this._encoderModule) {\n      throw new Error(`[${KHR_DRACO_MESH_COMPRESSION}] Please install extension dependency, \"draco3d.encoder\".`);\n    }\n    const logger = this.document.getLogger();\n    logger.debug(`[${KHR_DRACO_MESH_COMPRESSION}] Compression options: ${JSON.stringify(this._encoderOptions)}`);\n    const primitiveHashMap = listDracoPrimitives(this.document);\n    const primitiveEncodingMap = new Map();\n    let quantizationVolume = 'mesh';\n    if (this._encoderOptions.quantizationVolume === 'scene') {\n      if (this.document.getRoot().listScenes().length !== 1) {\n        logger.warn(`[${KHR_DRACO_MESH_COMPRESSION}]: quantizationVolume=scene requires exactly 1 scene.`);\n      } else {\n        quantizationVolume = getBounds(this.document.getRoot().listScenes().pop());\n      }\n    }\n    for (const prim of Array.from(primitiveHashMap.keys())) {\n      const primHash = primitiveHashMap.get(prim);\n      if (!primHash) throw new Error('Unexpected primitive.');\n      // Reuse an existing EncodedPrimitive, if possible.\n      if (primitiveEncodingMap.has(primHash)) {\n        primitiveEncodingMap.set(primHash, primitiveEncodingMap.get(primHash));\n        continue;\n      }\n      const indices = prim.getIndices(); // Condition for listDracoPrimitives().\n      const accessorDefs = context.jsonDoc.json.accessors;\n      // Create a new EncodedPrimitive.\n      let encodedPrim;\n      try {\n        encodedPrim = encodeGeometry(prim, _extends({}, this._encoderOptions, {\n          quantizationVolume\n        }));\n      } catch (e) {\n        if (e instanceof EncodingError) {\n          logger.warn(`[${KHR_DRACO_MESH_COMPRESSION}]: ${e.message} Skipping primitive compression.`);\n          continue;\n        }\n        throw e;\n      }\n      primitiveEncodingMap.set(primHash, encodedPrim);\n      // Create indices definition, update count.\n      const indicesDef = context.createAccessorDef(indices);\n      indicesDef.count = encodedPrim.numIndices;\n      context.accessorIndexMap.set(indices, accessorDefs.length);\n      accessorDefs.push(indicesDef);\n      // In rare cases Draco increases vertex count, requiring a larger index component type.\n      // https://github.com/donmccurdy/glTF-Transform/issues/1370\n      if (encodedPrim.numVertices > 65534 && Accessor.getComponentSize(indicesDef.componentType) <= 2) {\n        indicesDef.componentType = Accessor.ComponentType.UNSIGNED_INT;\n      } else if (encodedPrim.numVertices > 254 && Accessor.getComponentSize(indicesDef.componentType) <= 1) {\n        indicesDef.componentType = Accessor.ComponentType.UNSIGNED_SHORT;\n      }\n      // Create attribute definitions, update count.\n      for (const semantic of prim.listSemantics()) {\n        const attribute = prim.getAttribute(semantic);\n        if (encodedPrim.attributeIDs[semantic] === undefined) continue; // sparse\n        const attributeDef = context.createAccessorDef(attribute);\n        attributeDef.count = encodedPrim.numVertices;\n        context.accessorIndexMap.set(attribute, accessorDefs.length);\n        accessorDefs.push(attributeDef);\n      }\n      // Map compressed buffer view to a Buffer.\n      const buffer = prim.getAttribute('POSITION').getBuffer() || this.document.getRoot().listBuffers()[0];\n      if (!context.otherBufferViews.has(buffer)) context.otherBufferViews.set(buffer, []);\n      context.otherBufferViews.get(buffer).push(encodedPrim.data);\n    }\n    logger.debug(`[${KHR_DRACO_MESH_COMPRESSION}] Compressed ${primitiveHashMap.size} primitives.`);\n    context.extensionData[KHR_DRACO_MESH_COMPRESSION] = {\n      primitiveHashMap,\n      primitiveEncodingMap\n    };\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const dracoContext = context.extensionData[KHR_DRACO_MESH_COMPRESSION];\n    for (const mesh of this.document.getRoot().listMeshes()) {\n      const meshDef = context.jsonDoc.json.meshes[context.meshIndexMap.get(mesh)];\n      for (let i = 0; i < mesh.listPrimitives().length; i++) {\n        const prim = mesh.listPrimitives()[i];\n        const primDef = meshDef.primitives[i];\n        const primHash = dracoContext.primitiveHashMap.get(prim);\n        if (!primHash) continue;\n        const encodedPrim = dracoContext.primitiveEncodingMap.get(primHash);\n        if (!encodedPrim) continue;\n        primDef.extensions = primDef.extensions || {};\n        primDef.extensions[KHR_DRACO_MESH_COMPRESSION] = {\n          bufferView: context.otherBufferViewsIndexMap.get(encodedPrim.data),\n          attributes: encodedPrim.attributeIDs\n        };\n      }\n    }\n    // Omit the extension if nothing was compressed.\n    if (!dracoContext.primitiveHashMap.size) {\n      const json = context.jsonDoc.json;\n      json.extensionsUsed = (json.extensionsUsed || []).filter(name => name !== KHR_DRACO_MESH_COMPRESSION);\n      json.extensionsRequired = (json.extensionsRequired || []).filter(name => name !== KHR_DRACO_MESH_COMPRESSION);\n    }\n    return this;\n  }\n}\n/**\n * Returns a list of Primitives compatible with Draco compression. If any required preconditions\n * fail, and would break assumptions required for compression, this function will throw an error.\n */\nKHRDracoMeshCompression.EXTENSION_NAME = KHR_DRACO_MESH_COMPRESSION;\n/**\n * Compression method. `EncoderMethod.EDGEBREAKER` usually provides a higher compression ratio,\n * while `EncoderMethod.SEQUENTIAL` better preserves original vertex order.\n */\nKHRDracoMeshCompression.EncoderMethod = EncoderMethod;\nfunction listDracoPrimitives(doc) {\n  const logger = doc.getLogger();\n  const included = new Set();\n  const excluded = new Set();\n  let nonIndexed = 0;\n  let nonTriangles = 0;\n  // Support compressing only indexed, mode=TRIANGLES primitives.\n  for (const mesh of doc.getRoot().listMeshes()) {\n    for (const prim of mesh.listPrimitives()) {\n      if (!prim.getIndices()) {\n        excluded.add(prim);\n        nonIndexed++;\n      } else if (prim.getMode() !== Primitive.Mode.TRIANGLES) {\n        excluded.add(prim);\n        nonTriangles++;\n      } else {\n        included.add(prim);\n      }\n    }\n  }\n  if (nonIndexed > 0) {\n    logger.warn(`[${KHR_DRACO_MESH_COMPRESSION}] Skipping Draco compression of ${nonIndexed} non-indexed primitives.`);\n  }\n  if (nonTriangles > 0) {\n    logger.warn(`[${KHR_DRACO_MESH_COMPRESSION}] Skipping Draco compression of ${nonTriangles} non-TRIANGLES primitives.`);\n  }\n  // Create an Accessor->index mapping.\n  const accessors = doc.getRoot().listAccessors();\n  const accessorIndices = new Map();\n  for (let i = 0; i < accessors.length; i++) accessorIndices.set(accessors[i], i);\n  // For each compressed Primitive, create a hash key identifying its accessors. Map each\n  // compressed Primitive and Accessor to this hash key.\n  const includedAccessors = new Map();\n  const includedHashKeys = new Set();\n  const primToHashKey = new Map();\n  for (const prim of Array.from(included)) {\n    let hashKey = createHashKey(prim, accessorIndices);\n    // If accessors of an identical primitive have already been checked, we're done.\n    if (includedHashKeys.has(hashKey)) {\n      primToHashKey.set(prim, hashKey);\n      continue;\n    }\n    // If any accessors are already in use, but the same hashKey hasn't been written, then we\n    // need to create copies of these accessors for the current encoded primitive. We can't\n    // reuse the same compressed accessor for two encoded primitives, because Draco might\n    // change the vertex count, change the vertex order, or cause other conflicts.\n    if (includedAccessors.has(prim.getIndices())) {\n      const indices = prim.getIndices(); // Condition for 'included' list.\n      const dstIndices = indices.clone();\n      accessorIndices.set(dstIndices, doc.getRoot().listAccessors().length - 1);\n      prim.swap(indices, dstIndices); // TODO(cleanup): I/O should not modify Document.\n    }\n    for (const attribute of prim.listAttributes()) {\n      if (includedAccessors.has(attribute)) {\n        const dstAttribute = attribute.clone();\n        accessorIndices.set(dstAttribute, doc.getRoot().listAccessors().length - 1);\n        prim.swap(attribute, dstAttribute); // TODO(cleanup): I/O should not modify Document.\n      }\n    }\n    // With conflicts resolved, compute the hash key again.\n    hashKey = createHashKey(prim, accessorIndices);\n    // Commit the primitive and its accessors to the hash key.\n    includedHashKeys.add(hashKey);\n    primToHashKey.set(prim, hashKey);\n    includedAccessors.set(prim.getIndices(), hashKey);\n    for (const attribute of prim.listAttributes()) {\n      includedAccessors.set(attribute, hashKey);\n    }\n  }\n  // For each compressed Accessor, ensure that it isn't used except by a Primitive.\n  for (const accessor of Array.from(includedAccessors.keys())) {\n    const parentTypes = new Set(accessor.listParents().map(prop => prop.propertyType));\n    if (parentTypes.size !== 2 || !parentTypes.has(PropertyType.PRIMITIVE) || !parentTypes.has(PropertyType.ROOT)) {\n      throw new Error(`[${KHR_DRACO_MESH_COMPRESSION}] Compressed accessors must only be used as indices or vertex attributes.`);\n    }\n  }\n  // For each compressed Primitive, ensure that Accessors are mapped only to the same hash key.\n  for (const prim of Array.from(included)) {\n    const hashKey = primToHashKey.get(prim);\n    const indices = prim.getIndices(); // Condition for 'included' list.\n    if (includedAccessors.get(indices) !== hashKey || prim.listAttributes().some(attr => includedAccessors.get(attr) !== hashKey)) {\n      throw new Error(`[${KHR_DRACO_MESH_COMPRESSION}] Draco primitives must share all, or no, accessors.`);\n    }\n  }\n  // For each excluded Primitive, ensure that no Accessors are compressed.\n  for (const prim of Array.from(excluded)) {\n    const indices = prim.getIndices(); // Condition for 'included' list.\n    if (includedAccessors.has(indices) || prim.listAttributes().some(attr => includedAccessors.has(attr))) {\n      throw new Error(`[${KHR_DRACO_MESH_COMPRESSION}] Accessor cannot be shared by compressed and uncompressed primitives.`);\n    }\n  }\n  return primToHashKey;\n}\nfunction createHashKey(prim, indexMap) {\n  const hashElements = [];\n  const indices = prim.getIndices(); // Condition for 'included' list.\n  hashElements.push(indexMap.get(indices));\n  for (const attribute of prim.listAttributes()) {\n    hashElements.push(indexMap.get(attribute));\n  }\n  return hashElements.sort().join('|');\n}\n\n/**\n * Defines a light attached to a {@link Node}. See {@link KHRLightsPunctual}.\n */\nclass Light extends ExtensionProperty {\n  /**********************************************************************************************\n   * INSTANCE.\n   */\n  init() {\n    this.extensionName = KHR_LIGHTS_PUNCTUAL;\n    this.propertyType = 'Light';\n    this.parentTypes = [PropertyType.NODE];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      color: [1, 1, 1],\n      intensity: 1,\n      type: Light.Type.POINT,\n      range: null,\n      innerConeAngle: 0,\n      outerConeAngle: Math.PI / 4\n    });\n  }\n  /**********************************************************************************************\n   * COLOR.\n   */\n  /** Light color; Linear-sRGB components. */\n  getColor() {\n    return this.get('color');\n  }\n  /** Light color; Linear-sRGB components. */\n  setColor(color) {\n    return this.set('color', color);\n  }\n  /**********************************************************************************************\n   * INTENSITY.\n   */\n  /**\n   * Brightness of light. Units depend on the type of light: point and spot lights use luminous\n   * intensity in candela (lm/sr) while directional lights use illuminance in lux (lm/m2).\n   */\n  getIntensity() {\n    return this.get('intensity');\n  }\n  /**\n   * Brightness of light. Units depend on the type of light: point and spot lights use luminous\n   * intensity in candela (lm/sr) while directional lights use illuminance in lux (lm/m2).\n   */\n  setIntensity(intensity) {\n    return this.set('intensity', intensity);\n  }\n  /**********************************************************************************************\n   * TYPE.\n   */\n  /** Type. */\n  getType() {\n    return this.get('type');\n  }\n  /** Type. */\n  setType(type) {\n    return this.set('type', type);\n  }\n  /**********************************************************************************************\n   * RANGE.\n   */\n  /**\n   * Hint defining a distance cutoff at which the light's intensity may be considered to have\n   * reached zero. Supported only for point and spot lights. Must be > 0. When undefined, range\n   * is assumed to be infinite.\n   */\n  getRange() {\n    return this.get('range');\n  }\n  /**\n   * Hint defining a distance cutoff at which the light's intensity may be considered to have\n   * reached zero. Supported only for point and spot lights. Must be > 0. When undefined, range\n   * is assumed to be infinite.\n   */\n  setRange(range) {\n    return this.set('range', range);\n  }\n  /**********************************************************************************************\n   * SPOT LIGHT PROPERTIES\n   */\n  /**\n   * Angle, in radians, from centre of spotlight where falloff begins. Must be >= 0 and\n   * < outerConeAngle.\n   */\n  getInnerConeAngle() {\n    return this.get('innerConeAngle');\n  }\n  /**\n   * Angle, in radians, from centre of spotlight where falloff begins. Must be >= 0 and\n   * < outerConeAngle.\n   */\n  setInnerConeAngle(angle) {\n    return this.set('innerConeAngle', angle);\n  }\n  /**\n   * Angle, in radians, from centre of spotlight where falloff ends. Must be > innerConeAngle and\n   * <= PI / 2.0.\n   */\n  getOuterConeAngle() {\n    return this.get('outerConeAngle');\n  }\n  /**\n   * Angle, in radians, from centre of spotlight where falloff ends. Must be > innerConeAngle and\n   * <= PI / 2.0.\n   */\n  setOuterConeAngle(angle) {\n    return this.set('outerConeAngle', angle);\n  }\n}\nLight.EXTENSION_NAME = KHR_LIGHTS_PUNCTUAL;\n/**********************************************************************************************\n * CONSTANTS.\n */\nLight.Type = {\n  POINT: 'point',\n  SPOT: 'spot',\n  DIRECTIONAL: 'directional'\n};\n\n/**\n * [`KHR_lights_punctual`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_lights_punctual/) defines three \"punctual\" light types: directional, point and\n * spot.\n *\n * Punctual lights are parameterized, infinitely small points that emit light in\n * well-defined directions and intensities. Lights are referenced by nodes and inherit the transform\n * of that node.\n *\n * Properties:\n * - {@link Light}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRLightsPunctual, Light, LightType } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const lightsExtension = document.createExtension(KHRLightsPunctual);\n *\n * // Create a Light property.\n * const light = lightsExtension.createLight()\n *\t.setType(LightType.POINT)\n *\t.setIntensity(2.0)\n *\t.setColor([1.0, 0.0, 0.0]);\n *\n * // Attach the property to a Material.\n * node.setExtension('KHR_lights_punctual', light);\n * ```\n */\nclass KHRLightsPunctual extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_LIGHTS_PUNCTUAL;\n  }\n  /** Creates a new punctual Light property for use on a {@link Node}. */\n  createLight(name = '') {\n    return new Light(this.document.getGraph(), name);\n  }\n  /** @hidden */\n  read(context) {\n    const jsonDoc = context.jsonDoc;\n    if (!jsonDoc.json.extensions || !jsonDoc.json.extensions[KHR_LIGHTS_PUNCTUAL]) return this;\n    const rootDef = jsonDoc.json.extensions[KHR_LIGHTS_PUNCTUAL];\n    const lightDefs = rootDef.lights || [];\n    const lights = lightDefs.map(lightDef => {\n      var _lightDef$spot, _lightDef$spot2;\n      const light = this.createLight().setName(lightDef.name || '').setType(lightDef.type);\n      if (lightDef.color !== undefined) light.setColor(lightDef.color);\n      if (lightDef.intensity !== undefined) light.setIntensity(lightDef.intensity);\n      if (lightDef.range !== undefined) light.setRange(lightDef.range);\n      if (((_lightDef$spot = lightDef.spot) == null ? void 0 : _lightDef$spot.innerConeAngle) !== undefined) {\n        light.setInnerConeAngle(lightDef.spot.innerConeAngle);\n      }\n      if (((_lightDef$spot2 = lightDef.spot) == null ? void 0 : _lightDef$spot2.outerConeAngle) !== undefined) {\n        light.setOuterConeAngle(lightDef.spot.outerConeAngle);\n      }\n      return light;\n    });\n    jsonDoc.json.nodes.forEach((nodeDef, nodeIndex) => {\n      if (!nodeDef.extensions || !nodeDef.extensions[KHR_LIGHTS_PUNCTUAL]) return;\n      const lightNodeDef = nodeDef.extensions[KHR_LIGHTS_PUNCTUAL];\n      context.nodes[nodeIndex].setExtension(KHR_LIGHTS_PUNCTUAL, lights[lightNodeDef.light]);\n    });\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const jsonDoc = context.jsonDoc;\n    if (this.properties.size === 0) return this;\n    const lightDefs = [];\n    const lightIndexMap = new Map();\n    for (const property of this.properties) {\n      const light = property;\n      const lightDef = {\n        type: light.getType()\n      };\n      if (!MathUtils.eq(light.getColor(), [1, 1, 1])) lightDef.color = light.getColor();\n      if (light.getIntensity() !== 1) lightDef.intensity = light.getIntensity();\n      if (light.getRange() != null) lightDef.range = light.getRange();\n      if (light.getName()) lightDef.name = light.getName();\n      if (light.getType() === Light.Type.SPOT) {\n        lightDef.spot = {\n          innerConeAngle: light.getInnerConeAngle(),\n          outerConeAngle: light.getOuterConeAngle()\n        };\n      }\n      lightDefs.push(lightDef);\n      lightIndexMap.set(light, lightDefs.length - 1);\n    }\n    this.document.getRoot().listNodes().forEach(node => {\n      const light = node.getExtension(KHR_LIGHTS_PUNCTUAL);\n      if (light) {\n        const nodeIndex = context.nodeIndexMap.get(node);\n        const nodeDef = jsonDoc.json.nodes[nodeIndex];\n        nodeDef.extensions = nodeDef.extensions || {};\n        nodeDef.extensions[KHR_LIGHTS_PUNCTUAL] = {\n          light: lightIndexMap.get(light)\n        };\n      }\n    });\n    jsonDoc.json.extensions = jsonDoc.json.extensions || {};\n    jsonDoc.json.extensions[KHR_LIGHTS_PUNCTUAL] = {\n      lights: lightDefs\n    };\n    return this;\n  }\n}\nKHRLightsPunctual.EXTENSION_NAME = KHR_LIGHTS_PUNCTUAL;\n\nconst {\n  R: R$7,\n  G: G$7,\n  B: B$5\n} = TextureChannel;\n/**\n * Defines anisotropy (directionally-dependent reflections) on a PBR {@link Material}. See\n * {@link KHRMaterialsAnisotropy}.\n */\nclass Anisotropy extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_ANISOTROPY;\n    this.propertyType = 'Anisotropy';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      anisotropyStrength: 0.0,\n      anisotropyRotation: 0.0,\n      anisotropyTexture: null,\n      anisotropyTextureInfo: new TextureInfo(this.graph, 'anisotropyTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Anisotropy strength.\n   */\n  /** Anisotropy strength. */\n  getAnisotropyStrength() {\n    return this.get('anisotropyStrength');\n  }\n  /** Anisotropy strength. */\n  setAnisotropyStrength(strength) {\n    return this.set('anisotropyStrength', strength);\n  }\n  /**********************************************************************************************\n   * Anisotropy rotation.\n   */\n  /** Anisotropy rotation; linear multiplier. */\n  getAnisotropyRotation() {\n    return this.get('anisotropyRotation');\n  }\n  /** Anisotropy rotation; linear multiplier. */\n  setAnisotropyRotation(rotation) {\n    return this.set('anisotropyRotation', rotation);\n  }\n  /**********************************************************************************************\n   * Anisotropy texture.\n   */\n  /**\n   * Anisotropy texture. Red and green channels represent the anisotropy\n   * direction in [-1, 1] tangent, bitangent space, to be rotated by\n   * anisotropyRotation. The blue channel contains strength as [0, 1] to be\n   * multiplied by anisotropyStrength.\n   */\n  getAnisotropyTexture() {\n    return this.getRef('anisotropyTexture');\n  }\n  /**\n   * Settings affecting the material's use of its anisotropy texture. If no\n   * texture is attached, {@link TextureInfo} is `null`.\n   */\n  getAnisotropyTextureInfo() {\n    return this.getRef('anisotropyTexture') ? this.getRef('anisotropyTextureInfo') : null;\n  }\n  /** Anisotropy texture. See {@link Anisotropy.getAnisotropyTexture getAnisotropyTexture}. */\n  setAnisotropyTexture(texture) {\n    return this.setRef('anisotropyTexture', texture, {\n      channels: R$7 | G$7 | B$5\n    });\n  }\n}\nAnisotropy.EXTENSION_NAME = KHR_MATERIALS_ANISOTROPY;\n\n/**\n * [`KHR_materials_anisotropy`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_anisotropy/)\n * defines anisotropy (directionally-dependent reflections) on a PBR material.\n *\n * ![Illustration](/media/extensions/khr-materials-anisotropy.jpg)\n *\n * > _**Figure:** Effect of each color channel in the anisotropyTexture. Left\n * > to right: the full anisotropy texture, filling the red channel with black,\n * > filling the green channel with black, filling the blue channel with black.\n * > Source: [Khronos Group & Wayfair](https://github.com/KhronosGroup/glTF-Sample-Assets/tree/main/Models/AnisotropyBarnLamp)._\n *\n * This extension defines the anisotropic property of a material as observable with brushed metals\n * for instance. An asymmetric specular lobe model is introduced to allow for such phenomena. The\n * visually distinct feature of that lobe is the elongated appearance of the specular reflection.\n * For a single punctual light source, the specular reflection will eventually degenerate into a\n * zero width line in the limit, that is where the material is fully anisotropic, as opposed to be\n * fully isotropic in which case the specular reflection is radially symmetric.\n *\n * Properties:\n * - {@link Anisotropy}\n *\n * ### Example\n *\n * The `KHRMaterialsAnisotropy` class provides a single {@link ExtensionProperty} type, `Anisotropy`,\n * which may be attached to any {@link Material} instance. For example:\n *\n * ```typescript\n * import { KHRMaterialsAnisotropy, Anisotropy } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const anisotropyExtension = document.createExtension(KHRMaterialsAnisotropy);\n *\n * // Create an Anisotropy property.\n * const anisotropy = anisotropyExtension.createAnisotropy()\n * \t.setAnisotropyStrength(1.0)\n * \t.setAnisotropyRotation(Math.PI / 4);\n *\n * // Attach the property to a Material.\n * material.setExtension('KHR_materials_anisotropy', anisotropy);\n * ```\n */\nclass KHRMaterialsAnisotropy extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_ANISOTROPY;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Anisotropy property for use on a {@link Material}. */\n  createAnisotropy() {\n    return new Anisotropy(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_ANISOTROPY]) {\n        const anisotropy = this.createAnisotropy();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_ANISOTROPY, anisotropy);\n        const anisotropyDef = materialDef.extensions[KHR_MATERIALS_ANISOTROPY];\n        // Factors.\n        if (anisotropyDef.anisotropyStrength !== undefined) {\n          anisotropy.setAnisotropyStrength(anisotropyDef.anisotropyStrength);\n        }\n        if (anisotropyDef.anisotropyRotation !== undefined) {\n          anisotropy.setAnisotropyRotation(anisotropyDef.anisotropyRotation);\n        }\n        // Textures.\n        if (anisotropyDef.anisotropyTexture !== undefined) {\n          const textureInfoDef = anisotropyDef.anisotropyTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          anisotropy.setAnisotropyTexture(texture);\n          context.setTextureInfo(anisotropy.getAnisotropyTextureInfo(), textureInfoDef);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const anisotropy = material.getExtension(KHR_MATERIALS_ANISOTROPY);\n      if (anisotropy) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        const anisotropyDef = materialDef.extensions[KHR_MATERIALS_ANISOTROPY] = {};\n        if (anisotropy.getAnisotropyStrength() > 0) {\n          anisotropyDef.anisotropyStrength = anisotropy.getAnisotropyStrength();\n        }\n        if (anisotropy.getAnisotropyRotation() !== 0) {\n          anisotropyDef.anisotropyRotation = anisotropy.getAnisotropyRotation();\n        }\n        // Textures.\n        if (anisotropy.getAnisotropyTexture()) {\n          const texture = anisotropy.getAnisotropyTexture();\n          const textureInfo = anisotropy.getAnisotropyTextureInfo();\n          anisotropyDef.anisotropyTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsAnisotropy.EXTENSION_NAME = KHR_MATERIALS_ANISOTROPY;\n\nconst {\n  R: R$6,\n  G: G$6,\n  B: B$4\n} = TextureChannel;\n/**\n * Defines clear coat for a PBR material. See {@link KHRMaterialsClearcoat}.\n */\nclass Clearcoat extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_CLEARCOAT;\n    this.propertyType = 'Clearcoat';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      clearcoatFactor: 0,\n      clearcoatTexture: null,\n      clearcoatTextureInfo: new TextureInfo(this.graph, 'clearcoatTextureInfo'),\n      clearcoatRoughnessFactor: 0,\n      clearcoatRoughnessTexture: null,\n      clearcoatRoughnessTextureInfo: new TextureInfo(this.graph, 'clearcoatRoughnessTextureInfo'),\n      clearcoatNormalScale: 1,\n      clearcoatNormalTexture: null,\n      clearcoatNormalTextureInfo: new TextureInfo(this.graph, 'clearcoatNormalTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Clearcoat.\n   */\n  /** Clearcoat; linear multiplier. See {@link Clearcoat.getClearcoatTexture getClearcoatTexture}. */\n  getClearcoatFactor() {\n    return this.get('clearcoatFactor');\n  }\n  /** Clearcoat; linear multiplier. See {@link Clearcoat.getClearcoatTexture getClearcoatTexture}. */\n  setClearcoatFactor(factor) {\n    return this.set('clearcoatFactor', factor);\n  }\n  /**\n   * Clearcoat texture; linear multiplier. The `r` channel of this texture specifies an amount\n   * [0-1] of coating over the surface of the material, which may have its own roughness and\n   * normal map properties.\n   */\n  getClearcoatTexture() {\n    return this.getRef('clearcoatTexture');\n  }\n  /**\n   * Settings affecting the material's use of its clearcoat texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getClearcoatTextureInfo() {\n    return this.getRef('clearcoatTexture') ? this.getRef('clearcoatTextureInfo') : null;\n  }\n  /** Sets clearcoat texture. See {@link Clearcoat.getClearcoatTexture getClearcoatTexture}. */\n  setClearcoatTexture(texture) {\n    return this.setRef('clearcoatTexture', texture, {\n      channels: R$6\n    });\n  }\n  /**********************************************************************************************\n   * Clearcoat roughness.\n   */\n  /**\n   * Clearcoat roughness; linear multiplier.\n   * See {@link Clearcoat.getClearcoatRoughnessTexture getClearcoatRoughnessTexture}.\n   */\n  getClearcoatRoughnessFactor() {\n    return this.get('clearcoatRoughnessFactor');\n  }\n  /**\n   * Clearcoat roughness; linear multiplier.\n   * See {@link Clearcoat.getClearcoatRoughnessTexture getClearcoatRoughnessTexture}.\n   */\n  setClearcoatRoughnessFactor(factor) {\n    return this.set('clearcoatRoughnessFactor', factor);\n  }\n  /**\n   * Clearcoat roughness texture; linear multiplier. The `g` channel of this texture specifies\n   * roughness, independent of the base layer's roughness.\n   */\n  getClearcoatRoughnessTexture() {\n    return this.getRef('clearcoatRoughnessTexture');\n  }\n  /**\n   * Settings affecting the material's use of its clearcoat roughness texture. If no texture is\n   * attached, {@link TextureInfo} is `null`.\n   */\n  getClearcoatRoughnessTextureInfo() {\n    return this.getRef('clearcoatRoughnessTexture') ? this.getRef('clearcoatRoughnessTextureInfo') : null;\n  }\n  /**\n   * Sets clearcoat roughness texture.\n   * See {@link Clearcoat.getClearcoatRoughnessTexture getClearcoatRoughnessTexture}.\n   */\n  setClearcoatRoughnessTexture(texture) {\n    return this.setRef('clearcoatRoughnessTexture', texture, {\n      channels: G$6\n    });\n  }\n  /**********************************************************************************************\n   * Clearcoat normals.\n   */\n  /** Clearcoat normal scale. See {@link Clearcoat.getClearcoatNormalTexture getClearcoatNormalTexture}. */\n  getClearcoatNormalScale() {\n    return this.get('clearcoatNormalScale');\n  }\n  /** Clearcoat normal scale. See {@link Clearcoat.getClearcoatNormalTexture getClearcoatNormalTexture}. */\n  setClearcoatNormalScale(scale) {\n    return this.set('clearcoatNormalScale', scale);\n  }\n  /**\n   * Clearcoat normal map. Independent of the material base layer normal map.\n   */\n  getClearcoatNormalTexture() {\n    return this.getRef('clearcoatNormalTexture');\n  }\n  /**\n   * Settings affecting the material's use of its clearcoat normal texture. If no texture is\n   * attached, {@link TextureInfo} is `null`.\n   */\n  getClearcoatNormalTextureInfo() {\n    return this.getRef('clearcoatNormalTexture') ? this.getRef('clearcoatNormalTextureInfo') : null;\n  }\n  /** Sets clearcoat normal texture. See {@link Clearcoat.getClearcoatNormalTexture getClearcoatNormalTexture}. */\n  setClearcoatNormalTexture(texture) {\n    return this.setRef('clearcoatNormalTexture', texture, {\n      channels: R$6 | G$6 | B$4\n    });\n  }\n}\nClearcoat.EXTENSION_NAME = KHR_MATERIALS_CLEARCOAT;\n\n/**\n * [KHR_materials_clearcoat](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_clearcoat/)\n * defines a clear coating on a glTF PBR material.\n *\n * ![Illustration](/media/extensions/khr-materials-clearcoat.png)\n *\n * > _**Figure:** Comparison of a carbon-fiber material without clearcoat (left) and with clearcoat\n * > (right). Source: [Filament](https://google.github.io/filament/Materials.html)._\n *\n * A clear coat is a common technique used in Physically-Based\n * Rendering for a protective layer applied to a base material.\n * Commonly used to represent car paint, carbon fiber, or thin lacquers.\n *\n * Properties:\n * - {@link Clearcoat}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRMaterialsClearcoat, Clearcoat } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const clearcoatExtension = document.createExtension(KHRMaterialsClearcoat);\n *\n * // Create Clearcoat property.\n * const clearcoat = clearcoatExtension.createClearcoat()\n *\t.setClearcoatFactor(1.0);\n *\n * // Assign to a Material.\n * material.setExtension('KHR_materials_clearcoat', clearcoat);\n * ```\n */\nclass KHRMaterialsClearcoat extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_CLEARCOAT;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Clearcoat property for use on a {@link Material}. */\n  createClearcoat() {\n    return new Clearcoat(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_CLEARCOAT]) {\n        const clearcoat = this.createClearcoat();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_CLEARCOAT, clearcoat);\n        const clearcoatDef = materialDef.extensions[KHR_MATERIALS_CLEARCOAT];\n        // Factors.\n        if (clearcoatDef.clearcoatFactor !== undefined) {\n          clearcoat.setClearcoatFactor(clearcoatDef.clearcoatFactor);\n        }\n        if (clearcoatDef.clearcoatRoughnessFactor !== undefined) {\n          clearcoat.setClearcoatRoughnessFactor(clearcoatDef.clearcoatRoughnessFactor);\n        }\n        // Textures.\n        if (clearcoatDef.clearcoatTexture !== undefined) {\n          const textureInfoDef = clearcoatDef.clearcoatTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          clearcoat.setClearcoatTexture(texture);\n          context.setTextureInfo(clearcoat.getClearcoatTextureInfo(), textureInfoDef);\n        }\n        if (clearcoatDef.clearcoatRoughnessTexture !== undefined) {\n          const textureInfoDef = clearcoatDef.clearcoatRoughnessTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          clearcoat.setClearcoatRoughnessTexture(texture);\n          context.setTextureInfo(clearcoat.getClearcoatRoughnessTextureInfo(), textureInfoDef);\n        }\n        if (clearcoatDef.clearcoatNormalTexture !== undefined) {\n          const textureInfoDef = clearcoatDef.clearcoatNormalTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          clearcoat.setClearcoatNormalTexture(texture);\n          context.setTextureInfo(clearcoat.getClearcoatNormalTextureInfo(), textureInfoDef);\n          if (textureInfoDef.scale !== undefined) {\n            clearcoat.setClearcoatNormalScale(textureInfoDef.scale);\n          }\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const clearcoat = material.getExtension(KHR_MATERIALS_CLEARCOAT);\n      if (clearcoat) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        const clearcoatDef = materialDef.extensions[KHR_MATERIALS_CLEARCOAT] = {\n          clearcoatFactor: clearcoat.getClearcoatFactor(),\n          clearcoatRoughnessFactor: clearcoat.getClearcoatRoughnessFactor()\n        };\n        // Textures.\n        if (clearcoat.getClearcoatTexture()) {\n          const texture = clearcoat.getClearcoatTexture();\n          const textureInfo = clearcoat.getClearcoatTextureInfo();\n          clearcoatDef.clearcoatTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n        if (clearcoat.getClearcoatRoughnessTexture()) {\n          const texture = clearcoat.getClearcoatRoughnessTexture();\n          const textureInfo = clearcoat.getClearcoatRoughnessTextureInfo();\n          clearcoatDef.clearcoatRoughnessTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n        if (clearcoat.getClearcoatNormalTexture()) {\n          const texture = clearcoat.getClearcoatNormalTexture();\n          const textureInfo = clearcoat.getClearcoatNormalTextureInfo();\n          clearcoatDef.clearcoatNormalTexture = context.createTextureInfoDef(texture, textureInfo);\n          if (clearcoat.getClearcoatNormalScale() !== 1) {\n            clearcoatDef.clearcoatNormalTexture.scale = clearcoat.getClearcoatNormalScale();\n          }\n        }\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsClearcoat.EXTENSION_NAME = KHR_MATERIALS_CLEARCOAT;\n\nconst {\n  R: R$5,\n  G: G$5,\n  B: B$3,\n  A: A$3\n} = TextureChannel;\n/**\n * Defines diffuse transmission on a PBR {@link Material}. See {@link KHRMaterialsDiffuseTransmission}.\n *\n * @experimental KHR_materials_diffuse_transmission is not yet ratified by the Khronos Group.\n */\nclass DiffuseTransmission extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_DIFFUSE_TRANSMISSION;\n    this.propertyType = 'DiffuseTransmission';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      diffuseTransmissionFactor: 0.0,\n      diffuseTransmissionTexture: null,\n      diffuseTransmissionTextureInfo: new TextureInfo(this.graph, 'diffuseTransmissionTextureInfo'),\n      diffuseTransmissionColorFactor: [1.0, 1.0, 1.0],\n      diffuseTransmissionColorTexture: null,\n      diffuseTransmissionColorTextureInfo: new TextureInfo(this.graph, 'diffuseTransmissionColorTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Diffuse transmission.\n   */\n  /**\n   * Percentage of reflected, non-specularly reflected light that is transmitted through the\n   * surface via the Lambertian diffuse transmission, i.e., the strength of the diffuse\n   * transmission effect.\n   */\n  getDiffuseTransmissionFactor() {\n    return this.get('diffuseTransmissionFactor');\n  }\n  /**\n   * Percentage of reflected, non-specularly reflected light that is transmitted through the\n   * surface via the Lambertian diffuse transmission, i.e., the strength of the diffuse\n   * transmission effect.\n   */\n  setDiffuseTransmissionFactor(factor) {\n    return this.set('diffuseTransmissionFactor', factor);\n  }\n  /**\n   * Texture that defines the strength of the diffuse transmission effect, stored in the alpha (A)\n   * channel. Will be multiplied by the diffuseTransmissionFactor.\n   */\n  getDiffuseTransmissionTexture() {\n    return this.getRef('diffuseTransmissionTexture');\n  }\n  /**\n   * Settings affecting the material's use of its diffuse transmission texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getDiffuseTransmissionTextureInfo() {\n    return this.getRef('diffuseTransmissionTexture') ? this.getRef('diffuseTransmissionTextureInfo') : null;\n  }\n  /**\n   * Texture that defines the strength of the diffuse transmission effect, stored in the alpha (A)\n   * channel. Will be multiplied by the diffuseTransmissionFactor.\n   */\n  setDiffuseTransmissionTexture(texture) {\n    return this.setRef('diffuseTransmissionTexture', texture, {\n      channels: A$3\n    });\n  }\n  /**********************************************************************************************\n   * Diffuse transmission color.\n   */\n  /** Color of the transmitted light; Linear-sRGB components. */\n  getDiffuseTransmissionColorFactor() {\n    return this.get('diffuseTransmissionColorFactor');\n  }\n  /** Color of the transmitted light; Linear-sRGB components. */\n  setDiffuseTransmissionColorFactor(factor) {\n    return this.set('diffuseTransmissionColorFactor', factor);\n  }\n  /**\n   * Texture that defines the color of the transmitted light, stored in the RGB channels and\n   * encoded in sRGB. This texture will be multiplied by diffuseTransmissionColorFactor.\n   */\n  getDiffuseTransmissionColorTexture() {\n    return this.getRef('diffuseTransmissionColorTexture');\n  }\n  /**\n   * Settings affecting the material's use of its diffuse transmission color texture. If no\n   * texture is attached, {@link TextureInfo} is `null`.\n   */\n  getDiffuseTransmissionColorTextureInfo() {\n    return this.getRef('diffuseTransmissionColorTexture') ? this.getRef('diffuseTransmissionColorTextureInfo') : null;\n  }\n  /**\n   * Texture that defines the color of the transmitted light, stored in the RGB channels and\n   * encoded in sRGB. This texture will be multiplied by diffuseTransmissionColorFactor.\n   */\n  setDiffuseTransmissionColorTexture(texture) {\n    return this.setRef('diffuseTransmissionColorTexture', texture, {\n      channels: R$5 | G$5 | B$3\n    });\n  }\n}\nDiffuseTransmission.EXTENSION_NAME = KHR_MATERIALS_DIFFUSE_TRANSMISSION;\n\n/**\n * [KHR_materials_diffuse_transmission](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_diffuse_transmission/)\n * defines diffuse transmission on a glTF PBR material.\n *\n * ![Illustration](/media/extensions/khr-materials-diffuse-transmission.png)\n *\n * > _**Figure:** Sphere using `KHR_materials_diffuse_transmission` with varying roughness (0.0, 0.2, 0.4).\n * > Source: Khronos Group._\n *\n * Adds a Lambertian diffuse transmission BSDF to the metallic-roughness\n * material. Thin, dielectric objects like leaves or paper diffusely transmit\n * incoming light to the opposite side of the surface. For optically thick\n * media (volumes) with short scattering distances and therefore dense\n * scattering behavior, a diffuse transmission lobe is a phenomenological\n * plausible and cheap approximation.\n *\n * Properties:\n * - {@link DiffuseTransmission}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRMaterialsDiffuseTransmission, DiffuseTransmission } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const diffuseTransmissionExtension = document.createExtension(KHRMaterialsDiffuseTransmission);\n *\n * // Create DiffuseTransmission property.\n * const diffuseTransmission = diffuseTransmission.createDiffuseTransmission()\n *\t.setDiffuseTransmissionFactor(1.0);\n *\n * // Assign to a Material.\n * material.setExtension('KHR_materials_diffuse_transmission', diffuseTransmission);\n * ```\n *\n * @experimental KHR_materials_diffuse_transmission is not yet ratified by the Khronos Group.\n */\nclass KHRMaterialsDiffuseTransmission extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_DIFFUSE_TRANSMISSION;\n  }\n  /** Creates a new DiffuseTransmission property for use on a {@link Material}. */\n  createDiffuseTransmission() {\n    return new DiffuseTransmission(this.document.getGraph());\n  }\n  /** @hidden */\n  read(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_DIFFUSE_TRANSMISSION]) {\n        const transmission = this.createDiffuseTransmission();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_DIFFUSE_TRANSMISSION, transmission);\n        const transmissionDef = materialDef.extensions[KHR_MATERIALS_DIFFUSE_TRANSMISSION];\n        // Factors.\n        if (transmissionDef.diffuseTransmissionFactor !== undefined) {\n          transmission.setDiffuseTransmissionFactor(transmissionDef.diffuseTransmissionFactor);\n        }\n        if (transmissionDef.diffuseTransmissionColorFactor !== undefined) {\n          transmission.setDiffuseTransmissionColorFactor(transmissionDef.diffuseTransmissionColorFactor);\n        }\n        // Textures.\n        if (transmissionDef.diffuseTransmissionTexture !== undefined) {\n          const textureInfoDef = transmissionDef.diffuseTransmissionTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          transmission.setDiffuseTransmissionTexture(texture);\n          context.setTextureInfo(transmission.getDiffuseTransmissionTextureInfo(), textureInfoDef);\n        }\n        if (transmissionDef.diffuseTransmissionColorTexture !== undefined) {\n          const textureInfoDef = transmissionDef.diffuseTransmissionColorTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          transmission.setDiffuseTransmissionColorTexture(texture);\n          context.setTextureInfo(transmission.getDiffuseTransmissionColorTextureInfo(), textureInfoDef);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const jsonDoc = context.jsonDoc;\n    for (const material of this.document.getRoot().listMaterials()) {\n      const transmission = material.getExtension(KHR_MATERIALS_DIFFUSE_TRANSMISSION);\n      if (!transmission) continue;\n      const materialIndex = context.materialIndexMap.get(material);\n      const materialDef = jsonDoc.json.materials[materialIndex];\n      materialDef.extensions = materialDef.extensions || {};\n      // Factors.\n      const transmissionDef = materialDef.extensions[KHR_MATERIALS_DIFFUSE_TRANSMISSION] = {\n        diffuseTransmissionFactor: transmission.getDiffuseTransmissionFactor(),\n        diffuseTransmissionColorFactor: transmission.getDiffuseTransmissionColorFactor()\n      };\n      // Textures.\n      if (transmission.getDiffuseTransmissionTexture()) {\n        const texture = transmission.getDiffuseTransmissionTexture();\n        const textureInfo = transmission.getDiffuseTransmissionTextureInfo();\n        transmissionDef.diffuseTransmissionTexture = context.createTextureInfoDef(texture, textureInfo);\n      }\n      if (transmission.getDiffuseTransmissionColorTexture()) {\n        const texture = transmission.getDiffuseTransmissionColorTexture();\n        const textureInfo = transmission.getDiffuseTransmissionColorTextureInfo();\n        transmissionDef.diffuseTransmissionColorTexture = context.createTextureInfoDef(texture, textureInfo);\n      }\n    }\n    return this;\n  }\n}\nKHRMaterialsDiffuseTransmission.EXTENSION_NAME = KHR_MATERIALS_DIFFUSE_TRANSMISSION;\n\n/**\n * Defines dispersion for a PBR {@link Material}. See {@link KHRMaterialsDispersion}.\n */\nclass Dispersion extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_DISPERSION;\n    this.propertyType = 'Dispersion';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      dispersion: 0\n    });\n  }\n  /**********************************************************************************************\n   * Dispersion.\n   */\n  /** Dispersion. */\n  getDispersion() {\n    return this.get('dispersion');\n  }\n  /** Dispersion. */\n  setDispersion(dispersion) {\n    return this.set('dispersion', dispersion);\n  }\n}\nDispersion.EXTENSION_NAME = KHR_MATERIALS_DISPERSION;\n\n/**\n * [KHR_materials_dispersion](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_dispersion/)\n * defines dispersion on a glTF PBR material.\n *\n * ![illustration](/media/extensions/khr-materials-dispersion.jpg)\n *\n * > _**Figure:** Prisms demonstrating volumetric refraction and dispersion, for varying\n * > values of dispersion and IOR. Source: Khronos Group, rendered in Adobe Stager._\n *\n * Dispersion enables configuring the strength of the angular separation of colors (chromatic\n * aberration) transmitting through a relatively clear volume.  It is an enhancement to the\n * default `KHR_materials_volume` transmission model which assumes no dispersion.\n *\n * Properties:\n * - {@link Dispersion}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRMaterialsDispersion, Dispersion } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const dispersionExtension = document.createExtension(KHRMaterialsDispersion);\n *\n * // Create Dispersion property.\n * const dispersion = dispersionExtension.createDispersion().setDispersion(1.0);\n *\n * // Assign to a Material.\n * material.setExtension('KHR_materials_dispersion', dispersion);\n * ```\n */\nclass KHRMaterialsDispersion extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_DISPERSION;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Dispersion property for use on a {@link Material}. */\n  createDispersion() {\n    return new Dispersion(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_DISPERSION]) {\n        const dispersion = this.createDispersion();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_DISPERSION, dispersion);\n        const dispersionDef = materialDef.extensions[KHR_MATERIALS_DISPERSION];\n        // Factors.\n        if (dispersionDef.dispersion !== undefined) {\n          dispersion.setDispersion(dispersionDef.dispersion);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const dispersion = material.getExtension(KHR_MATERIALS_DISPERSION);\n      if (dispersion) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        materialDef.extensions[KHR_MATERIALS_DISPERSION] = {\n          dispersion: dispersion.getDispersion()\n        };\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsDispersion.EXTENSION_NAME = KHR_MATERIALS_DISPERSION;\n\n/**\n * Defines emissive strength for a PBR {@link Material}, allowing high-dynamic-range\n * (HDR) emissive materials. See {@link KHRMaterialsEmissiveStrength}.\n */\nclass EmissiveStrength extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_EMISSIVE_STRENGTH;\n    this.propertyType = 'EmissiveStrength';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      emissiveStrength: 1.0\n    });\n  }\n  /**********************************************************************************************\n   * EmissiveStrength.\n   */\n  /** EmissiveStrength. */\n  getEmissiveStrength() {\n    return this.get('emissiveStrength');\n  }\n  /** EmissiveStrength. */\n  setEmissiveStrength(strength) {\n    return this.set('emissiveStrength', strength);\n  }\n}\nEmissiveStrength.EXTENSION_NAME = KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n/**\n * [KHR_materials_emissive_strength](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_emissive_strength/)\n * defines emissive strength and enables high-dynamic-range (HDR) emissive materials.\n *\n * ![Illustration](/media/extensions/khr-materials-emissive-strength.jpg)\n *\n * > _**Figure:** Cubes with emissive color #59BCF3 and emissive strength\n * > increasing from 1 to 256 nits, left to right. Rendered in [three.js](https://threejs.org/),\n * > with independent point lighting and a bloom effect.\n * > Source: [Don McCurdy](https://www.donmccurdy.com/2024/04/27/emission-and-bloom/)._\n *\n * The core glTF 2.0 material model includes {@link Material.setEmissiveFactor `emissiveFactor`}\n * and {@link Material.setEmissiveTexture `emissiveTexture`} to control the color and intensity\n * of the light being emitted by the material, clamped to the range [0.0, 1.0]. However, in\n * PBR environments with HDR reflections and lighting, stronger emission effects may be desirable.\n *\n * In this extension, a new {@link EmissiveStrength.setEmissiveStrength `emissiveStrength`} scalar\n * factor is supplied, which governs the upper limit of emissive strength per material and may be\n * given arbitrarily high values.\n *\n * For implementations where a physical light unit is needed, the units for the multiplicative\n * product of the emissive texture and factor are candela per square meter (cd / m2), sometimes\n * called _nits_. Many realtime rendering engines simplify this calculation by assuming that an\n * emissive factor of 1.0 results in a fully exposed pixel.\n *\n * Properties:\n * - {@link EmissiveStrength}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRMaterialsEmissiveStrength, EmissiveStrength } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const emissiveStrengthExtension = document.createExtension(KHRMaterialsEmissiveStrength);\n *\n * // Create EmissiveStrength property.\n * const emissiveStrength = emissiveStrengthExtension\n * \t.createEmissiveStrength().setEmissiveStrength(5.0);\n *\n * // Assign to a Material.\n * material.setExtension('KHR_materials_emissive_strength', emissiveStrength);\n * ```\n */\nclass KHRMaterialsEmissiveStrength extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_EMISSIVE_STRENGTH;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new EmissiveStrength property for use on a {@link Material}. */\n  createEmissiveStrength() {\n    return new EmissiveStrength(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_EMISSIVE_STRENGTH]) {\n        const emissiveStrength = this.createEmissiveStrength();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_EMISSIVE_STRENGTH, emissiveStrength);\n        const emissiveStrengthDef = materialDef.extensions[KHR_MATERIALS_EMISSIVE_STRENGTH];\n        // Factors.\n        if (emissiveStrengthDef.emissiveStrength !== undefined) {\n          emissiveStrength.setEmissiveStrength(emissiveStrengthDef.emissiveStrength);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const emissiveStrength = material.getExtension(KHR_MATERIALS_EMISSIVE_STRENGTH);\n      if (emissiveStrength) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        materialDef.extensions[KHR_MATERIALS_EMISSIVE_STRENGTH] = {\n          emissiveStrength: emissiveStrength.getEmissiveStrength()\n        };\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsEmissiveStrength.EXTENSION_NAME = KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n/**\n * Defines index of refraction for a PBR {@link Material}. See {@link KHRMaterialsIOR}.\n */\nclass IOR extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_IOR;\n    this.propertyType = 'IOR';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      ior: 1.5\n    });\n  }\n  /**********************************************************************************************\n   * IOR.\n   */\n  /** IOR. */\n  getIOR() {\n    return this.get('ior');\n  }\n  /** IOR. */\n  setIOR(ior) {\n    return this.set('ior', ior);\n  }\n}\nIOR.EXTENSION_NAME = KHR_MATERIALS_IOR;\n\n/**\n * [KHR_materials_ior](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_ior/)\n * defines index of refraction on a glTF PBR material.\n *\n * The dielectric BRDF of the metallic-roughness material in glTF uses a fixed value of 1.5 for the\n * index of refraction. This is a good fit for many plastics and glass, but not for other materials\n * like water or asphalt, sapphire or diamond. `KHR_materials_ior` allows users to set the index of\n * refraction to a certain value.\n *\n * Properties:\n * - {@link IOR}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRMaterialsIOR, IOR } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const iorExtension = document.createExtension(KHRMaterialsIOR);\n *\n * // Create IOR property.\n * const ior = iorExtension.createIOR().setIOR(1.0);\n *\n * // Assign to a Material.\n * material.setExtension('KHR_materials_ior', ior);\n * ```\n */\nclass KHRMaterialsIOR extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_IOR;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new IOR property for use on a {@link Material}. */\n  createIOR() {\n    return new IOR(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_IOR]) {\n        const ior = this.createIOR();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_IOR, ior);\n        const iorDef = materialDef.extensions[KHR_MATERIALS_IOR];\n        // Factors.\n        if (iorDef.ior !== undefined) {\n          ior.setIOR(iorDef.ior);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const ior = material.getExtension(KHR_MATERIALS_IOR);\n      if (ior) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        materialDef.extensions[KHR_MATERIALS_IOR] = {\n          ior: ior.getIOR()\n        };\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsIOR.EXTENSION_NAME = KHR_MATERIALS_IOR;\n\nconst {\n  R: R$4,\n  G: G$4\n} = TextureChannel;\n/**\n * Defines iridescence (thin film interference) on a PBR {@link Material}. See {@link KHRMaterialsIridescence}.\n */\nclass Iridescence extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_IRIDESCENCE;\n    this.propertyType = 'Iridescence';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      iridescenceFactor: 0.0,\n      iridescenceTexture: null,\n      iridescenceTextureInfo: new TextureInfo(this.graph, 'iridescenceTextureInfo'),\n      iridescenceIOR: 1.3,\n      iridescenceThicknessMinimum: 100,\n      iridescenceThicknessMaximum: 400,\n      iridescenceThicknessTexture: null,\n      iridescenceThicknessTextureInfo: new TextureInfo(this.graph, 'iridescenceThicknessTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Iridescence.\n   */\n  /** Iridescence; linear multiplier. See {@link Iridescence.getIridescenceTexture getIridescenceTexture}. */\n  getIridescenceFactor() {\n    return this.get('iridescenceFactor');\n  }\n  /** Iridescence; linear multiplier. See {@link Iridescence.getIridescenceTexture getIridescenceTexture}. */\n  setIridescenceFactor(factor) {\n    return this.set('iridescenceFactor', factor);\n  }\n  /**\n   * Iridescence intensity.\n   *\n   * Only the red (R) channel is used for iridescence intensity, but this texture may optionally\n   * be packed with additional data in the other channels.\n   */\n  getIridescenceTexture() {\n    return this.getRef('iridescenceTexture');\n  }\n  /**\n   * Settings affecting the material's use of its iridescence texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getIridescenceTextureInfo() {\n    return this.getRef('iridescenceTexture') ? this.getRef('iridescenceTextureInfo') : null;\n  }\n  /** Iridescence intensity. See {@link Iridescence.getIridescenceTexture getIridescenceTexture}. */\n  setIridescenceTexture(texture) {\n    return this.setRef('iridescenceTexture', texture, {\n      channels: R$4\n    });\n  }\n  /**********************************************************************************************\n   * Iridescence IOR.\n   */\n  /** Index of refraction of the dielectric thin-film layer. */\n  getIridescenceIOR() {\n    return this.get('iridescenceIOR');\n  }\n  /** Index of refraction of the dielectric thin-film layer. */\n  setIridescenceIOR(ior) {\n    return this.set('iridescenceIOR', ior);\n  }\n  /**********************************************************************************************\n   * Iridescence thickness.\n   */\n  /** Minimum thickness of the thin-film layer, in nanometers (nm). */\n  getIridescenceThicknessMinimum() {\n    return this.get('iridescenceThicknessMinimum');\n  }\n  /** Minimum thickness of the thin-film layer, in nanometers (nm). */\n  setIridescenceThicknessMinimum(thickness) {\n    return this.set('iridescenceThicknessMinimum', thickness);\n  }\n  /** Maximum thickness of the thin-film layer, in nanometers (nm). */\n  getIridescenceThicknessMaximum() {\n    return this.get('iridescenceThicknessMaximum');\n  }\n  /** Maximum thickness of the thin-film layer, in nanometers (nm). */\n  setIridescenceThicknessMaximum(thickness) {\n    return this.set('iridescenceThicknessMaximum', thickness);\n  }\n  /**\n   * The green channel of this texture defines the thickness of the\n   * thin-film layer by blending between the minimum and maximum thickness.\n   */\n  getIridescenceThicknessTexture() {\n    return this.getRef('iridescenceThicknessTexture');\n  }\n  /**\n   * Settings affecting the material's use of its iridescence thickness texture.\n   * If no texture is attached, {@link TextureInfo} is `null`.\n   */\n  getIridescenceThicknessTextureInfo() {\n    return this.getRef('iridescenceThicknessTexture') ? this.getRef('iridescenceThicknessTextureInfo') : null;\n  }\n  /**\n   * Sets iridescence thickness texture.\n   * See {@link Iridescence.getIridescenceThicknessTexture getIridescenceThicknessTexture}.\n   */\n  setIridescenceThicknessTexture(texture) {\n    return this.setRef('iridescenceThicknessTexture', texture, {\n      channels: G$4\n    });\n  }\n}\nIridescence.EXTENSION_NAME = KHR_MATERIALS_IRIDESCENCE;\n\n/**\n * [`KHR_materials_iridescence`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_iridescence/)\n * defines iridescence (thin film interference) on a PBR material.\n *\n * ![Illustration](/media/extensions/khr-materials-iridescence.png)\n *\n * > _**Figure:** Varying levels of iridescence IOR values.\n * > Source: [Khronos Group](https://github.com/KhronosGroup/gltf/tree/main/extensions/2.0/Khronos/KHR_materials_iridescence)._\n *\n * Iridescence describes an effect where hue varies depending on the viewing\n * angle and illumination angle: A thin-film of a semi-transparent layer\n * results in inter-reflections and due to thin-film interference, certain\n * wavelengths get absorbed or amplified. Iridescence can be seen on soap\n * bubbles, oil films, or on the wings of many insects. With this extension,\n * thickness and index of refraction (IOR) of the thin-film can be specified,\n * enabling iridescent materials.\n *\n * Properties:\n * - {@link Iridescence}\n *\n * ### Example\n *\n * The `KHRMaterialsIridescence` class provides a single {@link ExtensionProperty} type, `Iridescence`,\n * which may be attached to any {@link Material} instance. For example:\n *\n * ```typescript\n * import { KHRMaterialsIridescence, Iridescence } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const iridescenceExtension = document.createExtension(KHRMaterialsIridescence);\n *\n * // Create an Iridescence property.\n * const iridescence = iridescenceExtension.createIridescence()\n * \t.setIridescenceFactor(1.0)\n * \t.setIridescenceIOR(1.8);\n *\n * // Attach the property to a Material.\n * material.setExtension('KHR_materials_iridescence', iridescence);\n * ```\n */\nclass KHRMaterialsIridescence extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_IRIDESCENCE;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Iridescence property for use on a {@link Material}. */\n  createIridescence() {\n    return new Iridescence(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_IRIDESCENCE]) {\n        const iridescence = this.createIridescence();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_IRIDESCENCE, iridescence);\n        const iridescenceDef = materialDef.extensions[KHR_MATERIALS_IRIDESCENCE];\n        // Factors.\n        if (iridescenceDef.iridescenceFactor !== undefined) {\n          iridescence.setIridescenceFactor(iridescenceDef.iridescenceFactor);\n        }\n        if (iridescenceDef.iridescenceIor !== undefined) {\n          iridescence.setIridescenceIOR(iridescenceDef.iridescenceIor);\n        }\n        if (iridescenceDef.iridescenceThicknessMinimum !== undefined) {\n          iridescence.setIridescenceThicknessMinimum(iridescenceDef.iridescenceThicknessMinimum);\n        }\n        if (iridescenceDef.iridescenceThicknessMaximum !== undefined) {\n          iridescence.setIridescenceThicknessMaximum(iridescenceDef.iridescenceThicknessMaximum);\n        }\n        // Textures.\n        if (iridescenceDef.iridescenceTexture !== undefined) {\n          const textureInfoDef = iridescenceDef.iridescenceTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          iridescence.setIridescenceTexture(texture);\n          context.setTextureInfo(iridescence.getIridescenceTextureInfo(), textureInfoDef);\n        }\n        if (iridescenceDef.iridescenceThicknessTexture !== undefined) {\n          const textureInfoDef = iridescenceDef.iridescenceThicknessTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          iridescence.setIridescenceThicknessTexture(texture);\n          context.setTextureInfo(iridescence.getIridescenceThicknessTextureInfo(), textureInfoDef);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const iridescence = material.getExtension(KHR_MATERIALS_IRIDESCENCE);\n      if (iridescence) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        const iridescenceDef = materialDef.extensions[KHR_MATERIALS_IRIDESCENCE] = {};\n        if (iridescence.getIridescenceFactor() > 0) {\n          iridescenceDef.iridescenceFactor = iridescence.getIridescenceFactor();\n        }\n        if (iridescence.getIridescenceIOR() !== 1.3) {\n          iridescenceDef.iridescenceIor = iridescence.getIridescenceIOR();\n        }\n        if (iridescence.getIridescenceThicknessMinimum() !== 100) {\n          iridescenceDef.iridescenceThicknessMinimum = iridescence.getIridescenceThicknessMinimum();\n        }\n        if (iridescence.getIridescenceThicknessMaximum() !== 400) {\n          iridescenceDef.iridescenceThicknessMaximum = iridescence.getIridescenceThicknessMaximum();\n        }\n        // Textures.\n        if (iridescence.getIridescenceTexture()) {\n          const texture = iridescence.getIridescenceTexture();\n          const textureInfo = iridescence.getIridescenceTextureInfo();\n          iridescenceDef.iridescenceTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n        if (iridescence.getIridescenceThicknessTexture()) {\n          const texture = iridescence.getIridescenceThicknessTexture();\n          const textureInfo = iridescence.getIridescenceThicknessTextureInfo();\n          iridescenceDef.iridescenceThicknessTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsIridescence.EXTENSION_NAME = KHR_MATERIALS_IRIDESCENCE;\n\nconst {\n  R: R$3,\n  G: G$3,\n  B: B$2,\n  A: A$2\n} = TextureChannel;\n/**\n * Converts a {@link Material} to a spec/gloss workflow. See {@link KHRMaterialsPBRSpecularGlossiness}.\n */\nclass PBRSpecularGlossiness extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n    this.propertyType = 'PBRSpecularGlossiness';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      diffuseFactor: [1.0, 1.0, 1.0, 1.0],\n      diffuseTexture: null,\n      diffuseTextureInfo: new TextureInfo(this.graph, 'diffuseTextureInfo'),\n      specularFactor: [1.0, 1.0, 1.0],\n      glossinessFactor: 1.0,\n      specularGlossinessTexture: null,\n      specularGlossinessTextureInfo: new TextureInfo(this.graph, 'specularGlossinessTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Diffuse.\n   */\n  /** Diffuse; Linear-sRGB components. See {@link PBRSpecularGlossiness.getDiffuseTexture getDiffuseTexture}. */\n  getDiffuseFactor() {\n    return this.get('diffuseFactor');\n  }\n  /** Diffuse; Linear-sRGB components. See {@link PBRSpecularGlossiness.getDiffuseTexture getDiffuseTexture}. */\n  setDiffuseFactor(factor) {\n    return this.set('diffuseFactor', factor);\n  }\n  /**\n   * Diffuse texture; sRGB. Alternative to baseColorTexture, used within the\n   * spec/gloss PBR workflow.\n   */\n  getDiffuseTexture() {\n    return this.getRef('diffuseTexture');\n  }\n  /**\n   * Settings affecting the material's use of its diffuse texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getDiffuseTextureInfo() {\n    return this.getRef('diffuseTexture') ? this.getRef('diffuseTextureInfo') : null;\n  }\n  /** Sets diffuse texture. See {@link PBRSpecularGlossiness.getDiffuseTexture getDiffuseTexture}. */\n  setDiffuseTexture(texture) {\n    return this.setRef('diffuseTexture', texture, {\n      channels: R$3 | G$3 | B$2 | A$2,\n      isColor: true\n    });\n  }\n  /**********************************************************************************************\n   * Specular.\n   */\n  /** Specular; linear multiplier. */\n  getSpecularFactor() {\n    return this.get('specularFactor');\n  }\n  /** Specular; linear multiplier. */\n  setSpecularFactor(factor) {\n    return this.set('specularFactor', factor);\n  }\n  /**********************************************************************************************\n   * Glossiness.\n   */\n  /** Glossiness; linear multiplier. */\n  getGlossinessFactor() {\n    return this.get('glossinessFactor');\n  }\n  /** Glossiness; linear multiplier. */\n  setGlossinessFactor(factor) {\n    return this.set('glossinessFactor', factor);\n  }\n  /**********************************************************************************************\n   * Specular/Glossiness.\n   */\n  /** Spec/gloss texture; linear multiplier. */\n  getSpecularGlossinessTexture() {\n    return this.getRef('specularGlossinessTexture');\n  }\n  /**\n   * Settings affecting the material's use of its spec/gloss texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getSpecularGlossinessTextureInfo() {\n    return this.getRef('specularGlossinessTexture') ? this.getRef('specularGlossinessTextureInfo') : null;\n  }\n  /** Spec/gloss texture; linear multiplier. */\n  setSpecularGlossinessTexture(texture) {\n    return this.setRef('specularGlossinessTexture', texture, {\n      channels: R$3 | G$3 | B$2 | A$2\n    });\n  }\n}\nPBRSpecularGlossiness.EXTENSION_NAME = KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n\n/**\n * [`KHR_materials_pbrSpecularGlossiness`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness/)\n * converts a PBR material from the default metal/rough workflow to a spec/gloss workflow.\n *\n * > _**NOTICE:** The spec/gloss workflow does _not_ support other PBR extensions such as clearcoat,\n * > transmission, IOR, etc. For the complete PBR feature set and specular data, use the\n * > {@link KHRMaterialsSpecular} extension instead, which provides specular data within a metal/rough\n * > workflow._\n *\n * ![Illustration](/media/extensions/khr-material-pbr-specular-glossiness.png)\n *\n * > _**Figure:** Components of a PBR spec/gloss material. Source: Khronos Group._\n *\n * Properties:\n * - {@link PBRSpecularGlossiness}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRMaterialsPBRSpecularGlossiness } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const specGlossExtension = document.createExtension(KHRMaterialsPBRSpecularGlossiness);\n *\n * // Create a PBRSpecularGlossiness property.\n * const specGloss = specGlossExtension.createPBRSpecularGlossiness()\n * \t.setSpecularFactor(1.0);\n *\n * // // Assign to a Material.\n * material.setExtension('KHR_materials_pbrSpecularGlossiness', specGloss);\n * ```\n */\nclass KHRMaterialsPBRSpecularGlossiness extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new PBRSpecularGlossiness property for use on a {@link Material}. */\n  createPBRSpecularGlossiness() {\n    return new PBRSpecularGlossiness(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n        const specGloss = this.createPBRSpecularGlossiness();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS, specGloss);\n        const specGlossDef = materialDef.extensions[KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n        // Factors.\n        if (specGlossDef.diffuseFactor !== undefined) {\n          specGloss.setDiffuseFactor(specGlossDef.diffuseFactor);\n        }\n        if (specGlossDef.specularFactor !== undefined) {\n          specGloss.setSpecularFactor(specGlossDef.specularFactor);\n        }\n        if (specGlossDef.glossinessFactor !== undefined) {\n          specGloss.setGlossinessFactor(specGlossDef.glossinessFactor);\n        }\n        // Textures.\n        if (specGlossDef.diffuseTexture !== undefined) {\n          const textureInfoDef = specGlossDef.diffuseTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          specGloss.setDiffuseTexture(texture);\n          context.setTextureInfo(specGloss.getDiffuseTextureInfo(), textureInfoDef);\n        }\n        if (specGlossDef.specularGlossinessTexture !== undefined) {\n          const textureInfoDef = specGlossDef.specularGlossinessTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          specGloss.setSpecularGlossinessTexture(texture);\n          context.setTextureInfo(specGloss.getSpecularGlossinessTextureInfo(), textureInfoDef);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const specGloss = material.getExtension(KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS);\n      if (specGloss) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        const specGlossDef = materialDef.extensions[KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS] = {\n          diffuseFactor: specGloss.getDiffuseFactor(),\n          specularFactor: specGloss.getSpecularFactor(),\n          glossinessFactor: specGloss.getGlossinessFactor()\n        };\n        // Textures.\n        if (specGloss.getDiffuseTexture()) {\n          const texture = specGloss.getDiffuseTexture();\n          const textureInfo = specGloss.getDiffuseTextureInfo();\n          specGlossDef.diffuseTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n        if (specGloss.getSpecularGlossinessTexture()) {\n          const texture = specGloss.getSpecularGlossinessTexture();\n          const textureInfo = specGloss.getSpecularGlossinessTextureInfo();\n          specGlossDef.specularGlossinessTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsPBRSpecularGlossiness.EXTENSION_NAME = KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n\nconst {\n  R: R$2,\n  G: G$2,\n  B: B$1,\n  A: A$1\n} = TextureChannel;\n/**\n * Defines sheen on a PBR {@link Material}. See {@link KHRMaterialsSheen}.\n */\nclass Sheen extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_SHEEN;\n    this.propertyType = 'Sheen';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      sheenColorFactor: [0.0, 0.0, 0.0],\n      sheenColorTexture: null,\n      sheenColorTextureInfo: new TextureInfo(this.graph, 'sheenColorTextureInfo'),\n      sheenRoughnessFactor: 0.0,\n      sheenRoughnessTexture: null,\n      sheenRoughnessTextureInfo: new TextureInfo(this.graph, 'sheenRoughnessTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Sheen color.\n   */\n  /** Sheen; linear multiplier. */\n  getSheenColorFactor() {\n    return this.get('sheenColorFactor');\n  }\n  /** Sheen; linear multiplier. */\n  setSheenColorFactor(factor) {\n    return this.set('sheenColorFactor', factor);\n  }\n  /**\n   * Sheen color texture, in sRGB colorspace.\n   */\n  getSheenColorTexture() {\n    return this.getRef('sheenColorTexture');\n  }\n  /**\n   * Settings affecting the material's use of its sheen color texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getSheenColorTextureInfo() {\n    return this.getRef('sheenColorTexture') ? this.getRef('sheenColorTextureInfo') : null;\n  }\n  /** Sets sheen color texture. See {@link Sheen.getSheenColorTexture getSheenColorTexture}. */\n  setSheenColorTexture(texture) {\n    return this.setRef('sheenColorTexture', texture, {\n      channels: R$2 | G$2 | B$1,\n      isColor: true\n    });\n  }\n  /**********************************************************************************************\n   * Sheen roughness.\n   */\n  /** Sheen roughness; linear multiplier. See {@link Sheen.getSheenRoughnessTexture getSheenRoughnessTexture}. */\n  getSheenRoughnessFactor() {\n    return this.get('sheenRoughnessFactor');\n  }\n  /** Sheen roughness; linear multiplier. See {@link Sheen.getSheenRoughnessTexture getSheenRoughnessTexture}. */\n  setSheenRoughnessFactor(factor) {\n    return this.set('sheenRoughnessFactor', factor);\n  }\n  /**\n   * Sheen roughness texture; linear multiplier. The `a` channel of this texture specifies\n   * roughness, independent of the base layer's roughness.\n   */\n  getSheenRoughnessTexture() {\n    return this.getRef('sheenRoughnessTexture');\n  }\n  /**\n   * Settings affecting the material's use of its sheen roughness texture. If no texture is\n   * attached, {@link TextureInfo} is `null`.\n   */\n  getSheenRoughnessTextureInfo() {\n    return this.getRef('sheenRoughnessTexture') ? this.getRef('sheenRoughnessTextureInfo') : null;\n  }\n  /**\n   * Sets sheen roughness texture.  The `a` channel of this texture specifies\n   * roughness, independent of the base layer's roughness.\n   */\n  setSheenRoughnessTexture(texture) {\n    return this.setRef('sheenRoughnessTexture', texture, {\n      channels: A$1\n    });\n  }\n}\nSheen.EXTENSION_NAME = KHR_MATERIALS_SHEEN;\n\n/**\n * [`KHR_materials_sheen`](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_sheen/)\n * defines a velvet-like sheen layered on a glTF PBR material.\n *\n * ![Illustration](/media/extensions/khr-materials-sheen.png)\n *\n * > _**Figure:** A cushion, showing high material roughness and low sheen roughness. Soft\n * > highlights at edges of the material show backscattering from microfibers. Source: Khronos\n * > Group._\n *\n * A sheen layer is a common technique used in Physically-Based Rendering to represent\n * cloth and fabric materials.\n *\n * Properties:\n * - {@link Sheen}\n *\n * ### Example\n *\n * The `KHRMaterialsSheen` class provides a single {@link ExtensionProperty} type, `Sheen`,\n * which may be attached to any {@link Material} instance. For example:\n *\n * ```typescript\n * import { KHRMaterialsSheen, Sheen } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const sheenExtension = document.createExtension(KHRMaterialsSheen);\n *\n * // Create a Sheen property.\n * const sheen = sheenExtension.createSheen()\n * \t.setSheenColorFactor([1.0, 1.0, 1.0]);\n *\n * // Attach the property to a Material.\n * material.setExtension('KHR_materials_sheen', sheen);\n * ```\n */\nclass KHRMaterialsSheen extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_SHEEN;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Sheen property for use on a {@link Material}. */\n  createSheen() {\n    return new Sheen(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_SHEEN]) {\n        const sheen = this.createSheen();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_SHEEN, sheen);\n        const sheenDef = materialDef.extensions[KHR_MATERIALS_SHEEN];\n        // Factors.\n        if (sheenDef.sheenColorFactor !== undefined) {\n          sheen.setSheenColorFactor(sheenDef.sheenColorFactor);\n        }\n        if (sheenDef.sheenRoughnessFactor !== undefined) {\n          sheen.setSheenRoughnessFactor(sheenDef.sheenRoughnessFactor);\n        }\n        // Textures.\n        if (sheenDef.sheenColorTexture !== undefined) {\n          const textureInfoDef = sheenDef.sheenColorTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          sheen.setSheenColorTexture(texture);\n          context.setTextureInfo(sheen.getSheenColorTextureInfo(), textureInfoDef);\n        }\n        if (sheenDef.sheenRoughnessTexture !== undefined) {\n          const textureInfoDef = sheenDef.sheenRoughnessTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          sheen.setSheenRoughnessTexture(texture);\n          context.setTextureInfo(sheen.getSheenRoughnessTextureInfo(), textureInfoDef);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const sheen = material.getExtension(KHR_MATERIALS_SHEEN);\n      if (sheen) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        const sheenDef = materialDef.extensions[KHR_MATERIALS_SHEEN] = {\n          sheenColorFactor: sheen.getSheenColorFactor(),\n          sheenRoughnessFactor: sheen.getSheenRoughnessFactor()\n        };\n        // Textures.\n        if (sheen.getSheenColorTexture()) {\n          const texture = sheen.getSheenColorTexture();\n          const textureInfo = sheen.getSheenColorTextureInfo();\n          sheenDef.sheenColorTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n        if (sheen.getSheenRoughnessTexture()) {\n          const texture = sheen.getSheenRoughnessTexture();\n          const textureInfo = sheen.getSheenRoughnessTextureInfo();\n          sheenDef.sheenRoughnessTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsSheen.EXTENSION_NAME = KHR_MATERIALS_SHEEN;\n\nconst {\n  R: R$1,\n  G: G$1,\n  B,\n  A\n} = TextureChannel;\n/**\n * Defines specular reflectivity on a PBR {@link Material}. See {@link KHRMaterialsSpecular}.\n */\nclass Specular extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_SPECULAR;\n    this.propertyType = 'Specular';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      specularFactor: 1.0,\n      specularTexture: null,\n      specularTextureInfo: new TextureInfo(this.graph, 'specularTextureInfo'),\n      specularColorFactor: [1.0, 1.0, 1.0],\n      specularColorTexture: null,\n      specularColorTextureInfo: new TextureInfo(this.graph, 'specularColorTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Specular.\n   */\n  /** Specular; linear multiplier. See {@link Specular.getSpecularTexture getSpecularTexture}. */\n  getSpecularFactor() {\n    return this.get('specularFactor');\n  }\n  /** Specular; linear multiplier. See {@link Specular.getSpecularTexture getSpecularTexture}. */\n  setSpecularFactor(factor) {\n    return this.set('specularFactor', factor);\n  }\n  /** Specular color; Linear-sRGB components. See {@link Specular.getSpecularTexture getSpecularTexture}. */\n  getSpecularColorFactor() {\n    return this.get('specularColorFactor');\n  }\n  /** Specular color; Linear-sRGB components. See {@link Specular.getSpecularTexture getSpecularTexture}. */\n  setSpecularColorFactor(factor) {\n    return this.set('specularColorFactor', factor);\n  }\n  /**\n   * Specular texture; linear multiplier. Configures the strength of the specular reflection in\n   * the dielectric BRDF. A value of zero disables the specular reflection, resulting in a pure\n   * diffuse material.\n   *\n   * Only the alpha (A) channel is used for specular strength, but this texture may optionally\n   * be packed with specular color (RGB) into a single texture.\n   */\n  getSpecularTexture() {\n    return this.getRef('specularTexture');\n  }\n  /**\n   * Settings affecting the material's use of its specular texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getSpecularTextureInfo() {\n    return this.getRef('specularTexture') ? this.getRef('specularTextureInfo') : null;\n  }\n  /** Sets specular texture. See {@link Specular.getSpecularTexture getSpecularTexture}. */\n  setSpecularTexture(texture) {\n    return this.setRef('specularTexture', texture, {\n      channels: A\n    });\n  }\n  /**\n   * Specular color texture; linear multiplier. Defines the F0 color of the specular reflection\n   * (RGB channels, encoded in sRGB) in the the dielectric BRDF.\n   *\n   * Only RGB channels are used here, but this texture may optionally be packed with a specular\n   * factor (A) into a single texture.\n   */\n  getSpecularColorTexture() {\n    return this.getRef('specularColorTexture');\n  }\n  /**\n   * Settings affecting the material's use of its specular color texture. If no texture is\n   * attached, {@link TextureInfo} is `null`.\n   */\n  getSpecularColorTextureInfo() {\n    return this.getRef('specularColorTexture') ? this.getRef('specularColorTextureInfo') : null;\n  }\n  /** Sets specular color texture. See {@link Specular.getSpecularColorTexture getSpecularColorTexture}. */\n  setSpecularColorTexture(texture) {\n    return this.setRef('specularColorTexture', texture, {\n      channels: R$1 | G$1 | B,\n      isColor: true\n    });\n  }\n}\nSpecular.EXTENSION_NAME = KHR_MATERIALS_SPECULAR;\n\n/**\n * [`KHR_materials_specular`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_specular/)\n * adjusts the strength of the specular reflection in the dielectric BRDF.\n *\n * KHRMaterialsSpecular is a better alternative to the older\n * {@link KHRMaterialsPBRSpecularGlossiness KHR_materials_pbrSpecularGlossiness} extension, and\n * provides specular information while remaining within a metal/rough PBR workflow. A\n * value of zero disables the specular reflection, resulting in a pure diffuse material.\n *\n * Properties:\n * - {@link Specular}\n *\n * ### Example\n *\n * The `KHRMaterialsSpecular` class provides a single {@link ExtensionProperty} type, `Specular`,\n * which may be attached to any {@link Material} instance. For example:\n *\n * ```typescript\n * import { KHRMaterialsSpecular, Specular } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const specularExtension = document.createExtension(KHRMaterialsSpecular);\n *\n * // Create a Specular property.\n * const specular = specularExtension.createSpecular()\n * \t.setSpecularFactor(1.0);\n *\n * // Attach the property to a Material.\n * material.setExtension('KHR_materials_specular', specular);\n * ```\n */\nclass KHRMaterialsSpecular extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_SPECULAR;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Specular property for use on a {@link Material}. */\n  createSpecular() {\n    return new Specular(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_SPECULAR]) {\n        const specular = this.createSpecular();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_SPECULAR, specular);\n        const specularDef = materialDef.extensions[KHR_MATERIALS_SPECULAR];\n        // Factors.\n        if (specularDef.specularFactor !== undefined) {\n          specular.setSpecularFactor(specularDef.specularFactor);\n        }\n        if (specularDef.specularColorFactor !== undefined) {\n          specular.setSpecularColorFactor(specularDef.specularColorFactor);\n        }\n        // Textures.\n        if (specularDef.specularTexture !== undefined) {\n          const textureInfoDef = specularDef.specularTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          specular.setSpecularTexture(texture);\n          context.setTextureInfo(specular.getSpecularTextureInfo(), textureInfoDef);\n        }\n        if (specularDef.specularColorTexture !== undefined) {\n          const textureInfoDef = specularDef.specularColorTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          specular.setSpecularColorTexture(texture);\n          context.setTextureInfo(specular.getSpecularColorTextureInfo(), textureInfoDef);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const specular = material.getExtension(KHR_MATERIALS_SPECULAR);\n      if (specular) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        const specularDef = materialDef.extensions[KHR_MATERIALS_SPECULAR] = {};\n        if (specular.getSpecularFactor() !== 1) {\n          specularDef.specularFactor = specular.getSpecularFactor();\n        }\n        if (!MathUtils.eq(specular.getSpecularColorFactor(), [1, 1, 1])) {\n          specularDef.specularColorFactor = specular.getSpecularColorFactor();\n        }\n        // Textures.\n        if (specular.getSpecularTexture()) {\n          const texture = specular.getSpecularTexture();\n          const textureInfo = specular.getSpecularTextureInfo();\n          specularDef.specularTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n        if (specular.getSpecularColorTexture()) {\n          const texture = specular.getSpecularColorTexture();\n          const textureInfo = specular.getSpecularColorTextureInfo();\n          specularDef.specularColorTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsSpecular.EXTENSION_NAME = KHR_MATERIALS_SPECULAR;\n\nconst {\n  R\n} = TextureChannel;\n/**\n * Defines optical transmission on a PBR {@link Material}. See {@link KHRMaterialsTransmission}.\n */\nclass Transmission extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_TRANSMISSION;\n    this.propertyType = 'Transmission';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      transmissionFactor: 0.0,\n      transmissionTexture: null,\n      transmissionTextureInfo: new TextureInfo(this.graph, 'transmissionTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Transmission.\n   */\n  /** Transmission; linear multiplier. See {@link Transmission.getTransmissionTexture getTransmissionTexture}. */\n  getTransmissionFactor() {\n    return this.get('transmissionFactor');\n  }\n  /** Transmission; linear multiplier. See {@link Transmission.getTransmissionTexture getTransmissionTexture}. */\n  setTransmissionFactor(factor) {\n    return this.set('transmissionFactor', factor);\n  }\n  /**\n   * Transmission texture; linear multiplier. The `r` channel of this texture specifies\n   * transmission [0-1] of the material's surface. By default this is a thin transparency\n   * effect, but volume effects (refraction, subsurface scattering) may be introduced with the\n   * addition of the `KHR_materials_volume` extension.\n   */\n  getTransmissionTexture() {\n    return this.getRef('transmissionTexture');\n  }\n  /**\n   * Settings affecting the material's use of its transmission texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getTransmissionTextureInfo() {\n    return this.getRef('transmissionTexture') ? this.getRef('transmissionTextureInfo') : null;\n  }\n  /** Sets transmission texture. See {@link Transmission.getTransmissionTexture getTransmissionTexture}. */\n  setTransmissionTexture(texture) {\n    return this.setRef('transmissionTexture', texture, {\n      channels: R\n    });\n  }\n}\nTransmission.EXTENSION_NAME = KHR_MATERIALS_TRANSMISSION;\n\n/**\n * [`KHR_materials_transmission`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_transmission/)\n * provides a common type of optical transparency: infinitely-thin materials with no refraction,\n * scattering, or dispersion.\n *\n * ![Illustration](/media/extensions/khr-materials-transmission.png)\n *\n * > _**Figure:** Sphere using `KHR_materials_transmission` with varying roughness (0.0, 0.2, 0.4).\n * > Source: Khronos Group._\n *\n * While default PBR materials using alpha blending become invisible as their opacity approaches\n * zero, a transmissive material continues to reflect light in a glass-like manner, even at low\n * transmission values. When combined with {@link KHRMaterialsVolume}, transmission may be used for\n * thicker materials and refractive effects.\n *\n * Properties:\n * - {@link Transmission}\n *\n * ### Example\n *\n * The `KHRMaterialsTransmission` class provides a single {@link ExtensionProperty} type,\n * `Transmission`, which may be attached to any {@link Material} instance. For example:\n *\n * ```typescript\n * import { KHRMaterialsTransmission, Transmission } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const transmissionExtension = document.createExtension(KHRMaterialsTransmission);\n *\n * // Create a Transmission property.\n * const transmission = transmissionExtension.createTransmission()\n * \t.setTransmissionFactor(1.0);\n *\n * // Attach the property to a Material.\n * material.setExtension('KHR_materials_transmission', transmission);\n * ```\n */\nclass KHRMaterialsTransmission extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_TRANSMISSION;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Transmission property for use on a {@link Material}. */\n  createTransmission() {\n    return new Transmission(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_TRANSMISSION]) {\n        const transmission = this.createTransmission();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_TRANSMISSION, transmission);\n        const transmissionDef = materialDef.extensions[KHR_MATERIALS_TRANSMISSION];\n        // Factors.\n        if (transmissionDef.transmissionFactor !== undefined) {\n          transmission.setTransmissionFactor(transmissionDef.transmissionFactor);\n        }\n        // Textures.\n        if (transmissionDef.transmissionTexture !== undefined) {\n          const textureInfoDef = transmissionDef.transmissionTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          transmission.setTransmissionTexture(texture);\n          context.setTextureInfo(transmission.getTransmissionTextureInfo(), textureInfoDef);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const transmission = material.getExtension(KHR_MATERIALS_TRANSMISSION);\n      if (transmission) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        const transmissionDef = materialDef.extensions[KHR_MATERIALS_TRANSMISSION] = {\n          transmissionFactor: transmission.getTransmissionFactor()\n        };\n        // Textures.\n        if (transmission.getTransmissionTexture()) {\n          const texture = transmission.getTransmissionTexture();\n          const textureInfo = transmission.getTransmissionTextureInfo();\n          transmissionDef.transmissionTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsTransmission.EXTENSION_NAME = KHR_MATERIALS_TRANSMISSION;\n\n/**\n * Converts a PBR {@link Material} to an unlit shading model. See {@link KHRMaterialsUnlit}.\n */\nclass Unlit extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_UNLIT;\n    this.propertyType = 'Unlit';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n}\nUnlit.EXTENSION_NAME = KHR_MATERIALS_UNLIT;\n\n/**\n * [`KHR_materials_unlit`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_unlit/)\n * defines an unlit shading model for use in glTF 2.0 materials.\n *\n * ![Illustration](/media/extensions/khr-materials-unlit.png)\n *\n * > _**Figure:** Unlit materials are useful for flat shading, stylized effects, and for improving\n * > performance on mobile devices. Source: [Model by Hayden VanEarden](https://sketchfab.com/3d-models/summertime-kirby-c5711316103a4d67a62c34cfe8710938)._\n *\n * Unlit (also \"Shadeless\" or \"Constant\") materials provide a simple alternative to the Physically\n * Based Rendering (PBR) shading models provided by the core specification. Unlit materials are\n * often useful for cheaper rendering on performance-contrained devices, e.g. mobile phones.\n * Additionally, unlit materials can be very useful in achieving stylized, non-photo-realistic\n * effects like hand painted illustrative styles or baked toon shaders.\n *\n * Properties:\n * - {@link Unlit}\n *\n * ### Example\n *\n * The `KHRMaterialsUnlit` class provides a single {@link ExtensionProperty} type, `Unlit`, which may\n * be attached to any {@link Material} instance. For example:\n *\n * ```typescript\n * import { KHRMaterialsUnlit, Unlit } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const unlitExtension = document.createExtension(KHRMaterialsUnlit);\n *\n * // Create an Unlit property.\n * const unlit = unlitExtension.createUnlit();\n *\n * // Attach the property to a Material.\n * material.setExtension('KHR_materials_unlit', unlit);\n * ```\n */\nclass KHRMaterialsUnlit extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_UNLIT;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Unlit property for use on a {@link Material}. */\n  createUnlit() {\n    return new Unlit(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const materialDefs = context.jsonDoc.json.materials || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_UNLIT]) {\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_UNLIT, this.createUnlit());\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      if (material.getExtension(KHR_MATERIALS_UNLIT)) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        materialDef.extensions[KHR_MATERIALS_UNLIT] = {};\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsUnlit.EXTENSION_NAME = KHR_MATERIALS_UNLIT;\n\n/**\n * Maps {@link Variant}s to {@link Material}s. See {@link KHRMaterialsVariants}.\n */\nclass Mapping extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_VARIANTS;\n    this.propertyType = 'Mapping';\n    this.parentTypes = ['MappingList'];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      material: null,\n      variants: new RefSet()\n    });\n  }\n  /** The {@link Material} designated for this {@link Primitive}, under the given variants. */\n  getMaterial() {\n    return this.getRef('material');\n  }\n  /** The {@link Material} designated for this {@link Primitive}, under the given variants. */\n  setMaterial(material) {\n    return this.setRef('material', material);\n  }\n  /** Adds a {@link Variant} to this mapping. */\n  addVariant(variant) {\n    return this.addRef('variants', variant);\n  }\n  /** Removes a {@link Variant} from this mapping. */\n  removeVariant(variant) {\n    return this.removeRef('variants', variant);\n  }\n  /** Lists {@link Variant}s in this mapping. */\n  listVariants() {\n    return this.listRefs('variants');\n  }\n}\nMapping.EXTENSION_NAME = KHR_MATERIALS_VARIANTS;\n\n/**\n * List of material variant {@link Mapping}s. See {@link KHRMaterialsVariants}.\n */\nclass MappingList extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_VARIANTS;\n    this.propertyType = 'MappingList';\n    this.parentTypes = [PropertyType.PRIMITIVE];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      mappings: new RefSet()\n    });\n  }\n  /** Adds a {@link Mapping} to this mapping. */\n  addMapping(mapping) {\n    return this.addRef('mappings', mapping);\n  }\n  /** Removes a {@link Mapping} from the list for this {@link Primitive}. */\n  removeMapping(mapping) {\n    return this.removeRef('mappings', mapping);\n  }\n  /** Lists {@link Mapping}s in this {@link Primitive}. */\n  listMappings() {\n    return this.listRefs('mappings');\n  }\n}\nMappingList.EXTENSION_NAME = KHR_MATERIALS_VARIANTS;\n\n/**\n * Defines a variant of a {@link Material}. See {@link KHRMaterialsVariants}.\n */\nclass Variant extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_VARIANTS;\n    this.propertyType = 'Variant';\n    this.parentTypes = ['MappingList'];\n  }\n}\nVariant.EXTENSION_NAME = KHR_MATERIALS_VARIANTS;\n\n/**\n * [`KHR_materials_variants`](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_variants/)\n * defines alternate {@link Material} states for any {@link Primitive} in the scene.\n *\n * ![Illustration](/media/extensions/khr-materials-variants.jpg)\n *\n * > _**Figure:** A sneaker, in three material variants. Source: Khronos Group._\n *\n * Uses include product configurators, night/day states, healthy/damaged states, etc. The\n * `KHRMaterialsVariants` class provides three {@link ExtensionProperty} types: `Variant`, `Mapping`,\n * and `MappingList`. When attached to {@link Primitive} properties, these offer flexible ways of\n * defining the variants available to an application. Triggering a variant is out of scope of this\n * extension, but could be handled in the application with a UI dropdown, particular game states,\n * and so on.\n *\n * Mesh geometry cannot be changed by this extension, although another extension\n * (tentative: `KHR_mesh_variants`) is under consideration by the Khronos Group, for that purpose.\n *\n * Properties:\n * - {@link Variant}\n * - {@link Mapping}\n * - {@link MappingList}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRMaterialsVariants } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const variantExtension = document.createExtension(KHRMaterialsVariants);\n *\n * // Create some Variant states.\n * const healthyVariant = variantExtension.createVariant('Healthy');\n * const damagedVariant = variantExtension.createVariant('Damaged');\n *\n * // Create mappings from a Variant state to a Material.\n * const healthyMapping = variantExtension.createMapping()\n * \t.addVariant(healthyVariant)\n * \t.setMaterial(healthyMat);\n * const damagedMapping = variantExtension.createMapping()\n * \t.addVariant(damagedVariant)\n * \t.setMaterial(damagedMat);\n *\n * // Attach the mappings to a Primitive.\n * primitive.setExtension(\n * \t'KHR_materials_variants',\n * \tvariantExtension.createMappingList()\n * \t\t.addMapping(healthyMapping)\n * \t\t.addMapping(damagedMapping)\n * );\n * ```\n *\n * A few notes about this extension:\n *\n * 1. Viewers that don't recognized this extension will show the default material for each primitive\n * \t instead, so assign that material accordingly. This material can be — but doesn't have to be —\n * \t associated with one of the available variants.\n * 2. Mappings can list multiple Variants. In that case, the first Mapping containing an active\n * \t Variant will be chosen by the viewer.\n * 3. Variant names are how these states are identified, so choose informative names.\n * 4. When writing the file to an unpacked `.gltf`, instead of an embedded `.glb`, viewers will have\n * \t the option of downloading only textures associated with the default state, and lazy-loading\n * \t any textures for inactive Variants only when they are needed.\n */\nclass KHRMaterialsVariants extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_VARIANTS;\n  }\n  /** Creates a new MappingList property. */\n  createMappingList() {\n    return new MappingList(this.document.getGraph());\n  }\n  /** Creates a new Variant property. */\n  createVariant(name = '') {\n    return new Variant(this.document.getGraph(), name);\n  }\n  /** Creates a new Mapping property. */\n  createMapping() {\n    return new Mapping(this.document.getGraph());\n  }\n  /** Lists all Variants on the current Document. */\n  listVariants() {\n    return Array.from(this.properties).filter(prop => prop instanceof Variant);\n  }\n  /** @hidden */\n  read(context) {\n    const jsonDoc = context.jsonDoc;\n    if (!jsonDoc.json.extensions || !jsonDoc.json.extensions[KHR_MATERIALS_VARIANTS]) return this;\n    // Read all top-level variant names.\n    const variantsRootDef = jsonDoc.json.extensions[KHR_MATERIALS_VARIANTS];\n    const variantDefs = variantsRootDef.variants || [];\n    const variants = variantDefs.map(variantDef => this.createVariant().setName(variantDef.name || ''));\n    // For each mesh primitive, read its material/variant mappings.\n    const meshDefs = jsonDoc.json.meshes || [];\n    meshDefs.forEach((meshDef, meshIndex) => {\n      const mesh = context.meshes[meshIndex];\n      const primDefs = meshDef.primitives || [];\n      primDefs.forEach((primDef, primIndex) => {\n        if (!primDef.extensions || !primDef.extensions[KHR_MATERIALS_VARIANTS]) {\n          return;\n        }\n        const mappingList = this.createMappingList();\n        const variantPrimDef = primDef.extensions[KHR_MATERIALS_VARIANTS];\n        for (const mappingDef of variantPrimDef.mappings) {\n          const mapping = this.createMapping();\n          if (mappingDef.material !== undefined) {\n            mapping.setMaterial(context.materials[mappingDef.material]);\n          }\n          for (const variantIndex of mappingDef.variants || []) {\n            mapping.addVariant(variants[variantIndex]);\n          }\n          mappingList.addMapping(mapping);\n        }\n        mesh.listPrimitives()[primIndex].setExtension(KHR_MATERIALS_VARIANTS, mappingList);\n      });\n    });\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const jsonDoc = context.jsonDoc;\n    const variants = this.listVariants();\n    if (!variants.length) return this;\n    // Write all top-level variant names.\n    const variantDefs = [];\n    const variantIndexMap = new Map();\n    for (const variant of variants) {\n      variantIndexMap.set(variant, variantDefs.length);\n      variantDefs.push(context.createPropertyDef(variant));\n    }\n    // For each mesh primitive, write its material/variant mappings.\n    for (const mesh of this.document.getRoot().listMeshes()) {\n      const meshIndex = context.meshIndexMap.get(mesh);\n      mesh.listPrimitives().forEach((prim, primIndex) => {\n        const mappingList = prim.getExtension(KHR_MATERIALS_VARIANTS);\n        if (!mappingList) return;\n        const primDef = context.jsonDoc.json.meshes[meshIndex].primitives[primIndex];\n        const mappingDefs = mappingList.listMappings().map(mapping => {\n          const mappingDef = context.createPropertyDef(mapping);\n          const material = mapping.getMaterial();\n          if (material) {\n            mappingDef.material = context.materialIndexMap.get(material);\n          }\n          mappingDef.variants = mapping.listVariants().map(variant => variantIndexMap.get(variant));\n          return mappingDef;\n        });\n        primDef.extensions = primDef.extensions || {};\n        primDef.extensions[KHR_MATERIALS_VARIANTS] = {\n          mappings: mappingDefs\n        };\n      });\n    }\n    jsonDoc.json.extensions = jsonDoc.json.extensions || {};\n    jsonDoc.json.extensions[KHR_MATERIALS_VARIANTS] = {\n      variants: variantDefs\n    };\n    return this;\n  }\n}\nKHRMaterialsVariants.EXTENSION_NAME = KHR_MATERIALS_VARIANTS;\n\nconst {\n  G\n} = TextureChannel;\n/**\n * Defines volume on a PBR {@link Material}. See {@link KHRMaterialsVolume}.\n */\nclass Volume extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_MATERIALS_VOLUME;\n    this.propertyType = 'Volume';\n    this.parentTypes = [PropertyType.MATERIAL];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      thicknessFactor: 0.0,\n      thicknessTexture: null,\n      thicknessTextureInfo: new TextureInfo(this.graph, 'thicknessTexture'),\n      attenuationDistance: Infinity,\n      attenuationColor: [1.0, 1.0, 1.0]\n    });\n  }\n  /**********************************************************************************************\n   * Thickness.\n   */\n  /**\n   * Thickness of the volume beneath the surface in meters in the local coordinate system of the\n   * node. If the value is 0 the material is thin-walled. Otherwise the material is a volume\n   * boundary. The doubleSided property has no effect on volume boundaries.\n   */\n  getThicknessFactor() {\n    return this.get('thicknessFactor');\n  }\n  /**\n   * Thickness of the volume beneath the surface in meters in the local coordinate system of the\n   * node. If the value is 0 the material is thin-walled. Otherwise the material is a volume\n   * boundary. The doubleSided property has no effect on volume boundaries.\n   */\n  setThicknessFactor(factor) {\n    return this.set('thicknessFactor', factor);\n  }\n  /**\n   * Texture that defines the thickness, stored in the G channel. This will be multiplied by\n   * thicknessFactor.\n   */\n  getThicknessTexture() {\n    return this.getRef('thicknessTexture');\n  }\n  /**\n   * Settings affecting the material's use of its thickness texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getThicknessTextureInfo() {\n    return this.getRef('thicknessTexture') ? this.getRef('thicknessTextureInfo') : null;\n  }\n  /**\n   * Texture that defines the thickness, stored in the G channel. This will be multiplied by\n   * thicknessFactor.\n   */\n  setThicknessTexture(texture) {\n    return this.setRef('thicknessTexture', texture, {\n      channels: G\n    });\n  }\n  /**********************************************************************************************\n   * Attenuation.\n   */\n  /**\n   * Density of the medium given as the average distance in meters that light travels in the\n   * medium before interacting with a particle.\n   */\n  getAttenuationDistance() {\n    return this.get('attenuationDistance');\n  }\n  /**\n   * Density of the medium given as the average distance in meters that light travels in the\n   * medium before interacting with a particle.\n   */\n  setAttenuationDistance(distance) {\n    return this.set('attenuationDistance', distance);\n  }\n  /**\n   * Color (linear) that white light turns into due to absorption when reaching the attenuation\n   * distance.\n   */\n  getAttenuationColor() {\n    return this.get('attenuationColor');\n  }\n  /**\n   * Color (linear) that white light turns into due to absorption when reaching the attenuation\n   * distance.\n   */\n  setAttenuationColor(color) {\n    return this.set('attenuationColor', color);\n  }\n}\nVolume.EXTENSION_NAME = KHR_MATERIALS_VOLUME;\n\n/**\n * [KHR_materials_volume](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_materials_volume/)\n * adds refraction, absorption, or scattering to a glTF PBR material already using transmission or\n * translucency.\n *\n * ![Illustration](/media/extensions/khr-materials-volume.png)\n *\n * > _**Figure:** Base color changes the amount of light passing through the volume boundary\n * > (left). The overall color of the object is the same everywhere, as if the object is covered\n * > with a colored, transparent foil. Absorption changes the amount of light traveling through the\n * > volume (right). The overall color depends on the distance the light traveled through it; at\n * > small distances (tail of the dragon) less light is absorbed and the color is brighter than at\n * > large distances. Source: Khronos Group._\n *\n * By default, a glTF 2.0 material describes the scattering properties of a surface enclosing an\n * infinitely thin volume. The surface defined by the mesh represents a thin wall. The volume\n * extension makes it possible to turn the surface into an interface between volumes. The mesh to\n * which the material is attached defines the boundaries of an homogeneous medium and therefore must\n * be manifold. Volumes provide effects like refraction, absorption and scattering. Scattering\n * effects will require future (TBD) extensions.\n *\n * The volume extension must be combined with {@link KHRMaterialsTransmission} or\n * `KHR_materials_translucency` in order to define entry of light into the volume.\n *\n * Properties:\n * - {@link Volume}\n *\n * ### Example\n *\n * The `KHRMaterialsVolume` class provides a single {@link ExtensionProperty} type, `Volume`, which\n * may be attached to any {@link Material} instance. For example:\n *\n * ```typescript\n * import { KHRMaterialsVolume, Volume } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const volumeExtension = document.createExtension(KHRMaterialsVolume);\n *\n * // Create a Volume property.\n * const volume = volumeExtension.createVolume()\n * \t.setThicknessFactor(1.0)\n * \t.setThicknessTexture(texture)\n * \t.setAttenuationDistance(1.0)\n * \t.setAttenuationColorFactor([1, 0.5, 0.5]);\n *\n * // Attach the property to a Material.\n * material.setExtension('KHR_materials_volume', volume);\n * ```\n *\n * A thickness texture is required in most realtime renderers, and can be baked in software such as\n * Blender or Substance Painter. When `thicknessFactor = 0`, all volumetric effects are disabled.\n */\nclass KHRMaterialsVolume extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MATERIALS_VOLUME;\n    this.prereadTypes = [PropertyType.MESH];\n    this.prewriteTypes = [PropertyType.MESH];\n  }\n  /** Creates a new Volume property for use on a {@link Material}. */\n  createVolume() {\n    return new Volume(this.document.getGraph());\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(_context) {\n    return this;\n  }\n  /** @hidden */\n  preread(context) {\n    const jsonDoc = context.jsonDoc;\n    const materialDefs = jsonDoc.json.materials || [];\n    const textureDefs = jsonDoc.json.textures || [];\n    materialDefs.forEach((materialDef, materialIndex) => {\n      if (materialDef.extensions && materialDef.extensions[KHR_MATERIALS_VOLUME]) {\n        const volume = this.createVolume();\n        context.materials[materialIndex].setExtension(KHR_MATERIALS_VOLUME, volume);\n        const volumeDef = materialDef.extensions[KHR_MATERIALS_VOLUME];\n        // Factors.\n        if (volumeDef.thicknessFactor !== undefined) {\n          volume.setThicknessFactor(volumeDef.thicknessFactor);\n        }\n        if (volumeDef.attenuationDistance !== undefined) {\n          volume.setAttenuationDistance(volumeDef.attenuationDistance);\n        }\n        if (volumeDef.attenuationColor !== undefined) {\n          volume.setAttenuationColor(volumeDef.attenuationColor);\n        }\n        // Textures.\n        if (volumeDef.thicknessTexture !== undefined) {\n          const textureInfoDef = volumeDef.thicknessTexture;\n          const texture = context.textures[textureDefs[textureInfoDef.index].source];\n          volume.setThicknessTexture(texture);\n          context.setTextureInfo(volume.getThicknessTextureInfo(), textureInfoDef);\n        }\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  prewrite(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listMaterials().forEach(material => {\n      const volume = material.getExtension(KHR_MATERIALS_VOLUME);\n      if (volume) {\n        const materialIndex = context.materialIndexMap.get(material);\n        const materialDef = jsonDoc.json.materials[materialIndex];\n        materialDef.extensions = materialDef.extensions || {};\n        // Factors.\n        const volumeDef = materialDef.extensions[KHR_MATERIALS_VOLUME] = {};\n        if (volume.getThicknessFactor() > 0) {\n          volumeDef.thicknessFactor = volume.getThicknessFactor();\n        }\n        if (Number.isFinite(volume.getAttenuationDistance())) {\n          volumeDef.attenuationDistance = volume.getAttenuationDistance();\n        }\n        if (!MathUtils.eq(volume.getAttenuationColor(), [1, 1, 1])) {\n          volumeDef.attenuationColor = volume.getAttenuationColor();\n        }\n        // Textures.\n        if (volume.getThicknessTexture()) {\n          const texture = volume.getThicknessTexture();\n          const textureInfo = volume.getThicknessTextureInfo();\n          volumeDef.thicknessTexture = context.createTextureInfoDef(texture, textureInfo);\n        }\n      }\n    });\n    return this;\n  }\n}\nKHRMaterialsVolume.EXTENSION_NAME = KHR_MATERIALS_VOLUME;\n\n/**\n * [`KHR_mesh_quantization`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/)\n * expands allowed component types for vertex attributes to include 16- and 8-bit storage.\n *\n * Quantization provides a memory/precision tradeoff — depending on the application needs, 16-bit or\n * 8-bit storage can be sufficient for mesh geometry, at 1/2 or 1/4 the size. For example, a 10x10\n * mesh might be written to a uint16 {@link Accessor}, with values `0–65536`, normalized to be\n * interpreted as `0–1`. With an additional 10x scale on any node {@link Node} instantiating the\n * quantized {@link Mesh}, the model retains its original scale with a minimal quality loss and\n * up to 50% file size reduction.\n *\n * Defining no {@link ExtensionProperty} types, this {@link Extension} is simply attached to the\n * {@link Document}, and affects the entire Document by allowing more flexible use of\n * {@link Accessor} types for vertex attributes. Without the Extension, the same use of these data\n * types would yield an invalid glTF document, under the stricter core glTF specification.\n *\n * Properties:\n * - N/A\n *\n * ### Example\n *\n * ```typescript\n * import { KHRMeshQuantization } from '@gltf-transform/extensions';\n * import { quantize } from '@gltf-transform/functions';\n *\n * // Create an Extension attached to the Document.\n * const quantizationExtension = document.createExtension(KHRMeshQuantization).setRequired(true);\n *\n * // Use Uint16Array, Uint8Array, Int16Array, and Int8Array in vertex accessors manually,\n * // or apply the provided quantize() function to compute quantized accessors automatically:\n * await document.transform(quantize({\n * \tquantizePosition: 16,\n * \tquantizeNormal: 12,\n * \tquantizeTexcoord: 14\n * }));\n * ```\n *\n * For more documentation about automatic quantization, see the {@link quantize} function.\n */\nclass KHRMeshQuantization extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_MESH_QUANTIZATION;\n  }\n  /** @hidden */\n  read(_) {\n    return this;\n  }\n  /** @hidden */\n  write(_) {\n    return this;\n  }\n}\nKHRMeshQuantization.EXTENSION_NAME = KHR_MESH_QUANTIZATION;\n\nclass KTX2ImageUtils {\n  match(array) {\n    return array[0] === 0xab && array[1] === 0x4b && array[2] === 0x54 && array[3] === 0x58 && array[4] === 0x20 && array[5] === 0x32 && array[6] === 0x30 && array[7] === 0xbb && array[8] === 0x0d && array[9] === 0x0a && array[10] === 0x1a && array[11] === 0x0a;\n  }\n  getSize(array) {\n    const container = read(array);\n    return [container.pixelWidth, container.pixelHeight];\n  }\n  getChannels(array) {\n    const container = read(array);\n    const dfd = container.dataFormatDescriptor[0];\n    if (dfd.colorModel === KHR_DF_MODEL_ETC1S) {\n      return dfd.samples.length === 2 && (dfd.samples[1].channelType & 0xf) === 15 ? 4 : 3;\n    } else if (dfd.colorModel === KHR_DF_MODEL_UASTC) {\n      return (dfd.samples[0].channelType & 0xf) === 3 ? 4 : 3;\n    }\n    throw new Error(`Unexpected KTX2 colorModel, \"${dfd.colorModel}\".`);\n  }\n  getVRAMByteLength(array) {\n    const container = read(array);\n    const hasAlpha = this.getChannels(array) > 3;\n    let uncompressedBytes = 0;\n    for (let i = 0; i < container.levels.length; i++) {\n      const level = container.levels[i];\n      // Use level.uncompressedByteLength for UASTC; for ETC1S it's 0.\n      if (level.uncompressedByteLength) {\n        uncompressedBytes += level.uncompressedByteLength;\n      } else {\n        const levelWidth = Math.max(1, Math.floor(container.pixelWidth / Math.pow(2, i)));\n        const levelHeight = Math.max(1, Math.floor(container.pixelHeight / Math.pow(2, i)));\n        const blockSize = hasAlpha ? 16 : 8;\n        uncompressedBytes += levelWidth / 4 * (levelHeight / 4) * blockSize;\n      }\n    }\n    return uncompressedBytes;\n  }\n}\n/**\n * [`KHR_texture_basisu`](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu)\n * enables KTX2 GPU textures with Basis Universal supercompression for any material texture.\n *\n * GPU texture formats, unlike traditional image formats, remain compressed in GPU memory. As a\n * result, they (1) upload to the GPU much more quickly, and (2) require much less GPU memory. In\n * certain cases they may also have smaller filesizes than PNG or JPEG textures, but this is not\n * guaranteed. GPU textures often require more careful tuning during compression to maintain image\n * quality, but this extra effort is worthwhile for applications that need to maintain a smooth\n * framerate while uploading images, or where GPU memory is limited.\n *\n * Defining no {@link ExtensionProperty} types, this {@link Extension} is simply attached to the\n * {@link Document}, and affects the entire Document by allowing use of the `image/ktx2` MIME type\n * and passing KTX2 image data to the {@link Texture.setImage} method. Without the Extension, the\n * same MIME types and image data would yield an invalid glTF document, under the stricter core glTF\n * specification.\n *\n * Properties:\n * - N/A\n *\n * ### Example\n *\n * ```typescript\n * import { KHRTextureBasisu } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const basisuExtension = document.createExtension(KHRTextureBasisu)\n * \t.setRequired(true);\n * document.createTexture('MyCompressedTexture')\n * \t.setMimeType('image/ktx2')\n * \t.setImage(fs.readFileSync('my-texture.ktx2'));\n * ```\n *\n * Compression is not done automatically when adding the extension as shown above — you must\n * compress the image data first, then pass the `.ktx2` payload to {@link Texture.setImage}. The\n * glTF Transform CLI has functions to help with this, or any similar KTX2-capable\n * utility will work.\n *\n * When the `KHR_texture_basisu` extension is added to a file by glTF Transform, the extension\n * should always be required. This tool does not support writing assets that \"fall back\" to optional\n * PNG or JPEG image data.\n *\n * > _**NOTICE:** Compressing some textures — particularly 3-component (RGB) normal maps, and\n * > occlusion/roughness/metalness maps, may give poor results with the ETC1S compression option.\n * > These issues can often be avoided with the larger UASTC compression option, or by upscaling the\n * > texture before compressing it.\n * >\n * > For best results when authoring new textures, use\n * > [texture dilation](https://docs.substance3d.com/spdoc/padding-134643719.html) and minimize\n * > prominent UV seams._\n */\nclass KHRTextureBasisu extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_TEXTURE_BASISU;\n    /** @hidden */\n    this.prereadTypes = [PropertyType.TEXTURE];\n  }\n  /** @hidden */\n  static register() {\n    ImageUtils.registerFormat('image/ktx2', new KTX2ImageUtils());\n  }\n  /** @hidden */\n  preread(context) {\n    context.jsonDoc.json.textures.forEach(textureDef => {\n      if (textureDef.extensions && textureDef.extensions[KHR_TEXTURE_BASISU]) {\n        const basisuDef = textureDef.extensions[KHR_TEXTURE_BASISU];\n        textureDef.source = basisuDef.source;\n      }\n    });\n    return this;\n  }\n  /** @hidden */\n  read(_context) {\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const jsonDoc = context.jsonDoc;\n    this.document.getRoot().listTextures().forEach(texture => {\n      if (texture.getMimeType() === 'image/ktx2') {\n        const imageIndex = context.imageIndexMap.get(texture);\n        jsonDoc.json.textures.forEach(textureDef => {\n          if (textureDef.source === imageIndex) {\n            textureDef.extensions = textureDef.extensions || {};\n            textureDef.extensions[KHR_TEXTURE_BASISU] = {\n              source: textureDef.source\n            };\n            delete textureDef.source;\n          }\n        });\n      }\n    });\n    return this;\n  }\n}\nKHRTextureBasisu.EXTENSION_NAME = KHR_TEXTURE_BASISU;\n\n/**\n * Defines UV transform for a {@link TextureInfo}. See {@link KHRTextureTransform}.\n */\nclass Transform extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_TEXTURE_TRANSFORM;\n    this.propertyType = 'Transform';\n    this.parentTypes = [PropertyType.TEXTURE_INFO];\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      offset: [0.0, 0.0],\n      rotation: 0,\n      scale: [1.0, 1.0],\n      texCoord: null\n    });\n  }\n  getOffset() {\n    return this.get('offset');\n  }\n  setOffset(offset) {\n    return this.set('offset', offset);\n  }\n  getRotation() {\n    return this.get('rotation');\n  }\n  setRotation(rotation) {\n    return this.set('rotation', rotation);\n  }\n  getScale() {\n    return this.get('scale');\n  }\n  setScale(scale) {\n    return this.set('scale', scale);\n  }\n  getTexCoord() {\n    return this.get('texCoord');\n  }\n  setTexCoord(texCoord) {\n    return this.set('texCoord', texCoord);\n  }\n}\nTransform.EXTENSION_NAME = KHR_TEXTURE_TRANSFORM;\n\n/**\n * [`KHR_texture_transform`](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_texture_transform/)\n * adds offset, rotation, and scale to {@link TextureInfo} properties.\n *\n * Affine UV transforms are useful for reducing the number of textures the GPU must load, improving\n * performance when used in techniques like texture atlases. UV transforms cannot be animated at\n * this time.\n *\n * Properties:\n * - {@link Transform}\n *\n * ### Example\n *\n * The `KHRTextureTransform` class provides a single {@link ExtensionProperty} type, `Transform`, which\n * may be attached to any {@link TextureInfo} instance. For example:\n *\n * ```typescript\n * import { KHRTextureTransform } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const transformExtension = document.createExtension(KHRTextureTransform)\n * \t.setRequired(true);\n *\n * // Create a reusable Transform.\n * const transform = transformExtension.createTransform()\n * \t.setScale([100, 100]);\n *\n * // Apply the Transform to a Material's baseColorTexture.\n * document.createMaterial()\n * \t.setBaseColorTexture(myTexture)\n * \t.getBaseColorTextureInfo()\n * \t.setExtension('KHR_texture_transform', transform);\n * ```\n */\nclass KHRTextureTransform extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_TEXTURE_TRANSFORM;\n  }\n  /** Creates a new Transform property for use on a {@link TextureInfo}. */\n  createTransform() {\n    return new Transform(this.document.getGraph());\n  }\n  /** @hidden */\n  read(context) {\n    for (const [textureInfo, textureInfoDef] of Array.from(context.textureInfos.entries())) {\n      if (!textureInfoDef.extensions || !textureInfoDef.extensions[KHR_TEXTURE_TRANSFORM]) continue;\n      const transform = this.createTransform();\n      const transformDef = textureInfoDef.extensions[KHR_TEXTURE_TRANSFORM];\n      if (transformDef.offset !== undefined) transform.setOffset(transformDef.offset);\n      if (transformDef.rotation !== undefined) transform.setRotation(transformDef.rotation);\n      if (transformDef.scale !== undefined) transform.setScale(transformDef.scale);\n      if (transformDef.texCoord !== undefined) transform.setTexCoord(transformDef.texCoord);\n      textureInfo.setExtension(KHR_TEXTURE_TRANSFORM, transform);\n    }\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const textureInfoEntries = Array.from(context.textureInfoDefMap.entries());\n    for (const [textureInfo, textureInfoDef] of textureInfoEntries) {\n      const transform = textureInfo.getExtension(KHR_TEXTURE_TRANSFORM);\n      if (!transform) continue;\n      textureInfoDef.extensions = textureInfoDef.extensions || {};\n      const transformDef = {};\n      const eq = MathUtils.eq;\n      if (!eq(transform.getOffset(), [0, 0])) transformDef.offset = transform.getOffset();\n      if (transform.getRotation() !== 0) transformDef.rotation = transform.getRotation();\n      if (!eq(transform.getScale(), [1, 1])) transformDef.scale = transform.getScale();\n      if (transform.getTexCoord() != null) transformDef.texCoord = transform.getTexCoord();\n      textureInfoDef.extensions[KHR_TEXTURE_TRANSFORM] = transformDef;\n    }\n    return this;\n  }\n}\nKHRTextureTransform.EXTENSION_NAME = KHR_TEXTURE_TRANSFORM;\n\nconst PARENT_TYPES = [PropertyType.ROOT, PropertyType.SCENE, PropertyType.NODE, PropertyType.MESH, PropertyType.MATERIAL, PropertyType.TEXTURE, PropertyType.ANIMATION];\n/**\n * Defines an XMP packet associated with a Document or Property. See {@link KHRXMP}.\n */\nclass Packet extends ExtensionProperty {\n  init() {\n    this.extensionName = KHR_XMP_JSON_LD;\n    this.propertyType = 'Packet';\n    this.parentTypes = PARENT_TYPES;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      context: {},\n      properties: {}\n    });\n  }\n  /**********************************************************************************************\n   * Context.\n   */\n  /**\n   * Returns the XMP context definition URL for the given term.\n   * See: https://json-ld.org/spec/latest/json-ld/#the-context\n   * @param term Case-sensitive term. Usually a concise, lowercase, alphanumeric identifier.\n   */\n  getContext() {\n    return this.get('context');\n  }\n  /**\n   * Sets the XMP context definition URL for the given term.\n   * See: https://json-ld.org/spec/latest/json-ld/#the-context\n   *\n   * Example:\n   *\n   * ```typescript\n   * packet.setContext({\n   *   dc: 'http://purl.org/dc/elements/1.1/',\n   *   model3d: 'https://schema.khronos.org/model3d/xsd/1.0/',\n   * });\n   * ```\n   *\n   * @param term Case-sensitive term. Usually a concise, lowercase, alphanumeric identifier.\n   * @param definition URI for XMP namespace.\n   */\n  setContext(context) {\n    return this.set('context', _extends({}, context));\n  }\n  /**********************************************************************************************\n   * Properties.\n   */\n  /**\n   * Lists properties defined in this packet.\n   *\n   * Example:\n   *\n   * ```typescript\n   * packet.listProperties(); // → ['dc:Language', 'dc:Creator', 'xmp:CreateDate']\n   * ```\n   */\n  listProperties() {\n    return Object.keys(this.get('properties'));\n  }\n  /**\n   * Returns the value of a property, as a literal or JSONLD object.\n   *\n   * Example:\n   *\n   * ```typescript\n   * packet.getProperty('dc:Creator'); // → {\"@list\": [\"Acme, Inc.\"]}\n   * packet.getProperty('dc:Title'); // → {\"@type\": \"rdf:Alt\", \"rdf:_1\": {\"@language\": \"en-US\", \"@value\": \"Lamp\"}}\n   * packet.getProperty('xmp:CreateDate'); // → \"2022-01-01\"\n   * ```\n   */\n  getProperty(name) {\n    const properties = this.get('properties');\n    return name in properties ? properties[name] : null;\n  }\n  /**\n   * Sets the value of a property, as a literal or JSONLD object.\n   *\n   * Example:\n   *\n   * ```typescript\n   * packet.setProperty('dc:Creator', {'@list': ['Acme, Inc.']});\n   * packet.setProperty('dc:Title', {\n   * \t'@type': 'rdf:Alt',\n   * \t'rdf:_1': {'@language': 'en-US', '@value': 'Lamp'}\n   * });\n   * packet.setProperty('model3d:preferredSurfaces', {'@list': ['vertical']});\n   * ```\n   */\n  setProperty(name, value) {\n    this._assertContext(name);\n    const properties = _extends({}, this.get('properties'));\n    if (value) {\n      properties[name] = value;\n    } else {\n      delete properties[name];\n    }\n    return this.set('properties', properties);\n  }\n  /**********************************************************************************************\n   * Serialize / Deserialize.\n   */\n  /**\n   * Serializes the packet context and properties to a JSONLD object.\n   */\n  toJSONLD() {\n    const context = copyJSON(this.get('context'));\n    const properties = copyJSON(this.get('properties'));\n    return _extends({\n      '@context': context\n    }, properties);\n  }\n  /**\n   * Deserializes a JSONLD packet, then overwrites existing context and properties with\n   * the new values.\n   */\n  fromJSONLD(jsonld) {\n    jsonld = copyJSON(jsonld);\n    // Context.\n    const context = jsonld['@context'];\n    if (context) this.set('context', context);\n    delete jsonld['@context'];\n    // Properties.\n    return this.set('properties', jsonld);\n  }\n  /**********************************************************************************************\n   * Validation.\n   */\n  /** @hidden */\n  _assertContext(name) {\n    const prefix = name.split(':')[0];\n    if (!(prefix in this.get('context'))) {\n      throw new Error(`${KHR_XMP_JSON_LD}: Missing context for term, \"${name}\".`);\n    }\n  }\n}\nPacket.EXTENSION_NAME = KHR_XMP_JSON_LD;\nfunction copyJSON(object) {\n  return JSON.parse(JSON.stringify(object));\n}\n\n/**\n * [KHR_xmp_json_ld](https://github.com/KhronosGroup/gltf/blob/main/extensions/2.0/Khronos/KHR_xmp_json_ld/)\n * defines XMP metadata associated with a glTF asset.\n *\n * XMP metadata provides standardized fields describing the content, provenance, usage\n * restrictions, or other attributes of a 3D model. XMP metadata does not generally affect the\n * parsing or runtime behavior of the content — for that, use custom extensions, custom vertex\n * attributes, or extras. Similarly, storage mechanisms other than XMP should be preferred\n * for binary content like mesh data, animations, or textures.\n *\n * Generally XMP metadata is associated with the entire glTF asset by attaching an XMP {@link Packet}\n * to the document {@link Root}. In less common cases where metadata must be associated with\n * specific subsets of a document, XMP Packets may be attached to {@link Scene}, {@link Node},\n * {@link Mesh}, {@link Material}, {@link Texture}, or {@link Animation} properties.\n *\n * Within each packet, XMP properties become available when an\n * [XMP namespace](https://www.adobe.io/xmp/docs/XMPNamespaces/) is registered\n * with {@link Packet.setContext}. Packets cannot use properties whose namespaces are not\n * registered as context. While not all XMP namespaces are relevant to 3D assets, some common\n * namespaces provide useful metadata about authorship and provenance. Additionally, the `model3d`\n * namespace provides certain properties specific to 3D content, such as Augmented Reality (AR)\n * orientation data.\n *\n * Common XMP contexts for 3D models include:\n *\n * | Prefix      | URI                                         | Name                           |\n * |:------------|:--------------------------------------------|:-------------------------------|\n * | `dc`        | http://purl.org/dc/elements/1.1/            | Dublin Core                    |\n * | `model3d`   | https://schema.khronos.org/model3d/xsd/1.0/ | Model 3D                       |\n * | `rdf`       | http://www.w3.org/1999/02/22-rdf-syntax-ns# | Resource Description Framework |\n * | `xmp`       | http://ns.adobe.com/xap/1.0/                | XMP                            |\n * | `xmpRights` | http://ns.adobe.com/xap/1.0/rights/         | XMP Rights Management          |\n *\n * Only the XMP contexts required for a packet should be assigned, and different packets\n * in the same asset may use different contexts. For greater detail on available XMP\n * contexts and how to use them in glTF assets, see the\n * [3DC Metadata Recommendations](https://github.com/KhronosGroup/3DC-Metadata-Recommendations/blob/main/model3d.md).\n *\n * Properties:\n * - {@link Packet}\n *\n * ### Example\n *\n * ```typescript\n * import { KHRXMP, Packet } from '@gltf-transform/extensions';\n *\n * // Create an Extension attached to the Document.\n * const xmpExtension = document.createExtension(KHRXMP);\n *\n * // Create Packet property.\n * const packet = xmpExtension.createPacket()\n * \t.setContext({\n * \t\tdc: 'http://purl.org/dc/elements/1.1/',\n * \t})\n *\t.setProperty('dc:Creator', {\"@list\": [\"Acme, Inc.\"]});\n *\n * // Option 1: Assign to Document Root.\n * document.getRoot().setExtension('KHR_xmp_json_ld', packet);\n *\n * // Option 2: Assign to a specific Property.\n * texture.setExtension('KHR_xmp_json_ld', packet);\n * ```\n */\nclass KHRXMP extends Extension {\n  constructor(...args) {\n    super(...args);\n    this.extensionName = KHR_XMP_JSON_LD;\n  }\n  /** Creates a new XMP packet, to be linked with a {@link Document} or {@link Property Properties}. */\n  createPacket() {\n    return new Packet(this.document.getGraph());\n  }\n  /** Lists XMP packets currently defined in a {@link Document}. */\n  listPackets() {\n    return Array.from(this.properties);\n  }\n  /** @hidden */\n  read(context) {\n    var _context$jsonDoc$json;\n    const extensionDef = (_context$jsonDoc$json = context.jsonDoc.json.extensions) == null ? void 0 : _context$jsonDoc$json[KHR_XMP_JSON_LD];\n    if (!extensionDef || !extensionDef.packets) return this;\n    // Deserialize packets.\n    const json = context.jsonDoc.json;\n    const root = this.document.getRoot();\n    const packets = extensionDef.packets.map(packetDef => this.createPacket().fromJSONLD(packetDef));\n    const defLists = [[json.asset], json.scenes, json.nodes, json.meshes, json.materials, json.images, json.animations];\n    const propertyLists = [[root], root.listScenes(), root.listNodes(), root.listMeshes(), root.listMaterials(), root.listTextures(), root.listAnimations()];\n    // Assign packets.\n    for (let i = 0; i < defLists.length; i++) {\n      const defs = defLists[i] || [];\n      for (let j = 0; j < defs.length; j++) {\n        const def = defs[j];\n        if (def.extensions && def.extensions[KHR_XMP_JSON_LD]) {\n          const xmpDef = def.extensions[KHR_XMP_JSON_LD];\n          propertyLists[i][j].setExtension(KHR_XMP_JSON_LD, packets[xmpDef.packet]);\n        }\n      }\n    }\n    return this;\n  }\n  /** @hidden */\n  write(context) {\n    const {\n      json\n    } = context.jsonDoc;\n    const packetDefs = [];\n    for (const packet of this.properties) {\n      // Serialize packets.\n      packetDefs.push(packet.toJSONLD());\n      // Assign packets.\n      for (const parent of packet.listParents()) {\n        let parentDef;\n        switch (parent.propertyType) {\n          case PropertyType.ROOT:\n            parentDef = json.asset;\n            break;\n          case PropertyType.SCENE:\n            parentDef = json.scenes[context.sceneIndexMap.get(parent)];\n            break;\n          case PropertyType.NODE:\n            parentDef = json.nodes[context.nodeIndexMap.get(parent)];\n            break;\n          case PropertyType.MESH:\n            parentDef = json.meshes[context.meshIndexMap.get(parent)];\n            break;\n          case PropertyType.MATERIAL:\n            parentDef = json.materials[context.materialIndexMap.get(parent)];\n            break;\n          case PropertyType.TEXTURE:\n            parentDef = json.images[context.imageIndexMap.get(parent)];\n            break;\n          case PropertyType.ANIMATION:\n            parentDef = json.animations[context.animationIndexMap.get(parent)];\n            break;\n          default:\n            parentDef = null;\n            this.document.getLogger().warn(`[${KHR_XMP_JSON_LD}]: Unsupported parent property, \"${parent.propertyType}\"`);\n            break;\n        }\n        if (!parentDef) continue;\n        parentDef.extensions = parentDef.extensions || {};\n        parentDef.extensions[KHR_XMP_JSON_LD] = {\n          packet: packetDefs.length - 1\n        };\n      }\n    }\n    if (packetDefs.length > 0) {\n      json.extensions = json.extensions || {};\n      json.extensions[KHR_XMP_JSON_LD] = {\n        packets: packetDefs\n      };\n    }\n    return this;\n  }\n}\nKHRXMP.EXTENSION_NAME = KHR_XMP_JSON_LD;\n\nconst KHRONOS_EXTENSIONS = [KHRDracoMeshCompression, KHRLightsPunctual, KHRMaterialsAnisotropy, KHRMaterialsClearcoat, KHRMaterialsDiffuseTransmission, KHRMaterialsDispersion, KHRMaterialsEmissiveStrength, KHRMaterialsIOR, KHRMaterialsIridescence, KHRMaterialsPBRSpecularGlossiness, KHRMaterialsSpecular, KHRMaterialsSheen, KHRMaterialsTransmission, KHRMaterialsUnlit, KHRMaterialsVariants, KHRMaterialsVolume, KHRMeshQuantization, KHRTextureBasisu, KHRTextureTransform, KHRXMP];\nconst ALL_EXTENSIONS = [EXTMeshGPUInstancing, EXTMeshoptCompression, EXTTextureAVIF, EXTTextureWebP, ...KHRONOS_EXTENSIONS];\n\nexport { ALL_EXTENSIONS, Anisotropy, Clearcoat, DiffuseTransmission, Dispersion, EXTMeshGPUInstancing, EXTMeshoptCompression, EXTTextureAVIF, EXTTextureWebP, EmissiveStrength, INSTANCE_ATTRIBUTE, IOR, InstancedMesh, Iridescence, KHRDracoMeshCompression, KHRLightsPunctual, KHRMaterialsAnisotropy, KHRMaterialsClearcoat, KHRMaterialsDiffuseTransmission, KHRMaterialsDispersion, KHRMaterialsEmissiveStrength, KHRMaterialsIOR, KHRMaterialsIridescence, KHRMaterialsPBRSpecularGlossiness, KHRMaterialsSheen, KHRMaterialsSpecular, KHRMaterialsTransmission, KHRMaterialsUnlit, KHRMaterialsVariants, KHRMaterialsVolume, KHRMeshQuantization, KHRONOS_EXTENSIONS, KHRTextureBasisu, KHRTextureTransform, KHRXMP, Light, Mapping, MappingList, PBRSpecularGlossiness, Packet, Sheen, Specular, Transform, Transmission, Unlit, Variant, Volume };\n//# sourceMappingURL=index.modern.js.map\n","// Copyright 2023-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { Extension, ExtensionProperty, PropertyType, WriterContext } from '@gltf-transform/core';\nconst NAME = 'EXT_mesh_manifold';\nconst MERGE = 'MERGE';\nexport class ManifoldPrimitive extends ExtensionProperty {\n    static EXTENSION_NAME = NAME;\n    init() {\n        ManifoldPrimitive.EXTENSION_NAME = NAME;\n        this.propertyType = 'ManifoldPrimitive';\n        this.parentTypes = [PropertyType.MESH];\n    }\n    getDefaults() {\n        return Object.assign(super.getDefaults(), { manifoldPrimitive: null, mergeIndices: null, mergeValues: null });\n    }\n    getMergeIndices() {\n        return this.getRef('mergeIndices');\n    }\n    getMergeValues() {\n        return this.getRef('mergeValues');\n    }\n    setMerge(indicesAccessor, valuesAccessor) {\n        if (indicesAccessor.getCount() !== valuesAccessor.getCount())\n            throw new Error('merge vectors must be the same length.');\n        this.setRef('mergeIndices', indicesAccessor);\n        return this.setRef('mergeValues', valuesAccessor);\n    }\n    getRunIndex() {\n        return this.get('runIndex');\n    }\n    setRunIndex(runIndex) {\n        return this.set('runIndex', runIndex);\n    }\n    setIndices(indices) {\n        return this.setRef('indices', indices);\n    }\n    getIndices() {\n        return this.getRef('indices');\n    }\n}\nexport class EXTManifold extends Extension {\n    extensionName = NAME;\n    prewriteTypes = [PropertyType.ACCESSOR];\n    static EXTENSION_NAME = NAME;\n    createManifoldPrimitive() {\n        return new ManifoldPrimitive(this.document.getGraph());\n    }\n    read(context) {\n        const { json } = context.jsonDoc;\n        const meshDefs = json.meshes || [];\n        meshDefs.forEach((meshDef, meshIndex) => {\n            if (!meshDef.extensions || !meshDef.extensions[NAME])\n                return;\n            const mesh = context.meshes[meshIndex];\n            const manifoldPrimitive = this.createManifoldPrimitive();\n            mesh.setExtension(NAME, manifoldPrimitive);\n            const manifoldDef = meshDef.extensions[NAME];\n            if (manifoldDef.manifoldPrimitive) {\n                let count = 0;\n                const runIndex = Array();\n                runIndex.push(count);\n                for (const primitive of mesh.listPrimitives()) {\n                    const indices = primitive.getIndices();\n                    if (!indices) {\n                        console.log('Skipping non-indexed primitive ', primitive.getName());\n                        continue;\n                    }\n                    count += indices.getCount();\n                    runIndex.push(count);\n                }\n                manifoldPrimitive.setRunIndex(runIndex);\n                manifoldPrimitive.setIndices(context.accessors[manifoldDef.manifoldPrimitive.indices]);\n            }\n            if (manifoldDef.mergeIndices != null && manifoldDef.mergeValues != null) {\n                manifoldPrimitive.setMerge(context.accessors[manifoldDef.mergeIndices], context.accessors[manifoldDef.mergeValues]);\n            }\n        });\n        return this;\n    }\n    prewrite(context) {\n        this.document.getRoot().listMeshes().forEach((mesh) => {\n            const manifoldPrimitive = mesh.getExtension(NAME);\n            if (!manifoldPrimitive)\n                return;\n            const indices = manifoldPrimitive.getIndices();\n            context.addAccessorToUsageGroup(indices, WriterContext.BufferViewUsage.ELEMENT_ARRAY_BUFFER);\n            const mergeFrom = manifoldPrimitive.getMergeIndices();\n            const mergeTo = manifoldPrimitive.getMergeValues();\n            if (!mergeFrom || !mergeTo)\n                return;\n            context.addAccessorToUsageGroup(mergeFrom, MERGE);\n            context.addAccessorToUsageGroup(mergeTo, MERGE);\n        });\n        return this;\n    }\n    write(context) {\n        const { json } = context.jsonDoc;\n        this.document.getRoot().listMeshes().forEach((mesh) => {\n            const manifoldPrimitive = mesh.getExtension(NAME);\n            if (!manifoldPrimitive)\n                return;\n            const meshIndex = context.meshIndexMap.get(mesh);\n            const meshDef = json.meshes[meshIndex];\n            const runIndex = manifoldPrimitive.getRunIndex();\n            const numPrimitive = runIndex.length - 1;\n            if (numPrimitive !== meshDef.primitives.length) {\n                throw new Error('The number of primitives must be exactly one less than the length of runIndex.');\n            }\n            const mergeIndicesIndex = context.accessorIndexMap.get(manifoldPrimitive.getMergeIndices());\n            const mergeValuesIndex = context.accessorIndexMap.get(manifoldPrimitive.getMergeValues());\n            const mergeIndices = json.accessors[mergeIndicesIndex];\n            const mergeValues = json.accessors[mergeValuesIndex];\n            const existingPrimitive = meshDef.primitives[0];\n            const primitive = {\n                indices: context.accessorIndexMap.get(manifoldPrimitive.getIndices()),\n                mode: existingPrimitive.mode,\n                attributes: { 'POSITION': existingPrimitive.attributes['POSITION'] }\n            };\n            const indices = json.accessors[primitive.indices];\n            if (!indices) {\n                return;\n            }\n            if (mergeIndices && mergeValues) {\n                indices.sparse = {\n                    count: mergeIndices.count,\n                    indices: {\n                        bufferView: mergeIndices.bufferView,\n                        byteOffset: mergeIndices.byteOffset,\n                        componentType: mergeIndices.componentType\n                    },\n                    values: {\n                        bufferView: mergeValues.bufferView,\n                        byteOffset: mergeValues.byteOffset,\n                    }\n                };\n            }\n            for (let i = 0; i < numPrimitive; ++i) {\n                const accessor = json.accessors[meshDef.primitives[i].indices];\n                accessor.bufferView = indices.bufferView;\n                accessor.byteOffset = indices.byteOffset + 4 * runIndex[i];\n                accessor.count = runIndex[i + 1] - runIndex[i];\n            }\n            meshDef.extensions = meshDef.extensions || {};\n            meshDef.extensions[NAME] = {\n                manifoldPrimitive: primitive,\n                mergeIndices: mergeIndicesIndex,\n                mergeValues: mergeValuesIndex\n            };\n            // Test the manifold primitive by replacing the material primitives\n            // meshDef.primitives = [primitive];\n        });\n        return this;\n    }\n}\n//# sourceMappingURL=manifold-gltf.js.map","// Copyright 2023-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { Accessor } from '@gltf-transform/core';\nimport { EXTManifold } from \"./manifold-gltf.js\";\nexport const attributeDefs = {\n    'POSITION': { type: Accessor.Type.VEC3, components: 3 },\n    'NORMAL': { type: Accessor.Type.VEC3, components: 3 },\n    'TANGENT': { type: Accessor.Type.VEC4, components: 4 },\n    'TEXCOORD_0': { type: Accessor.Type.VEC2, components: 2 },\n    'TEXCOORD_1': { type: Accessor.Type.VEC2, components: 2 },\n    'COLOR_0': { type: Accessor.Type.VEC3, components: 3 },\n    'JOINTS_0': { type: Accessor.Type.VEC4, components: 4 },\n    'WEIGHTS_0': { type: Accessor.Type.VEC4, components: 4 },\n    'SKIP_1': { type: null, components: 1 },\n    'SKIP_2': { type: null, components: 2 },\n    'SKIP_3': { type: null, components: 3 },\n    'SKIP_4': { type: null, components: 4 },\n};\n/**\n * Call this first to register the manifold extension so that readMesh and\n * writeMesh will work.\n */\nexport function setupIO(io) {\n    return io.registerExtensions([EXTManifold]);\n}\n/**\n * Read an input mesh into Manifold-compatible data structures, whether it\n * contains the EXT_mesh_manifold extension or not.\n *\n * @param mesh The Mesh to read.\n * @param attributes An array of attributes representing the order of desired\n *     properties returned in the vertProperties array of the output mesh. If\n *     omitted, this will be populated with the union of all attributes defined\n *     in the primitives of the input mesh. If present, the first entry must be\n *     'POSITION', and any attributes in the primitives that are not included in\n *     this list will be ignored, while those in the list but not defined in a\n *     primitive will be populated with zeros.\n * @returns The returned mesh is suitable for initializing a Manifold or Mesh of\n *     the Manifold library if desired. See Manifold documentation if you prefer\n *     to use these GL arrays in a different library. The runProperties array\n *     gives the Material and attributes list associated with each triangle run,\n *     which in turn corresponds to a primitive of the input mesh. These\n *     attributes are the intersection of the attributes present on the\n *     primitive and those requested in the attributes input.\n */\nexport function readMesh(mesh, attributes = []) {\n    const primitives = mesh.listPrimitives();\n    if (primitives.length === 0) {\n        return null;\n    }\n    if (attributes.length === 0) {\n        const attributeSet = new Set();\n        for (const primitive of primitives) {\n            const semantics = primitive.listSemantics();\n            for (const semantic of semantics) {\n                attributeSet.add(semantic);\n            }\n        }\n        let semantic;\n        for (semantic in attributeDefs) {\n            if (attributeSet.has(semantic)) {\n                attributes.push(semantic);\n                attributeSet.delete(semantic);\n            }\n        }\n        for (const semantic of attributeSet.keys()) {\n            attributes.push(semantic);\n        }\n    }\n    if (attributes.length < 1 || attributes[0] !== 'POSITION')\n        throw new Error('First attribute must be \"POSITION\".');\n    let numProp = 0;\n    const attributeOffsets = attributes.map((numProp = 0, def => {\n        const last = numProp;\n        numProp += attributeDefs[def].components;\n        return last;\n    }));\n    const manifoldPrimitive = mesh.getExtension('EXT_mesh_manifold');\n    let vertPropArray = Array();\n    let triVertArray = Array();\n    const runIndexArray = [0];\n    const mergeFromVertArray = Array();\n    const mergeToVertArray = Array();\n    const runProperties = Array();\n    if (manifoldPrimitive != null) {\n        const numVert = primitives[0].getAttribute('POSITION').getCount();\n        const foundAttribute = attributes.map((a) => attributeDefs[a].type == null);\n        vertPropArray = new Array(numProp * numVert);\n        for (const primitive of primitives) {\n            const indices = primitive.getIndices();\n            if (!indices) {\n                console.log('Skipping non-indexed primitive ', primitive.getName());\n                continue;\n            }\n            const attributesIn = primitive.listSemantics();\n            attributes.forEach((attributeOut, idx) => {\n                if (foundAttribute[idx]) {\n                    return;\n                }\n                for (const attributeIn of attributesIn) {\n                    if (attributeIn === attributeOut) {\n                        foundAttribute[idx] = true;\n                        const accessor = primitive.getAttribute(attributeIn);\n                        writeProperties(vertPropArray, accessor, numProp, attributeOffsets[idx]);\n                    }\n                }\n            });\n            triVertArray = [...triVertArray, ...indices.getArray()];\n            runIndexArray.push(triVertArray.length);\n            runProperties.push({\n                material: primitive.getMaterial(),\n                attributes: attributesIn.filter(b => attributes.some(a => a == b))\n            });\n        }\n        const mergeTriVert = manifoldPrimitive.getMergeIndices()?.getArray() ?? [];\n        const mergeTo = manifoldPrimitive.getMergeValues()?.getArray() ?? [];\n        const vert2merge = new Map();\n        for (const [i, idx] of mergeTriVert.entries()) {\n            vert2merge.set(triVertArray[idx], mergeTo[i]);\n        }\n        for (const [from, to] of vert2merge.entries()) {\n            mergeFromVertArray.push(from);\n            mergeToVertArray.push(to);\n        }\n    }\n    else {\n        for (const primitive of primitives) {\n            const indices = primitive.getIndices();\n            if (!indices) {\n                console.log('Skipping non-indexed primitive ', primitive.getName());\n                continue;\n            }\n            const numVert = vertPropArray.length / numProp;\n            vertPropArray =\n                [...vertPropArray, ...readPrimitive(primitive, numProp, attributes)];\n            triVertArray =\n                [...triVertArray, ...indices.getArray().map((i) => i + numVert)];\n            runIndexArray.push(triVertArray.length);\n            const attributesIn = primitive.listSemantics();\n            runProperties.push({\n                material: primitive.getMaterial(),\n                attributes: attributesIn.filter(b => attributes.some(a => a == b))\n            });\n        }\n    }\n    const vertProperties = new Float32Array(vertPropArray);\n    const triVerts = new Uint32Array(triVertArray);\n    const runIndex = new Uint32Array(runIndexArray);\n    const mergeFromVert = new Uint32Array(mergeFromVertArray);\n    const mergeToVert = new Uint32Array(mergeToVertArray);\n    const meshOut = { numProp, triVerts, vertProperties, runIndex, mergeFromVert, mergeToVert };\n    return { mesh: meshOut, runProperties };\n}\n/**\n * Write a Manifold Mesh into a glTF Mesh object, using the EXT_mesh_manifold\n * extension to allow for lossless roundtrip of the manifold mesh through the\n * glTF file.\n *\n * @param doc The glTF Document to which this Mesh will be added.\n * @param manifoldMesh The Manifold Mesh to convert to glTF.\n * @param id2properties A map from originalID to Properties that include the\n *     glTF Material and the set of attributes to output. All triangle runs with\n *     the same originalID will be combined into a single output primitive. Any\n *     originalIDs not found in the map will have the glTF default material and\n *     no attributes beyond 'POSITION'. Each attributes array must correspond to\n *     the manifoldMesh vertProperties, thus the first attribute must always be\n *     'POSITION'. Any properties that should not be output for a given\n *     primitive must use the 'SKIP_*' attributes.\n * @returns The glTF Mesh to add to the Document.\n */\nexport function writeMesh(doc, manifoldMesh, id2properties) {\n    if (doc.getRoot().listBuffers().length === 0) {\n        doc.createBuffer();\n    }\n    const buffer = doc.getRoot().listBuffers()[0];\n    const manifoldExtension = doc.createExtension(EXTManifold);\n    const mesh = doc.createMesh();\n    const runIndex = Array();\n    const attributeUnion = Array();\n    const primitive2attributes = new Map();\n    const numRun = manifoldMesh.runIndex.length - 1;\n    let lastID = -1;\n    for (let run = 0; run < numRun; ++run) {\n        const id = manifoldMesh.runOriginalID[run];\n        if (id == lastID) {\n            continue;\n        }\n        lastID = id;\n        runIndex.push(manifoldMesh.runIndex[run]);\n        const indices = doc.createAccessor('primitive indices of ID ' + id)\n            .setBuffer(buffer)\n            .setType(Accessor.Type.SCALAR)\n            .setArray(new Uint32Array(1));\n        const primitive = doc.createPrimitive().setIndices(indices);\n        const properties = id2properties.get(id);\n        if (properties) {\n            const { material, attributes } = properties;\n            if (attributes.length < 1 || attributes[0] !== 'POSITION')\n                throw new Error('First attribute must be \"POSITION\".');\n            primitive.setMaterial(material);\n            primitive2attributes.set(primitive, attributes);\n            properties.attributes.forEach((attribute, i) => {\n                if (i >= attributeUnion.length) {\n                    attributeUnion.push(attribute);\n                }\n                else {\n                    const size = attributeDefs[attribute].components;\n                    const unionSize = attributeDefs[attributeUnion[i]].components;\n                    if (size != unionSize) {\n                        throw new Error('Attribute sizes do not correspond: ' + attribute + ' and ' +\n                            attributeUnion[i]);\n                    }\n                    if (attributeDefs[attributeUnion[i]].type == null) {\n                        attributeUnion[i] = attribute;\n                    }\n                }\n            });\n        }\n        else {\n            primitive2attributes.set(primitive, ['POSITION']);\n        }\n        mesh.addPrimitive(primitive);\n    }\n    runIndex.push(manifoldMesh.runIndex[numRun]);\n    const numVert = manifoldMesh.numVert;\n    const numProp = manifoldMesh.numProp;\n    let offset = 0;\n    attributeUnion.forEach((attribute, aIdx) => {\n        const def = attributeDefs[attribute];\n        if (def == null)\n            throw new Error(attribute + ' is not a recognized attribute.');\n        if (def.type == null) {\n            ++offset;\n            return;\n        }\n        const n = def.components;\n        if (offset + n > numProp)\n            throw new Error('Too many attribute channels.');\n        const array = new Float32Array(n * numVert);\n        for (let v = 0; v < numVert; ++v) {\n            for (let i = 0; i < n; ++i) {\n                let x = manifoldMesh.vertProperties[numProp * v + offset + i];\n                if (attribute == 'COLOR_0') {\n                    x = Math.max(0, Math.min(1, x));\n                }\n                array[n * v + i] = x;\n            }\n        }\n        const accessor = doc.createAccessor(attribute)\n            .setBuffer(buffer)\n            .setType(def.type)\n            .setArray(array);\n        for (const primitive of mesh.listPrimitives()) {\n            const attributes = primitive2attributes.get(primitive);\n            if (attributes.length > aIdx &&\n                attributeDefs[attributes[aIdx]].type != null) {\n                primitive.setAttribute(attribute, accessor);\n            }\n        }\n        offset += n;\n    });\n    const manifoldPrimitive = manifoldExtension.createManifoldPrimitive();\n    mesh.setExtension('EXT_mesh_manifold', manifoldPrimitive);\n    const indices = doc.createAccessor('manifold indices')\n        .setBuffer(buffer)\n        .setType(Accessor.Type.SCALAR)\n        .setArray(manifoldMesh.triVerts);\n    manifoldPrimitive.setIndices(indices);\n    manifoldPrimitive.setRunIndex(runIndex);\n    const vert2merge = [...Array(manifoldMesh.numVert).keys()];\n    const ind = Array();\n    const val = Array();\n    if (manifoldMesh.mergeFromVert && manifoldMesh.mergeToVert) {\n        for (const [i, from] of manifoldMesh.mergeFromVert.entries()) {\n            vert2merge[from] = manifoldMesh.mergeToVert[i];\n        }\n        for (const [i, vert] of manifoldMesh.triVerts.entries()) {\n            const newVert = vert2merge[vert];\n            if (vert !== newVert) {\n                ind.push(i);\n                val.push(newVert);\n            }\n        }\n    }\n    if (ind.length > 0) {\n        const indicesAccessor = doc.createAccessor('merge from')\n            .setBuffer(buffer)\n            .setType(Accessor.Type.SCALAR)\n            .setArray(new Uint32Array(ind));\n        const valuesAccessor = doc.createAccessor('merge to')\n            .setBuffer(buffer)\n            .setType(Accessor.Type.SCALAR)\n            .setArray(new Uint32Array(val));\n        manifoldPrimitive.setMerge(indicesAccessor, valuesAccessor);\n    }\n    return mesh;\n}\n/**\n * Helper function to dispose of a Mesh, useful when replacing an existing Mesh\n * with one from writeMesh.\n */\nexport function disposeMesh(mesh) {\n    if (!mesh)\n        return;\n    const primitives = mesh.listPrimitives();\n    for (const primitive of primitives) {\n        primitive.getIndices()?.dispose();\n        for (const accessor of primitive.listAttributes()) {\n            accessor.dispose();\n        }\n    }\n    const manifoldPrimitive = mesh.getExtension('EXT_mesh_manifold');\n    if (manifoldPrimitive) {\n        manifoldPrimitive.getIndices()?.dispose();\n        manifoldPrimitive.getMergeIndices()?.dispose();\n        manifoldPrimitive.getMergeValues()?.dispose();\n    }\n    mesh.dispose();\n}\n/**\n * Helper function to download an image and apply it to the given texture.\n *\n * @param texture The texture to update\n * @param uri The location of the image to download\n */\nexport async function loadTexture(texture, uri) {\n    const response = await fetch(uri);\n    const blob = await response.blob();\n    texture.setMimeType(blob.type);\n    texture.setImage(new Uint8Array(await blob.arrayBuffer()));\n}\nfunction writeProperties(vertProperties, accessor, numProp, offset) {\n    const array = accessor.getArray();\n    const size = accessor.getElementSize();\n    const numVert = accessor.getCount();\n    for (let i = 0; i < numVert; ++i) {\n        for (let j = 0; j < size; ++j) {\n            vertProperties[numProp * i + offset + j] = array[i * size + j];\n        }\n    }\n}\nfunction readPrimitive(primitive, numProp, attributes) {\n    const vertProperties = [];\n    let offset = 0;\n    for (const attribute of attributes) {\n        const size = attributeDefs[attribute].components;\n        if (attributeDefs[attribute].type == null) {\n            offset += size;\n            continue;\n        }\n        const accessor = primitive.getAttribute(attribute);\n        if (accessor) {\n            writeProperties(vertProperties, accessor, numProp, offset);\n        }\n        offset += size;\n    }\n    return vertProperties;\n}\n//# sourceMappingURL=gltf-io.js.map","// Copyright 2023-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { WebIO } from '@gltf-transform/core';\nimport { KHRONOS_EXTENSIONS } from '@gltf-transform/extensions';\nimport { setupIO } from \"./gltf-io.js\";\n/**\n * Object to convert GLTF documents.\n *\n */\nexport class ExportGLTF {\n    extensions = ['glb', 'gltf'];\n    /**\n     * Convert a GLTF-Transform document to a blob.\n     *\n     * @param doc The GLTF document to convert.\n     * @returns A blob containing the converted model.\n     */\n    async asBlob(doc) {\n        const io = setupIO(new WebIO());\n        io.registerExtensions(KHRONOS_EXTENSIONS);\n        const glb = await io.writeBinary(doc);\n        return new Blob([glb], { type: 'application/octet-stream' });\n    }\n}\n//# sourceMappingURL=export-gltf.js.map","// Copyright 2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nconst memoryRegistry = Array();\n// manifold static methods (that return a new manifold)\nconst manifoldStaticFunctions = [\n    'cube', 'cylinder', 'sphere', 'tetrahedron', 'extrude', 'revolve', 'compose',\n    'union', 'difference', 'intersection', 'levelSet', 'smooth', 'ofMesh', 'hull'\n];\n// manifold member functions (that return a new manifold)\nconst manifoldMemberFunctions = [\n    'add',\n    'subtract',\n    'intersect',\n    'decompose',\n    'warp',\n    'transform',\n    'translate',\n    'rotate',\n    'scale',\n    'mirror',\n    'calculateCurvature',\n    'calculateNormals',\n    'smoothByNormals',\n    'smoothOut',\n    'refine',\n    'refineToLength',\n    'refineToTolerance',\n    'setProperties',\n    'setTolerance',\n    'simplify',\n    'asOriginal',\n    'trimByPlane',\n    'split',\n    'splitByPlane',\n    'slice',\n    'project',\n    'hull'\n];\n// CrossSection static methods (that return a new cross-section)\nconst crossSectionStaticFunctions = [\n    'square', 'circle', 'union', 'difference', 'intersection', 'compose',\n    'ofPolygons', 'hull'\n];\n// CrossSection member functions (that return a new cross-section)\nconst crossSectionMemberFunctions = [\n    'add', 'subtract', 'intersect', 'rectClip', 'decompose', 'transform',\n    'translate', 'rotate', 'scale', 'mirror', 'simplify', 'offset', 'hull'\n];\n/**\n * Delete any objects tagged for garbage collection.\n */\nexport const cleanup = () => {\n    for (const obj of memoryRegistry) {\n        // decompose result is an array of manifolds\n        if (obj instanceof Array)\n            for (const elem of obj)\n                elem.delete();\n        else\n            obj.delete();\n    }\n    memoryRegistry.length = 0;\n};\n/**\n * Intercept function calls for garbage collection.\n *\n * The returned object of the call will be added to the garbage collection list.\n * When `cleanup()` called, the `delete()` method on that object will be called.\n *\n * @param originalFn\n * @returns\n */\nexport const garbageCollectFunction = (originalFn) => {\n    return (...args) => {\n        //@ts-ignore\n        const result = originalFn(...args);\n        memoryRegistry.push(result);\n        return result;\n    };\n};\nconst interceptMethods = (target, methodNames) => {\n    for (const name of methodNames) {\n        const originalFn = target[name];\n        target[name] = garbageCollectFunction(originalFn);\n    }\n};\n/**\n * Set up garbage collection for a white listed set of methods belonging\n * to the Manifold WASM module.\n */\nexport const garbageCollectManifold = (target) => {\n    interceptMethods(target.Manifold, manifoldStaticFunctions);\n    interceptMethods(target.Manifold.prototype, manifoldMemberFunctions);\n    interceptMethods(target.CrossSection, crossSectionStaticFunctions);\n    interceptMethods(target.CrossSection.prototype, crossSectionMemberFunctions);\n    return target;\n};\n//# sourceMappingURL=garbage-collector.js.map","// Copyright 2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nexport class GLTFMaterial {\n    attributes;\n    roughness;\n    metallic;\n    baseColorFactor;\n    alpha;\n    unlit;\n    name;\n}\nexport class GLTFNode {\n    _parent;\n    manifold;\n    translation;\n    rotation;\n    scale;\n    material;\n    name;\n    constructor(parent) {\n        this._parent = parent;\n    }\n    clone(parent) {\n        const copy = new GLTFNode(parent ?? this.parent);\n        Object.assign(copy, this);\n        return copy;\n    }\n    get parent() {\n        return this._parent;\n    }\n}\nconst nodes = new Array();\n/**\n *\n * @internal\n */\nexport class GLTFNodeTracked extends GLTFNode {\n    constructor(parent) {\n        super(parent);\n        nodes.push(this);\n    }\n}\n/**\n * Get a list of GLTF nodes that have been created in this model.\n *\n * This function only works in scripts directly evaluated by the manifoldCAD\n * website or CLI. When called in an imported library it will always return an\n * empty array, and nodes created in libraries will not be included in the\n * result. This is intentional; libraries must not create geometry as a side\n * effect.\n *\n * @returns An array of GLTFNodes.\n */\nexport const getGLTFNodes = () => {\n    return nodes;\n};\n/**\n * Clear the list of cached GLTF nodes.\n *\n * This function only works in scripts directly evaluated by the manifoldCAD\n * website or CLI.  When called in an imported library it will have no\n * effect.\n */\nexport const resetGLTFNodes = () => {\n    nodes.length = 0;\n};\nexport const cleanup = () => {\n    resetGLTFNodes();\n};\n/**\n * Map various types to a flat array of GLTFNodes\n *\n * @param any An object or array of models.\n * @returns An array of GLTFNodes.\n */\nexport async function anyToGLTFNodeList(any) {\n    if (Array.isArray(any)) {\n        return await any.map(anyToGLTFNodeList)\n            .reduce(async (acc, cur) => ([...(await acc), ...(await cur)]), new Promise(resolve => resolve([])));\n    }\n    else if (any instanceof GLTFNode) {\n        const node = any;\n        if (!node.parent)\n            return [node];\n        return [await anyToGLTFNodeList(node.parent), node].flat();\n    }\n    else if (any.constructor.name === 'Manifold') {\n        const node = new GLTFNode();\n        node.manifold = any;\n        return [node];\n    }\n    throw new Error('Cannot convert model to GLTFNode!');\n}\n//# sourceMappingURL=gltf-node.js.map","\nvar Module = (() => {\n  var _scriptName = import.meta.url;\n  \n  return (\nasync function(moduleArg = {}) {\n  var moduleRtn;\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;var readyPromise=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var ENVIRONMENT_IS_WEB=typeof window==\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts==\"function\";var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\";if(ENVIRONMENT_IS_NODE){const{createRequire:createRequire}=await import(\"module\");var require=createRequire(import.meta.url)}var _ManifoldInitialized=false;Module.setup=function(){if(_ManifoldInitialized)return;_ManifoldInitialized=true;Module.initTBB();function toVec(vec,list,f=(x=>x)){if(list){for(let x of list){vec.push_back(f(x))}}return vec}function fromVec(vec,f=(x=>x)){const result=[];const size=vec.size();for(let i=0;i<size;i++)result.push(f(vec.get(i)));return result}function vec2polygons(vec,f=(x=>x)){const result=[];const nPoly=vec.size();for(let i=0;i<nPoly;i++){const v=vec.get(i);const nPts=v.size();const poly=[];for(let j=0;j<nPts;j++){poly.push(f(v.get(j)))}result.push(poly)}return result}function polygons2vec(polygons){if(polygons[0].length<3){polygons=[polygons]}return toVec(new Module.Vector2_vec2,polygons,poly=>toVec(new Module.Vector_vec2,poly,p=>{if(p instanceof Array)return{x:p[0],y:p[1]};return p}))}function disposePolygons(polygonsVec){for(let i=0;i<polygonsVec.size();i++)polygonsVec.get(i).delete();polygonsVec.delete()}function vararg2vec2(vec){if(vec[0]instanceof Array)return{x:vec[0][0],y:vec[0][1]};if(typeof vec[0]==\"number\")return{x:vec[0]||0,y:vec[1]||0};return vec[0]}function vararg2vec3(vec){if(vec[0]instanceof Array)return{x:vec[0][0],y:vec[0][1],z:vec[0][2]};if(typeof vec[0]==\"number\")return{x:vec[0]||0,y:vec[1]||0,z:vec[2]||0};return vec[0]}function fillRuleToInt(fillRule){return fillRule==\"EvenOdd\"?0:fillRule==\"NonZero\"?1:fillRule==\"Negative\"?3:2}function joinTypeToInt(joinType){return joinType==\"Round\"?1:joinType==\"Miter\"?2:0}const CrossSectionCtor=Module.CrossSection;function cross(polygons,fillRule=\"Positive\"){if(polygons instanceof CrossSectionCtor){return polygons}else{const polygonsVec=polygons2vec(polygons);const cs=new CrossSectionCtor(polygonsVec,fillRuleToInt(fillRule));disposePolygons(polygonsVec);return cs}}Module.CrossSection.prototype.translate=function(...vec){return this._Translate(vararg2vec2(vec))};Module.CrossSection.prototype.scale=function(vec){if(typeof vec==\"number\"){return this._Scale({x:vec,y:vec})}return this._Scale(vararg2vec2([vec]))};Module.CrossSection.prototype.mirror=function(vec){return this._Mirror(vararg2vec2([vec]))};Module.CrossSection.prototype.warp=function(func){const wasmFuncPtr=addFunction(function(vec2Ptr){const x=getValue(vec2Ptr,\"double\");const y=getValue(vec2Ptr+8,\"double\");const vert=[x,y];func(vert);setValue(vec2Ptr,vert[0],\"double\");setValue(vec2Ptr+8,vert[1],\"double\")},\"vi\");const out=this._Warp(wasmFuncPtr);removeFunction(wasmFuncPtr);return out};Module.CrossSection.prototype.decompose=function(){const vec=this._Decompose();const result=fromVec(vec);vec.delete();return result};Module.CrossSection.prototype.bounds=function(){const result=this._Bounds();return{min:[\"x\",\"y\"].map(f=>result.min[f]),max:[\"x\",\"y\"].map(f=>result.max[f])}};Module.CrossSection.prototype.offset=function(delta,joinType=\"Round\",miterLimit=2,circularSegments=0){return this._Offset(delta,joinTypeToInt(joinType),miterLimit,circularSegments)};Module.CrossSection.prototype.simplify=function(epsilon=1e-6){return this._Simplify(epsilon)};Module.CrossSection.prototype.extrude=function(height,nDivisions=0,twistDegrees=0,scaleTop=[1,1],center=false){scaleTop=vararg2vec2([scaleTop]);const man=Module._Extrude(this._ToPolygons(),height,nDivisions,twistDegrees,scaleTop);return center?man.translate([0,0,-height/2]):man};Module.CrossSection.prototype.revolve=function(circularSegments=0,revolveDegrees=360){return Module._Revolve(this._ToPolygons(),circularSegments,revolveDegrees)};Module.CrossSection.prototype.add=function(other){return this._add(cross(other))};Module.CrossSection.prototype.subtract=function(other){return this._subtract(cross(other))};Module.CrossSection.prototype.intersect=function(other){return this._intersect(cross(other))};Module.CrossSection.prototype.toPolygons=function(){const vec=this._ToPolygons();const result=vec2polygons(vec,v=>[v.x,v.y]);vec.delete();return result};Module.Manifold.prototype.smoothOut=function(minSharpAngle=60,minSmoothness=0){return this._SmoothOut(minSharpAngle,minSmoothness)};Module.Manifold.prototype.warp=function(func){const wasmFuncPtr=addFunction(function(vec3Ptr){const x=getValue(vec3Ptr,\"double\");const y=getValue(vec3Ptr+8,\"double\");const z=getValue(vec3Ptr+16,\"double\");const vert=[x,y,z];func(vert);setValue(vec3Ptr,vert[0],\"double\");setValue(vec3Ptr+8,vert[1],\"double\");setValue(vec3Ptr+16,vert[2],\"double\")},\"vi\");const out=this._Warp(wasmFuncPtr);removeFunction(wasmFuncPtr);const status=out.status();if(status!==\"NoError\"){throw new Module.ManifoldError(status)}return out};Module.Manifold.prototype.calculateNormals=function(normalIdx,minSharpAngle=60){return this._CalculateNormals(normalIdx,minSharpAngle)};Module.Manifold.prototype.setProperties=function(numProp,func){const oldNumProp=this.numProp();const wasmFuncPtr=addFunction(function(newPtr,vec3Ptr,oldPtr){const newProp=[];for(let i=0;i<numProp;++i){newProp[i]=getValue(newPtr+8*i,\"double\")}const pos=[];for(let i=0;i<3;++i){pos[i]=getValue(vec3Ptr+8*i,\"double\")}const oldProp=[];for(let i=0;i<oldNumProp;++i){oldProp[i]=getValue(oldPtr+8*i,\"double\")}func(newProp,pos,oldProp);for(let i=0;i<numProp;++i){setValue(newPtr+8*i,newProp[i],\"double\")}},\"viii\");const out=this._SetProperties(numProp,wasmFuncPtr);removeFunction(wasmFuncPtr);return out};Module.Manifold.prototype.translate=function(...vec){return this._Translate(vararg2vec3(vec))};Module.Manifold.prototype.rotate=function(xOrVec,y,z){if(Array.isArray(xOrVec)){return this._Rotate(...xOrVec)}else{return this._Rotate(xOrVec,y||0,z||0)}};Module.Manifold.prototype.scale=function(vec){if(typeof vec==\"number\"){return this._Scale({x:vec,y:vec,z:vec})}return this._Scale(vararg2vec3([vec]))};Module.Manifold.prototype.mirror=function(vec){return this._Mirror(vararg2vec3([vec]))};Module.Manifold.prototype.trimByPlane=function(normal,offset=0){return this._TrimByPlane(vararg2vec3([normal]),offset)};Module.Manifold.prototype.slice=function(height=0){const polygonsVec=this._Slice(height);const result=new CrossSectionCtor(polygonsVec,fillRuleToInt(\"Positive\"));disposePolygons(polygonsVec);return result};Module.Manifold.prototype.project=function(){const polygonsVec=this._Project();const result=new CrossSectionCtor(polygonsVec,fillRuleToInt(\"Positive\"));disposePolygons(polygonsVec);return result};Module.Manifold.prototype.split=function(manifold){const vec=this._Split(manifold);const result=fromVec(vec);vec.delete();return result};Module.Manifold.prototype.splitByPlane=function(normal,offset=0){const vec=this._SplitByPlane(vararg2vec3([normal]),offset);const result=fromVec(vec);vec.delete();return result};Module.Manifold.prototype.decompose=function(){const vec=this._Decompose();const result=fromVec(vec);vec.delete();return result};Module.Manifold.prototype.boundingBox=function(){const result=this._boundingBox();return{min:[\"x\",\"y\",\"z\"].map(f=>result.min[f]),max:[\"x\",\"y\",\"z\"].map(f=>result.max[f])}};class Mesh{constructor({numProp:numProp=3,triVerts:triVerts=new Uint32Array,vertProperties:vertProperties=new Float32Array,mergeFromVert:mergeFromVert,mergeToVert:mergeToVert,runIndex:runIndex,runOriginalID:runOriginalID,faceID:faceID,halfedgeTangent:halfedgeTangent,runTransform:runTransform}={}){this.numProp=numProp;this.triVerts=triVerts;this.vertProperties=vertProperties;this.mergeFromVert=mergeFromVert;this.mergeToVert=mergeToVert;this.runIndex=runIndex;this.runOriginalID=runOriginalID;this.faceID=faceID;this.halfedgeTangent=halfedgeTangent;this.runTransform=runTransform}get numTri(){return this.triVerts.length/3}get numVert(){return this.vertProperties.length/this.numProp}get numRun(){return this.runOriginalID.length}merge(){const{changed:changed,mesh:mesh}=Module._Merge(this);Object.assign(this,{...mesh});return changed}verts(tri){return this.triVerts.subarray(3*tri,3*(tri+1))}position(vert){return this.vertProperties.subarray(this.numProp*vert,this.numProp*vert+3)}extras(vert){return this.vertProperties.subarray(this.numProp*vert+3,this.numProp*(vert+1))}tangent(halfedge){return this.halfedgeTangent.subarray(4*halfedge,4*(halfedge+1))}transform(run){const mat4=new Array(16);for(const col of[0,1,2,3]){for(const row of[0,1,2]){mat4[4*col+row]=this.runTransform[12*run+3*col+row]}}mat4[15]=1;return mat4}}Module.Mesh=Mesh;Module.Manifold.prototype.getMesh=function(normalIdx=-1){return new Mesh(this._GetMeshJS(normalIdx))};Module.ManifoldError=function ManifoldError(code,...args){let message=\"Unknown error\";switch(code){case\"NonFiniteVertex\":message=\"Non-finite vertex\";break;case\"NotManifold\":message=\"Not manifold\";break;case\"VertexOutOfBounds\":message=\"Vertex index out of bounds\";break;case\"PropertiesWrongLength\":message=\"Properties have wrong length\";break;case\"MissingPositionProperties\":message=\"Less than three properties\";break;case\"MergeVectorsDifferentLengths\":message=\"Merge vectors have different lengths\";break;case\"MergeIndexOutOfBounds\":message=\"Merge index out of bounds\";break;case\"TransformWrongLength\":message=\"Transform vector has wrong length\";break;case\"RunIndexWrongLength\":message=\"Run index vector has wrong length\";break;case\"FaceIDWrongLength\":message=\"Face ID vector has wrong length\";case\"InvalidConstruction\":message=\"Manifold constructed with invalid parameters\"}const base=Error.apply(this,[message,...args]);base.name=this.name=\"ManifoldError\";this.message=base.message;this.stack=base.stack;this.code=code};Module.ManifoldError.prototype=Object.create(Error.prototype,{constructor:{value:Module.ManifoldError,writable:true,configurable:true}});Module.CrossSection=function(polygons,fillRule=\"Positive\"){const polygonsVec=polygons2vec(polygons);const cs=new CrossSectionCtor(polygonsVec,fillRuleToInt(fillRule));disposePolygons(polygonsVec);return cs};Module.CrossSection.ofPolygons=function(polygons,fillRule=\"Positive\"){return new Module.CrossSection(polygons,fillRule)};Module.CrossSection.square=function(...args){let size=undefined;if(args.length==0)size={x:1,y:1};else if(typeof args[0]==\"number\")size={x:args[0],y:args[0]};else size=vararg2vec2(args);const center=args[1]||false;return Module._Square(size,center)};Module.CrossSection.circle=function(radius,circularSegments=0){return Module._Circle(radius,circularSegments)};function crossSectionBatchbool(name){return function(...args){if(args.length==1)args=args[0];const v=new Module.Vector_crossSection;for(const cs of args)v.push_back(cross(cs));const result=Module[\"_crossSection\"+name](v);v.delete();return result}}Module.CrossSection.compose=crossSectionBatchbool(\"Compose\");Module.CrossSection.union=crossSectionBatchbool(\"UnionN\");Module.CrossSection.difference=crossSectionBatchbool(\"DifferenceN\");Module.CrossSection.intersection=crossSectionBatchbool(\"IntersectionN\");function pushVec2(vec,ps){toVec(vec,ps,p=>{if(p instanceof Array)return{x:p[0],y:p[1]};return p})}Module.CrossSection.hull=function(...args){if(args.length==1)args=args[0];let pts=new Module.Vector_vec2;for(const cs of args){if(cs instanceof CrossSectionCtor){Module._crossSectionCollectVertices(pts,cs)}else if(cs instanceof Array&&cs.length==2&&typeof cs[0]==\"number\"){pts.push_back({x:cs[0],y:cs[1]})}else if(cs.x){pts.push_back(cs)}else{const wrap=cs[0].length==2&&typeof cs[0][0]==\"number\"||cs[0].x;const polys=wrap?[cs]:cs;for(const poly of polys)pushVec2(pts,poly)}}const result=Module._crossSectionHullPoints(pts);pts.delete();return result};Module.CrossSection.prototype=Object.create(CrossSectionCtor.prototype);Object.defineProperty(Module.CrossSection,Symbol.hasInstance,{get:()=>t=>t instanceof CrossSectionCtor});const ManifoldCtor=Module.Manifold;Module.Manifold=function(mesh){const manifold=new ManifoldCtor(mesh);const status=manifold.status();if(status!==\"NoError\"){throw new Module.ManifoldError(status)}return manifold};Module.Manifold.ofMesh=function(mesh){return new Module.Manifold(mesh)};Module.Manifold.tetrahedron=function(){return Module._Tetrahedron()};Module.Manifold.cube=function(...args){let size=undefined;if(args.length==0)size={x:1,y:1,z:1};else if(typeof args[0]==\"number\")size={x:args[0],y:args[0],z:args[0]};else size=vararg2vec3(args);const center=args[1]||false;return Module._Cube(size,center)};Module.Manifold.cylinder=function(height,radiusLow,radiusHigh=-1,circularSegments=0,center=false){return Module._Cylinder(height,radiusLow,radiusHigh,circularSegments,center)};Module.Manifold.sphere=function(radius,circularSegments=0){return Module._Sphere(radius,circularSegments)};Module.Manifold.smooth=function(mesh,sharpenedEdges=[]){const sharp=new Module.Vector_smoothness;toVec(sharp,sharpenedEdges);const result=Module._Smooth(mesh,sharp);sharp.delete();return result};Module.Manifold.extrude=function(polygons,height,nDivisions=0,twistDegrees=0,scaleTop=[1,1],center=false){const cs=polygons instanceof CrossSectionCtor?polygons:Module.CrossSection(polygons,\"Positive\");return cs.extrude(height,nDivisions,twistDegrees,scaleTop,center)};Module.Manifold.revolve=function(polygons,circularSegments=0,revolveDegrees=360){const cs=polygons instanceof CrossSectionCtor?polygons:Module.CrossSection(polygons,\"Positive\");return cs.revolve(circularSegments,revolveDegrees)};Module.Manifold.reserveIDs=function(n){return Module._ReserveIDs(n)};Module.Manifold.compose=function(manifolds){const vec=new Module.Vector_manifold;toVec(vec,manifolds);const result=Module._manifoldCompose(vec);vec.delete();return result};function manifoldBatchbool(name){return function(...args){if(args.length==1)args=args[0];const v=new Module.Vector_manifold;for(const m of args)v.push_back(m);const result=Module[\"_manifold\"+name+\"N\"](v);v.delete();return result}}Module.Manifold.union=manifoldBatchbool(\"Union\");Module.Manifold.difference=manifoldBatchbool(\"Difference\");Module.Manifold.intersection=manifoldBatchbool(\"Intersection\");Module.Manifold.levelSet=function(sdf,bounds,edgeLength,level=0,tolerance=-1){const bounds2={min:{x:bounds.min[0],y:bounds.min[1],z:bounds.min[2]},max:{x:bounds.max[0],y:bounds.max[1],z:bounds.max[2]}};const wasmFuncPtr=addFunction(function(vec3Ptr){const x=getValue(vec3Ptr,\"double\");const y=getValue(vec3Ptr+8,\"double\");const z=getValue(vec3Ptr+16,\"double\");const vert=[x,y,z];return sdf(vert)},\"di\");const out=Module._LevelSet(wasmFuncPtr,bounds2,edgeLength,level,tolerance);removeFunction(wasmFuncPtr);return out};function pushVec3(vec,ps){toVec(vec,ps,p=>{if(p instanceof Array)return{x:p[0],y:p[1],z:p[2]};return p})}Module.Manifold.hull=function(...args){if(args.length==1)args=args[0];let pts=new Module.Vector_vec3;for(const m of args){if(m instanceof ManifoldCtor){Module._manifoldCollectVertices(pts,m)}else if(m instanceof Array&&m.length==3&&typeof m[0]==\"number\"){pts.push_back({x:m[0],y:m[1],z:m[2]})}else if(m.x){pts.push_back(m)}else{pushVec3(pts,m)}}const result=Module._manifoldHullPoints(pts);pts.delete();return result};Module.Manifold.prototype=Object.create(ManifoldCtor.prototype);Object.defineProperty(Module.Manifold,Symbol.hasInstance,{get:()=>t=>t instanceof ManifoldCtor});Module.triangulate=function(polygons,epsilon=-1,allowConvex=true){const polygonsVec=polygons2vec(polygons);const result=fromVec(Module._Triangulate(polygonsVec,epsilon,allowConvex),x=>[x[0],x[1],x[2]]);disposePolygons(polygonsVec);return result}};var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var readAsync,readBinary;if(ENVIRONMENT_IS_NODE){var fs=require(\"fs\");var nodePath=require(\"path\");scriptDirectory=require(\"url\").fileURLToPath(new URL(\"./\",import.meta.url));readBinary=filename=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);var ret=fs.readFileSync(filename);return ret};readAsync=(filename,binary=true)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);return new Promise((resolve,reject)=>{fs.readFile(filename,binary?undefined:\"utf8\",(err,data)=>{if(err)reject(err);else resolve(binary?data.buffer:data)})})};if(!Module[\"thisProgram\"]&&process.argv.length>1){thisProgram=process.argv[1].replace(/\\\\/g,\"/\")}arguments_=process.argv.slice(2);quit_=(status,toThrow)=>{process.exitCode=status;throw toThrow}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptName){scriptDirectory=_scriptName}if(scriptDirectory.startsWith(\"blob:\")){scriptDirectory=\"\"}else{scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}{if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=url=>{if(isFileURI(url)){return new Promise((reject,resolve)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){resolve(xhr.response)}reject(xhr.status)};xhr.onerror=reject;xhr.send(null)})}return fetch(url,{credentials:\"same-origin\"}).then(response=>{if(response.ok){return response.arrayBuffer()}return Promise.reject(new Error(response.status+\" : \"+response.url))})}}}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var wasmMemory;var ABORT=false;var EXITSTATUS;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b)}var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;Module[\"monitorRunDependencies\"]?.(runDependencies)}function removeRunDependency(id){runDependencies--;Module[\"monitorRunDependencies\"]?.(runDependencies);if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){Module[\"onAbort\"]?.(what);what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";var isDataURI=filename=>filename.startsWith(dataURIPrefix);var isFileURI=filename=>filename.startsWith(\"file://\");function findWasmBinary(){if(Module[\"locateFile\"]){var f=\"manifold.wasm\";if(!isDataURI(f)){return locateFile(f)}return f}return new URL(\"manifold.wasm\",import.meta.url).href}var wasmBinaryFile;function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary){return readAsync(binaryFile).then(response=>new Uint8Array(response),()=>getBinarySync(binaryFile))}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&!isFileURI(binaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(`wasm streaming compile failed: ${reason}`);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function getWasmImports(){return{a:wasmImports}}function createWasm(){var info=getWasmImports();function receiveInstance(instance,module){wasmExports=instance.exports;wasmExports=applySignatureConversions(wasmExports);wasmMemory=wasmExports[\"J\"];updateMemoryViews();wasmTable=wasmExports[\"M\"];addOnInit(wasmExports[\"K\"]);removeRunDependency(\"wasm-instantiate\");return wasmExports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(`Module.instantiateWasm callback failed with error: ${e}`);readyPromiseReject(e)}}if(!wasmBinaryFile)wasmBinaryFile=findWasmBinary();instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};function getValue(ptr,type=\"i8\"){if(type.endsWith(\"*\"))type=\"*\";switch(type){case\"i1\":return HEAP8[ptr>>>0];case\"i8\":return HEAP8[ptr>>>0];case\"i16\":return HEAP16[ptr>>>1>>>0];case\"i32\":return HEAP32[ptr>>>2>>>0];case\"i64\":abort(\"to do getValue(i64) use WASM_BIGINT\");case\"float\":return HEAPF32[ptr>>>2>>>0];case\"double\":return HEAPF64[ptr>>>3>>>0];case\"*\":return HEAPU32[ptr>>>2>>>0];default:abort(`invalid type for getValue: ${type}`)}}var noExitRuntime=Module[\"noExitRuntime\"]||true;function setValue(ptr,value,type=\"i8\"){if(type.endsWith(\"*\"))type=\"*\";switch(type){case\"i1\":HEAP8[ptr>>>0]=value;break;case\"i8\":HEAP8[ptr>>>0]=value;break;case\"i16\":HEAP16[ptr>>>1>>>0]=value;break;case\"i32\":HEAP32[ptr>>>2>>>0]=value;break;case\"i64\":abort(\"to do setValue(i64) use WASM_BIGINT\");case\"float\":HEAPF32[ptr>>>2>>>0]=value;break;case\"double\":HEAPF64[ptr>>>3>>>0]=value;break;case\"*\":HEAPU32[ptr>>>2>>>0]=value;break;default:abort(`invalid type for setValue: ${type}`)}}class ExceptionInfo{constructor(excPtr){this.excPtr=excPtr;this.ptr=excPtr-24}set_type(type){HEAPU32[this.ptr+4>>>2>>>0]=type}get_type(){return HEAPU32[this.ptr+4>>>2>>>0]}set_destructor(destructor){HEAPU32[this.ptr+8>>>2>>>0]=destructor}get_destructor(){return HEAPU32[this.ptr+8>>>2>>>0]}set_caught(caught){caught=caught?1:0;HEAP8[this.ptr+12>>>0]=caught}get_caught(){return HEAP8[this.ptr+12>>>0]!=0}set_rethrown(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>>0]=rethrown}get_rethrown(){return HEAP8[this.ptr+13>>>0]!=0}init(type,destructor){this.set_adjusted_ptr(0);this.set_type(type);this.set_destructor(destructor)}set_adjusted_ptr(adjustedPtr){HEAPU32[this.ptr+16>>>2>>>0]=adjustedPtr}get_adjusted_ptr(){return HEAPU32[this.ptr+16>>>2>>>0]}get_exception_ptr(){var isPointer=___cxa_is_pointer_type(this.get_type());if(isPointer){return HEAPU32[this.excPtr>>>2>>>0]}var adjusted=this.get_adjusted_ptr();if(adjusted!==0)return adjusted;return this.excPtr}}var exceptionLast=0;var uncaughtExceptionCount=0;function ___cxa_throw(ptr,type,destructor){ptr>>>=0;type>>>=0;destructor>>>=0;var info=new ExceptionInfo(ptr);info.init(type,destructor);exceptionLast=ptr;uncaughtExceptionCount++;throw exceptionLast}var __abort_js=()=>{abort(\"\")};var structRegistrations={};var runDestructors=destructors=>{while(destructors.length){var ptr=destructors.pop();var del=destructors.pop();del(ptr)}};function readPointer(pointer){return this[\"fromWireType\"](HEAPU32[pointer>>>2>>>0])}var awaitingDependencies={};var registeredTypes={};var typeDependencies={};var InternalError;var throwInternalError=message=>{throw new InternalError(message)};var whenDependentTypesAreResolved=(myTypes,dependentTypes,getTypeConverters)=>{myTypes.forEach(function(type){typeDependencies[type]=dependentTypes});function onComplete(typeConverters){var myTypeConverters=getTypeConverters(typeConverters);if(myTypeConverters.length!==myTypes.length){throwInternalError(\"Mismatched type converter count\")}for(var i=0;i<myTypes.length;++i){registerType(myTypes[i],myTypeConverters[i])}}var typeConverters=new Array(dependentTypes.length);var unregisteredTypes=[];var registered=0;dependentTypes.forEach((dt,i)=>{if(registeredTypes.hasOwnProperty(dt)){typeConverters[i]=registeredTypes[dt]}else{unregisteredTypes.push(dt);if(!awaitingDependencies.hasOwnProperty(dt)){awaitingDependencies[dt]=[]}awaitingDependencies[dt].push(()=>{typeConverters[i]=registeredTypes[dt];++registered;if(registered===unregisteredTypes.length){onComplete(typeConverters)}})}});if(0===unregisteredTypes.length){onComplete(typeConverters)}};var __embind_finalize_value_object=function(structType){structType>>>=0;var reg=structRegistrations[structType];delete structRegistrations[structType];var rawConstructor=reg.rawConstructor;var rawDestructor=reg.rawDestructor;var fieldRecords=reg.fields;var fieldTypes=fieldRecords.map(field=>field.getterReturnType).concat(fieldRecords.map(field=>field.setterArgumentType));whenDependentTypesAreResolved([structType],fieldTypes,fieldTypes=>{var fields={};fieldRecords.forEach((field,i)=>{var fieldName=field.fieldName;var getterReturnType=fieldTypes[i];var getter=field.getter;var getterContext=field.getterContext;var setterArgumentType=fieldTypes[i+fieldRecords.length];var setter=field.setter;var setterContext=field.setterContext;fields[fieldName]={read:ptr=>getterReturnType[\"fromWireType\"](getter(getterContext,ptr)),write:(ptr,o)=>{var destructors=[];setter(setterContext,ptr,setterArgumentType[\"toWireType\"](destructors,o));runDestructors(destructors)}}});return[{name:reg.name,fromWireType:ptr=>{var rv={};for(var i in fields){rv[i]=fields[i].read(ptr)}rawDestructor(ptr);return rv},toWireType:(destructors,o)=>{for(var fieldName in fields){if(!(fieldName in o)){throw new TypeError(`Missing field: \"${fieldName}\"`)}}var ptr=rawConstructor();for(fieldName in fields){fields[fieldName].write(ptr,o[fieldName])}if(destructors!==null){destructors.push(rawDestructor,ptr)}return ptr},argPackAdvance:GenericWireTypeSize,readValueFromPointer:readPointer,destructorFunction:rawDestructor}]})};function __embind_register_bigint(primitiveType,name,size,minRange,maxRange){primitiveType>>>=0;name>>>=0;size>>>=0}var embind_init_charCodes=()=>{var codes=new Array(256);for(var i=0;i<256;++i){codes[i]=String.fromCharCode(i)}embind_charCodes=codes};var embind_charCodes;var readLatin1String=ptr=>{var ret=\"\";var c=ptr;while(HEAPU8[c>>>0]){ret+=embind_charCodes[HEAPU8[c++>>>0]]}return ret};var BindingError;var throwBindingError=message=>{throw new BindingError(message)};function sharedRegisterType(rawType,registeredInstance,options={}){var name=registeredInstance.name;if(!rawType){throwBindingError(`type \"${name}\" must have a positive integer typeid pointer`)}if(registeredTypes.hasOwnProperty(rawType)){if(options.ignoreDuplicateRegistrations){return}else{throwBindingError(`Cannot register type '${name}' twice`)}}registeredTypes[rawType]=registeredInstance;delete typeDependencies[rawType];if(awaitingDependencies.hasOwnProperty(rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType];callbacks.forEach(cb=>cb())}}function registerType(rawType,registeredInstance,options={}){if(!(\"argPackAdvance\"in registeredInstance)){throw new TypeError(\"registerType registeredInstance requires argPackAdvance\")}return sharedRegisterType(rawType,registeredInstance,options)}var GenericWireTypeSize=8;function __embind_register_bool(rawType,name,trueValue,falseValue){rawType>>>=0;name>>>=0;name=readLatin1String(name);registerType(rawType,{name:name,fromWireType:function(wt){return!!wt},toWireType:function(destructors,o){return o?trueValue:falseValue},argPackAdvance:GenericWireTypeSize,readValueFromPointer:function(pointer){return this[\"fromWireType\"](HEAPU8[pointer>>>0])},destructorFunction:null})}var shallowCopyInternalPointer=o=>({count:o.count,deleteScheduled:o.deleteScheduled,preservePointerOnDelete:o.preservePointerOnDelete,ptr:o.ptr,ptrType:o.ptrType,smartPtr:o.smartPtr,smartPtrType:o.smartPtrType});var throwInstanceAlreadyDeleted=obj=>{function getInstanceTypeName(handle){return handle.$$.ptrType.registeredClass.name}throwBindingError(getInstanceTypeName(obj)+\" instance already deleted\")};var finalizationRegistry=false;var detachFinalizer=handle=>{};var runDestructor=$$=>{if($$.smartPtr){$$.smartPtrType.rawDestructor($$.smartPtr)}else{$$.ptrType.registeredClass.rawDestructor($$.ptr)}};var releaseClassHandle=$$=>{$$.count.value-=1;var toDelete=0===$$.count.value;if(toDelete){runDestructor($$)}};var downcastPointer=(ptr,ptrClass,desiredClass)=>{if(ptrClass===desiredClass){return ptr}if(undefined===desiredClass.baseClass){return null}var rv=downcastPointer(ptr,ptrClass,desiredClass.baseClass);if(rv===null){return null}return desiredClass.downcast(rv)};var registeredPointers={};var getInheritedInstanceCount=()=>Object.keys(registeredInstances).length;var getLiveInheritedInstances=()=>{var rv=[];for(var k in registeredInstances){if(registeredInstances.hasOwnProperty(k)){rv.push(registeredInstances[k])}}return rv};var deletionQueue=[];var flushPendingDeletes=()=>{while(deletionQueue.length){var obj=deletionQueue.pop();obj.$$.deleteScheduled=false;obj[\"delete\"]()}};var delayFunction;var setDelayFunction=fn=>{delayFunction=fn;if(deletionQueue.length&&delayFunction){delayFunction(flushPendingDeletes)}};var init_embind=()=>{Module[\"getInheritedInstanceCount\"]=getInheritedInstanceCount;Module[\"getLiveInheritedInstances\"]=getLiveInheritedInstances;Module[\"flushPendingDeletes\"]=flushPendingDeletes;Module[\"setDelayFunction\"]=setDelayFunction};var registeredInstances={};var getBasestPointer=(class_,ptr)=>{if(ptr===undefined){throwBindingError(\"ptr should not be undefined\")}while(class_.baseClass){ptr=class_.upcast(ptr);class_=class_.baseClass}return ptr};var getInheritedInstance=(class_,ptr)=>{ptr=getBasestPointer(class_,ptr);return registeredInstances[ptr]};var makeClassHandle=(prototype,record)=>{if(!record.ptrType||!record.ptr){throwInternalError(\"makeClassHandle requires ptr and ptrType\")}var hasSmartPtrType=!!record.smartPtrType;var hasSmartPtr=!!record.smartPtr;if(hasSmartPtrType!==hasSmartPtr){throwInternalError(\"Both smartPtrType and smartPtr must be specified\")}record.count={value:1};return attachFinalizer(Object.create(prototype,{$$:{value:record,writable:true}}))};function RegisteredPointer_fromWireType(ptr){var rawPointer=this.getPointee(ptr);if(!rawPointer){this.destructor(ptr);return null}var registeredInstance=getInheritedInstance(this.registeredClass,rawPointer);if(undefined!==registeredInstance){if(0===registeredInstance.$$.count.value){registeredInstance.$$.ptr=rawPointer;registeredInstance.$$.smartPtr=ptr;return registeredInstance[\"clone\"]()}else{var rv=registeredInstance[\"clone\"]();this.destructor(ptr);return rv}}function makeDefaultHandle(){if(this.isSmartPointer){return makeClassHandle(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:rawPointer,smartPtrType:this,smartPtr:ptr})}else{return makeClassHandle(this.registeredClass.instancePrototype,{ptrType:this,ptr:ptr})}}var actualType=this.registeredClass.getActualType(rawPointer);var registeredPointerRecord=registeredPointers[actualType];if(!registeredPointerRecord){return makeDefaultHandle.call(this)}var toType;if(this.isConst){toType=registeredPointerRecord.constPointerType}else{toType=registeredPointerRecord.pointerType}var dp=downcastPointer(rawPointer,this.registeredClass,toType.registeredClass);if(dp===null){return makeDefaultHandle.call(this)}if(this.isSmartPointer){return makeClassHandle(toType.registeredClass.instancePrototype,{ptrType:toType,ptr:dp,smartPtrType:this,smartPtr:ptr})}else{return makeClassHandle(toType.registeredClass.instancePrototype,{ptrType:toType,ptr:dp})}}var attachFinalizer=handle=>{if(\"undefined\"===typeof FinalizationRegistry){attachFinalizer=handle=>handle;return handle}finalizationRegistry=new FinalizationRegistry(info=>{releaseClassHandle(info.$$)});attachFinalizer=handle=>{var $$=handle.$$;var hasSmartPtr=!!$$.smartPtr;if(hasSmartPtr){var info={$$:$$};finalizationRegistry.register(handle,info,handle)}return handle};detachFinalizer=handle=>finalizationRegistry.unregister(handle);return attachFinalizer(handle)};var init_ClassHandle=()=>{Object.assign(ClassHandle.prototype,{isAliasOf(other){if(!(this instanceof ClassHandle)){return false}if(!(other instanceof ClassHandle)){return false}var leftClass=this.$$.ptrType.registeredClass;var left=this.$$.ptr;other.$$=other.$$;var rightClass=other.$$.ptrType.registeredClass;var right=other.$$.ptr;while(leftClass.baseClass){left=leftClass.upcast(left);leftClass=leftClass.baseClass}while(rightClass.baseClass){right=rightClass.upcast(right);rightClass=rightClass.baseClass}return leftClass===rightClass&&left===right},clone(){if(!this.$$.ptr){throwInstanceAlreadyDeleted(this)}if(this.$$.preservePointerOnDelete){this.$$.count.value+=1;return this}else{var clone=attachFinalizer(Object.create(Object.getPrototypeOf(this),{$$:{value:shallowCopyInternalPointer(this.$$)}}));clone.$$.count.value+=1;clone.$$.deleteScheduled=false;return clone}},delete(){if(!this.$$.ptr){throwInstanceAlreadyDeleted(this)}if(this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete){throwBindingError(\"Object already scheduled for deletion\")}detachFinalizer(this);releaseClassHandle(this.$$);if(!this.$$.preservePointerOnDelete){this.$$.smartPtr=undefined;this.$$.ptr=undefined}},isDeleted(){return!this.$$.ptr},deleteLater(){if(!this.$$.ptr){throwInstanceAlreadyDeleted(this)}if(this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete){throwBindingError(\"Object already scheduled for deletion\")}deletionQueue.push(this);if(deletionQueue.length===1&&delayFunction){delayFunction(flushPendingDeletes)}this.$$.deleteScheduled=true;return this}})};function ClassHandle(){}var createNamedFunction=(name,body)=>Object.defineProperty(body,\"name\",{value:name});var ensureOverloadTable=(proto,methodName,humanName)=>{if(undefined===proto[methodName].overloadTable){var prevFunc=proto[methodName];proto[methodName]=function(...args){if(!proto[methodName].overloadTable.hasOwnProperty(args.length)){throwBindingError(`Function '${humanName}' called with an invalid number of arguments (${args.length}) - expects one of (${proto[methodName].overloadTable})!`)}return proto[methodName].overloadTable[args.length].apply(this,args)};proto[methodName].overloadTable=[];proto[methodName].overloadTable[prevFunc.argCount]=prevFunc}};var exposePublicSymbol=(name,value,numArguments)=>{if(Module.hasOwnProperty(name)){if(undefined===numArguments||undefined!==Module[name].overloadTable&&undefined!==Module[name].overloadTable[numArguments]){throwBindingError(`Cannot register public name '${name}' twice`)}ensureOverloadTable(Module,name,name);if(Module.hasOwnProperty(numArguments)){throwBindingError(`Cannot register multiple overloads of a function with the same number of arguments (${numArguments})!`)}Module[name].overloadTable[numArguments]=value}else{Module[name]=value;if(undefined!==numArguments){Module[name].numArguments=numArguments}}};var char_0=48;var char_9=57;var makeLegalFunctionName=name=>{if(undefined===name){return\"_unknown\"}name=name.replace(/[^a-zA-Z0-9_]/g,\"$\");var f=name.charCodeAt(0);if(f>=char_0&&f<=char_9){return`_${name}`}return name};function RegisteredClass(name,constructor,instancePrototype,rawDestructor,baseClass,getActualType,upcast,downcast){this.name=name;this.constructor=constructor;this.instancePrototype=instancePrototype;this.rawDestructor=rawDestructor;this.baseClass=baseClass;this.getActualType=getActualType;this.upcast=upcast;this.downcast=downcast;this.pureVirtualFunctions=[]}var upcastPointer=(ptr,ptrClass,desiredClass)=>{while(ptrClass!==desiredClass){if(!ptrClass.upcast){throwBindingError(`Expected null or instance of ${desiredClass.name}, got an instance of ${ptrClass.name}`)}ptr=ptrClass.upcast(ptr);ptrClass=ptrClass.baseClass}return ptr};function constNoSmartPtrRawPointerToWireType(destructors,handle){if(handle===null){if(this.isReference){throwBindingError(`null is not a valid ${this.name}`)}return 0}if(!handle.$$){throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`)}if(!handle.$$.ptr){throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`)}var handleClass=handle.$$.ptrType.registeredClass;var ptr=upcastPointer(handle.$$.ptr,handleClass,this.registeredClass);return ptr}function genericPointerToWireType(destructors,handle){var ptr;if(handle===null){if(this.isReference){throwBindingError(`null is not a valid ${this.name}`)}if(this.isSmartPointer){ptr=this.rawConstructor();if(destructors!==null){destructors.push(this.rawDestructor,ptr)}return ptr}else{return 0}}if(!handle||!handle.$$){throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`)}if(!handle.$$.ptr){throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`)}if(!this.isConst&&handle.$$.ptrType.isConst){throwBindingError(`Cannot convert argument of type ${handle.$$.smartPtrType?handle.$$.smartPtrType.name:handle.$$.ptrType.name} to parameter type ${this.name}`)}var handleClass=handle.$$.ptrType.registeredClass;ptr=upcastPointer(handle.$$.ptr,handleClass,this.registeredClass);if(this.isSmartPointer){if(undefined===handle.$$.smartPtr){throwBindingError(\"Passing raw pointer to smart pointer is illegal\")}switch(this.sharingPolicy){case 0:if(handle.$$.smartPtrType===this){ptr=handle.$$.smartPtr}else{throwBindingError(`Cannot convert argument of type ${handle.$$.smartPtrType?handle.$$.smartPtrType.name:handle.$$.ptrType.name} to parameter type ${this.name}`)}break;case 1:ptr=handle.$$.smartPtr;break;case 2:if(handle.$$.smartPtrType===this){ptr=handle.$$.smartPtr}else{var clonedHandle=handle[\"clone\"]();ptr=this.rawShare(ptr,Emval.toHandle(()=>clonedHandle[\"delete\"]()));if(destructors!==null){destructors.push(this.rawDestructor,ptr)}}break;default:throwBindingError(\"Unsupporting sharing policy\")}}return ptr}function nonConstNoSmartPtrRawPointerToWireType(destructors,handle){if(handle===null){if(this.isReference){throwBindingError(`null is not a valid ${this.name}`)}return 0}if(!handle.$$){throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`)}if(!handle.$$.ptr){throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`)}if(handle.$$.ptrType.isConst){throwBindingError(`Cannot convert argument of type ${handle.$$.ptrType.name} to parameter type ${this.name}`)}var handleClass=handle.$$.ptrType.registeredClass;var ptr=upcastPointer(handle.$$.ptr,handleClass,this.registeredClass);return ptr}var init_RegisteredPointer=()=>{Object.assign(RegisteredPointer.prototype,{getPointee(ptr){if(this.rawGetPointee){ptr=this.rawGetPointee(ptr)}return ptr},destructor(ptr){this.rawDestructor?.(ptr)},argPackAdvance:GenericWireTypeSize,readValueFromPointer:readPointer,fromWireType:RegisteredPointer_fromWireType})};function RegisteredPointer(name,registeredClass,isReference,isConst,isSmartPointer,pointeeType,sharingPolicy,rawGetPointee,rawConstructor,rawShare,rawDestructor){this.name=name;this.registeredClass=registeredClass;this.isReference=isReference;this.isConst=isConst;this.isSmartPointer=isSmartPointer;this.pointeeType=pointeeType;this.sharingPolicy=sharingPolicy;this.rawGetPointee=rawGetPointee;this.rawConstructor=rawConstructor;this.rawShare=rawShare;this.rawDestructor=rawDestructor;if(!isSmartPointer&&registeredClass.baseClass===undefined){if(isConst){this[\"toWireType\"]=constNoSmartPtrRawPointerToWireType;this.destructorFunction=null}else{this[\"toWireType\"]=nonConstNoSmartPtrRawPointerToWireType;this.destructorFunction=null}}else{this[\"toWireType\"]=genericPointerToWireType}}var replacePublicSymbol=(name,value,numArguments)=>{if(!Module.hasOwnProperty(name)){throwInternalError(\"Replacing nonexistent public symbol\")}if(undefined!==Module[name].overloadTable&&undefined!==numArguments){Module[name].overloadTable[numArguments]=value}else{Module[name]=value;Module[name].argCount=numArguments}};var dynCallLegacy=(sig,ptr,args)=>{sig=sig.replace(/p/g,\"i\");var f=Module[\"dynCall_\"+sig];return f(ptr,...args)};var wasmTable;var getWasmTableEntry=funcPtr=>wasmTable.get(funcPtr);var dynCall=(sig,ptr,args=[])=>{if(sig.includes(\"j\")){return dynCallLegacy(sig,ptr,args)}var rtn=getWasmTableEntry(ptr)(...args);return sig[0]==\"p\"?rtn>>>0:rtn};var getDynCaller=(sig,ptr)=>(...args)=>dynCall(sig,ptr,args);var embind__requireFunction=(signature,rawFunction)=>{signature=readLatin1String(signature);function makeDynCaller(){if(signature.includes(\"j\")){return getDynCaller(signature,rawFunction)}if(signature.includes(\"p\")){return getDynCaller(signature,rawFunction)}return getWasmTableEntry(rawFunction)}var fp=makeDynCaller();if(typeof fp!=\"function\"){throwBindingError(`unknown function pointer with signature ${signature}: ${rawFunction}`)}return fp};var extendError=(baseErrorType,errorName)=>{var errorClass=createNamedFunction(errorName,function(message){this.name=errorName;this.message=message;var stack=new Error(message).stack;if(stack!==undefined){this.stack=this.toString()+\"\\n\"+stack.replace(/^Error(:[^\\n]*)?\\n/,\"\")}});errorClass.prototype=Object.create(baseErrorType.prototype);errorClass.prototype.constructor=errorClass;errorClass.prototype.toString=function(){if(this.message===undefined){return this.name}else{return`${this.name}: ${this.message}`}};return errorClass};var UnboundTypeError;var getTypeName=type=>{var ptr=___getTypeName(type);var rv=readLatin1String(ptr);_free(ptr);return rv};var throwUnboundTypeError=(message,types)=>{var unboundTypes=[];var seen={};function visit(type){if(seen[type]){return}if(registeredTypes[type]){return}if(typeDependencies[type]){typeDependencies[type].forEach(visit);return}unboundTypes.push(type);seen[type]=true}types.forEach(visit);throw new UnboundTypeError(`${message}: `+unboundTypes.map(getTypeName).join([\", \"]))};function __embind_register_class(rawType,rawPointerType,rawConstPointerType,baseClassRawType,getActualTypeSignature,getActualType,upcastSignature,upcast,downcastSignature,downcast,name,destructorSignature,rawDestructor){rawType>>>=0;rawPointerType>>>=0;rawConstPointerType>>>=0;baseClassRawType>>>=0;getActualTypeSignature>>>=0;getActualType>>>=0;upcastSignature>>>=0;upcast>>>=0;downcastSignature>>>=0;downcast>>>=0;name>>>=0;destructorSignature>>>=0;rawDestructor>>>=0;name=readLatin1String(name);getActualType=embind__requireFunction(getActualTypeSignature,getActualType);upcast&&=embind__requireFunction(upcastSignature,upcast);downcast&&=embind__requireFunction(downcastSignature,downcast);rawDestructor=embind__requireFunction(destructorSignature,rawDestructor);var legalFunctionName=makeLegalFunctionName(name);exposePublicSymbol(legalFunctionName,function(){throwUnboundTypeError(`Cannot construct ${name} due to unbound types`,[baseClassRawType])});whenDependentTypesAreResolved([rawType,rawPointerType,rawConstPointerType],baseClassRawType?[baseClassRawType]:[],base=>{base=base[0];var baseClass;var basePrototype;if(baseClassRawType){baseClass=base.registeredClass;basePrototype=baseClass.instancePrototype}else{basePrototype=ClassHandle.prototype}var constructor=createNamedFunction(name,function(...args){if(Object.getPrototypeOf(this)!==instancePrototype){throw new BindingError(\"Use 'new' to construct \"+name)}if(undefined===registeredClass.constructor_body){throw new BindingError(name+\" has no accessible constructor\")}var body=registeredClass.constructor_body[args.length];if(undefined===body){throw new BindingError(`Tried to invoke ctor of ${name} with invalid number of parameters (${args.length}) - expected (${Object.keys(registeredClass.constructor_body).toString()}) parameters instead!`)}return body.apply(this,args)});var instancePrototype=Object.create(basePrototype,{constructor:{value:constructor}});constructor.prototype=instancePrototype;var registeredClass=new RegisteredClass(name,constructor,instancePrototype,rawDestructor,baseClass,getActualType,upcast,downcast);if(registeredClass.baseClass){registeredClass.baseClass.__derivedClasses??=[];registeredClass.baseClass.__derivedClasses.push(registeredClass)}var referenceConverter=new RegisteredPointer(name,registeredClass,true,false,false);var pointerConverter=new RegisteredPointer(name+\"*\",registeredClass,false,false,false);var constPointerConverter=new RegisteredPointer(name+\" const*\",registeredClass,false,true,false);registeredPointers[rawType]={pointerType:pointerConverter,constPointerType:constPointerConverter};replacePublicSymbol(legalFunctionName,constructor);return[referenceConverter,pointerConverter,constPointerConverter]})}var heap32VectorToArray=(count,firstElement)=>{var array=[];for(var i=0;i<count;i++){array.push(HEAPU32[firstElement+i*4>>>2>>>0])}return array};function usesDestructorStack(argTypes){for(var i=1;i<argTypes.length;++i){if(argTypes[i]!==null&&argTypes[i].destructorFunction===undefined){return true}}return false}function newFunc(constructor,argumentList){if(!(constructor instanceof Function)){throw new TypeError(`new_ called with constructor type ${typeof constructor} which is not a function`)}var dummy=createNamedFunction(constructor.name||\"unknownFunctionName\",function(){});dummy.prototype=constructor.prototype;var obj=new dummy;var r=constructor.apply(obj,argumentList);return r instanceof Object?r:obj}function createJsInvoker(argTypes,isClassMethodFunc,returns,isAsync){var needsDestructorStack=usesDestructorStack(argTypes);var argCount=argTypes.length;var argsList=\"\";var argsListWired=\"\";for(var i=0;i<argCount-2;++i){argsList+=(i!==0?\", \":\"\")+\"arg\"+i;argsListWired+=(i!==0?\", \":\"\")+\"arg\"+i+\"Wired\"}var invokerFnBody=`\\n        return function (${argsList}) {\\n        if (arguments.length !== ${argCount-2}) {\\n          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${argCount-2}');\\n        }`;if(needsDestructorStack){invokerFnBody+=\"var destructors = [];\\n\"}var dtorStack=needsDestructorStack?\"destructors\":\"null\";var args1=[\"humanName\",\"throwBindingError\",\"invoker\",\"fn\",\"runDestructors\",\"retType\",\"classParam\"];if(isClassMethodFunc){invokerFnBody+=\"var thisWired = classParam['toWireType'](\"+dtorStack+\", this);\\n\"}for(var i=0;i<argCount-2;++i){invokerFnBody+=\"var arg\"+i+\"Wired = argType\"+i+\"['toWireType'](\"+dtorStack+\", arg\"+i+\");\\n\";args1.push(\"argType\"+i)}if(isClassMethodFunc){argsListWired=\"thisWired\"+(argsListWired.length>0?\", \":\"\")+argsListWired}invokerFnBody+=(returns||isAsync?\"var rv = \":\"\")+\"invoker(fn\"+(argsListWired.length>0?\", \":\"\")+argsListWired+\");\\n\";if(needsDestructorStack){invokerFnBody+=\"runDestructors(destructors);\\n\"}else{for(var i=isClassMethodFunc?1:2;i<argTypes.length;++i){var paramName=i===1?\"thisWired\":\"arg\"+(i-2)+\"Wired\";if(argTypes[i].destructorFunction!==null){invokerFnBody+=`${paramName}_dtor(${paramName});\\n`;args1.push(`${paramName}_dtor`)}}}if(returns){invokerFnBody+=\"var ret = retType['fromWireType'](rv);\\n\"+\"return ret;\\n\"}else{}invokerFnBody+=\"}\\n\";return[args1,invokerFnBody]}function craftInvokerFunction(humanName,argTypes,classType,cppInvokerFunc,cppTargetFunc,isAsync){var argCount=argTypes.length;if(argCount<2){throwBindingError(\"argTypes array size mismatch! Must at least get return value and 'this' types!\")}var isClassMethodFunc=argTypes[1]!==null&&classType!==null;var needsDestructorStack=usesDestructorStack(argTypes);var returns=argTypes[0].name!==\"void\";var closureArgs=[humanName,throwBindingError,cppInvokerFunc,cppTargetFunc,runDestructors,argTypes[0],argTypes[1]];for(var i=0;i<argCount-2;++i){closureArgs.push(argTypes[i+2])}if(!needsDestructorStack){for(var i=isClassMethodFunc?1:2;i<argTypes.length;++i){if(argTypes[i].destructorFunction!==null){closureArgs.push(argTypes[i].destructorFunction)}}}let[args,invokerFnBody]=createJsInvoker(argTypes,isClassMethodFunc,returns,isAsync);args.push(invokerFnBody);var invokerFn=newFunc(Function,args)(...closureArgs);return createNamedFunction(humanName,invokerFn)}var __embind_register_class_constructor=function(rawClassType,argCount,rawArgTypesAddr,invokerSignature,invoker,rawConstructor){rawClassType>>>=0;rawArgTypesAddr>>>=0;invokerSignature>>>=0;invoker>>>=0;rawConstructor>>>=0;var rawArgTypes=heap32VectorToArray(argCount,rawArgTypesAddr);invoker=embind__requireFunction(invokerSignature,invoker);whenDependentTypesAreResolved([],[rawClassType],classType=>{classType=classType[0];var humanName=`constructor ${classType.name}`;if(undefined===classType.registeredClass.constructor_body){classType.registeredClass.constructor_body=[]}if(undefined!==classType.registeredClass.constructor_body[argCount-1]){throw new BindingError(`Cannot register multiple constructors with identical number of parameters (${argCount-1}) for class '${classType.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`)}classType.registeredClass.constructor_body[argCount-1]=()=>{throwUnboundTypeError(`Cannot construct ${classType.name} due to unbound types`,rawArgTypes)};whenDependentTypesAreResolved([],rawArgTypes,argTypes=>{argTypes.splice(1,0,null);classType.registeredClass.constructor_body[argCount-1]=craftInvokerFunction(humanName,argTypes,null,invoker,rawConstructor);return[]});return[]})};var getFunctionName=signature=>{signature=signature.trim();const argsIndex=signature.indexOf(\"(\");if(argsIndex!==-1){return signature.substr(0,argsIndex)}else{return signature}};var __embind_register_class_function=function(rawClassType,methodName,argCount,rawArgTypesAddr,invokerSignature,rawInvoker,context,isPureVirtual,isAsync){rawClassType>>>=0;methodName>>>=0;rawArgTypesAddr>>>=0;invokerSignature>>>=0;rawInvoker>>>=0;context>>>=0;var rawArgTypes=heap32VectorToArray(argCount,rawArgTypesAddr);methodName=readLatin1String(methodName);methodName=getFunctionName(methodName);rawInvoker=embind__requireFunction(invokerSignature,rawInvoker);whenDependentTypesAreResolved([],[rawClassType],classType=>{classType=classType[0];var humanName=`${classType.name}.${methodName}`;if(methodName.startsWith(\"@@\")){methodName=Symbol[methodName.substring(2)]}if(isPureVirtual){classType.registeredClass.pureVirtualFunctions.push(methodName)}function unboundTypesHandler(){throwUnboundTypeError(`Cannot call ${humanName} due to unbound types`,rawArgTypes)}var proto=classType.registeredClass.instancePrototype;var method=proto[methodName];if(undefined===method||undefined===method.overloadTable&&method.className!==classType.name&&method.argCount===argCount-2){unboundTypesHandler.argCount=argCount-2;unboundTypesHandler.className=classType.name;proto[methodName]=unboundTypesHandler}else{ensureOverloadTable(proto,methodName,humanName);proto[methodName].overloadTable[argCount-2]=unboundTypesHandler}whenDependentTypesAreResolved([],rawArgTypes,argTypes=>{var memberFunction=craftInvokerFunction(humanName,argTypes,classType,rawInvoker,context,isAsync);if(undefined===proto[methodName].overloadTable){memberFunction.argCount=argCount-2;proto[methodName]=memberFunction}else{proto[methodName].overloadTable[argCount-2]=memberFunction}return[]});return[]})};var emval_freelist=[];var emval_handles=[];function __emval_decref(handle){handle>>>=0;if(handle>9&&0===--emval_handles[handle+1]){emval_handles[handle]=undefined;emval_freelist.push(handle)}}var count_emval_handles=()=>emval_handles.length/2-5-emval_freelist.length;var init_emval=()=>{emval_handles.push(0,1,undefined,1,null,1,true,1,false,1);Module[\"count_emval_handles\"]=count_emval_handles};var Emval={toValue:handle=>{if(!handle){throwBindingError(\"Cannot use deleted val. handle = \"+handle)}return emval_handles[handle]},toHandle:value=>{switch(value){case undefined:return 2;case null:return 4;case true:return 6;case false:return 8;default:{const handle=emval_freelist.pop()||emval_handles.length;emval_handles[handle]=value;emval_handles[handle+1]=1;return handle}}}};var EmValType={name:\"emscripten::val\",fromWireType:handle=>{var rv=Emval.toValue(handle);__emval_decref(handle);return rv},toWireType:(destructors,value)=>Emval.toHandle(value),argPackAdvance:GenericWireTypeSize,readValueFromPointer:readPointer,destructorFunction:null};function __embind_register_emval(rawType){rawType>>>=0;return registerType(rawType,EmValType)}var enumReadValueFromPointer=(name,width,signed)=>{switch(width){case 1:return signed?function(pointer){return this[\"fromWireType\"](HEAP8[pointer>>>0])}:function(pointer){return this[\"fromWireType\"](HEAPU8[pointer>>>0])};case 2:return signed?function(pointer){return this[\"fromWireType\"](HEAP16[pointer>>>1>>>0])}:function(pointer){return this[\"fromWireType\"](HEAPU16[pointer>>>1>>>0])};case 4:return signed?function(pointer){return this[\"fromWireType\"](HEAP32[pointer>>>2>>>0])}:function(pointer){return this[\"fromWireType\"](HEAPU32[pointer>>>2>>>0])};default:throw new TypeError(`invalid integer width (${width}): ${name}`)}};function __embind_register_enum(rawType,name,size,isSigned){rawType>>>=0;name>>>=0;size>>>=0;name=readLatin1String(name);function ctor(){}ctor.values={};registerType(rawType,{name:name,constructor:ctor,fromWireType:function(c){return this.constructor.values[c]},toWireType:(destructors,c)=>c.value,argPackAdvance:GenericWireTypeSize,readValueFromPointer:enumReadValueFromPointer(name,size,isSigned),destructorFunction:null});exposePublicSymbol(name,ctor)}var requireRegisteredType=(rawType,humanName)=>{var impl=registeredTypes[rawType];if(undefined===impl){throwBindingError(`${humanName} has unknown type ${getTypeName(rawType)}`)}return impl};function __embind_register_enum_value(rawEnumType,name,enumValue){rawEnumType>>>=0;name>>>=0;var enumType=requireRegisteredType(rawEnumType,\"enum\");name=readLatin1String(name);var Enum=enumType.constructor;var Value=Object.create(enumType.constructor.prototype,{value:{value:enumValue},constructor:{value:createNamedFunction(`${enumType.name}_${name}`,function(){})}});Enum.values[enumValue]=Value;Enum[name]=Value}var embindRepr=v=>{if(v===null){return\"null\"}var t=typeof v;if(t===\"object\"||t===\"array\"||t===\"function\"){return v.toString()}else{return\"\"+v}};var floatReadValueFromPointer=(name,width)=>{switch(width){case 4:return function(pointer){return this[\"fromWireType\"](HEAPF32[pointer>>>2>>>0])};case 8:return function(pointer){return this[\"fromWireType\"](HEAPF64[pointer>>>3>>>0])};default:throw new TypeError(`invalid float width (${width}): ${name}`)}};var __embind_register_float=function(rawType,name,size){rawType>>>=0;name>>>=0;size>>>=0;name=readLatin1String(name);registerType(rawType,{name:name,fromWireType:value=>value,toWireType:(destructors,value)=>value,argPackAdvance:GenericWireTypeSize,readValueFromPointer:floatReadValueFromPointer(name,size),destructorFunction:null})};function __embind_register_function(name,argCount,rawArgTypesAddr,signature,rawInvoker,fn,isAsync){name>>>=0;rawArgTypesAddr>>>=0;signature>>>=0;rawInvoker>>>=0;fn>>>=0;var argTypes=heap32VectorToArray(argCount,rawArgTypesAddr);name=readLatin1String(name);name=getFunctionName(name);rawInvoker=embind__requireFunction(signature,rawInvoker);exposePublicSymbol(name,function(){throwUnboundTypeError(`Cannot call ${name} due to unbound types`,argTypes)},argCount-1);whenDependentTypesAreResolved([],argTypes,argTypes=>{var invokerArgsArray=[argTypes[0],null].concat(argTypes.slice(1));replacePublicSymbol(name,craftInvokerFunction(name,invokerArgsArray,null,rawInvoker,fn,isAsync),argCount-1);return[]})}var integerReadValueFromPointer=(name,width,signed)=>{switch(width){case 1:return signed?pointer=>HEAP8[pointer>>>0]:pointer=>HEAPU8[pointer>>>0];case 2:return signed?pointer=>HEAP16[pointer>>>1>>>0]:pointer=>HEAPU16[pointer>>>1>>>0];case 4:return signed?pointer=>HEAP32[pointer>>>2>>>0]:pointer=>HEAPU32[pointer>>>2>>>0];default:throw new TypeError(`invalid integer width (${width}): ${name}`)}};function __embind_register_integer(primitiveType,name,size,minRange,maxRange){primitiveType>>>=0;name>>>=0;size>>>=0;name=readLatin1String(name);if(maxRange===-1){maxRange=4294967295}var fromWireType=value=>value;if(minRange===0){var bitshift=32-8*size;fromWireType=value=>value<<bitshift>>>bitshift}var isUnsignedType=name.includes(\"unsigned\");var checkAssertions=(value,toTypeName)=>{};var toWireType;if(isUnsignedType){toWireType=function(destructors,value){checkAssertions(value,this.name);return value>>>0}}else{toWireType=function(destructors,value){checkAssertions(value,this.name);return value}}registerType(primitiveType,{name:name,fromWireType:fromWireType,toWireType:toWireType,argPackAdvance:GenericWireTypeSize,readValueFromPointer:integerReadValueFromPointer(name,size,minRange!==0),destructorFunction:null})}function __embind_register_memory_view(rawType,dataTypeIndex,name){rawType>>>=0;name>>>=0;var typeMapping=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];var TA=typeMapping[dataTypeIndex];function decodeMemoryView(handle){var size=HEAPU32[handle>>>2>>>0];var data=HEAPU32[handle+4>>>2>>>0];return new TA(HEAP8.buffer,data,size)}name=readLatin1String(name);registerType(rawType,{name:name,fromWireType:decodeMemoryView,argPackAdvance:GenericWireTypeSize,readValueFromPointer:decodeMemoryView},{ignoreDuplicateRegistrations:true})}function __embind_register_optional(rawOptionalType,rawType){rawOptionalType>>>=0;rawType>>>=0;__embind_register_emval(rawOptionalType)}var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{outIdx>>>=0;if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++>>>0]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++>>>0]=192|u>>6;heap[outIdx++>>>0]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++>>>0]=224|u>>12;heap[outIdx++>>>0]=128|u>>6&63;heap[outIdx++>>>0]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++>>>0]=240|u>>18;heap[outIdx++>>>0]=128|u>>12&63;heap[outIdx++>>>0]=128|u>>6&63;heap[outIdx++>>>0]=128|u&63}}heap[outIdx>>>0]=0;return outIdx-startIdx};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder:undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{idx>>>=0;var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>{ptr>>>=0;return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\"};function __embind_register_std_string(rawType,name){rawType>>>=0;name>>>=0;name=readLatin1String(name);var stdStringIsUTF8=name===\"std::string\";registerType(rawType,{name:name,fromWireType(value){var length=HEAPU32[value>>>2>>>0];var payload=value+4;var str;if(stdStringIsUTF8){var decodeStartPtr=payload;for(var i=0;i<=length;++i){var currentBytePtr=payload+i;if(i==length||HEAPU8[currentBytePtr>>>0]==0){var maxRead=currentBytePtr-decodeStartPtr;var stringSegment=UTF8ToString(decodeStartPtr,maxRead);if(str===undefined){str=stringSegment}else{str+=String.fromCharCode(0);str+=stringSegment}decodeStartPtr=currentBytePtr+1}}}else{var a=new Array(length);for(var i=0;i<length;++i){a[i]=String.fromCharCode(HEAPU8[payload+i>>>0])}str=a.join(\"\")}_free(value);return str},toWireType(destructors,value){if(value instanceof ArrayBuffer){value=new Uint8Array(value)}var length;var valueIsOfTypeString=typeof value==\"string\";if(!(valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array)){throwBindingError(\"Cannot pass non-string to std::string\")}if(stdStringIsUTF8&&valueIsOfTypeString){length=lengthBytesUTF8(value)}else{length=value.length}var base=_malloc(4+length+1);var ptr=base+4;HEAPU32[base>>>2>>>0]=length;if(stdStringIsUTF8&&valueIsOfTypeString){stringToUTF8(value,ptr,length+1)}else{if(valueIsOfTypeString){for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);if(charCode>255){_free(ptr);throwBindingError(\"String has UTF-16 code units that do not fit in 8 bits\")}HEAPU8[ptr+i>>>0]=charCode}}else{for(var i=0;i<length;++i){HEAPU8[ptr+i>>>0]=value[i]}}}if(destructors!==null){destructors.push(_free,base)}return base},argPackAdvance:GenericWireTypeSize,readValueFromPointer:readPointer,destructorFunction(ptr){_free(ptr)}})}var UTF16Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf-16le\"):undefined;var UTF16ToString=(ptr,maxBytesToRead)=>{var endPtr=ptr;var idx=endPtr>>1;var maxIdx=idx+maxBytesToRead/2;while(!(idx>=maxIdx)&&HEAPU16[idx>>>0])++idx;endPtr=idx<<1;if(endPtr-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(ptr>>>0,endPtr>>>0));var str=\"\";for(var i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=HEAP16[ptr+i*2>>>1>>>0];if(codeUnit==0)break;str+=String.fromCharCode(codeUnit)}return str};var stringToUTF16=(str,outPtr,maxBytesToWrite)=>{maxBytesToWrite??=2147483647;if(maxBytesToWrite<2)return 0;maxBytesToWrite-=2;var startPtr=outPtr;var numCharsToWrite=maxBytesToWrite<str.length*2?maxBytesToWrite/2:str.length;for(var i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>>1>>>0]=codeUnit;outPtr+=2}HEAP16[outPtr>>>1>>>0]=0;return outPtr-startPtr};var lengthBytesUTF16=str=>str.length*2;var UTF32ToString=(ptr,maxBytesToRead)=>{var i=0;var str=\"\";while(!(i>=maxBytesToRead/4)){var utf32=HEAP32[ptr+i*4>>>2>>>0];if(utf32==0)break;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}else{str+=String.fromCharCode(utf32)}}return str};var stringToUTF32=(str,outPtr,maxBytesToWrite)=>{outPtr>>>=0;maxBytesToWrite??=2147483647;if(maxBytesToWrite<4)return 0;var startPtr=outPtr;var endPtr=startPtr+maxBytesToWrite-4;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++i);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023}HEAP32[outPtr>>>2>>>0]=codeUnit;outPtr+=4;if(outPtr+4>endPtr)break}HEAP32[outPtr>>>2>>>0]=0;return outPtr-startPtr};var lengthBytesUTF32=str=>{var len=0;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)++i;len+=4}return len};var __embind_register_std_wstring=function(rawType,charSize,name){rawType>>>=0;charSize>>>=0;name>>>=0;name=readLatin1String(name);var decodeString,encodeString,readCharAt,lengthBytesUTF;if(charSize===2){decodeString=UTF16ToString;encodeString=stringToUTF16;lengthBytesUTF=lengthBytesUTF16;readCharAt=pointer=>HEAPU16[pointer>>>1>>>0]}else if(charSize===4){decodeString=UTF32ToString;encodeString=stringToUTF32;lengthBytesUTF=lengthBytesUTF32;readCharAt=pointer=>HEAPU32[pointer>>>2>>>0]}registerType(rawType,{name:name,fromWireType:value=>{var length=HEAPU32[value>>>2>>>0];var str;var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(i==length||readCharAt(currentBytePtr)==0){var maxReadBytes=currentBytePtr-decodeStartPtr;var stringSegment=decodeString(decodeStartPtr,maxReadBytes);if(str===undefined){str=stringSegment}else{str+=String.fromCharCode(0);str+=stringSegment}decodeStartPtr=currentBytePtr+charSize}}_free(value);return str},toWireType:(destructors,value)=>{if(!(typeof value==\"string\")){throwBindingError(`Cannot pass non-string to C++ string type ${name}`)}var length=lengthBytesUTF(value);var ptr=_malloc(4+length+charSize);HEAPU32[ptr>>>2>>>0]=length/charSize;encodeString(value,ptr+4,length+charSize);if(destructors!==null){destructors.push(_free,ptr)}return ptr},argPackAdvance:GenericWireTypeSize,readValueFromPointer:readPointer,destructorFunction(ptr){_free(ptr)}})};function __embind_register_value_object(rawType,name,constructorSignature,rawConstructor,destructorSignature,rawDestructor){rawType>>>=0;name>>>=0;constructorSignature>>>=0;rawConstructor>>>=0;destructorSignature>>>=0;rawDestructor>>>=0;structRegistrations[rawType]={name:readLatin1String(name),rawConstructor:embind__requireFunction(constructorSignature,rawConstructor),rawDestructor:embind__requireFunction(destructorSignature,rawDestructor),fields:[]}}function __embind_register_value_object_field(structType,fieldName,getterReturnType,getterSignature,getter,getterContext,setterArgumentType,setterSignature,setter,setterContext){structType>>>=0;fieldName>>>=0;getterReturnType>>>=0;getterSignature>>>=0;getter>>>=0;getterContext>>>=0;setterArgumentType>>>=0;setterSignature>>>=0;setter>>>=0;setterContext>>>=0;structRegistrations[structType].fields.push({fieldName:readLatin1String(fieldName),getterReturnType:getterReturnType,getter:embind__requireFunction(getterSignature,getter),getterContext:getterContext,setterArgumentType:setterArgumentType,setter:embind__requireFunction(setterSignature,setter),setterContext:setterContext})}var __embind_register_void=function(rawType,name){rawType>>>=0;name>>>=0;name=readLatin1String(name);registerType(rawType,{isVoid:true,name:name,argPackAdvance:0,fromWireType:()=>undefined,toWireType:(destructors,o)=>undefined})};function __emscripten_memcpy_js(dest,src,num){dest>>>=0;src>>>=0;num>>>=0;return HEAPU8.copyWithin(dest>>>0,src>>>0,src+num>>>0)}var emval_returnValue=(returnType,destructorsRef,handle)=>{var destructors=[];var result=returnType[\"toWireType\"](destructors,handle);if(destructors.length){HEAPU32[destructorsRef>>>2>>>0]=Emval.toHandle(destructors)}return result};function __emval_as(handle,returnType,destructorsRef){handle>>>=0;returnType>>>=0;destructorsRef>>>=0;handle=Emval.toValue(handle);returnType=requireRegisteredType(returnType,\"emval::as\");return emval_returnValue(returnType,destructorsRef,handle)}var emval_symbols={};var getStringOrSymbol=address=>{var symbol=emval_symbols[address];if(symbol===undefined){return readLatin1String(address)}return symbol};var emval_methodCallers=[];function __emval_call_method(caller,objHandle,methodName,destructorsRef,args){caller>>>=0;objHandle>>>=0;methodName>>>=0;destructorsRef>>>=0;args>>>=0;caller=emval_methodCallers[caller];objHandle=Emval.toValue(objHandle);methodName=getStringOrSymbol(methodName);return caller(objHandle,objHandle[methodName],destructorsRef,args)}function __emval_equals(first,second){first>>>=0;second>>>=0;first=Emval.toValue(first);second=Emval.toValue(second);return first==second}var emval_addMethodCaller=caller=>{var id=emval_methodCallers.length;emval_methodCallers.push(caller);return id};var emval_lookupTypes=(argCount,argTypes)=>{var a=new Array(argCount);for(var i=0;i<argCount;++i){a[i]=requireRegisteredType(HEAPU32[argTypes+i*4>>>2>>>0],\"parameter \"+i)}return a};var reflectConstruct=Reflect.construct;function __emval_get_method_caller(argCount,argTypes,kind){argTypes>>>=0;var types=emval_lookupTypes(argCount,argTypes);var retType=types.shift();argCount--;var functionBody=`return function (obj, func, destructorsRef, args) {\\n`;var offset=0;var argsList=[];if(kind===0){argsList.push(\"obj\")}var params=[\"retType\"];var args=[retType];for(var i=0;i<argCount;++i){argsList.push(\"arg\"+i);params.push(\"argType\"+i);args.push(types[i]);functionBody+=`  var arg${i} = argType${i}.readValueFromPointer(args${offset?\"+\"+offset:\"\"});\\n`;offset+=types[i][\"argPackAdvance\"]}var invoker=kind===1?\"new func\":\"func.call\";functionBody+=`  var rv = ${invoker}(${argsList.join(\", \")});\\n`;if(!retType.isVoid){params.push(\"emval_returnValue\");args.push(emval_returnValue);functionBody+=\"  return emval_returnValue(retType, destructorsRef, rv);\\n\"}functionBody+=\"};\\n\";params.push(functionBody);var invokerFunction=newFunc(Function,params)(...args);var functionName=`methodCaller<(${types.map(t=>t.name).join(\", \")}) => ${retType.name}>`;return emval_addMethodCaller(createNamedFunction(functionName,invokerFunction))}function __emval_get_property(handle,key){handle>>>=0;key>>>=0;handle=Emval.toValue(handle);key=Emval.toValue(key);return Emval.toHandle(handle[key])}function __emval_incref(handle){handle>>>=0;if(handle>9){emval_handles[handle+1]+=1}}function __emval_new_cstring(v){v>>>=0;return Emval.toHandle(getStringOrSymbol(v))}function __emval_new_object(){return Emval.toHandle({})}function __emval_run_destructors(handle){handle>>>=0;var destructors=Emval.toValue(handle);runDestructors(destructors);__emval_decref(handle)}function __emval_set_property(handle,key,value){handle>>>=0;key>>>=0;value>>>=0;handle=Emval.toValue(handle);key=Emval.toValue(key);value=Emval.toValue(value);handle[key]=value}function __emval_take_value(type,arg){type>>>=0;arg>>>=0;type=requireRegisteredType(type,\"_emval_take_value\");var v=type[\"readValueFromPointer\"](arg);return Emval.toHandle(v)}var getHeapMax=()=>4294901760;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};function _emscripten_resize_heap(requestedSize){requestedSize>>>=0;var oldSize=HEAPU8.length;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false}var uleb128Encode=(n,target)=>{if(n<128){target.push(n)}else{target.push(n%128|128,n>>7)}};var sigToWasmTypes=sig=>{var typeNames={i:\"i32\",j:\"i64\",f:\"f32\",d:\"f64\",e:\"externref\",p:\"i32\"};var type={parameters:[],results:sig[0]==\"v\"?[]:[typeNames[sig[0]]]};for(var i=1;i<sig.length;++i){type.parameters.push(typeNames[sig[i]])}return type};var generateFuncType=(sig,target)=>{var sigRet=sig.slice(0,1);var sigParam=sig.slice(1);var typeCodes={i:127,p:127,j:126,f:125,d:124,e:111};target.push(96);uleb128Encode(sigParam.length,target);for(var i=0;i<sigParam.length;++i){target.push(typeCodes[sigParam[i]])}if(sigRet==\"v\"){target.push(0)}else{target.push(1,typeCodes[sigRet])}};var convertJsFunctionToWasm=(func,sig)=>{if(typeof WebAssembly.Function==\"function\"){return new WebAssembly.Function(sigToWasmTypes(sig),func)}var typeSectionBody=[1];generateFuncType(sig,typeSectionBody);var bytes=[0,97,115,109,1,0,0,0,1];uleb128Encode(typeSectionBody.length,bytes);bytes.push(...typeSectionBody);bytes.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var module=new WebAssembly.Module(new Uint8Array(bytes));var instance=new WebAssembly.Instance(module,{e:{f:func}});var wrappedFunc=instance.exports[\"f\"];return wrappedFunc};var updateTableMap=(offset,count)=>{if(functionsInTableMap){for(var i=offset;i<offset+count;i++){var item=getWasmTableEntry(i);if(item){functionsInTableMap.set(item,i)}}}};var functionsInTableMap;var getFunctionAddress=func=>{if(!functionsInTableMap){functionsInTableMap=new WeakMap;updateTableMap(0,wasmTable.length)}return functionsInTableMap.get(func)||0};var freeTableIndexes=[];var getEmptyTableSlot=()=>{if(freeTableIndexes.length){return freeTableIndexes.pop()}try{wasmTable.grow(1)}catch(err){if(!(err instanceof RangeError)){throw err}throw\"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.\"}return wasmTable.length-1};var setWasmTableEntry=(idx,func)=>wasmTable.set(idx,func);var addFunction=(func,sig)=>{var rtn=getFunctionAddress(func);if(rtn){return rtn}var ret=getEmptyTableSlot();try{setWasmTableEntry(ret,func)}catch(err){if(!(err instanceof TypeError)){throw err}var wrapped=convertJsFunctionToWasm(func,sig);setWasmTableEntry(ret,wrapped)}functionsInTableMap.set(func,ret);return ret};var removeFunction=index=>{functionsInTableMap.delete(getWasmTableEntry(index));setWasmTableEntry(index,null);freeTableIndexes.push(index)};InternalError=Module[\"InternalError\"]=class InternalError extends Error{constructor(message){super(message);this.name=\"InternalError\"}};embind_init_charCodes();BindingError=Module[\"BindingError\"]=class BindingError extends Error{constructor(message){super(message);this.name=\"BindingError\"}};init_ClassHandle();init_embind();init_RegisteredPointer();UnboundTypeError=Module[\"UnboundTypeError\"]=extendError(Error,\"UnboundTypeError\");init_emval();var wasmImports={i:___cxa_throw,D:__abort_js,n:__embind_finalize_value_object,C:__embind_register_bigint,H:__embind_register_bool,h:__embind_register_class,g:__embind_register_class_constructor,a:__embind_register_class_function,G:__embind_register_emval,t:__embind_register_enum,e:__embind_register_enum_value,x:__embind_register_float,c:__embind_register_function,j:__embind_register_integer,f:__embind_register_memory_view,k:__embind_register_optional,w:__embind_register_std_string,s:__embind_register_std_wstring,o:__embind_register_value_object,l:__embind_register_value_object_field,I:__embind_register_void,F:__emscripten_memcpy_js,v:__emval_as,z:__emval_call_method,b:__emval_decref,m:__emval_equals,y:__emval_get_method_caller,B:__emval_get_property,u:__emval_incref,q:__emval_new_cstring,A:__emval_new_object,p:__emval_run_destructors,r:__emval_set_property,d:__emval_take_value,E:_emscripten_resize_heap};var wasmExports=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"K\"])();var ___getTypeName=a0=>(___getTypeName=wasmExports[\"L\"])(a0);var _malloc=a0=>(_malloc=wasmExports[\"N\"])(a0);var _free=a0=>(_free=wasmExports[\"O\"])(a0);var ___cxa_is_pointer_type=a0=>(___cxa_is_pointer_type=wasmExports[\"P\"])(a0);function applySignatureConversions(wasmExports){wasmExports=Object.assign({},wasmExports);var makeWrapper_pp=f=>a0=>f(a0)>>>0;var makeWrapper_p=f=>()=>f()>>>0;wasmExports[\"L\"]=makeWrapper_pp(wasmExports[\"L\"]);wasmExports[\"N\"]=makeWrapper_pp(wasmExports[\"N\"]);wasmExports[\"_emscripten_stack_alloc\"]=makeWrapper_pp(wasmExports[\"_emscripten_stack_alloc\"]);wasmExports[\"emscripten_stack_get_current\"]=makeWrapper_p(wasmExports[\"emscripten_stack_get_current\"]);return wasmExports}Module[\"addFunction\"]=addFunction;Module[\"removeFunction\"]=removeFunction;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);Module[\"onRuntimeInitialized\"]?.();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();moduleRtn=readyPromise;\n\n\n  return moduleRtn;\n}\n);\n})();\nexport default Module;\n","// Copyright 2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport Module from '../manifold.js';\n// Instantiate Manifold WASM\nlet manifoldwasm = null;\nlet wasmUrl = null;\n/**\n * Tell us how to find `manifold.wasm`.\n * This is important when using a bundler like WebPack.\n *\n * @param url Path to manifold.wasm\n */\nexport function setWasmUrl(url) {\n    wasmUrl = url;\n}\n/**\n * Instantiate a new Manifold WASM instance.\n *\n * @returns The newly created instance.\n */\nexport async function instantiateManifold() {\n    console.log('Instatiate manifoldwasm');\n    let module = null;\n    if (typeof wasmUrl === 'string' && !!wasmUrl) {\n        module = await Module({ locateFile: () => wasmUrl });\n    }\n    else {\n        module = await Module();\n    }\n    module.setup();\n    return module;\n}\n/**\n * Instantiate or get the global Manifold WASM instance.\n *\n * @returns A manifold instance.\n */\nexport async function getManifoldModule() {\n    if (!manifoldwasm)\n        manifoldwasm = await instantiateManifold();\n    return manifoldwasm;\n}\n/**\n * Get the global Manifold WASM instance synchronously.\n *\n * @returns A manifold instance.\n */\nexport function getManifoldModuleSync() {\n    return manifoldwasm;\n}\n//# sourceMappingURL=wasm.js.map","// Copyright 2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { getManifoldModuleSync } from \"./wasm.js\";\n/**\n * Control detail level for the\n * {@link manifold-encapsulated-types!CrossSection.circle CrossSection.circle},\n * {@link manifold-encapsulated-types!Manifold.cylinder Manifold.cylinder},\n * {@link manifold-encapsulated-types!Manifold.sphere Manifold.sphere}, and\n * {@link manifold-encapsulated-types!Manifold.revolve Manifold.revolve}\n * constructors.\n *\n * Libraries should not change these values, and if run through manifoldCAD or\n * the manifoldCAD CLI, will not be able to.  Libraries may get values to\n * determine their own level of detail.\n *\n * @packageDocumentation\n */\nlet minCircularAngle = 10.0;\nlet minCircularEdgeLength = 1.0;\n/**\n * Set an angle constraint when calculating the number of segments in a circle.\n * The number of segments will be rounded\n * up to the nearest factor of four.\n *\n * @param angle The minimum angle in degrees between consecutive segments. The\n * angle will increase if the the segments hit the minimum edge length.\n * Default is 10 degrees.\n * @group Global Settings\n */\nexport const setMinCircularAngle = (angle) => {\n    minCircularAngle = angle;\n    getManifoldModuleSync()?.setMinCircularAngle(angle);\n};\n/**\n * Set a length constraint when calculating the number segments in a circle.\n * The number of segments will be rounded\n * up to the nearest factor of four.\n *\n * @param length The minimum length of segments. The length will\n * increase if the the segments hit the minimum angle. Default is 1.0.\n * @group Global Settings\n */\nexport const setMinCircularEdgeLength = (length) => {\n    minCircularEdgeLength = length;\n    getManifoldModuleSync()?.setMinCircularEdgeLength(length);\n};\n/**\n * Set the default number of segments in a circle.\n * Overrides the edge length and angle\n * constraints and sets the number of segments to exactly this value.\n *\n * @param segments Number of circular segments. Default is 0, meaning no\n * constraint is applied.\n * @group Global Settings\n */\nexport const setCircularSegments = (segments) => getManifoldModuleSync()?.setCircularSegments(segments);\n/**\n * Reset the circular construction parameters to their defaults if\n * {@link setMinCircularAngle}, {@link setMinCircularEdgeLength}, or {@link\n * setCircularSegments} have been called.\n * @group Global Settings\n */\nexport const resetToCircularDefaults = () => {\n    getManifoldModuleSync()?.resetToCircularDefaults();\n    minCircularAngle = 10;\n    minCircularEdgeLength = 1;\n};\n/**\n * Get the current angle constraint.\n *\n * @returns The minimum angle in degrees between consecutive segments. The\n * angle will increase if the the segments hit the minimum edge length.\n * Default is 10 degrees.\n * @group Global Settings\n */\nexport const getMinCircularAngle = () => minCircularAngle;\n/**\n * Get the current edge length constraint.\n *\n * @returns The minimum length of segments. The length will\n * increase if the the segments hit the minimum angle. Default is 1.0.\n * @group Global Settings\n */\nexport const getMinCircularEdgeLength = () => minCircularEdgeLength;\n/**\n * Determine the result of the {@link setMinCircularAngle},\n * {@link setMinCircularEdgeLength}, and {@link setCircularSegments} defaults.\n *\n * @param radius For a given radius of circle, determine how many default\n * segments there will be.\n * @group Global Settings\n */\nexport const getCircularSegments = (radius) => getManifoldModuleSync()?.getCircularSegments(radius);\nexport const cleanup = () => {\n    resetToCircularDefaults();\n};\n//# sourceMappingURL=level-of-detail.js.map","// Copyright 2022-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { Material } from '@gltf-transform/core';\nimport { KHRMaterialsUnlit } from '@gltf-transform/extensions';\nconst defaultMaterial = {\n    roughness: 0.2,\n    metallic: 1,\n    baseColorFactor: [1, 1, 0],\n    alpha: 1,\n    unlit: false,\n};\nconst id2material = new Map();\nconst materialCache = new Map();\nexport function cleanup() {\n    id2material.clear();\n    materialCache.clear();\n}\n/**\n * Return a shallow copy of the input manifold with the given material\n * properties applied. They will be carried along through operations.\n *\n * @group Modelling Functions\n * @param manifold The input object.\n * @param material A set of material properties to apply to this manifold.\n */\nexport const setMaterial = (manifold, material) => {\n    const out = manifold.asOriginal();\n    id2material.set(out.originalID(), material);\n    return out;\n};\n/**\n * @internal\n */\nexport const getMaterialByID = (id) => {\n    return id2material.get(id);\n};\n/**\n *\n * @internal\n */\nexport function getBackupMaterial(node) {\n    if (node == null) {\n        return {};\n    }\n    if (node.material == null) {\n        node.material = getBackupMaterial(node.parent);\n    }\n    return node.material;\n}\nfunction makeDefaultMaterial(doc, matIn = {}) {\n    const { roughness, metallic, baseColorFactor, alpha, unlit } = {\n        ...defaultMaterial,\n        ...matIn\n    };\n    const material = doc.createMaterial(matIn.name ?? '');\n    if (unlit) {\n        const unlit = doc.createExtension(KHRMaterialsUnlit).createUnlit();\n        material.setExtension('KHR_materials_unlit', unlit);\n    }\n    if (alpha < 1) {\n        material.setAlphaMode(Material.AlphaMode.BLEND).setDoubleSided(true);\n    }\n    return material.setRoughnessFactor(roughness)\n        .setMetallicFactor(metallic)\n        .setBaseColorFactor([...baseColorFactor, alpha]);\n}\n/**\n *\n * @internal\n */\nexport function getCachedMaterial(doc, matDef) {\n    if (!materialCache.has(matDef)) {\n        materialCache.set(matDef, makeDefaultMaterial(doc, matDef));\n    }\n    return materialCache.get(matDef);\n}\n//# sourceMappingURL=material.js.map","// Copyright 2022-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { writeMesh } from \"./gltf-io.js\";\nimport { getCachedMaterial, getMaterialByID as getOriginalMaterialByID } from \"./material.js\";\n// Debug setup to show source meshes\nlet ghost = false;\nconst shown = new Map();\nconst singles = new Map();\nconst SHOW = {\n    baseColorFactor: [1, 0, 0],\n    alpha: 0.25,\n    roughness: 1,\n    metallic: 0\n};\nconst GHOST = {\n    baseColorFactor: [0.5, 0.5, 0.5],\n    alpha: 0.25,\n    roughness: 1,\n    metallic: 0\n};\n/**\n * @internal\n */\nexport function cleanup() {\n    ghost = false;\n    shown.clear();\n    singles.clear();\n}\nconst getDebugMeshByID = (id) => {\n    return shown.has(id) ? shown.get(id) : singles.get(id);\n};\n/**\n * Material for a debug visualization.\n *\n * There are two conditions:\n *\n *   * This is a mesh that has been flagged with `show`.\n *     It will be highlighted with the SHOW material.\n *   * This is a mesh that has been flagged with `only`.\n *     Any other mesh will have the GHOST material, while\n *     this one gets it's natural material.\n *\n * @internal\n * @param id The `originalID` of the mesh.\n */\nconst getDebugMaterialByID = (id) => {\n    const show = shown.has(id);\n    const inMesh = show ? shown.get(id) : singles.get(id);\n    if (show && inMesh) {\n        return SHOW;\n    }\n    return getOriginalMaterialByID(id);\n};\n/**\n * Override materials when debugging.\n *\n * When a mesh is flagged with `only`, we set the `ghost` global.\n * Everything gets rendered in the GHOST material, while the flagged\n * mesh is added as a debug node.\n *\n * @internal\n * @param id The `originalID` of the mesh.\n */\nexport const getMaterialByID = (id) => ghost ? GHOST : getOriginalMaterialByID(id);\nconst debug = (manifold, map) => {\n    let result = manifold.asOriginal();\n    map.set(result.originalID(), result.getMesh());\n    return result;\n};\n/**\n * Wrap any shape object with this method to display it and any copies in\n * transparent red. This is particularly useful for debugging `subtract()` as it\n * will allow you find the object even if it doesn't currently intersect the\n * result.\n *\n * @group Modelling Functions\n * @param manifold The object to show - returned for chaining.\n */\nexport const show = (manifold) => {\n    return debug(manifold, shown);\n};\n/**\n * Wrap any shape object with this method to display it and any copies as the\n * result, while ghosting out the final result in transparent gray. Helpful for\n * debugging as it allows you to see objects that may be hidden in the interior\n * of the result. Multiple objects marked `only()` will all be shown.\n *\n * @group Modelling Functions\n * @param manifold The object to show - returned for chaining.\n */\nexport const only = (manifold) => {\n    ghost = true;\n    return debug(manifold, singles);\n};\n/**\n *\n * @internal\n */\nexport const getDebugGLTFMesh = (doc, manifoldMesh, id2properties, backupMaterial = {}) => {\n    const debugNodes = [];\n    for (const [run, id] of manifoldMesh.runOriginalID.entries()) {\n        const debugMesh = getDebugMeshByID(id);\n        if (!debugMesh) {\n            continue;\n        }\n        // Here, we'll get back either a debug material (like SHOW),\n        // or the original mesh material.\n        const material = getDebugMaterialByID(id) || backupMaterial;\n        id2properties.get(id).material = getCachedMaterial(doc, material);\n        const debugNode = doc.createNode('debug')\n            .setMesh(writeMesh(doc, debugMesh, id2properties))\n            .setMatrix(manifoldMesh.transform(run));\n        debugNodes.push(debugNode);\n    }\n    return debugNodes;\n};\n//# sourceMappingURL=debug.js.map","// Copyright 2022-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/**\n * The scene builder provides modelling outside of the native\n * capabilities of Maniold WASM.  This includes scene graphs, materials,\n * and animation functions.  In general, the scene builder\n * follows GLTF semantics.\n *\n * This module includes modelling functions for use inside a ManifoldCAD script\n * (e.g.: `show`, `only`, `setMaterial`, etc.).  It also includes a set of\n * management functions (e.g.: `manifoldToGLTFDoc`, `cleanup`, etc.) that are\n * used to export complete scenes and generally manage the state of the scene\n * builder.\n *\n * @packageDocumentation\n */\nimport { Document } from '@gltf-transform/core';\nimport { addAnimationToDoc, addMotion, cleanup as cleanupAnimation, cleanupAnimationInDoc, getMorph, morphEnd, morphStart, setMorph } from \"./animation.js\";\nimport { cleanup as cleanupDebug, getDebugGLTFMesh, getMaterialByID } from \"./debug.js\";\nimport { writeMesh } from \"./gltf-io.js\";\nimport { GLTFNode } from \"./gltf-node.js\";\nimport { cleanup as cleanupMaterial, getBackupMaterial, getCachedMaterial } from \"./material.js\";\nimport { euler2quat } from \"./math.js\";\nexport { getAnimationDuration, getAnimationFPS, getAnimationMode, setAnimationDuration, setAnimationFPS, setAnimationMode, setMorphEnd, setMorphStart } from \"./animation.js\";\nexport { only, show } from \"./debug.js\";\nexport { GLTFMaterial, GLTFNode } from \"./gltf-node.js\";\nexport { getCircularSegments, getMinCircularAngle, getMinCircularEdgeLength, resetToCircularDefaults, setCircularSegments, setMinCircularAngle, setMinCircularEdgeLength } from \"./level-of-detail.js\";\nexport { setMaterial } from \"./material.js\";\n/**\n * Reset and garbage collect the scene builder and any\n * encapsulated modules.\n *\n * @group Management Functions\n */\nexport function cleanup() {\n    cleanupAnimation();\n    cleanupDebug();\n    cleanupMaterial();\n}\n// Swallow informational logs in testing framework\nfunction log(...args) {\n    if (typeof self !== 'undefined' && self.console) {\n        self.console.log(...args);\n    }\n}\nfunction createGLTFnode(doc, node) {\n    const out = doc.createNode(node.name);\n    // Animation Motion\n    const pos = addMotion(doc, 'translation', node, out);\n    if (pos != null) {\n        out.setTranslation(pos);\n    }\n    const rot = addMotion(doc, 'rotation', node, out);\n    if (rot != null) {\n        out.setRotation(euler2quat(rot));\n    }\n    const scale = addMotion(doc, 'scale', node, out);\n    if (scale != null) {\n        out.setScale(scale);\n    }\n    return out;\n}\nfunction addMesh(doc, node, manifold, backupMaterial = {}) {\n    const numTri = manifold.numTri();\n    if (numTri == 0) {\n        log('Empty manifold, skipping.');\n        return;\n    }\n    log(`Triangles: ${numTri.toLocaleString()}`);\n    const box = manifold.boundingBox();\n    const size = [0, 0, 0];\n    for (let i = 0; i < 3; i++) {\n        size[i] = Math.round((box.max[i] - box.min[i]) * 10) / 10;\n    }\n    log(`Bounding Box: X = ${size[0].toLocaleString()} mm, Y = ${size[1].toLocaleString()} mm, Z = ${size[2].toLocaleString()} mm`);\n    const volume = Math.round(manifold.volume() / 10);\n    log(`Genus: ${manifold.genus().toLocaleString()}, Volume: ${(volume / 100).toLocaleString()} cm^3`);\n    // From Z-up to Y-up (glTF)\n    const manifoldMesh = manifold.getMesh();\n    // Material\n    const id2properties = new Map();\n    for (const id of manifoldMesh.runOriginalID) {\n        const material = getMaterialByID(id) || backupMaterial;\n        id2properties.set(id, {\n            material: getCachedMaterial(doc, material),\n            attributes: ['POSITION', ...material.attributes ?? []]\n        });\n    }\n    // Animation Morph\n    const morph = getMorph(manifold);\n    const inputPositions = morphStart(manifoldMesh, morph);\n    // Core\n    const mesh = writeMesh(doc, manifoldMesh, id2properties);\n    node.setMesh(mesh);\n    // Animation Morph\n    morphEnd(doc, manifoldMesh, mesh, inputPositions, morph);\n    // If we're using a debug mode (`show` or `only`), check\n    // to see if this mesh requires special handling.\n    const debugNodes = getDebugGLTFMesh(doc, manifoldMesh, id2properties, backupMaterial);\n    for (const debugNode of debugNodes) {\n        node.addChild(debugNode);\n    }\n}\nfunction cloneNode(toNode, fromNode) {\n    toNode.setMesh(fromNode.getMesh());\n    fromNode.listChildren().forEach((child) => {\n        const clone = child.clone();\n        toNode.addChild(clone);\n    });\n}\nfunction cloneNodeNewMaterial(doc, toNode, fromNode, backupMaterial, oldBackupMaterial) {\n    cloneNode(toNode, fromNode);\n    const oldMesh = fromNode.getMesh();\n    const newMesh = doc.createMesh();\n    toNode.setMesh(newMesh);\n    oldMesh.listPrimitives().forEach((primitive) => {\n        const newPrimitive = primitive.clone();\n        if (primitive.getMaterial() === oldBackupMaterial) {\n            newPrimitive.setMaterial(backupMaterial);\n        }\n        newMesh.addPrimitive(newPrimitive);\n    });\n    // Track cloned meshes for easier export, later.\n    newMesh.setExtras({ clonedFrom: oldMesh });\n}\nfunction createNodeFromCache(doc, nodeDef, manifold2node) {\n    const node = createGLTFnode(doc, nodeDef);\n    const { manifold } = nodeDef;\n    if (manifold) {\n        // Animation Morph\n        setMorph(doc, node, manifold);\n        const backupMaterial = getBackupMaterial(nodeDef);\n        const cachedNodes = manifold2node.get(manifold);\n        if (cachedNodes == null) {\n            // Cache miss.\n            addMesh(doc, node, manifold, backupMaterial);\n            const cache = new Map();\n            cache.set(backupMaterial, node);\n            manifold2node.set(manifold, cache);\n        }\n        else {\n            // Cache hit...\n            const cachedNode = cachedNodes.get(backupMaterial);\n            if (cachedNode == null) {\n                // ...but not for this material.\n                const [oldBackupMaterial, oldNode] = cachedNodes.entries().next().value;\n                cloneNodeNewMaterial(doc, node, oldNode, getCachedMaterial(doc, backupMaterial), getCachedMaterial(doc, oldBackupMaterial));\n                cachedNodes.set(backupMaterial, node);\n            }\n            else {\n                // ...for this exact material.\n                cloneNode(node, cachedNode);\n            }\n        }\n    }\n    return node;\n}\nfunction createWrapper(doc) {\n    const halfRoot2 = Math.sqrt(2) / 2;\n    const mm2m = 1 / 1000;\n    const wrapper = doc.createNode('wrapper')\n        .setRotation([-halfRoot2, 0, 0, halfRoot2])\n        .setScale([mm2m, mm2m, mm2m]);\n    doc.createScene().addChild(wrapper);\n    return wrapper;\n}\n/**\n * Convert a Manifold object into a GLTF-Transform Document.\n *\n * @group Management Functions\n * @param manifold The Manifold object\n * @returns An in-memory GLTF-Transform Document\n */\nexport function manifoldToGLTFDoc(manifold) {\n    const node = new GLTFNode();\n    node.manifold = manifold;\n    return GLTFNodesToGLTFDoc([node]);\n}\n/**\n * Convert a list of GLTF Nodes into a GLTF-Transform Document.\n *\n * @group Management Functions\n * @param nodes A list of GLTF Nodes\n * @returns An in-memory GLTF-Transform Document\n */\nexport function GLTFNodesToGLTFDoc(nodes) {\n    if (nodes.length == 0) {\n        throw new TypeError('nodes[] must contain at least one GLTFNode.');\n    }\n    const doc = new Document();\n    const root = createWrapper(doc);\n    addAnimationToDoc(doc);\n    const node2gltf = new Map();\n    const manifold2node = new Map();\n    let leafNodes = 0;\n    // First, create a node in the GLTF document for each ManifoldCAD node.\n    for (const nodeDef of nodes) {\n        node2gltf.set(nodeDef, createNodeFromCache(doc, nodeDef, manifold2node));\n        if (nodeDef.manifold) {\n            ++leafNodes;\n        }\n    }\n    // Step through each node and set its parent.\n    // Nodes without parents are added directly to the root.\n    for (const nodeDef of nodes) {\n        const gltfNode = node2gltf.get(nodeDef);\n        const { parent } = nodeDef;\n        if (parent) {\n            node2gltf.get(parent).addChild(gltfNode);\n        }\n        else {\n            root.addChild(gltfNode);\n        }\n    }\n    log('Total glTF nodes: ', nodes.length, ', Total mesh references: ', leafNodes);\n    cleanupAnimationInDoc();\n    return doc;\n}\n//# sourceMappingURL=scene-builder.js.map","// Copyright 2022-2025 The Manifold Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport * as animation from \"./animation.js\";\nimport { bundleCode, setHasOwnWorker, setWasmUrl as setEsbuildWasmUrl } from \"./bundler.js\";\nimport { RuntimeError } from \"./error.js\";\nimport { Export3MF } from \"./export-3mf.js\";\nimport { ExportGLTF } from \"./export-gltf.js\";\nimport * as garbageCollector from \"./garbage-collector.js\";\nimport * as gltfNode from \"./gltf-node.js\";\nimport * as levelOfDetail from \"./level-of-detail.js\";\nimport * as scenebuilder from \"./scene-builder.js\";\nimport { getSourceMappedStackTrace, isWebWorker } from \"./util.js\";\nimport { getManifoldModule, setWasmUrl as setManifoldWasmUrl } from \"./wasm.js\";\nlet exporters;\nconst AsyncFunction = Object.getPrototypeOf(async function () { }).constructor;\n// Swallow informational logs in testing framework\nfunction log(...args) {\n    if (typeof self !== 'undefined' && self.console) {\n        self.console.log(...args);\n    }\n}\n/**\n * Clean up any state from the last run.\n *\n * This includes any outstanding Manifold, Mesh or CrossSection objects,\n * even if referenced elsewhere.\n */\nexport function cleanup() {\n    garbageCollector.cleanup();\n    scenebuilder.cleanup();\n    levelOfDetail.cleanup();\n    gltfNode.cleanup();\n}\n/**\n * Transform a model from code to a GLTF document.\n *\n * @param code A string containing the code to evaluate.\n * @returns A gltf-transform Document.\n */\nexport async function evaluate(code, options = {}) {\n    cleanup();\n    const t0 = performance.now();\n    const { doNotBundle, ...bundleOpt } = options;\n    const bundled = doNotBundle === true ? code : await bundleCode(code, bundleOpt);\n    const t1 = performance.now();\n    if (doNotBundle !== true) {\n        log(`Bundling code took ${((t1 - t0) / 1000).toFixed(2)} seconds`);\n    }\n    // Customize `manifold-3d/manifoldCAD`.\n    // Let models know that they are running inside this worker.\n    const manifoldCAD = await import(\"./manifoldCAD.js\");\n    const manifoldImport = {\n        ...manifoldCAD,\n        isManifoldCAD: () => true,\n    };\n    // If a top level script imports manifoldCAD, track GLTF nodes.\n    // Libraries are expected to manage this on their own; if a\n    // library somehow doesn't export a GLTF node, it must not\n    // show up here.\n    const toplevelImport = {\n        ...manifoldImport,\n        GLTFNode: gltfNode.GLTFNodeTracked,\n        getGLTFNodes: gltfNode.getGLTFNodes,\n        resetGLTFNodes: gltfNode.resetGLTFNodes,\n    };\n    // Set up global variables exposed to the model without an import.\n    const globals = {\n        // These accessors are only available to top level scripts.\n        // See ../lib/manifoldCADGlobals.d.ts\n        setCircularSegments: levelOfDetail.setCircularSegments,\n        setMinCircularAngle: levelOfDetail.setMinCircularAngle,\n        setMinCircularEdgeLength: levelOfDetail.setMinCircularEdgeLength,\n        resetToCircularDefaults: levelOfDetail.resetToCircularDefaults,\n        setAnimationDuration: animation.setAnimationDuration,\n        setAnimationFPS: animation.setAnimationFPS,\n        setAnimationMode: animation.setAnimationMode,\n        // The bundler will swap these objects in when needed.\n        _manifold_cad_top_level: toplevelImport,\n        _manifold_cad_library: manifoldImport,\n        // While this project is built using ES modules, and we assume models and\n        // libraries are ES modules, code executed via `new Function()` or `eval` is\n        // treated as commonJS.\n        // CommonJS expects 'exports' to exist:\n        exports: {},\n        // This is where we expect results after running the script.\n        module: { exports: { default: null } },\n    };\n    let result = null;\n    try {\n        const evalFn = new AsyncFunction(...Object.keys(globals), bundled);\n        await evalFn(...Object.values(globals));\n        result = globals.module?.exports?.default;\n        // If the default export is a function, execute it.  This way libraries can\n        // preview their results when run as a top level script, without incurring\n        // that overhead when imported into another model.\n        if (typeof result === 'function') {\n            result = await result();\n        }\n    }\n    catch (error) {\n        // \"According to step 12 of\n        // https://tc39.es/ecma262/#sec-createdynamicfunction, the Function\n        // constructor always prefixes the source with additional 2 lines.\"\n        // https://github.com/nodejs/node/issues/43047#issuecomment-1564068099\n        const stacktrace = getSourceMappedStackTrace(bundled, error, -2);\n        let newError = null;\n        const missing = Object.keys(toplevelImport).find((x) => error.message.match(x));\n        if (error.name === 'ReferenceError' && missing) {\n            newError = new RuntimeError(error, error.message + '.  Import it by adding \\`' +\n                `import {${missing}} from 'manifold-3d/manifoldCAD';` +\n                '\\` to the top of your model.');\n        }\n        else if (error.name === 'ReferenceError' && error.message.match(/glMatrix/)) {\n            newError = new RuntimeError(error, 'ManifoldCAD no longer includes gl-matrix directly.  ' +\n                'Import it by adding `import * as glMatrix from \\'gl-matrix\\';` ' +\n                'to the top of your model.');\n        }\n        else {\n            newError = new RuntimeError(error);\n        }\n        newError.manifoldStack = stacktrace;\n        throw newError;\n    }\n    const t2 = performance.now();\n    log(`Manifold took ${((t2 - t1) / 1000).toFixed(2)} seconds`);\n    // If we don't actually have a model, complain.\n    if (!result || (Array.isArray(result) && !result.length)) {\n        if (gltfNode.getGLTFNodes().length) {\n            throw new Error('GLTF Nodes were created, but not exported.  ' +\n                'Add `const nodes = getGLTFNodes();` and `export default nodes;` ' +\n                'to the end of your model.');\n        }\n        throw new Error('No output as no model was exported.  Add a default export ' +\n            '(e.g.: `export default result;`) to the bottom of your model.  ' +\n            'The default export must be a `Manifold` or `GLTFNode` object, ' +\n            'an array of `Manifold` or `GLTFNode` objects, ' +\n            'or a function that returns any of the above.');\n    }\n    // Create a gltf-transform document.\n    const nodes = await gltfNode.anyToGLTFNodeList(result);\n    const doc = scenebuilder.GLTFNodesToGLTFDoc(nodes);\n    const t3 = performance.now();\n    log(`Creating GLTF Document took ${((t3 - t2) / 1000).toFixed(2)} seconds`);\n    return doc;\n}\n/**\n * Convert an in-memory GLTF document to a URL encoded blob.\n *\n * @param doc The GLTF document.\n * @param extension The target file extension.\n * @returns A URL encoded blob.\n */\nexport const exportBlobURL = async (doc, extension) => {\n    const t0 = performance.now();\n    exporters = [new Export3MF(), new ExportGLTF()];\n    const blob = await exporters.find(ex => ex.extensions.includes(extension)).asBlob(doc);\n    const blobURL = URL.createObjectURL(blob);\n    const t1 = performance.now();\n    log(`Exporting ${extension.toUpperCase()} took ${(Math.round((t1 - t0) / 10) / 100).toLocaleString()} seconds`);\n    return blobURL;\n};\n/**\n * Set up message handlers and logging when run as a web worker.\n */\nconst initializeWebWorker = () => {\n    const interceptConsole = () => {\n        console.debug('Intercepting console.log() in manifoldCAD worker.');\n        if (self.console) {\n            const oldLog = self.console.log;\n            self.console.log = function (...args) {\n                let message = '';\n                for (const arg of args) {\n                    if (arg == null) {\n                        message += 'undefined';\n                    }\n                    else if (typeof arg == 'object') {\n                        message += JSON.stringify(arg, null, 4);\n                    }\n                    else {\n                        message += arg.toString();\n                    }\n                }\n                self.postMessage({ type: 'log', message });\n                oldLog(...args);\n            };\n        }\n        ;\n    };\n    const sendError = (error) => {\n        // Log the error / stack trace to the console.\n        console.error(error);\n        if (error.cause)\n            console.error('Caused by:', error.cause);\n        if (error.manifoldStack)\n            console.error('manifoldStack:', error.manifoldStack);\n        self.postMessage({\n            type: 'error',\n            name: error.name,\n            message: error.message,\n            stack: error.manifoldStack ?? error.stack\n        });\n    };\n    const handleInitialize = async (message) => {\n        try {\n            console.debug('Initializing ManifoldCAD worker.');\n            if (message.manifoldWasmUrl)\n                setManifoldWasmUrl(message.manifoldWasmUrl);\n            if (message.esbuildWasmUrl)\n                setEsbuildWasmUrl(message.esbuildWasmUrl);\n            setHasOwnWorker(message.esbuildHasOwnWorker === true);\n            await getManifoldModule();\n            interceptConsole();\n            self.postMessage({ type: 'ready' });\n            console.debug('Successfully initialized ManifoldCAD worker!');\n        }\n        catch (error) {\n            sendError(error);\n        }\n    };\n    let gltfdoc = null;\n    const handleEvaluate = async (message) => {\n        try {\n            const { code, ...options } = message;\n            gltfdoc = await evaluate(message.code, options);\n            self.postMessage({ type: 'done' });\n        }\n        catch (error) {\n            sendError(error);\n        }\n    };\n    const handleExport = async (message) => {\n        try {\n            self.postMessage({\n                type: 'blob',\n                extension: message.extension,\n                blobURL: await exportBlobURL(gltfdoc, message.extension)\n            });\n        }\n        catch (error) {\n            sendError(error);\n        }\n    };\n    self.onmessage = async (e) => {\n        const message = e.data;\n        if (message.type === 'initialize') {\n            handleInitialize(message);\n        }\n        else if (message.type === 'evaluate') {\n            handleEvaluate(message);\n        }\n        else if (message.type === 'export') {\n            handleExport(message);\n        }\n    };\n};\nif (isWebWorker())\n    initializeWebWorker();\n//# sourceMappingURL=worker.js.map"],"names":["EventDispatcher","type","listener","listeners","listenerArray","index","event","array","l","key","GraphEdge","_name","_parent","_child","_attributes","child","Graph","args","node","parentSet","edge","childSet","filter","name","a","b","attributes","parent","_extends","target","i","source","RefList","refs","ref","RefSet","RefMap","map","$attributes","$immutableKeys","GraphNode","graph","defaultAttributes","value","other","prevValue","nextValue","attribute","refAttributes","prevRef","metadata","refMap","VERSION","GLB_BUFFER","PropertyType","VertexLayout","BufferViewUsage$1","BufferViewUsage","TextureChannel","Format","ComponentTypeToTypedArray","BufferUtils","dataURI","byteString","ia","data","isBase64","text","arrays","totalByteLength","result","byteOffset","srcArray","paddingByte","paddedLength","dstArray","v","byteLength","view","JPEGImageUtils","next","validateJPEGBuffer","_buffer","PNGImageUtils","ImageUtils","mimeType","impl","buffer","uncompressedBytes","channels","resolution","extension","FileUtils","uri","fileName","ARRAY_TYPE","y","create","out","length","x","z","transformMat4","m","w","vec","stride","offset","count","fn","arg","getBounds","resultBounds","createBounds","parents","mesh","meshBounds","getMeshBounds","expandBounds","worldMatrix","prim","position","indices","localPos","worldPos","il","point","NULL_DOMAIN","HTTPUtils","path","base","stack","parts","isObject","o","isPlainObject","ctor","prot","_Logger","Verbosity","Logger","verbosity","determinant","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","multiply","b0","b1","b2","b3","getScaling","mat","m11","m12","m13","m21","m22","m23","m31","m32","m33","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","MathUtils","tolerance","min","max","componentType","f","srcMat","dstTranslation","dstRotation","dstScale","sx","sy","sz","_m1","invSX","invSY","invSZ","srcTranslation","srcRotation","srcScale","dstMat","te","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","equalsRef","refA","refB","equalsRefSet","refSetA","refSetB","refValuesA","refValuesB","equalsRefMap","refMapA","refMapB","keysA","keysB","equalsArray","equalsObject","_a","_b","numKeysA","numKeysB","valueA","valueB","isArray","ALPHABET","UNIQUE_RETRIES","ID_LENGTH","previousIDs","generateOne","rtn","uuid","retries","id","COPY_IDENTITY","t","EMPTY_SET","Property","extras","PropertyClass","resolve","thisValue","otherValue","subkey","skip","n","ExtensibleProperty","extensionProperty","Accessor","normalized","elementSize","j","sparse","arrayToComponentType","Animation","channel","sampler","AnimationChannel","targetPath","targetNode","AnimationSampler","interpolation","input","output","Buffer$1","Camera","znear","zfar","aspectRatio","yfov","xmag","ymag","ExtensionProperty","TextureInfo","texCoord","magFilter","minFilter","wrapS","wrapT","R","G","B","A","Material","doubleSided","alpha","baseColorFactor","alphaMode","alphaCutoff","texture","emissiveFactor","scale","strength","factor","Mesh","primitive","weights","Node","translation","rotation","matrix","r","s","ancestors","ancestor","parentNode","camera","skin","Primitive","semantic","accessor","material","mode","PrimitiveTarget","Scene","Skin","skeleton","inverseBindMatrices","joint","Texture","image","Root","extensionName","otherExtension","defaultScene","Document","logger","_other","transforms","transform","ext","Extension","document","_event","property","required","_key","_dependency","_readerContext","_propertyType","_writerContext","ReaderContext","jsonDoc","textureInfo","textureInfoDef","textureDef","samplerDef","DEFAULT_OPTIONS","SUPPORTED_PREREAD_TYPES","GLTFReader","_options","options","json","context","assetDef","asset","extensionsUsed","extensionsRequired","unsupportedHooks","bufferDefs","bufferDef","bufferViewDefs","bufferViewDef","resource","accessorDefs","accessorDef","getAccessorArray","imageDefs","textureDefs","imageDef","bufferData","imageData","materialDefs","materialDef","pbrDef","meshDefs","meshDef","primitiveDef","targetNames","targetDef","targetIndex","targetName","accessorIndex","cameraDefs","cameraDef","perspectiveDef","orthoDef","nodeDefs","nodeDef","skinDefs","skinDef","nodeIndex","childIndex","animationDefs","animationDef","animation","samplers","channelDef","sceneDefs","sceneDef","scene","hasSparseValues","isZeroFilled","getSparseArray","getInterleavedArray","bufferView","TypedArray","componentSize","accessorByteOffset","byteStride","elementStride","sparseDef","indicesDef","valuesDef","values","BufferViewTarget","WriterContext","_doc","root","numBuffers","numImages","UniqueURIGenerator","getSlot","samplerKey","textureKey","def","throwOnConflict","resources","conflictMessage","cachedUsage","usage","prevUsage","multiple","basename","object","UNSIGNED_INT","UNSIGNED_SHORT","UNSIGNED_BYTE","SUPPORTED_PREWRITE_TYPES","GLTFWriter","doc","extensionsRegistered","concatAccessors","accessors","bufferIndex","bufferByteOffset","bufferViewTarget","buffers","accessorArray","bufferViewData","interleaveAccessors","vertexCount","vertexByteOffset","viewByteOffset","concatSparseAccessors","sparseData","maxIndex","needSparseWarning","el","ValueArray","IndexArray","IndexComponentType","indicesBufferViewDef","indicesBufferViewIndex","valuesBufferViewDef","valuesBufferViewIndex","textureIndex","groupByParent","accessorParents","uniqueParents","parentToIndex","accessorGroups","bufferByteLength","groupAccessors","_buffer2","_buffer3","_buffer4","_buffer5","imagePadding","samplerIndexMap","samplerIndex","clean","unused","ChunkType","PlatformIO","extensions","dependencies","layout","isGLB","glb","isExternalBuffer","isExternalImage","header","jsonText","jsonChunkData","jsonChunkHeader","jsonChunk","binBuffer","binChunkData","binChunkHeader","binChunk","_this","images","pendingResources","resolveResource","resourceUUID","jsonByteOffset","jsonByteLength","binByteOffset","binByteLength","jsonDocument","WebIO","fetchConfig","response","cos","sin","PI","TAU","euler2quat","cr","sr","cp","sp","cy","q","animationMode","animationDuration","animationFPS","setAnimationMode","getAnimationMode","setAnimationDuration","duration","getAnimationDuration","setAnimationFPS","fps","getAnimationFPS","manifold2morph","timesAccessor","weightsAccessor","weightsSampler","hasAnimation","cleanup","addMotion","motion","nFrames","nEl","frames","framesAccessor","setMorph","manifold","getMorph","morphStart","manifoldMesh","morph","inputPositions","vertProp","pos","morphEnd","startPosition","morphAccessor","morphTarget","setMorphStart","func","setMorphEnd","addAnimationToDoc","times","cleanupAnimationInDoc","module","__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__export","all","__copyProps","to","from","except","desc","__toCommonJS","mod","__async","__this","__arguments","generator","reject","fulfilled","step","e","rejected","browser_exports","analyzeMetafile","analyzeMetafileSync","build","buildSync","browser_default","formatMessages","formatMessagesSync","initialize","stop","transformSync","version","encodePacket","packet","visit","bb","encodeUTF8","item","keys","ByteBuffer","writeUInt32LE","decodePacket","bytes","decodeUTF8","value2","isRequest","buf","delta","clone","readUInt32LE","ptr","encodeInvariant","encoder","decoder","quote","buildLogLevelDefault","transformLogLevelDefault","validateAndJoinStringArray","what","toJoin","validateStringValue","canBeAnything","mustBeBoolean","mustBeString","mustBeRegExp","mustBeInteger","mustBeValidPortNumber","mustBeFunction","mustBeArray","mustBeArrayOfStrings","mustBeObject","mustBeEntryPoints","mustBeWebAssemblyModule","mustBeObjectOrNull","mustBeStringOrBoolean","mustBeStringOrObject","mustBeStringOrArrayOfStrings","mustBeStringOrUint8Array","mustBeStringOrURL","getFlag","mustBeFn","mustBe","checkForInvalidFlags","where","validateInitializeOptions","wasmURL","wasmModule","worker","validateMangleCache","mangleCache","validated","pushLogFlags","flags","isTTY","logLevelDefault","color","logLevel","logLimit","pushCommonFlags","legalComments","sourceRoot","sourcesContent","format","globalName","mangleProps","reserveProps","mangleQuoted","minify","minifySyntax","minifyWhitespace","minifyIdentifiers","lineLimit","drop","dropLabels","charset","treeShaking","ignoreAnnotations","jsx","jsxFactory","jsxFragment","jsxImportSource","jsxDev","jsxSideEffects","define","logOverride","supported","pure","keepNames","platform","tsconfigRaw","absPaths","jsRegExpToGoRegExp","flagsForBuildOptions","callName","writeDefault","entries","stdinContents","stdinResolveDir","sourcemap","bundle","splitting","preserveSymlinks","metafile","outfile","outdir","outbase","tsconfig","resolveExtensions","nodePathsInput","mainFields","conditions","external","packages","alias","loader","outExtension","publicPath","entryNames","chunkNames","assetNames","inject","banner","footer","entryPoints","absWorkingDir","stdin","write","allowOverwrite","old","entryPoint","entryPointKeys","stdinKeys","contents","resolveDir","sourcefile","loader2","nodePaths","flagsForTransformOptions","createChannel","streamIn","requestCallbacksByKey","closeData","responseCallbacks","nextRequestID","nextBuildKey","stdout","stdoutUsed","readFromStdout","chunk","limit","swap","handleIncomingPacket","afterClose","error","sendRequest","callback","sendResponse","handleRequest","request","requestCallbacks","errors","extractErrorMessageV8","isFirstPacket","binaryVersion","defaultWD","refCount","buildKey","buildRefs","buildOrContextImpl","err","res","fs","details","createObjectStash","start","inputPath","replaceDetailsInMessages","warnings","outstanding","failureErrorWithLog","messages","kind","terminalWidth","sanitizeMessages","verbose","isContext","handleError","pluginName","message","plugins","handlePlugins","buildOrContextContinue","done","requestPlugins","runOnEndCallbacks","scheduleOnDisposeCallbacks","buildResponseToResult","callback2","originalErrors","originalWarnings","convertOutputFiles","onEndErrors","onEndWarnings","latestResultPromise","provideLatestResult","request2","didDispose","settlePromise","result2","triggerAnotherBuild","error2","response2","options2","delay","port","host","servedir","keyfile","certfile","fallback","cors","onRequest","corsKeys","origin","request3","initialOptions","onStartCallbacks","onEndCallbacks","onResolveCallbacks","onLoadCallbacks","onDisposeCallbacks","nextCallbackID","isSetupDone","setup","plugin","promise","keys2","importer","namespace","pluginData","importAttributes","resolve2","sanitizeStringMap","registeredText","registeredNote","extractCallerV8","_0","note","id2","suffix","sideEffects","watchFiles","watchDirs","sanitizeStringArray","newErrors","newWarnings","cb","nextID","ident","tried","lines","location2","parseStackLinesV8","stash","at","line","match","lineText","column","file","pluginText","sanitizeLocation","suggestion","relevantASCII","fallbackPluginName","messagesClone","notes","detail","notesClone","noteKeys","noteText","noteLocation","hash","binary","regexp","ensureServiceIsRunning","stopService","initializePromise","longLivedService","useWorker","startRunningService","rejectAllWith","rejectAllPromise","blob","onmessage","postMessage","globalThis","k","enosys","outputBuf","fd","nl","uid","gid","link","perm","atime","mtime","code","setInt64","addr","getInt64","low","high","loadValue","storeValue","typeFlag","loadSlice","len","loadSliceOfValues","loadString","saddr","timeOrigin","p","msec","str","dst","src","toCopy","instance","strPtr","argc","argvPtrs","argv","go","wasm","stderr","resumeStdin","stdinPos","first","tryToInstantiateModule","timeout","firstMessageResolve","firstMessageReject","firstMessagePromise","service","_","BundlerError","failure","RuntimeError","cause","comma","chars","intToChar","charToInt","c","decodeInteger","reader","relative","shift","integer","shouldNegate","hasMoreVlq","StringReader","char","idx","decode","mappings","decoded","genColumn","sourcesIndex","sourceLine","sourceColumn","namesIndex","semi","sorted","lastCol","seg","sort","sortComparator","global","factory","this","schemeRegex","urlRegex","fileRegex","isAbsoluteUrl","isSchemeRelativeUrl","isAbsolutePath","isFileUrl","isRelative","parseAbsoluteUrl","makeUrl","parseFileUrl","scheme","user","query","parseUrl","url","stripPathFilename","mergePaths","normalizePath","rel","pieces","pointer","positive","addTrailingSlash","piece","inputType","baseUrl","baseType","queryHash","stripFilename","resolver","mapUrl","prefix","resolveUri","COLUMN","SOURCES_INDEX","SOURCE_LINE","SOURCE_COLUMN","NAMES_INDEX","maybeSort","owned","unsortedIndex","nextUnsortedSegmentLine","sortSegments","isSorted","found","binarySearch","haystack","needle","mid","cmp","upperBound","lowerBound","memoizedState","memoizedBinarySearch","state","lastKey","lastNeedle","lastIndex","parse","LINE_GTR_ZERO","COL_GTR_EQ_ZERO","LEAST_UPPER_BOUND","GREATEST_LOWER_BOUND","TraceMap","isString","parsed","names","sources","decodedMappings","originalPositionFor","bias","OMapping","segments","traceSegmentInternal","segment","resolvedSources","memo","exports","decodeBase64","decodeBase64WithBufferFrom","decodeBase64WithNewBuffer","decodeBase64WithAtob","base64","stripComment","sm","readFromFileMap","read","filename","throwError","Converter","opts","space","encodeBase64WithBufferFrom","encodeBase64WithNewBuffer","encodeBase64WithBtoa","encoding","content","obj","comment","makeConverter","isWebWorker","isNode","parseV8StackTrace","frame","matches","methodName","parseSpiderMonkeyStackTrace","parseStackTrace","getSourceMappedStackTrace","lineOffset","converter","convert","tracer","location","acc","cur","esbuildWasmUrl","esbuildHasOwnWorker","setWasmUrl","setHasOwnWorker","cdnUrlHelpers","specifier","cdnUrl","jsCDN","helper","log","esbuildManifoldPlugin","manifoldCADExportPath","manifoldCADExportSpecifier","ManifoldCADExportMatch","manifoldCADExportNames","dirname","__viteBrowserExternal","fileURLToPath","dir","skipResolve","globals","esbuild_initialized","getEsbuildConfig","esbuildOptions","esbuild.initialize","bundleCode","esbuild.build","defMatrix","matrix2str","makeItem","toDate3mf","d","pushHeader","unit","title","author","description","application","creationDate","license","modificationDate","pushObjectWithComponents","children","objectID","addComp","pushObjectWithMesh","vertices","precision","fileForContentTypes","to3dmodel","meshes","components","items","FileForRelThumbnail","xmlType","u8","u16","i32","fleb","fdeb","clim","freb","eb","fl","revfl","revfd","rev","hMap","cd","mb","le","co","rvb","sv","r_1","flt","fdt","flm","fdm","shft","slc","ec","ind","msg","nt","wbits","wbits16","hTree","t2","et","i0","i1","i2","maxSym","tr","mbt","ln","dt","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","cf","wfblk","dat","wblk","final","syms","lf","df","li","bs","bl","dlt","mlb","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","flen","ftlen","dtlen","lm","ll","dm","dl","llm","lcts","it","clct","sym","deo","dflt","lvl","plvl","pre","post","st","lst","opt","msk_1","prev","head","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","ml","mmd","md","ti","pti","lin","din","crct","crc","dopt","dict","newDat","mrg","wbytes","deflateSync","fltn","val","op","td","tds","strToU8","latin1","ar","ai","exfl","ex","wzh","u","ce","col","exl","exf","wzf","zipSync","files","tot","compression","com","ms","oe","cdl","badd","Export3MF","to3mf","nextGlobalID","object2globalID","getObjectID","getMeshID","clonedFrom","setObjectID","manifoldPrimitive","positionAccessor","nodes","meshID","parentID","comp","fileForRelThumbnail","model","zipFile","KHR_SUPERCOMPRESSION_NONE","KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT","KHR_DF_VENDORID_KHRONOS","KHR_DF_VERSION","KHR_DF_MODEL_UNSPECIFIED","KHR_DF_MODEL_ETC1S","KHR_DF_MODEL_UASTC","KHR_DF_FLAG_ALPHA_STRAIGHT","KHR_DF_TRANSFER_SRGB","KHR_DF_PRIMARIES_BT709","KHR_DF_SAMPLE_DATATYPE_SIGNED","VK_FORMAT_UNDEFINED","createDefaultContainer","BufferReader","littleEndian","left","right","maxByteLength","term","KTX2_ID","decodeText","container","headerByteLength","headerReader","dfdByteOffset","dfdByteLength","kvdByteOffset","kvdByteLength","sgdByteOffset","sgdByteLength","levelByteLength","levelReader","dfdReader","vendorId","descriptorType","versionNumber","descriptorBlockSize","colorModel","colorPrimaries","transferFunction","texelBlockDimension","bytesPlane","dfd","numSamples","sample","kvdReader","keyValueByteLength","keyData","kvPadding","sgdReader","endpointCount","selectorCount","endpointsByteLength","selectorsByteLength","tablesByteLength","extendedByteLength","imageDescs","endpointsByteOffset","selectorsByteOffset","tablesByteOffset","extendedByteOffset","endpointsData","selectorsData","tablesData","extendedData","EXT_MESH_GPU_INSTANCING","EXT_MESHOPT_COMPRESSION","EXT_TEXTURE_WEBP","EXT_TEXTURE_AVIF","KHR_DRACO_MESH_COMPRESSION","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_ANISOTROPY","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_DIFFUSE_TRANSMISSION","KHR_MATERIALS_DISPERSION","KHR_MATERIALS_EMISSIVE_STRENGTH","KHR_MATERIALS_IOR","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_UNLIT","KHR_MATERIALS_VOLUME","KHR_MATERIALS_VARIANTS","KHR_MESH_QUANTIZATION","KHR_TEXTURE_BASISU","KHR_TEXTURE_TRANSFORM","KHR_XMP_JSON_LD","INSTANCE_ATTRIBUTE","InstancedMesh","EXTMeshGPUInstancing","instancedMeshDef","instancedMesh","prop","EncoderMethod$1","EncoderMethod","MeshoptMode","MeshoptFilter","isFallbackBuffer","BYTE","SHORT","FLOAT","encodeNormalizedInt","decodeNormalizedInt","prepareAccessor","filterOptions","bits","decodeNormalizedIntArray","padNormals","padArrayElements","elementCount","getMeshoptMode","getMeshoptFilter","refName","refKey","isDelta","getTargetPath","DEFAULT_ENCODER_OPTIONS$1","EXTMeshoptCompression","dependency","propertyType","viewDef","meshoptDef","fallbackBuffer","fallbackBufferDef","_context","fallbackBufferIndex","parentToID","getParentID","preparedAccessor","bufferViewAccessors","otherBufferViews","compressedData","fallbackBufferByteOffset","bufferViewIndex","finalBufferViewDef","compressedByteOffset","bufferViewExtensionDef","AVIFImageUtils","box","unbox","EXTTextureAVIF","imageIndex","size","WEBPImageUtils","RIFF","WEBP","chunkId","chunkByteLength","width","height","EXTTextureWebP","decoderModule","COMPONENT_ARRAY","DATA_TYPE","decodeGeometry","dracoMesh","decodeIndex","numIndices","decodeAttribute","dataType","ArrayCtor","numComponents","numValues","initDecoderModule","_decoderModule","encoderModule","AttributeEnum","DEFAULT_QUANTIZATION_BITS","DEFAULT_ENCODER_OPTIONS","initEncoderModule","_encoderModule","encodeGeometry","builder","attributeIDs","dracoBuffer","hasMorphTargets","hasSparseAttributes","attributeEnum","getAttributeEnum","attributeID","addAttribute","quantizationVolume","range","EncodingError","numVertices","itemSize","KHRDracoMeshCompression","dracoMeshes","primDef","dracoDef","dracoAttribute","attributeArray","primitiveHashMap","listDracoPrimitives","primitiveEncodingMap","primHash","encodedPrim","attributeDef","dracoContext","included","excluded","nonIndexed","nonTriangles","accessorIndices","includedAccessors","includedHashKeys","primToHashKey","hashKey","createHashKey","dstIndices","dstAttribute","parentTypes","attr","indexMap","hashElements","Light","intensity","angle","KHRLightsPunctual","lights","lightDef","_lightDef$spot","_lightDef$spot2","light","lightNodeDef","lightDefs","lightIndexMap","R$7","G$7","B$5","Anisotropy","KHRMaterialsAnisotropy","materialIndex","anisotropy","anisotropyDef","R$6","G$6","B$4","Clearcoat","KHRMaterialsClearcoat","clearcoat","clearcoatDef","R$5","G$5","B$3","A$3","DiffuseTransmission","KHRMaterialsDiffuseTransmission","transmission","transmissionDef","Dispersion","dispersion","KHRMaterialsDispersion","dispersionDef","EmissiveStrength","KHRMaterialsEmissiveStrength","emissiveStrength","emissiveStrengthDef","IOR","ior","KHRMaterialsIOR","iorDef","R$4","G$4","Iridescence","thickness","KHRMaterialsIridescence","iridescence","iridescenceDef","R$3","G$3","B$2","A$2","PBRSpecularGlossiness","KHRMaterialsPBRSpecularGlossiness","specGloss","specGlossDef","R$2","G$2","B$1","A$1","Sheen","KHRMaterialsSheen","sheen","sheenDef","R$1","G$1","Specular","KHRMaterialsSpecular","specular","specularDef","Transmission","KHRMaterialsTransmission","Unlit","KHRMaterialsUnlit","Mapping","variant","MappingList","mapping","Variant","KHRMaterialsVariants","variants","variantDef","meshIndex","primIndex","mappingList","variantPrimDef","mappingDef","variantIndex","variantDefs","variantIndexMap","mappingDefs","Volume","distance","KHRMaterialsVolume","volume","volumeDef","KHRMeshQuantization","KTX2ImageUtils","hasAlpha","level","levelWidth","levelHeight","blockSize","KHRTextureBasisu","basisuDef","Transform","KHRTextureTransform","transformDef","textureInfoEntries","eq","PARENT_TYPES","Packet","properties","copyJSON","jsonld","KHRXMP","_context$jsonDoc$json","extensionDef","packets","packetDef","defLists","propertyLists","defs","xmpDef","packetDefs","parentDef","KHRONOS_EXTENSIONS","NAME","MERGE","ManifoldPrimitive","indicesAccessor","valuesAccessor","runIndex","EXTManifold","manifoldDef","mergeFrom","mergeTo","numPrimitive","mergeIndicesIndex","mergeValuesIndex","mergeIndices","mergeValues","existingPrimitive","attributeDefs","setupIO","io","writeMesh","id2properties","manifoldExtension","attributeUnion","primitive2attributes","numRun","lastID","run","unionSize","numVert","numProp","aIdx","vert2merge","vert","newVert","ExportGLTF","memoryRegistry","manifoldStaticFunctions","manifoldMemberFunctions","crossSectionStaticFunctions","crossSectionMemberFunctions","elem","garbageCollectFunction","originalFn","interceptMethods","methodNames","garbageCollectManifold","GLTFMaterial","GLTFNode","copy","GLTFNodeTracked","getGLTFNodes","resetGLTFNodes","anyToGLTFNodeList","any","Module","_scriptName","moduleArg","moduleRtn","readyPromiseResolve","readyPromiseReject","readyPromise","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","ENVIRONMENT_IS_NODE","createRequire","require","_ManifoldInitialized","toVec","list","fromVec","vec2polygons","nPoly","nPts","poly","polygons2vec","polygons","disposePolygons","polygonsVec","vararg2vec2","vararg2vec3","fillRuleToInt","fillRule","joinTypeToInt","joinType","CrossSectionCtor","cross","cs","wasmFuncPtr","addFunction","vec2Ptr","getValue","setValue","removeFunction","miterLimit","circularSegments","epsilon","nDivisions","twistDegrees","scaleTop","center","man","revolveDegrees","minSharpAngle","minSmoothness","vec3Ptr","status","normalIdx","oldNumProp","newPtr","oldPtr","newProp","oldProp","xOrVec","normal","triVerts","vertProperties","mergeFromVert","mergeToVert","runOriginalID","faceID","halfedgeTangent","runTransform","changed","tri","halfedge","mat4","row","radius","crossSectionBatchbool","pushVec2","ps","pts","polys","ManifoldCtor","radiusLow","radiusHigh","sharpenedEdges","sharp","manifolds","manifoldBatchbool","sdf","bounds","edgeLength","bounds2","pushVec3","allowConvex","moduleOverrides","scriptDirectory","locateFile","readAsync","readBinary","nodePath","isFileURI","ret","xhr","wasmBinary","wasmMemory","ABORT","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAPF32","HEAPF64","updateMemoryViews","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","preRun","addOnPreRun","callRuntimeCallbacks","initRuntime","postRun","addOnPostRun","addOnInit","runDependencies","dependenciesFulfilled","addRunDependency","removeRunDependency","abort","dataURIPrefix","isDataURI","findWasmBinary","wasmBinaryFile","getBinarySync","getBinaryPromise","binaryFile","instantiateArrayBuffer","imports","receiver","reason","instantiateAsync","getWasmImports","wasmImports","createWasm","info","receiveInstance","wasmExports","applySignatureConversions","wasmTable","receiveInstantiationResult","callbacks","ExceptionInfo","excPtr","destructor","caught","rethrown","adjustedPtr","isPointer","___cxa_is_pointer_type","adjusted","exceptionLast","___cxa_throw","__abort_js","structRegistrations","runDestructors","destructors","del","readPointer","awaitingDependencies","registeredTypes","typeDependencies","InternalError","throwInternalError","whenDependentTypesAreResolved","myTypes","dependentTypes","getTypeConverters","onComplete","typeConverters","myTypeConverters","registerType","unregisteredTypes","registered","__embind_finalize_value_object","structType","reg","rawConstructor","rawDestructor","fieldRecords","fieldTypes","field","fields","fieldName","getterReturnType","getter","getterContext","setterArgumentType","setter","setterContext","rv","GenericWireTypeSize","__embind_register_bigint","primitiveType","minRange","maxRange","embind_init_charCodes","codes","embind_charCodes","readLatin1String","BindingError","throwBindingError","sharedRegisterType","rawType","registeredInstance","__embind_register_bool","trueValue","falseValue","wt","shallowCopyInternalPointer","throwInstanceAlreadyDeleted","getInstanceTypeName","handle","finalizationRegistry","detachFinalizer","runDestructor","$$","releaseClassHandle","toDelete","downcastPointer","ptrClass","desiredClass","registeredPointers","getInheritedInstanceCount","registeredInstances","getLiveInheritedInstances","deletionQueue","flushPendingDeletes","delayFunction","setDelayFunction","init_embind","getBasestPointer","class_","getInheritedInstance","makeClassHandle","prototype","record","hasSmartPtrType","hasSmartPtr","attachFinalizer","RegisteredPointer_fromWireType","rawPointer","makeDefaultHandle","actualType","registeredPointerRecord","toType","dp","init_ClassHandle","ClassHandle","leftClass","rightClass","createNamedFunction","body","ensureOverloadTable","proto","humanName","prevFunc","exposePublicSymbol","numArguments","char_0","char_9","makeLegalFunctionName","RegisteredClass","constructor","instancePrototype","baseClass","getActualType","upcast","downcast","upcastPointer","constNoSmartPtrRawPointerToWireType","embindRepr","handleClass","genericPointerToWireType","clonedHandle","Emval","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","registeredClass","isReference","isConst","isSmartPointer","pointeeType","sharingPolicy","rawGetPointee","rawShare","replacePublicSymbol","dynCallLegacy","sig","getWasmTableEntry","funcPtr","dynCall","getDynCaller","embind__requireFunction","signature","rawFunction","makeDynCaller","fp","extendError","baseErrorType","errorName","errorClass","UnboundTypeError","getTypeName","___getTypeName","_free","throwUnboundTypeError","types","unboundTypes","seen","__embind_register_class","rawPointerType","rawConstPointerType","baseClassRawType","getActualTypeSignature","upcastSignature","downcastSignature","destructorSignature","legalFunctionName","basePrototype","referenceConverter","pointerConverter","constPointerConverter","heap32VectorToArray","firstElement","usesDestructorStack","argTypes","newFunc","argumentList","dummy","createJsInvoker","isClassMethodFunc","returns","isAsync","needsDestructorStack","argCount","argsList","argsListWired","invokerFnBody","dtorStack","args1","paramName","craftInvokerFunction","classType","cppInvokerFunc","cppTargetFunc","closureArgs","invokerFn","__embind_register_class_constructor","rawClassType","rawArgTypesAddr","invokerSignature","invoker","rawArgTypes","getFunctionName","argsIndex","__embind_register_class_function","rawInvoker","isPureVirtual","unboundTypesHandler","method","memberFunction","emval_freelist","emval_handles","__emval_decref","count_emval_handles","init_emval","EmValType","__embind_register_emval","enumReadValueFromPointer","signed","__embind_register_enum","isSigned","requireRegisteredType","__embind_register_enum_value","rawEnumType","enumValue","enumType","Enum","Value","floatReadValueFromPointer","__embind_register_float","__embind_register_function","invokerArgsArray","integerReadValueFromPointer","__embind_register_integer","fromWireType","bitshift","isUnsignedType","checkAssertions","toTypeName","toWireType","__embind_register_memory_view","dataTypeIndex","typeMapping","TA","decodeMemoryView","__embind_register_optional","rawOptionalType","stringToUTF8Array","heap","outIdx","maxBytesToWrite","startIdx","endIdx","u1","stringToUTF8","outPtr","lengthBytesUTF8","UTF8Decoder","UTF8ArrayToString","heapOrArray","maxBytesToRead","endPtr","u0","u2","ch","UTF8ToString","__embind_register_std_string","stdStringIsUTF8","payload","decodeStartPtr","currentBytePtr","maxRead","stringSegment","valueIsOfTypeString","_malloc","charCode","UTF16Decoder","UTF16ToString","maxIdx","codeUnit","stringToUTF16","startPtr","numCharsToWrite","lengthBytesUTF16","UTF32ToString","utf32","stringToUTF32","trailSurrogate","lengthBytesUTF32","__embind_register_std_wstring","charSize","decodeString","encodeString","readCharAt","lengthBytesUTF","maxReadBytes","__embind_register_value_object","constructorSignature","__embind_register_value_object_field","getterSignature","setterSignature","__embind_register_void","__emscripten_memcpy_js","dest","num","emval_returnValue","returnType","destructorsRef","__emval_as","emval_symbols","getStringOrSymbol","address","symbol","emval_methodCallers","__emval_call_method","caller","objHandle","__emval_equals","second","emval_addMethodCaller","emval_lookupTypes","__emval_get_method_caller","retType","functionBody","params","invokerFunction","functionName","__emval_get_property","__emval_incref","__emval_new_cstring","__emval_new_object","__emval_run_destructors","__emval_set_property","__emval_take_value","getHeapMax","growMemory","pages","_emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","alignUp","cutDown","overGrownHeapSize","newSize","replacement","uleb128Encode","sigToWasmTypes","typeNames","generateFuncType","sigRet","sigParam","typeCodes","convertJsFunctionToWasm","typeSectionBody","wrappedFunc","updateTableMap","functionsInTableMap","getFunctionAddress","freeTableIndexes","getEmptyTableSlot","setWasmTableEntry","wrapped","a0","makeWrapper_pp","makeWrapper_p","calledRun","runCaller","doRun","manifoldwasm","wasmUrl","instantiateManifold","getManifoldModule","getManifoldModuleSync","minCircularAngle","minCircularEdgeLength","setMinCircularAngle","setMinCircularEdgeLength","setCircularSegments","resetToCircularDefaults","getMinCircularAngle","getMinCircularEdgeLength","getCircularSegments","defaultMaterial","id2material","materialCache","setMaterial","getMaterialByID","getBackupMaterial","makeDefaultMaterial","matIn","roughness","metallic","unlit","getCachedMaterial","matDef","ghost","shown","singles","SHOW","GHOST","getDebugMeshByID","getDebugMaterialByID","show","inMesh","getOriginalMaterialByID","debug","only","getDebugGLTFMesh","backupMaterial","debugNodes","debugMesh","debugNode","cleanupAnimation","cleanupDebug","cleanupMaterial","createGLTFnode","rot","addMesh","numTri","cloneNode","toNode","fromNode","cloneNodeNewMaterial","oldBackupMaterial","oldMesh","newMesh","newPrimitive","createNodeFromCache","manifold2node","cachedNodes","cache","cachedNode","oldNode","createWrapper","halfRoot2","mm2m","wrapper","GLTFNodesToGLTFDoc","node2gltf","leafNodes","gltfNode","exporters","AsyncFunction","garbageCollector.cleanup","scenebuilder.cleanup","levelOfDetail.cleanup","gltfNode.cleanup","evaluate","t0","doNotBundle","bundleOpt","bundled","t1","manifoldImport","toplevelImport","gltfNode.GLTFNodeTracked","gltfNode.getGLTFNodes","gltfNode.resetGLTFNodes","levelOfDetail.setCircularSegments","levelOfDetail.setMinCircularAngle","levelOfDetail.setMinCircularEdgeLength","levelOfDetail.resetToCircularDefaults","animation.setAnimationDuration","animation.setAnimationFPS","animation.setAnimationMode","stacktrace","newError","missing","gltfNode.anyToGLTFNodeList","scenebuilder.GLTFNodesToGLTFDoc","t3","exportBlobURL","blobURL","initializeWebWorker","interceptConsole","oldLog","sendError","handleInitialize","setManifoldWasmUrl","setEsbuildWasmUrl","gltfdoc","handleEvaluate","handleExport"],"mappings":"AAAA,MAAMA,EAAgB,CACpB,aAAc,CACZ,KAAK,WAAa,CAAA,CACpB,CAEA,iBAAiBC,EAAMC,EAAU,CAC/B,MAAMC,EAAY,KAAK,WAEvB,OAAIA,EAAUF,CAAI,IAAM,SACtBE,EAAUF,CAAI,EAAI,CAAA,GAGhBE,EAAUF,CAAI,EAAE,QAAQC,CAAQ,IAAM,IACxCC,EAAUF,CAAI,EAAE,KAAKC,CAAQ,EAGxB,IACT,CAEA,oBAAoBD,EAAMC,EAAU,CAElC,MAAME,EADY,KAAK,WACSH,CAAI,EAEpC,GAAIG,IAAkB,OAAW,CAC/B,MAAMC,EAAQD,EAAc,QAAQF,CAAQ,EAExCG,IAAU,IACZD,EAAc,OAAOC,EAAO,CAAC,CAEjC,CAEA,OAAO,IACT,CAEA,cAAcC,EAAO,CAEnB,MAAMF,EADY,KAAK,WACSE,EAAM,IAAI,EAE1C,GAAIF,IAAkB,OAAW,CAE/B,MAAMG,EAAQH,EAAc,MAAM,CAAC,EAEnC,QAAS,EAAI,EAAGI,EAAID,EAAM,OAAQ,EAAIC,EAAG,IACvCD,EAAM,CAAC,EAAE,KAAK,KAAMD,CAAK,CAE7B,CAEA,OAAO,IACT,CAEA,SAAU,CACR,UAAWG,KAAO,KAAK,WACrB,OAAO,KAAK,WAAWA,CAAG,CAE9B,CAEF,CAUA,MAAMC,EAAU,CACd,YAAYC,EAAOC,EAASC,EAAQC,EAAc,CAAA,EAAI,CAWpD,GAVA,KAAK,MAAQ,OACb,KAAK,QAAU,OACf,KAAK,OAAS,OACd,KAAK,YAAc,OACnB,KAAK,UAAY,GACjB,KAAK,MAAQH,EACb,KAAK,QAAUC,EACf,KAAK,OAASC,EACd,KAAK,YAAcC,EAEf,CAACF,EAAQ,UAAUC,CAAM,EAC3B,MAAM,IAAI,MAAM,qCAAqC,CAEzD,CAIA,SAAU,CACR,OAAO,KAAK,KACd,CAIA,WAAY,CACV,OAAO,KAAK,OACd,CAIA,UAAW,CACT,OAAO,KAAK,MACd,CASA,SAASE,EAAO,CACd,YAAK,OAASA,EACP,IACT,CAIA,eAAgB,CACd,OAAO,KAAK,WACd,CAIA,SAAU,CACJ,KAAK,YAET,KAAK,QAAQ,YAAY,IAAI,EAE7B,KAAK,UAAY,GACnB,CAIA,YAAa,CACX,OAAO,KAAK,SACd,CAEF,CAOA,MAAMC,WAAchB,EAAgB,CAClC,eAAeiB,EAAM,CACnB,MAAM,GAAGA,CAAI,EACb,KAAK,UAAY,IAAI,IACrB,KAAK,OAAS,IAAI,IAClB,KAAK,aAAe,IAAI,IACxB,KAAK,YAAc,IAAI,GACzB,CAGA,WAAY,CACV,OAAO,MAAM,KAAK,KAAK,MAAM,CAC/B,CAIA,gBAAgBC,EAAM,CACpB,OAAO,MAAM,KAAK,KAAK,YAAY,IAAIA,CAAI,GAAK,KAAK,SAAS,CAChE,CAIA,YAAYA,EAAM,CAChB,MAAMC,EAAY,IAAI,IAEtB,UAAWC,KAAQ,KAAK,gBAAgBF,CAAI,EAC1CC,EAAU,IAAIC,EAAK,WAAW,EAGhC,OAAO,MAAM,KAAKD,CAAS,CAC7B,CAIA,eAAeD,EAAM,CACnB,OAAO,MAAM,KAAK,KAAK,aAAa,IAAIA,CAAI,GAAK,KAAK,SAAS,CACjE,CAIA,aAAaA,EAAM,CACjB,MAAMG,EAAW,IAAI,IAErB,UAAWD,KAAQ,KAAK,eAAeF,CAAI,EACzCG,EAAS,IAAID,EAAK,UAAU,EAG9B,OAAO,MAAM,KAAKC,CAAQ,CAC5B,CAEA,kBAAkBH,EAAMI,EAAQ,CAC9B,UAAWF,KAAQ,KAAK,gBAAgBF,CAAI,GACtC,CAACI,GAAUA,EAAOF,EAAK,UAAS,CAAE,IACpCA,EAAK,QAAO,EAIhB,OAAO,IACT,CAeA,YAAYG,EAAMC,EAAGC,EAAGC,EAAY,CAClC,MAAMN,EAAO,IAAIV,GAAUa,EAAMC,EAAGC,EAAGC,CAAU,EAEjD,KAAK,OAAO,IAAIN,CAAI,EAEpB,MAAMO,EAASP,EAAK,UAAS,EACxB,KAAK,aAAa,IAAIO,CAAM,GAAG,KAAK,aAAa,IAAIA,EAAQ,IAAI,GAAK,EAE3E,KAAK,aAAa,IAAIA,CAAM,EAAE,IAAIP,CAAI,EAEtC,MAAML,EAAQK,EAAK,SAAQ,EAC3B,OAAK,KAAK,YAAY,IAAIL,CAAK,GAAG,KAAK,YAAY,IAAIA,EAAO,IAAI,GAAK,EAEvE,KAAK,YAAY,IAAIA,CAAK,EAAE,IAAIK,CAAI,EAE7BA,CACT,CAUA,aAAaA,EAAM,CACjB,YAAK,OAAO,OAAOA,CAAI,EAEvB,KAAK,aAAa,IAAIA,EAAK,WAAW,EAAE,OAAOA,CAAI,EAEnD,KAAK,YAAY,IAAIA,EAAK,UAAU,EAAE,OAAOA,CAAI,EAE1C,IACT,CAEF,CAEA,SAASQ,IAAW,CAClBA,OAAAA,GAAW,OAAO,QAAU,SAAUC,EAAQ,CAC5C,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAIC,EAAS,UAAUD,CAAC,EAExB,QAASrB,KAAOsB,EACV,OAAO,UAAU,eAAe,KAAKA,EAAQtB,CAAG,IAClDoB,EAAOpB,CAAG,EAAIsB,EAAOtB,CAAG,EAG9B,CAEA,OAAOoB,CACT,EAEOD,GAAS,MAAM,KAAM,SAAS,CACvC,CAOA,MAAMI,EAAQ,CACZ,YAAYC,EAAM,CAGhB,GAFA,KAAK,KAAO,CAAA,EAERA,EACF,UAAWC,KAAOD,EAChB,KAAK,KAAK,KAAKC,CAAG,CAGxB,CAEA,IAAIA,EAAK,CACP,KAAK,KAAK,KAAKA,CAAG,CACpB,CAEA,OAAOA,EAAK,CACV,MAAM7B,EAAQ,KAAK,KAAK,QAAQ6B,CAAG,EAC/B7B,GAAS,GAAG,KAAK,KAAK,OAAOA,EAAO,CAAC,CAC3C,CAEA,YAAYU,EAAO,CACjB,MAAMkB,EAAO,CAAA,EAEb,UAAWC,KAAO,KAAK,KACjBA,EAAI,SAAQ,IAAOnB,GACrBkB,EAAK,KAAKC,CAAG,EAIjB,UAAWA,KAAOD,EAChB,KAAK,OAAOC,CAAG,EAGjB,OAAOD,CACT,CAEA,gBAAgBlB,EAAO,CACrB,MAAMkB,EAAO,CAAA,EAEb,UAAWC,KAAO,KAAK,KACjBA,EAAI,SAAQ,IAAOnB,GACrBkB,EAAK,KAAKC,CAAG,EAIjB,OAAOD,CACT,CAEA,QAAS,CACP,OAAO,KAAK,IACd,CAEF,CAOA,MAAME,EAAO,CACX,YAAYF,EAAM,CAIhB,GAHA,KAAK,IAAM,IAAI,IACf,KAAK,IAAM,IAAI,IAEXA,EACF,UAAWC,KAAOD,EAChB,KAAK,IAAIC,CAAG,CAGlB,CAEA,IAAIA,EAAK,CACP,MAAMnB,EAAQmB,EAAI,SAAQ,EAC1B,KAAK,YAAYnB,CAAK,EACtB,KAAK,IAAI,IAAImB,CAAG,EAChB,KAAK,IAAI,IAAInB,EAAOmB,CAAG,CACzB,CAEA,OAAOA,EAAK,CACV,KAAK,IAAI,OAAOA,CAAG,EACnB,KAAK,IAAI,OAAOA,EAAI,SAAQ,CAAE,CAChC,CAEA,YAAYnB,EAAO,CACjB,MAAMmB,EAAM,KAAK,IAAI,IAAInB,CAAK,GAAK,KACnC,OAAImB,GAAK,KAAK,OAAOA,CAAG,EACjBA,CACT,CAEA,cAAcnB,EAAO,CACnB,OAAO,KAAK,IAAI,IAAIA,CAAK,GAAK,IAChC,CAEA,QAAS,CACP,OAAO,MAAM,KAAK,KAAK,GAAG,CAC5B,CAEF,CAKA,MAAMqB,EAAO,CACX,YAAYC,EAAK,CACf,KAAK,IAAM,CAAA,EAEPA,GACF,OAAO,OAAO,KAAK,IAAKA,CAAG,CAE/B,CAEA,IAAI5B,EAAKM,EAAO,CACd,KAAK,IAAIN,CAAG,EAAIM,CAClB,CAEA,OAAON,EAAK,CACV,OAAO,KAAK,IAAIA,CAAG,CACrB,CAEA,IAAIA,EAAK,CACP,OAAO,KAAK,IAAIA,CAAG,GAAK,IAC1B,CAEA,MAAO,CACL,OAAO,OAAO,KAAK,KAAK,GAAG,CAC7B,CAEA,QAAS,CACP,OAAO,OAAO,OAAO,KAAK,GAAG,CAC/B,CAEF,CAEA,MAAM6B,GAAc,OAAO,YAAY,EACjCC,GAAiB,OAAO,eAAe,EAK7C,MAAMC,WAAkBxC,EAAgB,CAsBtC,YAAYyC,EAAO,CACjB,MAAK,EACL,KAAK,UAAY,GACjB,KAAK,MAAQ,OACb,KAAKH,EAAW,EAAI,OACpB,KAAKC,EAAc,EAAI,OACvB,KAAK,MAAQE,EACb,KAAKF,EAAc,EAAI,IAAI,IAC3B,KAAKD,EAAW,EAAI,KAAK,kBAAiB,CAC5C,CAaA,aAAc,CACZ,MAAO,CAAA,CACT,CAYA,mBAAoB,CAClB,MAAMI,EAAoB,KAAK,YAAW,EACpChB,EAAa,CAAA,EAEnB,UAAWjB,KAAOiC,EAAmB,CACnC,MAAMC,EAAQD,EAAkBjC,CAAG,EAGnC,GAAIkC,aAAiBH,GAAW,CAC9B,MAAMN,EAAM,KAAK,MAAM,YAAYzB,EAAK,KAAMkC,CAAK,EAEnD,KAAKJ,EAAc,EAAE,IAAI9B,CAAG,EAC5BiB,EAAWjB,CAAG,EAAIyB,CACpB,MACER,EAAWjB,CAAG,EAAIkC,CAEtB,CAEA,OAAOjB,CACT,CAIA,UAAUkB,EAAO,CACf,OAAO,KAAK,QAAUA,EAAM,KAC9B,CAIA,YAAa,CACX,OAAO,KAAK,SACd,CAQA,SAAU,CACJ,KAAK,YACT,KAAK,MAAM,eAAe,IAAI,EAAE,QAAQxB,GAAQA,EAAK,SAAS,EAC9D,KAAK,MAAM,kBAAkB,IAAI,EACjC,KAAK,UAAY,GACjB,KAAK,cAAc,CACjB,KAAM,SACZ,CAAK,EACH,CAQA,QAAS,CACP,YAAK,MAAM,kBAAkB,IAAI,EAC1B,IACT,CASA,KAAKyB,EAAWC,EAAW,CACzB,UAAWC,KAAa,KAAKT,EAAW,EAAG,CACzC,MAAMK,EAAQ,KAAKL,EAAW,EAAES,CAAS,EAEzC,GAAIJ,aAAiBjC,GAAW,CAC9B,MAAMwB,EAAMS,EAERT,EAAI,SAAQ,IAAOW,GACrB,KAAK,OAAOE,EAAWD,EAAWZ,EAAI,cAAa,CAAE,CAEzD,SAAWS,aAAiBX,GAC1B,UAAWE,KAAOS,EAAM,gBAAgBE,CAAS,EAAG,CAClD,MAAMG,EAAgBd,EAAI,cAAa,EACvC,KAAK,UAAUa,EAAWF,CAAS,EACnC,KAAK,OAAOE,EAAWD,EAAWE,CAAa,CACjD,SACSL,aAAiBR,GAAQ,CAClC,MAAMD,EAAMS,EAAM,cAAcE,CAAS,EAEzC,GAAIX,EAAK,CACP,MAAMc,EAAgBd,EAAI,cAAa,EACvC,KAAK,UAAUa,EAAWF,CAAS,EACnC,KAAK,OAAOE,EAAWD,EAAWE,CAAa,CACjD,CACF,SAAWL,aAAiBP,GAC1B,UAAW3B,KAAOkC,EAAM,OAAQ,CAC9B,MAAMT,EAAMS,EAAM,IAAIlC,CAAG,EAErByB,EAAI,SAAQ,IAAOW,GACrB,KAAK,UAAUE,EAAWtC,EAAKqC,EAAWZ,EAAI,eAAe,CAEjE,CAEJ,CAEA,OAAO,IACT,CAQA,IAAIa,EAAW,CACb,OAAO,KAAKT,EAAW,EAAES,CAAS,CACpC,CAIA,IAAIA,EAAWJ,EAAO,CACpB,YAAKL,EAAW,EAAES,CAAS,EAAIJ,EACxB,KAAK,cAAc,CACxB,KAAM,SACN,UAAAI,CACN,CAAK,CACH,CAQA,OAAOA,EAAW,CAChB,MAAMb,EAAM,KAAKI,EAAW,EAAES,CAAS,EACvC,OAAOb,EAAMA,EAAI,SAAQ,EAAK,IAChC,CAIA,OAAOa,EAAWJ,EAAOjB,EAAY,CACnC,GAAI,KAAKa,EAAc,EAAE,IAAIQ,CAAS,EACpC,MAAM,IAAI,MAAM,0CAA0CA,CAAS,IAAI,EAGzE,MAAME,EAAU,KAAKX,EAAW,EAAES,CAAS,EAG3C,GAFIE,GAASA,EAAQ,UAEjB,CAACN,EAAO,OAAO,KAEnB,MAAMT,EAAM,KAAK,MAAM,YAAYa,EAAW,KAAMJ,EAAOjB,CAAU,EAErE,YAAKY,EAAW,EAAES,CAAS,EAAIb,EACxB,KAAK,cAAc,CACxB,KAAM,SACN,UAAAa,CACN,CAAK,CACH,CAQA,SAASA,EAAW,CAElB,OADa,KAAK,cAAcA,CAAS,EAC7B,SAAS,IAAIb,GAAOA,EAAI,UAAU,CAChD,CAIA,OAAOa,EAAWJ,EAAOjB,EAAY,CACnC,MAAMQ,EAAM,KAAK,MAAM,YAAYa,EAAW,KAAMJ,EAAOjB,CAAU,EAGrE,OADa,KAAK,cAAcqB,CAAS,EACpC,IAAIb,CAAG,EACL,KAAK,cAAc,CACxB,KAAM,SACN,UAAAa,CACN,CAAK,CACH,CAIA,UAAUA,EAAWJ,EAAO,CAC1B,MAAMV,EAAO,KAAK,cAAcc,CAAS,EAEzC,GAAId,aAAgBD,GAClB,UAAWE,KAAOD,EAAK,gBAAgBU,CAAK,EAC1CT,EAAI,QAAO,MAER,CACL,MAAMA,EAAMD,EAAK,cAAcU,CAAK,EAChCT,GAAKA,EAAI,QAAO,CACtB,CAEA,OAAO,IACT,CAIA,cAAca,EAAW,CACvB,MAAMd,EAAO,KAAKK,EAAW,EAAES,CAAS,EAExC,GAAId,aAAgBD,IAAWC,aAAgBE,GAC7C,OAAOF,EAIT,MAAM,IAAI,MAAM,6CAA6Cc,CAAS,GAAG,CAC3E,CAQA,eAAeA,EAAW,CACxB,OAAO,KAAK,aAAaA,CAAS,EAAE,KAAI,CAC1C,CAIA,iBAAiBA,EAAW,CAC1B,OAAO,KAAK,aAAaA,CAAS,EAAE,SAAS,IAAIb,GAAOA,EAAI,UAAU,CACxE,CAIA,UAAUa,EAAWtC,EAAK,CAExB,MAAMyB,EADS,KAAK,aAAaa,CAAS,EACvB,IAAItC,CAAG,EAC1B,OAAOyB,EAAMA,EAAI,SAAQ,EAAK,IAChC,CAIA,UAAUa,EAAWtC,EAAKkC,EAAOO,EAAU,CACzC,MAAMC,EAAS,KAAK,aAAaJ,CAAS,EACpCE,EAAUE,EAAO,IAAI1C,CAAG,EAG9B,GAFIwC,GAASA,EAAQ,UAEjB,CAACN,EAAO,OAAO,KACnBO,EAAW,OAAO,OAAOA,GAAY,CAAA,EAAI,CACvC,IAAKzC,CACX,CAAK,EAED,MAAMyB,EAAM,KAAK,MAAM,YAAYa,EAAW,KAAMJ,EAAOf,GAAS,CAAA,EAAIsB,EAAU,CAChF,IAAAzC,CACN,CAAK,CAAC,EAEF,OAAA0C,EAAO,IAAI1C,EAAKyB,CAAG,EACZ,KAAK,cAAc,CACxB,KAAM,SACN,UAAAa,EACA,IAAAtC,CACN,CAAK,CACH,CAIA,aAAasC,EAAW,CACtB,MAAMV,EAAM,KAAKC,EAAW,EAAES,CAAS,EAEvC,GAAIV,aAAeD,GACjB,OAAOC,EAIT,MAAM,IAAI,MAAM,kCAAkCU,CAAS,GAAG,CAChE,CAWA,cAAczC,EAAO,CACnB,aAAM,cAAcsB,GAAS,CAAA,EAAItB,EAAO,CACtC,OAAQ,IACd,CAAK,CAAC,EACF,KAAK,MAAM,cAAcsB,GAAS,CAAA,EAAItB,EAAO,CAC3C,OAAQ,KACR,KAAM,QAAQA,EAAM,IAAI,EAC9B,CAAK,CAAC,EACK,IACT,CAQA,YAAY4B,EAAK,CACf,MAAMa,EAAYb,EAAI,QAAO,EAE7B,GAAI,KAAKI,EAAW,EAAES,CAAS,IAAMb,EACnC,KAAKI,EAAW,EAAES,CAAS,EAAI,KAE3B,KAAKR,EAAc,EAAE,IAAIQ,CAAS,GAAGb,EAAI,SAAQ,EAAG,QAAO,UACtD,KAAKI,EAAW,EAAES,CAAS,YAAaf,GACjD,KAAKM,EAAW,EAAES,CAAS,EAAE,OAAOb,CAAG,UAC9B,KAAKI,EAAW,EAAES,CAAS,YAAaZ,GACjD,KAAKG,EAAW,EAAES,CAAS,EAAE,OAAOb,CAAG,UAC9B,KAAKI,EAAW,EAAES,CAAS,YAAaX,GAAQ,CACzD,MAAMe,EAAS,KAAKb,EAAW,EAAES,CAAS,EAE1C,UAAWtC,KAAO0C,EAAO,OACnBA,EAAO,IAAI1C,CAAG,IAAMyB,GACtBiB,EAAO,OAAO1C,CAAG,CAGvB,KACE,QAGF,KAAK,MAAM,aAAayB,CAAG,EAE3B,KAAK,cAAc,CACjB,KAAM,SACN,UAAAa,CACN,CAAK,CACH,CAEF,CC3xBA,MAAMK,GAAU,SAEVC,GAAa,WAEnB,IAAIC,GACH,SAAUA,EAAc,CACvBA,EAAa,SAAc,WAC3BA,EAAa,UAAe,YAC5BA,EAAa,kBAAuB,mBACpCA,EAAa,kBAAuB,mBACpCA,EAAa,OAAY,SACzBA,EAAa,OAAY,SACzBA,EAAa,SAAc,WAC3BA,EAAa,KAAU,OACvBA,EAAa,UAAe,YAC5BA,EAAa,iBAAsB,kBACnCA,EAAa,KAAU,OACvBA,EAAa,KAAU,OACvBA,EAAa,MAAW,QACxBA,EAAa,KAAU,OACvBA,EAAa,QAAa,UAC1BA,EAAa,aAAkB,aACjC,GAAGA,IAAiBA,EAAe,CAAA,EAAG,EAEtC,IAAIC,IACH,SAAUA,EAAc,CAKvBA,EAAa,YAAiB,cAK9BA,EAAa,SAAc,UAC7B,GAAGA,KAAiBA,GAAe,CAAA,EAAG,EAEtC,IAAIC,IACH,SAAUC,EAAiB,CAC1BA,EAAgB,aAAkB,eAClCA,EAAgB,qBAA0B,uBAC1CA,EAAgB,sBAA2B,wBAC3CA,EAAgB,MAAW,QAC3BA,EAAgB,OAAY,QAC9B,GAAGD,KAAsBA,GAAoB,CAAA,EAAG,EAEhD,IAAIE,IACH,SAAUA,EAAgB,CACzBA,EAAeA,EAAe,EAAO,IAAI,EAAI,IAC7CA,EAAeA,EAAe,EAAO,GAAG,EAAI,IAC5CA,EAAeA,EAAe,EAAO,EAAE,EAAI,IAC3CA,EAAeA,EAAe,EAAO,CAAC,EAAI,GAC5C,GAAGA,KAAmBA,GAAiB,CAAA,EAAG,EAC1C,IAAIC,IACH,SAAUA,EAAQ,CACjBA,EAAO,KAAU,OACjBA,EAAO,IAAS,KAClB,GAAGA,KAAWA,GAAS,CAAA,EAAG,EAC1B,MAAMC,GAA4B,CAChC,KAAQ,UACR,KAAQ,WACR,KAAQ,WACR,KAAQ,YACR,KAAQ,YACR,KAAQ,YACV,EAOA,MAAMC,EAAY,CAEhB,OAAO,wBAAwBC,EAAS,CACtC,GAAI,OAAO,OAAW,IAAa,CAEjC,MAAMC,EAAa,KAAKD,EAAQ,MAAM,GAAG,EAAE,CAAC,CAAC,EACvCE,EAAK,IAAI,WAAWD,EAAW,MAAM,EAC3C,QAASjC,EAAI,EAAGA,EAAIiC,EAAW,OAAQjC,IACrCkC,EAAGlC,CAAC,EAAIiC,EAAW,WAAWjC,CAAC,EAEjC,OAAOkC,CACT,KAAO,CAEL,MAAMC,EAAOH,EAAQ,MAAM,GAAG,EAAE,CAAC,EAC3BI,EAAWJ,EAAQ,QAAQ,QAAQ,GAAK,EAC9C,OAAO,OAAO,KAAKG,EAAMC,EAAW,SAAW,MAAM,CACvD,CACF,CAEA,OAAO,WAAWC,EAAM,CACtB,OAAO,IAAI,YAAW,EAAG,OAAOA,CAAI,CACtC,CAEA,OAAO,WAAW5D,EAAO,CACvB,OAAO,IAAI,YAAW,EAAG,OAAOA,CAAK,CACvC,CAIA,OAAO,OAAO6D,EAAQ,CACpB,IAAIC,EAAkB,EACtB,UAAW9D,KAAS6D,EAClBC,GAAmB9D,EAAM,WAE3B,MAAM+D,EAAS,IAAI,WAAWD,CAAe,EAC7C,IAAIE,EAAa,EACjB,UAAWhE,KAAS6D,EAClBE,EAAO,IAAI/D,EAAOgE,CAAU,EAC5BA,GAAchE,EAAM,WAEtB,OAAO+D,CACT,CAMA,OAAO,IAAIE,EAAUC,EAAc,EAAG,CACpC,MAAMC,EAAe,KAAK,UAAUF,EAAS,UAAU,EACvD,GAAIE,IAAiBF,EAAS,WAAY,OAAOA,EACjD,MAAMG,EAAW,IAAI,WAAWD,CAAY,EAE5C,GADAC,EAAS,IAAIH,CAAQ,EACjBC,IAAgB,EAClB,QAAS,EAAID,EAAS,WAAY,EAAIE,EAAc,IAClDC,EAAS,CAAC,EAAIF,EAGlB,OAAOE,CACT,CAEA,OAAO,UAAUC,EAAG,CAClB,OAAO,KAAK,KAAKA,EAAI,CAAC,EAAI,CAC5B,CAEA,OAAO,OAAOpD,EAAGC,EAAG,CAClB,GAAID,IAAMC,EAAG,MAAO,GACpB,GAAID,EAAE,aAAeC,EAAE,WAAY,MAAO,GAC1C,IAAIK,EAAIN,EAAE,WACV,KAAOM,KACL,GAAIN,EAAEM,CAAC,IAAML,EAAEK,CAAC,EAAG,MAAO,GAE5B,MAAO,EACT,CAeA,OAAO,OAAON,EAAG+C,EAAa,EAAGM,EAAa,IAAU,CACtD,OAAO,IAAI,WAAWrD,EAAE,OAAQA,EAAE,WAAa+C,EAAY,KAAK,IAAI/C,EAAE,WAAYqD,CAAU,CAAC,CAC/F,CACA,OAAO,WAAWC,EAAM,CACtB,GAAIA,GAAQ,CAAC,YAAY,OAAOA,CAAI,EAClC,MAAM,IAAI,MAAM,mDAAmD,OAAOA,CAAI,IAAI,EAEpF,OAAOA,CACT,CACF,CAoEA,MAAMC,EAAe,CACnB,MAAMxE,EAAO,CACX,OAAOA,EAAM,QAAU,GAAKA,EAAM,CAAC,IAAM,KAAOA,EAAM,CAAC,IAAM,KAAOA,EAAM,CAAC,IAAM,GACnF,CACA,QAAQA,EAAO,CAEb,IAAIuE,EAAO,IAAI,SAASvE,EAAM,OAAQA,EAAM,WAAa,CAAC,EACtDuB,EAAGkD,EACP,KAAOF,EAAK,YAAY,CAUtB,GARAhD,EAAIgD,EAAK,UAAU,EAAG,EAAK,EAG3BG,GAAmBH,EAAMhD,CAAC,EAI1BkD,EAAOF,EAAK,SAAShD,EAAI,CAAC,EACtBkD,IAAS,KAAQA,IAAS,KAAQA,IAAS,IAC7C,MAAO,CAACF,EAAK,UAAUhD,EAAI,EAAG,EAAK,EAAGgD,EAAK,UAAUhD,EAAI,EAAG,EAAK,CAAC,EAGpEgD,EAAO,IAAI,SAASvE,EAAM,OAAQuE,EAAK,WAAahD,EAAI,CAAC,CAC3D,CACA,MAAM,IAAI,UAAU,4BAA4B,CAClD,CACA,YAAYoD,EAAS,CACnB,MAAO,EACT,CACF,CAOA,MAAMC,EAAc,CAClB,MAAM5E,EAAO,CACX,OAAOA,EAAM,QAAU,GAAKA,EAAM,CAAC,IAAM,KAAQA,EAAM,CAAC,IAAM,IAAQA,EAAM,CAAC,IAAM,IAAQA,EAAM,CAAC,IAAM,IAAQA,EAAM,CAAC,IAAM,IAAQA,EAAM,CAAC,IAAM,IAAQA,EAAM,CAAC,IAAM,IAAQA,EAAM,CAAC,IAAM,EAC9L,CACA,QAAQA,EAAO,CACb,MAAMuE,EAAO,IAAI,SAASvE,EAAM,OAAQA,EAAM,UAAU,EAExD,OADcsD,GAAY,WAAWtD,EAAM,MAAM,GAAI,EAAE,CAAC,IAC1C4E,GAAc,qBACnB,CAACL,EAAK,UAAU,GAAI,EAAK,EAAGA,EAAK,UAAU,GAAI,EAAK,CAAC,EAEvD,CAACA,EAAK,UAAU,GAAI,EAAK,EAAGA,EAAK,UAAU,GAAI,EAAK,CAAC,CAC9D,CACA,YAAYI,EAAS,CACnB,MAAO,EACT,CACF,CAOAC,GAAc,qBAAuB,OACrC,MAAMC,EAAW,CAEf,OAAO,eAAeC,EAAUC,EAAM,CACpC,KAAK,MAAMD,CAAQ,EAAIC,CACzB,CAMA,OAAO,YAAYC,EAAQ,CACzB,UAAWF,KAAY,KAAK,MAC1B,GAAI,KAAK,MAAMA,CAAQ,EAAE,MAAME,CAAM,EACnC,OAAOF,EAGX,OAAO,IACT,CAEA,OAAO,QAAQE,EAAQF,EAAU,CAC/B,OAAK,KAAK,MAAMA,CAAQ,EACjB,KAAK,MAAMA,CAAQ,EAAE,QAAQE,CAAM,EADR,IAEpC,CAMA,OAAO,YAAYA,EAAQF,EAAU,CACnC,OAAK,KAAK,MAAMA,CAAQ,EACjB,KAAK,MAAMA,CAAQ,EAAE,YAAYE,CAAM,EADZ,IAEpC,CAEA,OAAO,kBAAkBA,EAAQF,EAAU,CACzC,GAAI,CAAC,KAAK,MAAMA,CAAQ,EAAG,OAAO,KAClC,GAAI,KAAK,MAAMA,CAAQ,EAAE,kBACvB,OAAO,KAAK,MAAMA,CAAQ,EAAE,kBAAkBE,CAAM,EAEtD,IAAIC,EAAoB,EACxB,MAAMC,EAAW,EACXC,EAAa,KAAK,QAAQH,EAAQF,CAAQ,EAChD,GAAI,CAACK,EAAY,OAAO,KACxB,KAAOA,EAAW,CAAC,EAAI,GAAKA,EAAW,CAAC,EAAI,GAC1CF,GAAqBE,EAAW,CAAC,EAAIA,EAAW,CAAC,EAAID,EACrDC,EAAW,CAAC,EAAI,KAAK,IAAI,KAAK,MAAMA,EAAW,CAAC,EAAI,CAAC,EAAG,CAAC,EACzDA,EAAW,CAAC,EAAI,KAAK,IAAI,KAAK,MAAMA,EAAW,CAAC,EAAI,CAAC,EAAG,CAAC,EAE3D,OAAAF,GAAqB,EAAQC,EACtBD,CACT,CAEA,OAAO,oBAAoBH,EAAU,CACnC,OAAIA,IAAa,aAAqB,MAC/BA,EAAS,MAAM,GAAG,EAAE,IAAG,CAChC,CAEA,OAAO,oBAAoBM,EAAW,CACpC,OAAIA,IAAc,MAAc,aAC3BA,EACE,SAASA,CAAS,GADF,EAEzB,CACF,CACAP,GAAW,MAAQ,CACjB,aAAc,IAAIL,GAClB,YAAa,IAAII,EACnB,EACA,SAASF,GAAmBH,EAAMhD,EAAG,CAEnC,GAAIA,EAAIgD,EAAK,WACX,MAAM,IAAI,UAAU,qCAAqC,EAG3D,GAAIA,EAAK,SAAShD,CAAC,IAAM,IACvB,MAAM,IAAI,UAAU,qCAAqC,EAE3D,OAAOgD,CACT,CAOA,MAAMc,EAAU,CAKd,OAAO,SAASC,EAAK,CACnB,MAAMC,EAAWD,EAAI,MAAM,OAAO,EAAE,IAAG,EACvC,OAAOC,EAAS,UAAU,EAAGA,EAAS,YAAY,GAAG,CAAC,CACxD,CAKA,OAAO,UAAUD,EAAK,CACpB,GAAIA,EAAI,WAAW,aAAa,EAAG,CACjC,MAAMR,EAAWQ,EAAI,MAAM,mBAAmB,EAAE,CAAC,EACjD,OAAOT,GAAW,oBAAoBC,CAAQ,CAChD,KAAO,IAAIQ,EAAI,WAAW,sBAAsB,EAC9C,MAAO,OACF,GAAIA,EAAI,WAAW,wBAAwB,EAChD,MAAO,MACF,GAAIA,EAAI,WAAW,mBAAmB,EAC3C,MAAO,MAET,OAAOA,EAAI,MAAM,OAAO,EAAE,IAAG,EAAG,MAAM,KAAK,EAAE,IAAG,CAClD,CACF,CAMA,IAAIE,GAAa,OAAO,aAAiB,IAAc,aAAe,MACjE,KAAK,QAAO,KAAK,MAAQ,UAAY,CAIxC,QAHIC,EAAI,EACJlE,EAAI,UAAU,OAEXA,KACLkE,GAAK,UAAUlE,CAAC,EAAI,UAAUA,CAAC,EAGjC,OAAO,KAAK,KAAKkE,CAAC,CACpB,GAaA,SAASC,IAAS,CAChB,IAAIC,EAAM,IAAIH,GAAW,CAAC,EAE1B,OAAIA,IAAc,eAChBG,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,GAGJA,CACT,CAQA,SAASC,GAAO3E,EAAG,CACjB,IAAI4E,EAAI5E,EAAE,CAAC,EACPwE,EAAIxE,EAAE,CAAC,EACP6E,EAAI7E,EAAE,CAAC,EACX,OAAO,KAAK,MAAM4E,EAAGJ,EAAGK,CAAC,CAC3B,CAWA,SAASC,GAAcJ,EAAK1E,EAAG+E,EAAG,CAChC,IAAIH,EAAI5E,EAAE,CAAC,EACPwE,EAAIxE,EAAE,CAAC,EACP6E,EAAI7E,EAAE,CAAC,EACPgF,EAAID,EAAE,CAAC,EAAIH,EAAIG,EAAE,CAAC,EAAIP,EAAIO,EAAE,EAAE,EAAIF,EAAIE,EAAE,EAAE,EAC9C,OAAAC,EAAIA,GAAK,EACTN,EAAI,CAAC,GAAKK,EAAE,CAAC,EAAIH,EAAIG,EAAE,CAAC,EAAIP,EAAIO,EAAE,CAAC,EAAIF,EAAIE,EAAE,EAAE,GAAKC,EACpDN,EAAI,CAAC,GAAKK,EAAE,CAAC,EAAIH,EAAIG,EAAE,CAAC,EAAIP,EAAIO,EAAE,CAAC,EAAIF,EAAIE,EAAE,EAAE,GAAKC,EACpDN,EAAI,CAAC,GAAKK,EAAE,CAAC,EAAIH,EAAIG,EAAE,CAAC,EAAIP,EAAIO,EAAE,EAAE,EAAIF,EAAIE,EAAE,EAAE,GAAKC,EAC9CN,CACT,EAcC,UAAY,CACX,IAAIO,EAAMR,GAAM,EAChB,OAAO,SAAUzE,EAAGkF,EAAQC,EAAQC,EAAOC,EAAIC,EAAK,CAClD,IAAIhF,EAAGtB,EAgBP,IAdKkG,IACHA,EAAS,GAGNC,IACHA,EAAS,GAGPC,EACFpG,EAAI,KAAK,IAAIoG,EAAQF,EAASC,EAAQnF,EAAE,MAAM,EAE9ChB,EAAIgB,EAAE,OAGHM,EAAI6E,EAAQ7E,EAAItB,EAAGsB,GAAK4E,EAC3BD,EAAI,CAAC,EAAIjF,EAAEM,CAAC,EACZ2E,EAAI,CAAC,EAAIjF,EAAEM,EAAI,CAAC,EAChB2E,EAAI,CAAC,EAAIjF,EAAEM,EAAI,CAAC,EAChB+E,EAAGJ,EAAKA,EAAKK,CAAG,EAChBtF,EAAEM,CAAC,EAAI2E,EAAI,CAAC,EACZjF,EAAEM,EAAI,CAAC,EAAI2E,EAAI,CAAC,EAChBjF,EAAEM,EAAI,CAAC,EAAI2E,EAAI,CAAC,EAGlB,OAAOjF,CACT,CACF,GAAC,EAGD,SAASuF,GAAU7F,EAAM,CACvB,MAAM8F,EAAeC,GAAY,EAC3BC,EAAUhG,EAAK,eAAiBoC,EAAa,KAAO,CAACpC,CAAI,EAAIA,EAAK,aAAY,EACpF,UAAWS,KAAUuF,EACnBvF,EAAO,SAAST,GAAQ,CACtB,MAAMiG,EAAOjG,EAAK,QAAO,EACzB,GAAI,CAACiG,EAAM,OAEX,MAAMC,EAAaC,GAAcF,EAAMjG,EAAK,eAAc,CAAE,EACxDkG,EAAW,IAAI,MAAM,QAAQ,GAAKA,EAAW,IAAI,MAAM,QAAQ,IACjEE,GAAaF,EAAW,IAAKJ,CAAY,EACzCM,GAAaF,EAAW,IAAKJ,CAAY,EAE7C,CAAC,EAEH,OAAOA,CACT,CAEA,SAASK,GAAcF,EAAMI,EAAa,CACxC,MAAMH,EAAaH,GAAY,EAG/B,UAAWO,KAAQL,EAAK,iBAAkB,CACxC,MAAMM,EAAWD,EAAK,aAAa,UAAU,EACvCE,EAAUF,EAAK,WAAU,EAC/B,GAAI,CAACC,EAAU,SACf,IAAIE,EAAW,CAAC,EAAG,EAAG,CAAC,EACnBC,EAAW,CAAC,EAAG,EAAG,CAAC,EACvB,QAAS9F,EAAI,EAAG+F,EAAKH,EAAUA,EAAQ,WAAaD,EAAS,SAAQ,EAAI3F,EAAI+F,EAAI/F,IAAK,CACpF,MAAMzB,EAAQqH,EAAUA,EAAQ,UAAU5F,CAAC,EAAIA,EAC/C6F,EAAWF,EAAS,WAAWpH,EAAOsH,CAAQ,EAC9CC,EAAWtB,GAAcsB,EAAUD,EAAUJ,CAAW,EACxDD,GAAaM,EAAUR,CAAU,CACnC,CACF,CACA,OAAOA,CACT,CAEA,SAASE,GAAaQ,EAAOjG,EAAQ,CACnC,QAASC,EAAI,EAAGA,EAAI,EAAGA,IACrBD,EAAO,IAAIC,CAAC,EAAI,KAAK,IAAIgG,EAAMhG,CAAC,EAAGD,EAAO,IAAIC,CAAC,CAAC,EAChDD,EAAO,IAAIC,CAAC,EAAI,KAAK,IAAIgG,EAAMhG,CAAC,EAAGD,EAAO,IAAIC,CAAC,CAAC,CAEpD,CAEA,SAASmF,IAAe,CACtB,MAAO,CACL,IAAK,CAAC,IAAU,IAAU,GAAQ,EAClC,IAAK,CAAC,KAAW,KAAW,IAAS,CACzC,CACA,CAIA,MAAMc,GAAc,uBAMpB,MAAMC,EAAU,CACd,OAAO,QAAQC,EAAM,CACnB,MAAM5H,EAAQ4H,EAAK,YAAY,GAAG,EAClC,OAAI5H,IAAU,GAAW,KAClB4H,EAAK,UAAU,EAAG5H,EAAQ,CAAC,CACpC,CAKA,OAAO,SAASwF,EAAK,CACnB,OAAOD,GAAU,SAAS,IAAI,IAAIC,EAAKkC,EAAW,EAAE,QAAQ,CAC9D,CAKA,OAAO,UAAUlC,EAAK,CACpB,OAAOD,GAAU,UAAU,IAAI,IAAIC,EAAKkC,EAAW,EAAE,QAAQ,CAC/D,CACA,OAAO,QAAQG,EAAMD,EAAM,CACzB,GAAI,CAAC,KAAK,eAAeA,CAAI,EAAG,OAAOA,EACvC,MAAME,EAAQD,EAAK,MAAM,GAAG,EACtBE,EAAQH,EAAK,MAAM,GAAG,EAC5BE,EAAM,IAAG,EACT,QAAS,EAAI,EAAG,EAAIC,EAAM,OAAQ,IAC5BA,EAAM,CAAC,IAAM,MACbA,EAAM,CAAC,IAAM,KACfD,EAAM,IAAG,EAETA,EAAM,KAAKC,EAAM,CAAC,CAAC,GAGvB,OAAOD,EAAM,KAAK,GAAG,CACvB,CAKA,OAAO,cAAcF,EAAM,CACzB,OAAO,KAAK,gBAAgB,KAAKA,CAAI,CACvC,CAKA,OAAO,eAAeA,EAAM,CAC1B,MAAO,CAAC,qBAAqB,KAAKA,CAAI,CACxC,CACF,CACAD,GAAU,aAAe,CAAA,EACzBA,GAAU,gBAAkB,kBAG5B,SAASK,GAASC,EAAG,CACnB,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAC,IAAM,iBAC/C,CACA,SAASC,GAAcD,EAAG,CACxB,GAAID,GAASC,CAAC,IAAM,GAAO,MAAO,GAElC,MAAME,EAAOF,EAAE,YACf,GAAIE,IAAS,OAAW,MAAO,GAE/B,MAAMC,EAAOD,EAAK,UAGlB,MAFI,EAAAH,GAASI,CAAI,IAAM,IAEnB,OAAO,OAAOA,EAAM,eAAe,IAAM,GAK/C,CAEA,IAAIC,GAEAC,IACH,SAAUA,EAAW,CAEpBA,EAAUA,EAAU,OAAY,CAAC,EAAI,SAErCA,EAAUA,EAAU,MAAW,CAAC,EAAI,QAEpCA,EAAUA,EAAU,KAAU,CAAC,EAAI,OAEnCA,EAAUA,EAAU,KAAU,CAAC,EAAI,OAEnCA,EAAUA,EAAU,MAAW,CAAC,EAAI,OACtC,GAAGA,KAAcA,GAAY,CAAA,EAAG,EAMhC,MAAMC,EAAO,CAEX,YAAYC,EAAW,CACrB,KAAK,UAAY,OACjB,KAAK,UAAYA,CACnB,CAEA,MAAM1E,EAAM,CACN,KAAK,WAAayE,GAAO,UAAU,OACrC,QAAQ,MAAMzE,CAAI,CAEtB,CAEA,KAAKA,EAAM,CACL,KAAK,WAAayE,GAAO,UAAU,MACrC,QAAQ,KAAKzE,CAAI,CAErB,CAEA,KAAKA,EAAM,CACL,KAAK,WAAayE,GAAO,UAAU,MACrC,QAAQ,KAAKzE,CAAI,CAErB,CAEA,MAAMA,EAAM,CACN,KAAK,WAAayE,GAAO,UAAU,OACrC,QAAQ,MAAMzE,CAAI,CAEtB,CACF,CACAuE,GAAUE,GAEVA,GAAO,UAAYD,GAEnBC,GAAO,iBAAmB,IAAIF,GAAQA,GAAQ,UAAU,IAAI,EAS5D,SAASI,GAAYtH,EAAG,CACtB,IAAIuH,EAAMvH,EAAE,CAAC,EACTwH,EAAMxH,EAAE,CAAC,EACTyH,EAAMzH,EAAE,CAAC,EACT0H,EAAM1H,EAAE,CAAC,EACT2H,EAAM3H,EAAE,CAAC,EACT4H,EAAM5H,EAAE,CAAC,EACT6H,EAAM7H,EAAE,CAAC,EACT8H,EAAM9H,EAAE,CAAC,EACT+H,EAAM/H,EAAE,CAAC,EACTgI,EAAMhI,EAAE,CAAC,EACTiI,EAAMjI,EAAE,EAAE,EACVkI,EAAMlI,EAAE,EAAE,EACVmI,EAAMnI,EAAE,EAAE,EACVoI,EAAMpI,EAAE,EAAE,EACVqI,EAAMrI,EAAE,EAAE,EACVsI,EAAMtI,EAAE,EAAE,EACVuI,EAAMhB,EAAMK,EAAMJ,EAAMG,EACxBa,EAAMjB,EAAMM,EAAMJ,EAAME,EACxBc,EAAMlB,EAAMO,EAAMJ,EAAMC,EACxBe,EAAMlB,EAAMK,EAAMJ,EAAMG,EACxBe,EAAMnB,EAAMM,EAAMJ,EAAME,EACxBgB,EAAMnB,EAAMK,EAAMJ,EAAMG,EACxBgB,EAAMd,EAAMK,EAAMJ,EAAMG,EACxBW,EAAMf,EAAMM,EAAMJ,EAAME,EACxBY,EAAMhB,EAAMO,EAAMJ,EAAMC,EACxBa,EAAMhB,EAAMK,EAAMJ,EAAMG,EACxBa,EAAMjB,EAAMM,EAAMJ,EAAME,EACxBc,GAAMjB,EAAMK,EAAMJ,EAAMG,EAE5B,OAAOE,EAAMW,GAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,CAC3E,CAUA,SAASM,GAASzE,EAAK1E,EAAGC,EAAG,CAC3B,IAAIsH,EAAMvH,EAAE,CAAC,EACTwH,EAAMxH,EAAE,CAAC,EACTyH,EAAMzH,EAAE,CAAC,EACT0H,EAAM1H,EAAE,CAAC,EACT2H,EAAM3H,EAAE,CAAC,EACT4H,EAAM5H,EAAE,CAAC,EACT6H,EAAM7H,EAAE,CAAC,EACT8H,EAAM9H,EAAE,CAAC,EACT+H,EAAM/H,EAAE,CAAC,EACTgI,EAAMhI,EAAE,CAAC,EACTiI,EAAMjI,EAAE,EAAE,EACVkI,EAAMlI,EAAE,EAAE,EACVmI,EAAMnI,EAAE,EAAE,EACVoI,EAAMpI,EAAE,EAAE,EACVqI,EAAMrI,EAAE,EAAE,EACVsI,EAAMtI,EAAE,EAAE,EAEVoJ,EAAKnJ,EAAE,CAAC,EACRoJ,EAAKpJ,EAAE,CAAC,EACRqJ,EAAKrJ,EAAE,CAAC,EACRsJ,EAAKtJ,EAAE,CAAC,EACZ,OAAAyE,EAAI,CAAC,EAAI0E,EAAK7B,EAAM8B,EAAK1B,EAAM2B,EAAKvB,EAAMwB,EAAKpB,EAC/CzD,EAAI,CAAC,EAAI0E,EAAK5B,EAAM6B,EAAKzB,EAAM0B,EAAKtB,EAAMuB,EAAKnB,EAC/C1D,EAAI,CAAC,EAAI0E,EAAK3B,EAAM4B,EAAKxB,EAAMyB,EAAKrB,EAAMsB,EAAKlB,EAC/C3D,EAAI,CAAC,EAAI0E,EAAK1B,EAAM2B,EAAKvB,EAAMwB,EAAKpB,EAAMqB,EAAKjB,EAC/Cc,EAAKnJ,EAAE,CAAC,EACRoJ,EAAKpJ,EAAE,CAAC,EACRqJ,EAAKrJ,EAAE,CAAC,EACRsJ,EAAKtJ,EAAE,CAAC,EACRyE,EAAI,CAAC,EAAI0E,EAAK7B,EAAM8B,EAAK1B,EAAM2B,EAAKvB,EAAMwB,EAAKpB,EAC/CzD,EAAI,CAAC,EAAI0E,EAAK5B,EAAM6B,EAAKzB,EAAM0B,EAAKtB,EAAMuB,EAAKnB,EAC/C1D,EAAI,CAAC,EAAI0E,EAAK3B,EAAM4B,EAAKxB,EAAMyB,EAAKrB,EAAMsB,EAAKlB,EAC/C3D,EAAI,CAAC,EAAI0E,EAAK1B,EAAM2B,EAAKvB,EAAMwB,EAAKpB,EAAMqB,EAAKjB,EAC/Cc,EAAKnJ,EAAE,CAAC,EACRoJ,EAAKpJ,EAAE,CAAC,EACRqJ,EAAKrJ,EAAE,EAAE,EACTsJ,EAAKtJ,EAAE,EAAE,EACTyE,EAAI,CAAC,EAAI0E,EAAK7B,EAAM8B,EAAK1B,EAAM2B,EAAKvB,EAAMwB,EAAKpB,EAC/CzD,EAAI,CAAC,EAAI0E,EAAK5B,EAAM6B,EAAKzB,EAAM0B,EAAKtB,EAAMuB,EAAKnB,EAC/C1D,EAAI,EAAE,EAAI0E,EAAK3B,EAAM4B,EAAKxB,EAAMyB,EAAKrB,EAAMsB,EAAKlB,EAChD3D,EAAI,EAAE,EAAI0E,EAAK1B,EAAM2B,EAAKvB,EAAMwB,EAAKpB,EAAMqB,EAAKjB,EAChDc,EAAKnJ,EAAE,EAAE,EACToJ,EAAKpJ,EAAE,EAAE,EACTqJ,EAAKrJ,EAAE,EAAE,EACTsJ,EAAKtJ,EAAE,EAAE,EACTyE,EAAI,EAAE,EAAI0E,EAAK7B,EAAM8B,EAAK1B,EAAM2B,EAAKvB,EAAMwB,EAAKpB,EAChDzD,EAAI,EAAE,EAAI0E,EAAK5B,EAAM6B,EAAKzB,EAAM0B,EAAKtB,EAAMuB,EAAKnB,EAChD1D,EAAI,EAAE,EAAI0E,EAAK3B,EAAM4B,EAAKxB,EAAMyB,EAAKrB,EAAMsB,EAAKlB,EAChD3D,EAAI,EAAE,EAAI0E,EAAK1B,EAAM2B,EAAKvB,EAAMwB,EAAKpB,EAAMqB,EAAKjB,EACzC5D,CACT,CAYA,SAAS8E,GAAW9E,EAAK+E,EAAK,CAC5B,IAAIC,EAAMD,EAAI,CAAC,EACXE,EAAMF,EAAI,CAAC,EACXG,EAAMH,EAAI,CAAC,EACXI,EAAMJ,EAAI,CAAC,EACXK,EAAML,EAAI,CAAC,EACXM,EAAMN,EAAI,CAAC,EACXO,EAAMP,EAAI,CAAC,EACXQ,EAAMR,EAAI,CAAC,EACXS,EAAMT,EAAI,EAAE,EAChB,OAAA/E,EAAI,CAAC,EAAI,KAAK,MAAMgF,EAAKC,EAAKC,CAAG,EACjClF,EAAI,CAAC,EAAI,KAAK,MAAMmF,EAAKC,EAAKC,CAAG,EACjCrF,EAAI,CAAC,EAAI,KAAK,MAAMsF,EAAKC,EAAKC,CAAG,EAC1BxF,CACT,CAWA,SAASyF,GAAYzF,EAAK+E,EAAK,CAC7B,IAAIW,EAAU,IAAI7F,GAAW,CAAC,EAC9BiF,GAAWY,EAASX,CAAG,EACvB,IAAIY,EAAM,EAAID,EAAQ,CAAC,EACnBE,EAAM,EAAIF,EAAQ,CAAC,EACnBG,EAAM,EAAIH,EAAQ,CAAC,EACnBI,EAAOf,EAAI,CAAC,EAAIY,EAChBI,EAAOhB,EAAI,CAAC,EAAIa,EAChBI,EAAOjB,EAAI,CAAC,EAAIc,EAChBI,EAAOlB,EAAI,CAAC,EAAIY,EAChBO,EAAOnB,EAAI,CAAC,EAAIa,EAChBO,EAAOpB,EAAI,CAAC,EAAIc,EAChBO,EAAOrB,EAAI,CAAC,EAAIY,EAChBU,EAAOtB,EAAI,CAAC,EAAIa,EAChBU,EAAOvB,EAAI,EAAE,EAAIc,EACjBU,EAAQT,EAAOI,EAAOI,EACtBE,EAAI,EAER,OAAID,EAAQ,GACVC,EAAI,KAAK,KAAKD,EAAQ,CAAG,EAAI,EAC7BvG,EAAI,CAAC,EAAI,IAAOwG,EAChBxG,EAAI,CAAC,GAAKmG,EAAOE,GAAQG,EACzBxG,EAAI,CAAC,GAAKoG,EAAOJ,GAAQQ,EACzBxG,EAAI,CAAC,GAAK+F,EAAOE,GAAQO,GAChBV,EAAOI,GAAQJ,EAAOQ,GAC/BE,EAAI,KAAK,KAAK,EAAMV,EAAOI,EAAOI,CAAI,EAAI,EAC1CtG,EAAI,CAAC,GAAKmG,EAAOE,GAAQG,EACzBxG,EAAI,CAAC,EAAI,IAAOwG,EAChBxG,EAAI,CAAC,GAAK+F,EAAOE,GAAQO,EACzBxG,EAAI,CAAC,GAAKoG,EAAOJ,GAAQQ,GAChBN,EAAOI,GAChBE,EAAI,KAAK,KAAK,EAAMN,EAAOJ,EAAOQ,CAAI,EAAI,EAC1CtG,EAAI,CAAC,GAAKoG,EAAOJ,GAAQQ,EACzBxG,EAAI,CAAC,GAAK+F,EAAOE,GAAQO,EACzBxG,EAAI,CAAC,EAAI,IAAOwG,EAChBxG,EAAI,CAAC,GAAKmG,EAAOE,GAAQG,IAEzBA,EAAI,KAAK,KAAK,EAAMF,EAAOR,EAAOI,CAAI,EAAI,EAC1ClG,EAAI,CAAC,GAAK+F,EAAOE,GAAQO,EACzBxG,EAAI,CAAC,GAAKoG,EAAOJ,GAAQQ,EACzBxG,EAAI,CAAC,GAAKmG,EAAOE,GAAQG,EACzBxG,EAAI,CAAC,EAAI,IAAOwG,GAGXxG,CACT,CAGA,MAAMyG,EAAU,CACd,OAAO,SAAS/H,EAAG,CACjB,OAAOA,CACT,CACA,OAAO,GAAGpD,EAAGC,EAAGmL,EAAY,KAAO,CACjC,GAAIpL,EAAE,SAAWC,EAAE,OAAQ,MAAO,GAClC,QAASK,EAAI,EAAGA,EAAIN,EAAE,OAAQM,IAC5B,GAAI,KAAK,IAAIN,EAAEM,CAAC,EAAIL,EAAEK,CAAC,CAAC,EAAI8K,EAAW,MAAO,GAEhD,MAAO,EACT,CACA,OAAO,MAAMjK,EAAOkK,EAAKC,EAAK,CAC5B,OAAInK,EAAQkK,EAAYA,EACpBlK,EAAQmK,EAAYA,EACjBnK,CACT,CAEA,OAAO,oBAAoBb,EAAGiL,EAAe,CAE3C,OAAQA,EAAa,CACnB,IAAK,MAEH,OAAOjL,EACT,IAAK,MAEH,OAAOA,EAAI,MACb,IAAK,MAEH,OAAOA,EAAI,IACb,IAAK,MAEH,OAAO,KAAK,IAAIA,EAAI,MAAS,EAAI,EACnC,IAAK,MAEH,OAAO,KAAK,IAAIA,EAAI,IAAO,EAAI,EACjC,QACE,MAAM,IAAI,MAAM,yBAAyB,CACjD,CACE,CAEA,OAAO,oBAAoBkL,EAAGD,EAAe,CAE3C,OAAQA,EAAa,CACnB,IAAK,MAEH,OAAOC,EACT,IAAK,MAEH,OAAO,KAAK,MAAML,GAAU,MAAMK,EAAG,EAAG,CAAC,EAAI,KAAO,EACtD,IAAK,MAEH,OAAO,KAAK,MAAML,GAAU,MAAMK,EAAG,EAAG,CAAC,EAAI,GAAK,EACpD,IAAK,MAEH,OAAO,KAAK,MAAML,GAAU,MAAMK,EAAG,GAAI,CAAC,EAAI,KAAO,EACvD,IAAK,MAEH,OAAO,KAAK,MAAML,GAAU,MAAMK,EAAG,GAAI,CAAC,EAAI,GAAK,EACrD,QACE,MAAM,IAAI,MAAM,yBAAyB,CACjD,CACE,CAYA,OAAO,UAAUC,EAAQC,EAAgBC,EAAaC,EAAU,CAC9D,IAAIC,EAAKlH,GAAO,CAAC8G,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,CAAC,EACjD,MAAMK,EAAKnH,GAAO,CAAC8G,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,CAAC,EAC7CM,EAAKpH,GAAO,CAAC8G,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,EAAE,CAAC,CAAC,EAExCnE,GAAYmE,CAAM,EACpB,IAAGI,EAAK,CAACA,GACnBH,EAAe,CAAC,EAAID,EAAO,EAAE,EAC7BC,EAAe,CAAC,EAAID,EAAO,EAAE,EAC7BC,EAAe,CAAC,EAAID,EAAO,EAAE,EAE7B,MAAMO,EAAMP,EAAO,MAAK,EAClBQ,EAAQ,EAAIJ,EACZK,EAAQ,EAAIJ,EACZK,EAAQ,EAAIJ,EAClBC,EAAI,CAAC,GAAKC,EACVD,EAAI,CAAC,GAAKC,EACVD,EAAI,CAAC,GAAKC,EACVD,EAAI,CAAC,GAAKE,EACVF,EAAI,CAAC,GAAKE,EACVF,EAAI,CAAC,GAAKE,EACVF,EAAI,CAAC,GAAKG,EACVH,EAAI,CAAC,GAAKG,EACVH,EAAI,EAAE,GAAKG,EACXhC,GAAYwB,EAAaK,CAAG,EAC5BJ,EAAS,CAAC,EAAIC,EACdD,EAAS,CAAC,EAAIE,EACdF,EAAS,CAAC,EAAIG,CAChB,CAaA,OAAO,QAAQK,EAAgBC,EAAaC,EAAUC,EAAQ,CAC5D,MAAMC,EAAKD,EACL3H,EAAIyH,EAAY,CAAC,EACrB7H,EAAI6H,EAAY,CAAC,EACjBxH,EAAIwH,EAAY,CAAC,EACjBrH,EAAIqH,EAAY,CAAC,EACbI,EAAK7H,EAAIA,EACb8H,EAAKlI,EAAIA,EACTmI,EAAK9H,EAAIA,EACL+H,EAAKhI,EAAI6H,EACbI,EAAKjI,EAAI8H,EACTI,EAAKlI,EAAI+H,EACLI,EAAKvI,EAAIkI,EACbM,EAAKxI,EAAImI,EACTM,EAAKpI,EAAI8H,EACLO,EAAKlI,EAAIyH,EACbU,EAAKnI,EAAI0H,EACTU,EAAKpI,EAAI2H,EACLd,EAAKS,EAAS,CAAC,EACnBR,EAAKQ,EAAS,CAAC,EACfP,EAAKO,EAAS,CAAC,EACjB,OAAAE,EAAG,CAAC,GAAK,GAAKO,EAAKE,IAAOpB,EAC1BW,EAAG,CAAC,GAAKK,EAAKO,GAAMvB,EACpBW,EAAG,CAAC,GAAKM,EAAKK,GAAMtB,EACpBW,EAAG,CAAC,EAAI,EACRA,EAAG,CAAC,GAAKK,EAAKO,GAAMtB,EACpBU,EAAG,CAAC,GAAK,GAAKI,EAAKK,IAAOnB,EAC1BU,EAAG,CAAC,GAAKQ,EAAKE,GAAMpB,EACpBU,EAAG,CAAC,EAAI,EACRA,EAAG,CAAC,GAAKM,EAAKK,GAAMpB,EACpBS,EAAG,CAAC,GAAKQ,EAAKE,GAAMnB,EACpBS,EAAG,EAAE,GAAK,GAAKI,EAAKG,IAAOhB,EAC3BS,EAAG,EAAE,EAAI,EACTA,EAAG,EAAE,EAAIJ,EAAe,CAAC,EACzBI,EAAG,EAAE,EAAIJ,EAAe,CAAC,EACzBI,EAAG,EAAE,EAAIJ,EAAe,CAAC,EACzBI,EAAG,EAAE,EAAI,EACFA,CACT,CACF,CAEA,SAASa,GAAUC,EAAMC,EAAM,CAC7B,GAAI,CAAC,CAACD,GAAS,CAAC,CAACC,EAAM,MAAO,GAC9B,MAAMvN,EAAIsN,EAAK,SAAQ,EACjBrN,EAAIsN,EAAK,SAAQ,EACvB,OAAOvN,IAAMC,GAAKD,EAAE,OAAOC,CAAC,CAC9B,CACA,SAASuN,GAAaC,EAASC,EAAS,CACtC,GAAI,CAAC,CAACD,GAAY,CAAC,CAACC,EAAS,MAAO,GACpC,MAAMC,EAAaF,EAAQ,OAAM,EAC3BG,EAAaF,EAAQ,OAAM,EACjC,GAAIC,EAAW,SAAWC,EAAW,OAAQ,MAAO,GACpD,QAAStN,EAAI,EAAGA,EAAIqN,EAAW,OAAQrN,IAAK,CAC1C,MAAMN,EAAI2N,EAAWrN,CAAC,EAChBL,EAAI2N,EAAWtN,CAAC,EACtB,GAAIN,EAAE,SAAQ,IAAOC,EAAE,SAAQ,GAC3B,CAACD,EAAE,WAAW,OAAOC,EAAE,SAAQ,CAAE,EAAG,MAAO,EACjD,CACA,MAAO,EACT,CACA,SAAS4N,GAAaC,EAASC,EAAS,CACtC,GAAI,CAAC,CAACD,GAAY,CAAC,CAACC,EAAS,MAAO,GACpC,MAAMC,EAAQF,EAAQ,KAAI,EACpBG,EAAQF,EAAQ,KAAI,EAC1B,GAAIC,EAAM,SAAWC,EAAM,OAAQ,MAAO,GAC1C,UAAWhP,KAAO+O,EAAO,CACvB,MAAMV,EAAOQ,EAAQ,IAAI7O,CAAG,EACtBsO,EAAOQ,EAAQ,IAAI9O,CAAG,EAC5B,GAAI,CAAC,CAACqO,GAAS,CAAC,CAACC,EAAM,MAAO,GAC9B,MAAM,EAAID,EAAK,SAAQ,EACjBrN,EAAIsN,EAAK,SAAQ,EACvB,GAAI,IAAMtN,GACN,CAAC,EAAE,OAAOA,CAAC,EAAG,MAAO,EAC3B,CACA,MAAO,EACT,CACA,SAASiO,GAAYlO,EAAGC,EAAG,CACzB,GAAID,IAAMC,EAAG,MAAO,GAEpB,GADI,CAAC,CAACD,GAAM,CAAC,CAACC,GAAK,CAACD,GAAK,CAACC,GACtBD,EAAE,SAAWC,EAAE,OAAQ,MAAO,GAClC,QAASK,EAAI,EAAGA,EAAIN,EAAE,OAAQM,IAC5B,GAAIN,EAAEM,CAAC,IAAML,EAAEK,CAAC,EAAG,MAAO,GAE5B,MAAO,EACT,CACA,SAAS6N,GAAaC,EAAIC,EAAI,CAC5B,GAAID,IAAOC,EAAI,MAAO,GACtB,GAAI,CAAC,CAACD,GAAO,CAAC,CAACC,EAAI,MAAO,GAC1B,GAAI,CAACtH,GAAcqH,CAAE,GAAK,CAACrH,GAAcsH,CAAE,EACzC,OAAOD,IAAOC,EAEhB,MAAMrO,EAAIoO,EACJnO,EAAIoO,EACV,IAAIC,EAAW,EACXC,EAAW,EACXtP,EACJ,IAAKA,KAAOe,EAAGsO,IACf,IAAKrP,KAAOgB,EAAGsO,IACf,GAAID,IAAaC,EAAU,MAAO,GAClC,IAAKtP,KAAOe,EAAG,CACb,MAAMwO,EAASxO,EAAEf,CAAG,EACdwP,EAASxO,EAAEhB,CAAG,EACpB,GAAIyP,GAAQF,CAAM,GAAKE,GAAQD,CAAM,GACnC,GAAI,CAACP,GAAYM,EAAQC,CAAM,EAAG,MAAO,WAChC1H,GAAcyH,CAAM,GAAKzH,GAAc0H,CAAM,GACtD,GAAI,CAACN,GAAaK,EAAQC,CAAM,EAAG,MAAO,WAEtCD,IAAWC,EAAQ,MAAO,EAElC,CACA,MAAO,EACT,CACA,SAASC,GAAQvN,EAAO,CACtB,OAAO,MAAM,QAAQA,CAAK,GAAK,YAAY,OAAOA,CAAK,CACzD,CAEA,MAAMwN,GAAW,6CACXC,GAAiB,IACjBC,GAAY,EACZC,GAAc,IAAI,IAClBC,GAAc,UAAuB,CACzC,IAAIC,EAAM,GACV,QAAS1O,EAAI,EAAGA,EAAIuO,GAAWvO,IAC7B0O,GAAOL,GAAS,OAAO,KAAK,MAAM,KAAK,OAAM,EAAKA,GAAS,MAAM,CAAC,EAEpE,OAAOK,CACT,EAYMC,GAAO,UAAgB,CAC3B,QAASC,EAAU,EAAGA,EAAUN,GAAgBM,IAAW,CACzD,MAAMC,EAAKJ,GAAW,EACtB,GAAI,CAACD,GAAY,IAAIK,CAAE,EACrB,OAAAL,GAAY,IAAIK,CAAE,EACXA,CAEX,CACA,MAAO,EACT,EAEMC,GAAgBC,GAAKA,EACrBC,GAAY,IAAI,IAkCtB,MAAMC,WAAiBvO,EAAU,CAE/B,YAAYC,EAAOlB,EAAO,GAAI,CAC5B,MAAMkB,CAAK,EACX,KAAKH,EAAW,EAAE,KAAUf,EAC5B,KAAK,KAAI,EACT,KAAK,cAAc,CACjB,KAAM,QACZ,CAAK,CACH,CAMA,UAAW,CACT,OAAO,KAAK,KACd,CAKA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,KAAM,GACN,OAAQ,CAAA,CACd,CAAK,CACH,CAEA,IAAIwB,EAAWJ,EAAO,CACpB,OAAI,MAAM,QAAQA,CAAK,IAAGA,EAAQA,EAAM,SACjC,MAAM,IAAII,EAAWJ,CAAK,CACnC,CASA,SAAU,CACR,OAAO,KAAK,IAAI,MAAM,CACxB,CAMA,QAAQpB,EAAM,CACZ,OAAO,KAAK,IAAI,OAAQA,CAAI,CAC9B,CAQA,WAAY,CACV,OAAO,KAAK,IAAI,QAAQ,CAC1B,CAKA,UAAUyP,EAAQ,CAChB,OAAO,KAAK,IAAI,SAAUA,CAAM,CAClC,CAOA,OAAQ,CACN,MAAMC,EAAgB,KAAK,YAC3B,OAAO,IAAIA,EAAc,KAAK,KAAK,EAAE,KAAK,KAAML,EAAa,CAC/D,CAOA,KAAKhO,EAAOsO,EAAUN,GAAe,CAEnC,UAAWnQ,KAAO,KAAK6B,EAAW,EAAG,CACnC,MAAMK,EAAQ,KAAKL,EAAW,EAAE7B,CAAG,EACnC,GAAIkC,aAAiBjC,GACd,KAAK6B,EAAc,EAAE,IAAI9B,CAAG,GAC/BkC,EAAM,QAAO,UAENA,aAAiBX,IAAWW,aAAiBR,GACtD,UAAWD,KAAOS,EAAM,SACtBT,EAAI,QAAO,UAEJS,aAAiBP,GAC1B,UAAWF,KAAOS,EAAM,SACtBT,EAAI,QAAO,CAGjB,CAEA,UAAWzB,KAAOmC,EAAMN,EAAW,EAAG,CACpC,MAAM6O,EAAY,KAAK7O,EAAW,EAAE7B,CAAG,EACjC2Q,EAAaxO,EAAMN,EAAW,EAAE7B,CAAG,EACzC,GAAI2Q,aAAsB1Q,GACpB,KAAK6B,EAAc,EAAE,IAAI9B,CAAG,EAClB0Q,EACR,SAAQ,EAAG,KAAKD,EAAQE,EAAW,SAAQ,CAAE,EAAGF,CAAO,EAG3D,KAAK,OAAOzQ,EAAKyQ,EAAQE,EAAW,UAAU,EAAGA,EAAW,eAAe,UAEpEA,aAAsBjP,IAAUiP,aAAsBpP,GAC/D,UAAWE,KAAOkP,EAAW,SAE3B,KAAK,OAAO3Q,EAAKyQ,EAAQhP,EAAI,UAAU,EAAGA,EAAI,eAAe,UAEtDkP,aAAsBhP,GAC/B,UAAWiP,KAAUD,EAAW,OAAQ,CACtC,MAAMlP,EAAMkP,EAAW,IAAIC,CAAM,EAEjC,KAAK,UAAU5Q,EAAK4Q,EAAQH,EAAQhP,EAAI,UAAU,EAAGA,EAAI,eAAe,CAC1E,MACSqG,GAAc6I,CAAU,EACjC,KAAK9O,EAAW,EAAE7B,CAAG,EAAI,KAAK,MAAM,KAAK,UAAU2Q,CAAU,CAAC,EACrD,MAAM,QAAQA,CAAU,GAAKA,aAAsB,aAAe,YAAY,OAAOA,CAAU,EAExG,KAAK9O,EAAW,EAAE7B,CAAG,EAAI2Q,EAAW,MAAK,EAEzC,KAAK9O,EAAW,EAAE7B,CAAG,EAAI2Q,CAE7B,CACA,OAAO,IACT,CAUA,OAAOxO,EAAO0O,EAAOR,GAAW,CAC9B,GAAI,OAASlO,EAAO,MAAO,GAC3B,GAAI,KAAK,eAAiBA,EAAM,aAAc,MAAO,GACrD,UAAWnC,KAAO,KAAK6B,EAAW,EAAG,CACnC,GAAIgP,EAAK,IAAI7Q,CAAG,EAAG,SACnB,MAAMe,EAAI,KAAKc,EAAW,EAAE7B,CAAG,EACzBgB,EAAImB,EAAMN,EAAW,EAAE7B,CAAG,EAChC,GAAIe,aAAad,IAAae,aAAaf,IACzC,GAAI,CAACmO,GAAUrN,EAAGC,CAAC,EACjB,MAAO,WAEAD,aAAaW,IAAUV,aAAaU,IAAUX,aAAaQ,IAAWP,aAAaO,IAC5F,GAAI,CAACgN,GAAaxN,EAAGC,CAAC,EACpB,MAAO,WAEAD,aAAaY,IAAUX,aAAaW,IAC7C,GAAI,CAACiN,GAAa7N,EAAGC,CAAC,EACpB,MAAO,WAEA8G,GAAc/G,CAAC,GAAK+G,GAAc9G,CAAC,GAC5C,GAAI,CAACkO,GAAanO,EAAGC,CAAC,EAAG,MAAO,WACvByO,GAAQ1O,CAAC,GAAK0O,GAAQzO,CAAC,GAChC,GAAI,CAACiO,GAAYlO,EAAGC,CAAC,EAAG,MAAO,WAG3BD,IAAMC,EAAG,MAAO,EAExB,CACA,MAAO,EACT,CACA,QAAS,CAEP,YAAK,MAAM,kBAAkB,KAAM8P,GAAKA,EAAE,eAAiB,MAAM,EAC1D,IACT,CAkBA,aAAc,CACZ,OAAO,KAAK,MAAM,YAAY,IAAI,CACpC,CACF,CAUA,MAAMC,WAA2BT,EAAS,CACxC,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,WAAY,IAAI3O,EACtB,CAAK,CACH,CAEA,aAAab,EAAM,CACjB,OAAO,KAAK,UAAU,aAAcA,CAAI,CAC1C,CAKA,aAAaA,EAAMkQ,EAAmB,CACpC,OAAIA,GAAmBA,EAAkB,gBAAgB,IAAI,EACtD,KAAK,UAAU,aAAclQ,EAAMkQ,CAAiB,CAC7D,CAEA,gBAAiB,CACf,OAAO,KAAK,iBAAiB,YAAY,CAC3C,CACF,CAwDA,MAAMC,WAAiBF,EAAmB,CAIxC,MAAO,CACL,KAAK,aAAelO,EAAa,QACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,MAAO,KACP,KAAMoO,GAAS,KAAK,OACpB,cAAeA,GAAS,cAAc,MACtC,WAAY,GACZ,OAAQ,GACR,OAAQ,IACd,CAAK,CACH,CAKA,OAAO,eAAezR,EAAM,CAC1B,OAAQA,EAAI,CACV,KAAKyR,GAAS,KAAK,OACjB,MAAO,GACT,KAAKA,GAAS,KAAK,KACjB,MAAO,GACT,KAAKA,GAAS,KAAK,KACjB,MAAO,GACT,KAAKA,GAAS,KAAK,KACjB,MAAO,GACT,KAAKA,GAAS,KAAK,KACjB,MAAO,GACT,KAAKA,GAAS,KAAK,KACjB,MAAO,GACT,KAAKA,GAAS,KAAK,KACjB,MAAO,IACT,QACE,MAAM,IAAI,MAAM,oBAAsBzR,CAAI,CAClD,CACE,CAEA,OAAO,iBAAiB8M,EAAe,CACrC,OAAQA,EAAa,CACnB,KAAK2E,GAAS,cAAc,KAC1B,MAAO,GACT,KAAKA,GAAS,cAAc,cAC1B,MAAO,GACT,KAAKA,GAAS,cAAc,MAC1B,MAAO,GACT,KAAKA,GAAS,cAAc,eAC1B,MAAO,GACT,KAAKA,GAAS,cAAc,aAC1B,MAAO,GACT,KAAKA,GAAS,cAAc,MAC1B,MAAO,GACT,QACE,MAAM,IAAI,MAAM,8BAAgC3E,CAAa,CACrE,CACE,CASA,iBAAiBlL,EAAQ,CACvB,MAAM8P,EAAa,KAAK,cAAa,EAC/BC,EAAc,KAAK,eAAc,EACjC7E,EAAgB,KAAK,iBAAgB,EAE3C,GADA,KAAK,OAAOlL,CAAM,EACd8P,EACF,QAASE,EAAI,EAAGA,EAAID,EAAaC,IAC/BhQ,EAAOgQ,CAAC,EAAIlF,GAAU,oBAAoB9K,EAAOgQ,CAAC,EAAG9E,CAAa,EAGtE,OAAOlL,CACT,CAKA,OAAOA,EAAQ,CACb,MAAMtB,EAAQ,KAAK,SAAQ,EACrBqG,EAAQ,KAAK,SAAQ,EACrBgL,EAAc,KAAK,eAAc,EACvC,QAASC,EAAI,EAAGA,EAAID,EAAaC,IAAKhQ,EAAOgQ,CAAC,EAAI,IAClD,QAAS,EAAI,EAAG,EAAIjL,EAAQgL,EAAa,GAAKA,EAC5C,QAASC,EAAI,EAAGA,EAAID,EAAaC,IAAK,CACpC,MAAMlP,EAAQpC,EAAM,EAAIsR,CAAC,EACrB,OAAO,SAASlP,CAAK,IACvBd,EAAOgQ,CAAC,EAAI,KAAK,IAAIhQ,EAAOgQ,CAAC,EAAGlP,CAAK,EAEzC,CAEF,OAAOd,CACT,CAMA,iBAAiBA,EAAQ,CACvB,MAAM8P,EAAa,KAAK,cAAa,EAC/BC,EAAc,KAAK,eAAc,EACjC7E,EAAgB,KAAK,iBAAgB,EAE3C,GADA,KAAK,OAAOlL,CAAM,EACd8P,EACF,QAASE,EAAI,EAAGA,EAAID,EAAaC,IAC/BhQ,EAAOgQ,CAAC,EAAIlF,GAAU,oBAAoB9K,EAAOgQ,CAAC,EAAG9E,CAAa,EAGtE,OAAOlL,CACT,CAKA,OAAOA,EAAQ,CACb,MAAMtB,EAAQ,KAAK,IAAI,OAAO,EACxBqG,EAAQ,KAAK,SAAQ,EACrBgL,EAAc,KAAK,eAAc,EACvC,QAASC,EAAI,EAAGA,EAAID,EAAaC,IAAKhQ,EAAOgQ,CAAC,EAAI,KAClD,QAAS,EAAI,EAAG,EAAIjL,EAAQgL,EAAa,GAAKA,EAC5C,QAASC,EAAI,EAAGA,EAAID,EAAaC,IAAK,CACpC,MAAMlP,EAAQpC,EAAM,EAAIsR,CAAC,EACrB,OAAO,SAASlP,CAAK,IACvBd,EAAOgQ,CAAC,EAAI,KAAK,IAAIhQ,EAAOgQ,CAAC,EAAGlP,CAAK,EAEzC,CAEF,OAAOd,CACT,CAQA,UAAW,CACT,MAAMtB,EAAQ,KAAK,IAAI,OAAO,EAC9B,OAAOA,EAAQA,EAAM,OAAS,KAAK,eAAc,EAAK,CACxD,CAEA,SAAU,CACR,OAAO,KAAK,IAAI,MAAM,CACxB,CAKA,QAAQN,EAAM,CACZ,OAAO,KAAK,IAAI,OAAQA,CAAI,CAC9B,CAOA,gBAAiB,CACf,OAAOyR,GAAS,eAAe,KAAK,IAAI,MAAM,CAAC,CACjD,CAKA,kBAAmB,CACjB,OAAO,KAAK,IAAI,OAAO,EAAE,iBAC3B,CAKA,kBAAmB,CACjB,OAAO,KAAK,IAAI,eAAe,CACjC,CAUA,eAAgB,CACd,OAAO,KAAK,IAAI,YAAY,CAC9B,CAOA,cAAcC,EAAY,CACxB,OAAO,KAAK,IAAI,aAAcA,CAAU,CAC1C,CASA,UAAUtR,EAAO,CACf,MAAMuR,EAAc,KAAK,eAAc,EACjC7E,EAAgB,KAAK,iBAAgB,EACrCxM,EAAQ,KAAK,SAAQ,EAC3B,OAAI,KAAK,gBACAoM,GAAU,oBAAoBpM,EAAMF,EAAQuR,CAAW,EAAG7E,CAAa,EAEzExM,EAAMF,EAAQuR,CAAW,CAClC,CAOA,UAAUvR,EAAO+F,EAAG,CAClB,MAAMwL,EAAc,KAAK,eAAc,EACjC7E,EAAgB,KAAK,iBAAgB,EACrCxM,EAAQ,KAAK,SAAQ,EAC3B,OAAI,KAAK,gBACPA,EAAMF,EAAQuR,CAAW,EAAIjF,GAAU,oBAAoBvG,EAAG2G,CAAa,EAE3ExM,EAAMF,EAAQuR,CAAW,EAAIxL,EAExB,IACT,CAqBA,WAAW/F,EAAOwB,EAAQ,CACxB,MAAM8P,EAAa,KAAK,cAAa,EAC/BC,EAAc,KAAK,eAAc,EACjC7E,EAAgB,KAAK,iBAAgB,EACrCxM,EAAQ,KAAK,SAAQ,EAC3B,QAASuB,EAAI,EAAGA,EAAI8P,EAAa9P,IAC3B6P,EACF9P,EAAOC,CAAC,EAAI6K,GAAU,oBAAoBpM,EAAMF,EAAQuR,EAAc9P,CAAC,EAAGiL,CAAa,EAEvFlL,EAAOC,CAAC,EAAIvB,EAAMF,EAAQuR,EAAc9P,CAAC,EAG7C,OAAOD,CACT,CAsBA,WAAWxB,EAAOsC,EAAO,CACvB,MAAMgP,EAAa,KAAK,cAAa,EAC/BC,EAAc,KAAK,eAAc,EACjC7E,EAAgB,KAAK,iBAAgB,EACrCxM,EAAQ,KAAK,SAAQ,EAC3B,QAASuB,EAAI,EAAGA,EAAI8P,EAAa9P,IAC3B6P,EACFpR,EAAMF,EAAQuR,EAAc9P,CAAC,EAAI6K,GAAU,oBAAoBhK,EAAMb,CAAC,EAAGiL,CAAa,EAEtFxM,EAAMF,EAAQuR,EAAc9P,CAAC,EAAIa,EAAMb,CAAC,EAG5C,OAAO,IACT,CAWA,WAAY,CACV,OAAO,KAAK,IAAI,QAAQ,CAC1B,CAQA,UAAUgQ,EAAQ,CAChB,OAAO,KAAK,IAAI,SAAUA,CAAM,CAClC,CAEA,WAAY,CACV,OAAO,KAAK,OAAO,QAAQ,CAC7B,CAEA,UAAUvM,EAAQ,CAChB,OAAO,KAAK,OAAO,SAAUA,CAAM,CACrC,CAEA,UAAW,CACT,OAAO,KAAK,IAAI,OAAO,CACzB,CAEA,SAAShF,EAAO,CACd,YAAK,IAAI,gBAAiBA,EAAQwR,GAAqBxR,CAAK,EAAImR,GAAS,cAAc,KAAK,EAC5F,KAAK,IAAI,QAASnR,CAAK,EAChB,IACT,CAEA,eAAgB,CACd,MAAMA,EAAQ,KAAK,IAAI,OAAO,EAC9B,OAAOA,EAAQA,EAAM,WAAa,CACpC,CACF,CASAmR,GAAS,KAAO,CAEd,OAAQ,SAER,KAAM,OAEN,KAAM,OAEN,KAAM,OAEN,KAAM,OAEN,KAAM,OAEN,KAAM,MACR,EAEAA,GAAS,cAAgB,CAKvB,KAAM,KAKN,cAAe,KAKf,MAAO,KAKP,eAAgB,KAKhB,aAAc,KAKd,MAAO,IACT,EACA,SAASK,GAAqBxR,EAAO,CACnC,OAAQA,EAAM,YAAW,CACvB,KAAK,aACH,OAAOmR,GAAS,cAAc,MAChC,KAAK,YACH,OAAOA,GAAS,cAAc,aAChC,KAAK,YACH,OAAOA,GAAS,cAAc,eAChC,KAAK,WACH,OAAOA,GAAS,cAAc,cAChC,KAAK,WACH,OAAOA,GAAS,cAAc,MAChC,KAAK,UACH,OAAOA,GAAS,cAAc,KAChC,QACE,MAAM,IAAI,MAAM,iCAAiC,CACvD,CACA,CAsCA,MAAMM,WAAkBR,EAAmB,CACzC,MAAO,CACL,KAAK,aAAelO,EAAa,SACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,SAAU,IAAInB,GACd,SAAU,IAAIA,EACpB,CAAK,CACH,CAEA,WAAW8P,EAAS,CAClB,OAAO,KAAK,OAAO,WAAYA,CAAO,CACxC,CAEA,cAAcA,EAAS,CACrB,OAAO,KAAK,UAAU,WAAYA,CAAO,CAC3C,CAEA,cAAe,CACb,OAAO,KAAK,SAAS,UAAU,CACjC,CAEA,WAAWC,EAAS,CAClB,OAAO,KAAK,OAAO,WAAYA,CAAO,CACxC,CAEA,cAAcA,EAAS,CACrB,OAAO,KAAK,UAAU,WAAYA,CAAO,CAC3C,CAEA,cAAe,CACb,OAAO,KAAK,SAAS,UAAU,CACjC,CACF,CA+BA,MAAMC,WAAyBX,EAAmB,CAIhD,MAAO,CACL,KAAK,aAAelO,EAAa,iBACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,WAAY,KACZ,WAAY,KACZ,QAAS,IACf,CAAK,CACH,CAQA,eAAgB,CACd,OAAO,KAAK,IAAI,YAAY,CAC9B,CAKA,cAAc8O,EAAY,CACxB,OAAO,KAAK,IAAI,aAAcA,CAAU,CAC1C,CAEA,eAAgB,CACd,OAAO,KAAK,OAAO,YAAY,CACjC,CAEA,cAAcC,EAAY,CACxB,OAAO,KAAK,OAAO,aAAcA,CAAU,CAC7C,CAKA,YAAa,CACX,OAAO,KAAK,OAAO,SAAS,CAC9B,CAKA,WAAWH,EAAS,CAClB,OAAO,KAAK,OAAO,UAAWA,CAAO,CACvC,CACF,CAKAC,GAAiB,WAAa,CAE5B,YAAa,cAEb,SAAU,WAEV,MAAO,QAEP,QAAS,SACX,EA2CA,MAAMG,WAAyBd,EAAmB,CAIhD,MAAO,CACL,KAAK,aAAelO,EAAa,iBACnC,CACA,sBAAuB,CACrB,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,cAAegP,GAAiB,cAAc,OAC9C,MAAO,KACP,OAAQ,IACd,CAAK,CACH,CAKA,kBAAmB,CACjB,OAAO,KAAK,IAAI,eAAe,CACjC,CAEA,iBAAiBC,EAAe,CAC9B,OAAO,KAAK,IAAI,gBAAiBA,CAAa,CAChD,CAEA,UAAW,CACT,OAAO,KAAK,OAAO,OAAO,CAC5B,CAEA,SAASC,EAAO,CACd,OAAO,KAAK,OAAO,QAASA,EAAO,CACjC,MAAOhP,GAAkB,KAC/B,CAAK,CACH,CAKA,WAAY,CACV,OAAO,KAAK,OAAO,QAAQ,CAC7B,CAKA,UAAUiP,EAAQ,CAChB,OAAO,KAAK,OAAO,SAAUA,EAAQ,CACnC,MAAOjP,GAAkB,KAC/B,CAAK,CACH,CACF,CAKA8O,GAAiB,cAAgB,CAE/B,OAAQ,SAER,KAAM,OAEN,YAAa,aACf,EAuDA,MAAMI,WAAiBlB,EAAmB,CACxC,MAAO,CACL,KAAK,aAAelO,EAAa,MACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,IAAK,EACX,CAAK,CACH,CASA,QAAS,CACP,OAAO,KAAK,IAAI,KAAK,CACvB,CASA,OAAOuC,EAAK,CACV,OAAO,KAAK,IAAI,MAAOA,CAAG,CAC5B,CACF,CA4BA,MAAM8M,WAAenB,EAAmB,CAItC,MAAO,CACL,KAAK,aAAelO,EAAa,MACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CAExC,KAAMqP,GAAO,KAAK,YAClB,MAAO,GACP,KAAM,IAEN,YAAa,KACb,KAAM,KAAK,GAAK,EAAI,GAAK,IAGzB,KAAM,EACN,KAAM,CACZ,CAAK,CACH,CAKA,SAAU,CACR,OAAO,KAAK,IAAI,MAAM,CACxB,CAEA,QAAQ1S,EAAM,CACZ,OAAO,KAAK,IAAI,OAAQA,CAAI,CAC9B,CAEA,UAAW,CACT,OAAO,KAAK,IAAI,OAAO,CACzB,CAEA,SAAS2S,EAAO,CACd,OAAO,KAAK,IAAI,QAASA,CAAK,CAChC,CAKA,SAAU,CACR,OAAO,KAAK,IAAI,MAAM,CACxB,CAKA,QAAQC,EAAM,CACZ,OAAO,KAAK,IAAI,OAAQA,CAAI,CAC9B,CAQA,gBAAiB,CACf,OAAO,KAAK,IAAI,aAAa,CAC/B,CAKA,eAAeC,EAAa,CAC1B,OAAO,KAAK,IAAI,cAAeA,CAAW,CAC5C,CAEA,SAAU,CACR,OAAO,KAAK,IAAI,MAAM,CACxB,CAEA,QAAQC,EAAM,CACZ,OAAO,KAAK,IAAI,OAAQA,CAAI,CAC9B,CAQA,SAAU,CACR,OAAO,KAAK,IAAI,MAAM,CACxB,CAKA,QAAQC,EAAM,CACZ,OAAO,KAAK,IAAI,OAAQA,CAAI,CAC9B,CAKA,SAAU,CACR,OAAO,KAAK,IAAI,MAAM,CACxB,CAKA,QAAQC,EAAM,CACZ,OAAO,KAAK,IAAI,OAAQA,CAAI,CAC9B,CACF,CAIAN,GAAO,KAAO,CAEZ,YAAa,cAEb,aAAc,cAChB,EAkBA,MAAMO,WAA0BnC,EAAS,CAEvC,gBAAgBpP,EAAQ,CACtB,GAAI,CAAC,KAAK,YAAY,SAASA,EAAO,YAAY,EAChD,MAAM,IAAI,MAAM,WAAWA,EAAO,YAAY,wBAAwB,KAAK,YAAY,IAAI,CAE/F,CACF,CACAuR,GAAkB,eAAiB,OAmBnC,MAAMC,WAAoB3B,EAAmB,CAI3C,MAAO,CACL,KAAK,aAAelO,EAAa,YACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,SAAU,EACV,UAAW,KACX,UAAW,KACX,MAAO6P,GAAY,SAAS,OAC5B,MAAOA,GAAY,SAAS,MAClC,CAAK,CACH,CAKA,aAAc,CACZ,OAAO,KAAK,IAAI,UAAU,CAC5B,CAEA,YAAYC,EAAU,CACpB,OAAO,KAAK,IAAI,WAAYA,CAAQ,CACtC,CAKA,cAAe,CACb,OAAO,KAAK,IAAI,WAAW,CAC7B,CAEA,aAAaC,EAAW,CACtB,OAAO,KAAK,IAAI,YAAaA,CAAS,CACxC,CAEA,cAAe,CACb,OAAO,KAAK,IAAI,WAAW,CAC7B,CAEA,aAAaC,EAAW,CACtB,OAAO,KAAK,IAAI,YAAaA,CAAS,CACxC,CAKA,UAAW,CACT,OAAO,KAAK,IAAI,OAAO,CACzB,CAEA,SAASC,EAAO,CACd,OAAO,KAAK,IAAI,QAASA,CAAK,CAChC,CAEA,UAAW,CACT,OAAO,KAAK,IAAI,OAAO,CACzB,CAEA,SAASC,EAAO,CACd,OAAO,KAAK,IAAI,QAASA,CAAK,CAChC,CACF,CAKAL,GAAY,SAAW,CAErB,cAAe,MAEf,gBAAiB,MAEjB,OAAQ,KACV,EAEAA,GAAY,UAAY,CAEtB,QAAS,KAET,OAAQ,IACV,EAEAA,GAAY,UAAY,CAEtB,QAAS,KAET,OAAQ,KAER,uBAAwB,KAExB,sBAAuB,KAEvB,sBAAuB,KAEvB,qBAAsB,IACxB,EAEA,KAAM,CACN,EAAEM,GACF,EAAEC,GACF,EAAEC,GACF,EAAEC,EACF,EAAIlQ,GA+BJ,MAAMmQ,WAAiBrC,EAAmB,CAIxC,MAAO,CACL,KAAK,aAAelO,EAAa,QACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,UAAWuQ,GAAS,UAAU,OAC9B,YAAa,GACb,YAAa,GACb,gBAAiB,CAAC,EAAG,EAAG,EAAG,CAAC,EAC5B,iBAAkB,KAClB,qBAAsB,IAAIV,GAAY,KAAK,MAAO,sBAAsB,EACxE,eAAgB,CAAC,EAAG,EAAG,CAAC,EACxB,gBAAiB,KACjB,oBAAqB,IAAIA,GAAY,KAAK,MAAO,qBAAqB,EACtE,YAAa,EACb,cAAe,KACf,kBAAmB,IAAIA,GAAY,KAAK,MAAO,mBAAmB,EAClE,kBAAmB,EACnB,iBAAkB,KAClB,qBAAsB,IAAIA,GAAY,KAAK,MAAO,sBAAsB,EACxE,gBAAiB,EACjB,eAAgB,EAChB,yBAA0B,KAC1B,6BAA8B,IAAIA,GAAY,KAAK,MAAO,8BAA8B,CAC9F,CAAK,CACH,CAKA,gBAAiB,CACf,OAAO,KAAK,IAAI,aAAa,CAC/B,CAEA,eAAeW,EAAa,CAC1B,OAAO,KAAK,IAAI,cAAeA,CAAW,CAC5C,CAKA,UAAW,CACT,OAAO,KAAK,IAAI,iBAAiB,EAAE,CAAC,CACtC,CAEA,SAASC,EAAO,CACd,MAAMC,EAAkB,KAAK,IAAI,iBAAiB,EAAE,MAAK,EACzD,OAAAA,EAAgB,CAAC,EAAID,EACd,KAAK,IAAI,kBAAmBC,CAAe,CACpD,CAsBA,cAAe,CACb,OAAO,KAAK,IAAI,WAAW,CAC7B,CAEA,aAAaC,EAAW,CACtB,OAAO,KAAK,IAAI,YAAaA,CAAS,CACxC,CAEA,gBAAiB,CACf,OAAO,KAAK,IAAI,aAAa,CAC/B,CAEA,eAAeC,EAAa,CAC1B,OAAO,KAAK,IAAI,cAAeA,CAAW,CAC5C,CAQA,oBAAqB,CACnB,OAAO,KAAK,IAAI,iBAAiB,CACnC,CAKA,mBAAmBF,EAAiB,CAClC,OAAO,KAAK,IAAI,kBAAmBA,CAAe,CACpD,CAWA,qBAAsB,CACpB,OAAO,KAAK,OAAO,kBAAkB,CACvC,CAKA,yBAA0B,CACxB,OAAO,KAAK,OAAO,kBAAkB,EAAI,KAAK,OAAO,sBAAsB,EAAI,IACjF,CAEA,oBAAoBG,EAAS,CAC3B,OAAO,KAAK,OAAO,mBAAoBA,EAAS,CAC9C,SAAUV,GAAIC,GAAIC,GAAIC,GACtB,QAAS,EACf,CAAK,CACH,CAKA,mBAAoB,CAClB,OAAO,KAAK,IAAI,gBAAgB,CAClC,CAEA,kBAAkBQ,EAAgB,CAChC,OAAO,KAAK,IAAI,iBAAkBA,CAAc,CAClD,CAUA,oBAAqB,CACnB,OAAO,KAAK,OAAO,iBAAiB,CACtC,CAKA,wBAAyB,CACvB,OAAO,KAAK,OAAO,iBAAiB,EAAI,KAAK,OAAO,qBAAqB,EAAI,IAC/E,CAEA,mBAAmBD,EAAS,CAC1B,OAAO,KAAK,OAAO,kBAAmBA,EAAS,CAC7C,SAAUV,GAAIC,GAAIC,GAClB,QAAS,EACf,CAAK,CACH,CAKA,gBAAiB,CACf,OAAO,KAAK,IAAI,aAAa,CAC/B,CAEA,eAAeU,EAAO,CACpB,OAAO,KAAK,IAAI,cAAeA,CAAK,CACtC,CAYA,kBAAmB,CACjB,OAAO,KAAK,OAAO,eAAe,CACpC,CAKA,sBAAuB,CACrB,OAAO,KAAK,OAAO,eAAe,EAAI,KAAK,OAAO,mBAAmB,EAAI,IAC3E,CAEA,iBAAiBF,EAAS,CACxB,OAAO,KAAK,OAAO,gBAAiBA,EAAS,CAC3C,SAAUV,GAAIC,GAAIC,EACxB,CAAK,CACH,CAKA,sBAAuB,CACrB,OAAO,KAAK,IAAI,mBAAmB,CACrC,CAEA,qBAAqBW,EAAU,CAC7B,OAAO,KAAK,IAAI,oBAAqBA,CAAQ,CAC/C,CAaA,qBAAsB,CACpB,OAAO,KAAK,OAAO,kBAAkB,CACvC,CAKA,yBAA0B,CACxB,OAAO,KAAK,OAAO,kBAAkB,EAAI,KAAK,OAAO,sBAAsB,EAAI,IACjF,CAEA,oBAAoBH,EAAS,CAC3B,OAAO,KAAK,OAAO,mBAAoBA,EAAS,CAC9C,SAAUV,EAChB,CAAK,CACH,CAQA,oBAAqB,CACnB,OAAO,KAAK,IAAI,iBAAiB,CACnC,CAKA,mBAAmBc,EAAQ,CACzB,OAAO,KAAK,IAAI,kBAAmBA,CAAM,CAC3C,CAKA,mBAAoB,CAClB,OAAO,KAAK,IAAI,gBAAgB,CAClC,CAKA,kBAAkBA,EAAQ,CACxB,OAAO,KAAK,IAAI,iBAAkBA,CAAM,CAC1C,CAUA,6BAA8B,CAC5B,OAAO,KAAK,OAAO,0BAA0B,CAC/C,CAKA,iCAAkC,CAChC,OAAO,KAAK,OAAO,0BAA0B,EAAI,KAAK,OAAO,8BAA8B,EAAI,IACjG,CAKA,4BAA4BJ,EAAS,CACnC,OAAO,KAAK,OAAO,2BAA4BA,EAAS,CACtD,SAAUT,GAAIC,EACpB,CAAK,CACH,CACF,CAIAE,GAAS,UAAY,CAInB,OAAQ,SAKR,KAAM,OAMN,MAAO,OACT,EAiCA,MAAMW,WAAahD,EAAmB,CACpC,MAAO,CACL,KAAK,aAAelO,EAAa,IACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,QAAS,CAAA,EACT,WAAY,IAAInB,EACtB,CAAK,CACH,CAEA,aAAasS,EAAW,CACtB,OAAO,KAAK,OAAO,aAAcA,CAAS,CAC5C,CAEA,gBAAgBA,EAAW,CACzB,OAAO,KAAK,UAAU,aAAcA,CAAS,CAC/C,CAEA,gBAAiB,CACf,OAAO,KAAK,SAAS,YAAY,CACnC,CAMA,YAAa,CACX,OAAO,KAAK,IAAI,SAAS,CAC3B,CAMA,WAAWC,EAAS,CAClB,OAAO,KAAK,IAAI,UAAWA,CAAO,CACpC,CACF,CA4BA,MAAMC,WAAanD,EAAmB,CACpC,MAAO,CACL,KAAK,aAAelO,EAAa,IACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,YAAa,CAAC,EAAG,EAAG,CAAC,EACrB,SAAU,CAAC,EAAG,EAAG,EAAG,CAAC,EACrB,MAAO,CAAC,EAAG,EAAG,CAAC,EACf,QAAS,CAAA,EACT,OAAQ,KACR,KAAM,KACN,KAAM,KACN,SAAU,IAAInB,EACpB,CAAK,CACH,CACA,KAAKS,EAAOsO,EAAUN,GAAe,CAGnC,GAAIM,IAAYN,GAAe,MAAM,IAAI,MAAM,wBAAwB,EACvE,OAAO,MAAM,KAAKhO,EAAOsO,CAAO,CAClC,CAKA,gBAAiB,CACf,OAAO,KAAK,IAAI,aAAa,CAC/B,CAEA,aAAc,CACZ,OAAO,KAAK,IAAI,UAAU,CAC5B,CAEA,UAAW,CACT,OAAO,KAAK,IAAI,OAAO,CACzB,CAEA,eAAe0D,EAAa,CAC1B,OAAO,KAAK,IAAI,cAAeA,CAAW,CAC5C,CAEA,YAAYC,EAAU,CACpB,OAAO,KAAK,IAAI,WAAYA,CAAQ,CACtC,CAEA,SAASR,EAAO,CACd,OAAO,KAAK,IAAI,QAASA,CAAK,CAChC,CAEA,WAAY,CACV,OAAO1H,GAAU,QAAQ,KAAK,IAAI,aAAa,EAAG,KAAK,IAAI,UAAU,EAAG,KAAK,IAAI,OAAO,EAAG,CAAA,CAAE,CAC/F,CAEA,UAAUmI,EAAQ,CAChB,MAAMF,EAAc,KAAK,IAAI,aAAa,EAAE,MAAK,EAC3CC,EAAW,KAAK,IAAI,UAAU,EAAE,MAAK,EACrCR,EAAQ,KAAK,IAAI,OAAO,EAAE,MAAK,EACrC,OAAA1H,GAAU,UAAUmI,EAAQF,EAAaC,EAAUR,CAAK,EACjD,KAAK,IAAI,cAAeO,CAAW,EAAE,IAAI,WAAYC,CAAQ,EAAE,IAAI,QAASR,CAAK,CAC1F,CAKA,qBAAsB,CACpB,MAAMxD,EAAI,CAAC,EAAG,EAAG,CAAC,EAClB,OAAAlE,GAAU,UAAU,KAAK,eAAc,EAAIkE,EAAG,CAAC,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,CAAC,CAAC,EAC9DA,CACT,CAEA,kBAAmB,CACjB,MAAMkE,EAAI,CAAC,EAAG,EAAG,EAAG,CAAC,EACrB,OAAApI,GAAU,UAAU,KAAK,eAAc,EAAI,CAAC,EAAG,EAAG,CAAC,EAAGoI,EAAG,CAAC,EAAG,EAAG,CAAC,CAAC,EAC3DA,CACT,CAEA,eAAgB,CACd,MAAMC,EAAI,CAAC,EAAG,EAAG,CAAC,EAClB,OAAArI,GAAU,UAAU,KAAK,eAAc,EAAI,CAAC,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,CAAC,EAAGqI,CAAC,EAC9DA,CACT,CAEA,gBAAiB,CAEf,MAAMC,EAAY,CAAA,EAClB,QAAS/T,EAAO,KAAMA,GAAQ,KAAMA,EAAOA,EAAK,gBAC9C+T,EAAU,KAAK/T,CAAI,EAGrB,IAAIgU,EACJ,MAAM3N,EAAc0N,EAAU,IAAG,EAAG,UAAS,EAC7C,KAAOC,EAAWD,EAAU,OAC1BtK,GAASpD,EAAaA,EAAa2N,EAAS,UAAS,CAAE,EAEzD,OAAO3N,CACT,CAiBA,SAASxG,EAAO,CAEd,MAAMoU,EAAapU,EAAM,cAAa,EAClCoU,GAAYA,EAAW,YAAYpU,CAAK,EAC5C,UAAWY,KAAUZ,EAAM,cACrBY,EAAO,eAAiB2B,EAAa,OACvC3B,EAAO,YAAYZ,CAAK,EAG5B,OAAO,KAAK,OAAO,WAAYA,CAAK,CACtC,CAEA,YAAYA,EAAO,CACjB,OAAO,KAAK,UAAU,WAAYA,CAAK,CACzC,CAEA,cAAe,CACb,OAAO,KAAK,SAAS,UAAU,CACjC,CASA,eAAgB,CACd,UAAWY,KAAU,KAAK,cACxB,GAAIA,EAAO,eAAiB2B,EAAa,KACvC,OAAO3B,EAGX,OAAO,IACT,CAKA,SAAU,CACR,OAAO,KAAK,OAAO,MAAM,CAC3B,CAKA,QAAQwF,EAAM,CACZ,OAAO,KAAK,OAAO,OAAQA,CAAI,CACjC,CAEA,WAAY,CACV,OAAO,KAAK,OAAO,QAAQ,CAC7B,CAEA,UAAUiO,EAAQ,CAChB,OAAO,KAAK,OAAO,SAAUA,CAAM,CACrC,CAEA,SAAU,CACR,OAAO,KAAK,OAAO,MAAM,CAC3B,CAEA,QAAQC,EAAM,CACZ,OAAO,KAAK,OAAO,OAAQA,CAAI,CACjC,CAKA,YAAa,CACX,OAAO,KAAK,IAAI,SAAS,CAC3B,CAKA,WAAWX,EAAS,CAClB,OAAO,KAAK,IAAI,UAAWA,CAAO,CACpC,CAKA,SAAS7N,EAAI,CACXA,EAAG,IAAI,EACP,UAAW9F,KAAS,KAAK,aAAY,EAAIA,EAAM,SAAS8F,CAAE,EAC1D,OAAO,IACT,CACF,CAkCA,MAAMyO,WAAkB9D,EAAmB,CAIzC,MAAO,CACL,KAAK,aAAelO,EAAa,SACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,KAAMgS,GAAU,KAAK,UACrB,SAAU,KACV,QAAS,KACT,WAAY,IAAIlT,GAChB,QAAS,IAAID,EACnB,CAAK,CACH,CAKA,YAAa,CACX,OAAO,KAAK,OAAO,SAAS,CAC9B,CAMA,WAAWuF,EAAS,CAClB,OAAO,KAAK,OAAO,UAAWA,EAAS,CACrC,MAAOlE,GAAkB,oBAC/B,CAAK,CACH,CAEA,aAAa+R,EAAU,CACrB,OAAO,KAAK,UAAU,aAAcA,CAAQ,CAC9C,CAKA,aAAaA,EAAUC,EAAU,CAC/B,OAAO,KAAK,UAAU,aAAcD,EAAUC,EAAU,CACtD,MAAOhS,GAAkB,YAC/B,CAAK,CACH,CAMA,gBAAiB,CACf,OAAO,KAAK,iBAAiB,YAAY,CAC3C,CAMA,eAAgB,CACd,OAAO,KAAK,eAAe,YAAY,CACzC,CAEA,aAAc,CACZ,OAAO,KAAK,OAAO,UAAU,CAC/B,CAEA,YAAYiS,EAAU,CACpB,OAAO,KAAK,OAAO,WAAYA,CAAQ,CACzC,CAUA,SAAU,CACR,OAAO,KAAK,IAAI,MAAM,CACxB,CAOA,QAAQC,EAAM,CACZ,OAAO,KAAK,IAAI,OAAQA,CAAI,CAC9B,CAKA,aAAc,CACZ,OAAO,KAAK,SAAS,SAAS,CAChC,CAKA,UAAU7T,EAAQ,CAChB,OAAO,KAAK,OAAO,UAAWA,CAAM,CACtC,CAKA,aAAaA,EAAQ,CACnB,OAAO,KAAK,UAAU,UAAWA,CAAM,CACzC,CACF,CAKAyT,GAAU,KAAO,CAEf,OAAQ,EAER,MAAO,EAKP,UAAW,EAEX,WAAY,EAEZ,UAAW,EAEX,eAAgB,EAMhB,aAAc,CAChB,EAiBA,MAAMK,WAAwB5E,EAAS,CACrC,MAAO,CACL,KAAK,aAAezN,EAAa,gBACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,WAAY,IAAIlB,EACtB,CAAK,CACH,CAEA,aAAamT,EAAU,CACrB,OAAO,KAAK,UAAU,aAAcA,CAAQ,CAC9C,CAIA,aAAaA,EAAUC,EAAU,CAC/B,OAAO,KAAK,UAAU,aAAcD,EAAUC,EAAU,CACtD,MAAOhS,GAAkB,YAC/B,CAAK,CACH,CAKA,gBAAiB,CACf,OAAO,KAAK,iBAAiB,YAAY,CAC3C,CAKA,eAAgB,CACd,OAAO,KAAK,eAAe,YAAY,CACzC,CACF,CAEA,SAAS5B,IAAW,CAClB,OAAOA,GAAW,OAAO,OAAS,OAAO,OAAO,KAAI,EAAK,SAAU2P,EAAG,CACpE,QAAS,EAAI,EAAG,EAAI,UAAU,OAAQ,IAAK,CACzC,IAAI,EAAI,UAAU,CAAC,EACnB,QAASwD,KAAK,GAAI,CAAA,GAAI,eAAe,KAAK,EAAGA,CAAC,IAAMxD,EAAEwD,CAAC,EAAI,EAAEA,CAAC,EAChE,CACA,OAAOxD,CACT,EAAG3P,GAAS,MAAM,KAAM,SAAS,CACnC,CAgBA,MAAMgU,WAAcpE,EAAmB,CACrC,MAAO,CACL,KAAK,aAAelO,EAAa,KACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,SAAU,IAAInB,EACpB,CAAK,CACH,CACA,KAAKS,EAAOsO,EAAUN,GAAe,CAGnC,GAAIM,IAAYN,GAAe,MAAM,IAAI,MAAM,yBAAyB,EACxE,OAAO,MAAM,KAAKhO,EAAOsO,CAAO,CAClC,CAcA,SAAShQ,EAAM,CAEb,MAAMiU,EAAajU,EAAK,cAAa,EACrC,OAAIiU,GAAYA,EAAW,YAAYjU,CAAI,EACpC,KAAK,OAAO,WAAYA,CAAI,CACrC,CAEA,YAAYA,EAAM,CAChB,OAAO,KAAK,UAAU,WAAYA,CAAI,CACxC,CAMA,cAAe,CACb,OAAO,KAAK,SAAS,UAAU,CACjC,CAEA,SAAS2F,EAAI,CACX,UAAW3F,KAAQ,KAAK,aAAY,EAAIA,EAAK,SAAS2F,CAAE,EACxD,OAAO,IACT,CACF,CAWA,MAAMgP,WAAarE,EAAmB,CACpC,MAAO,CACL,KAAK,aAAelO,EAAa,IACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,SAAU,KACV,oBAAqB,KACrB,OAAQ,IAAInB,EAClB,CAAK,CACH,CAKA,aAAc,CACZ,OAAO,KAAK,OAAO,UAAU,CAC/B,CAKA,YAAY2T,EAAU,CACpB,OAAO,KAAK,OAAO,WAAYA,CAAQ,CACzC,CAMA,wBAAyB,CACvB,OAAO,KAAK,OAAO,qBAAqB,CAC1C,CAMA,uBAAuBC,EAAqB,CAC1C,OAAO,KAAK,OAAO,sBAAuBA,EAAqB,CAC7D,MAAOvS,GAAkB,qBAC/B,CAAK,CACH,CAEA,SAASwS,EAAO,CACd,OAAO,KAAK,OAAO,SAAUA,CAAK,CACpC,CAEA,YAAYA,EAAO,CACjB,OAAO,KAAK,UAAU,SAAUA,CAAK,CACvC,CAEA,YAAa,CACX,OAAO,KAAK,SAAS,QAAQ,CAC/B,CACF,CAoBA,MAAMC,WAAgBzE,EAAmB,CACvC,MAAO,CACL,KAAK,aAAelO,EAAa,OACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,MAAO,KACP,SAAU,GACV,IAAK,EACX,CAAK,CACH,CAKA,aAAc,CACZ,OAAO,KAAK,IAAI,UAAU,GAAK8B,GAAW,oBAAoBQ,GAAU,UAAU,KAAK,IAAI,KAAK,CAAC,CAAC,CACpG,CAKA,YAAYP,EAAU,CACpB,OAAO,KAAK,IAAI,WAAYA,CAAQ,CACtC,CAKA,QAAS,CACP,OAAO,KAAK,IAAI,KAAK,CACvB,CAKA,OAAOQ,EAAK,CACV,KAAK,IAAI,MAAOA,CAAG,EACnB,MAAMR,EAAWD,GAAW,oBAAoBQ,GAAU,UAAUC,CAAG,CAAC,EACxE,OAAIR,GAAU,KAAK,IAAI,WAAYA,CAAQ,EACpC,IACT,CAKA,UAAW,CACT,OAAO,KAAK,IAAI,OAAO,CACzB,CAEA,SAAS6Q,EAAO,CACd,OAAO,KAAK,IAAI,QAASrS,GAAY,WAAWqS,CAAK,CAAC,CACxD,CAEA,SAAU,CACR,MAAMA,EAAQ,KAAK,IAAI,OAAO,EAC9B,OAAKA,EACE9Q,GAAW,QAAQ8Q,EAAO,KAAK,YAAW,CAAE,EADhC,IAErB,CACF,CAgCA,MAAMC,WAAa3E,EAAmB,CACpC,MAAO,CACL,KAAK,aAAelO,EAAa,IACnC,CACA,aAAc,CACZ,OAAO,OAAO,OAAO,MAAM,YAAW,EAAI,CACxC,MAAO,CACL,UAAW,kBAAkBF,EAAO,GACpC,QAAS,KACjB,EACM,aAAc,KACd,UAAW,IAAIjB,GACf,WAAY,IAAIA,GAChB,QAAS,IAAIA,GACb,QAAS,IAAIA,GACb,UAAW,IAAIA,GACf,OAAQ,IAAIA,GACZ,MAAO,IAAIA,GACX,OAAQ,IAAIA,GACZ,MAAO,IAAIA,GACX,SAAU,IAAIA,EACpB,CAAK,CACH,CAEA,YAAYM,EAAO,CACjB,MAAMA,CAAK,EACX,KAAK,YAAc,IAAI,IACvBA,EAAM,iBAAiB,cAAenC,GAAS,CAC7C,KAAK,gBAAgBA,EAAM,MAAM,CACnC,CAAC,CACH,CACA,OAAQ,CACN,MAAM,IAAI,MAAM,wBAAwB,CAC1C,CACA,KAAKsC,EAAOsO,EAAUN,GAAe,CAInC,GAAIM,IAAYN,GAAe,MAAM,IAAI,MAAM,wBAAwB,EAEvE,KAAK,IAAI,QAAShP,GAAS,CAAA,EAAIgB,EAAM,IAAI,OAAO,CAAC,CAAC,EAClD,KAAK,QAAQA,EAAM,SAAS,EAC5B,KAAK,UAAUhB,GAAS,CAAA,EAAIgB,EAAM,UAAS,CAAE,CAAC,EAC9C,KAAK,gBAAgBA,EAAM,gBAAe,EAAKsO,EAAQtO,EAAM,iBAAiB,EAAI,IAAI,EACtF,UAAWwT,KAAiBxT,EAAM,eAAe,YAAY,EAAG,CAC9D,MAAMyT,EAAiBzT,EAAM,aAAawT,CAAa,EACvD,KAAK,aAAaA,EAAelF,EAAQmF,CAAc,CAAC,CAC1D,CACA,OAAO,IACT,CACA,gBAAgBtV,EAAO,CACrB,OAAIA,aAAiB6U,GACnB,KAAK,OAAO,SAAU7U,CAAK,EAClBA,aAAiB4T,GAC1B,KAAK,OAAO,QAAS5T,CAAK,EACjBA,aAAiB4R,GAC1B,KAAK,OAAO,UAAW5R,CAAK,EACnBA,aAAiB8U,GAC1B,KAAK,OAAO,QAAS9U,CAAK,EACjBA,aAAiByT,GAC1B,KAAK,OAAO,SAAUzT,CAAK,EAClBA,aAAiB8S,GAC1B,KAAK,OAAO,YAAa9S,CAAK,EACrBA,aAAiBkV,GAC1B,KAAK,OAAO,WAAYlV,CAAK,EACpBA,aAAiBiR,GAC1B,KAAK,OAAO,aAAcjR,CAAK,EACtBA,aAAiB2Q,GAC1B,KAAK,OAAO,YAAa3Q,CAAK,EACrBA,aAAiB2R,IAC1B,KAAK,OAAO,UAAW3R,CAAK,EAGvB,IACT,CAOA,UAAW,CACT,OAAO,KAAK,IAAI,OAAO,CACzB,CAKA,oBAAqB,CACnB,OAAO,MAAM,KAAK,KAAK,WAAW,CACpC,CAEA,wBAAyB,CACvB,OAAO,KAAK,qBAAqB,OAAO4E,GAAaA,EAAU,YAAY,CAC7E,CAEA,iBAAiBA,EAAW,CAC1B,YAAK,YAAY,IAAIA,CAAS,EACvB,IACT,CAEA,kBAAkBA,EAAW,CAC3B,YAAK,YAAY,OAAOA,CAAS,EAC1B,IACT,CAKA,YAAa,CACX,OAAO,KAAK,SAAS,QAAQ,CAC/B,CAEA,gBAAgB2Q,EAAc,CAC5B,OAAO,KAAK,OAAO,eAAgBA,CAAY,CACjD,CAEA,iBAAkB,CAChB,OAAO,KAAK,OAAO,cAAc,CACnC,CAEA,WAAY,CACV,OAAO,KAAK,SAAS,OAAO,CAC9B,CAEA,aAAc,CACZ,OAAO,KAAK,SAAS,SAAS,CAChC,CAEA,WAAY,CACV,OAAO,KAAK,SAAS,OAAO,CAC9B,CAEA,YAAa,CACX,OAAO,KAAK,SAAS,QAAQ,CAC/B,CAEA,eAAgB,CACd,OAAO,KAAK,SAAS,WAAW,CAClC,CAEA,cAAe,CACb,OAAO,KAAK,SAAS,UAAU,CACjC,CAEA,gBAAiB,CACf,OAAO,KAAK,SAAS,YAAY,CACnC,CAEA,eAAgB,CACd,OAAO,KAAK,SAAS,WAAW,CAClC,CAEA,aAAc,CACZ,OAAO,KAAK,SAAS,SAAS,CAChC,CACF,CAgDA,MAAMC,EAAS,CAMb,OAAO,UAAU9T,EAAO,CACtB,OAAO8T,GAAS,iBAAiB,IAAI9T,CAAK,GAAK,IACjD,CAEA,aAAc,CACZ,KAAK,OAAS,IAAIzB,GAClB,KAAK,MAAQ,IAAImV,GAAK,KAAK,MAAM,EACjC,KAAK,QAAUvN,GAAO,iBACtB2N,GAAS,iBAAiB,IAAI,KAAK,OAAQ,IAAI,CACjD,CAEA,SAAU,CACR,OAAO,KAAK,KACd,CAKA,UAAW,CACT,OAAO,KAAK,MACd,CAEA,WAAY,CACV,OAAO,KAAK,OACd,CAYA,UAAUC,EAAQ,CAChB,YAAK,QAAUA,EACR,IACT,CAOA,OAAQ,CACN,MAAM,IAAI,MAAM,+DAA+D,CACjF,CAOA,MAAMC,EAAQ,CACZ,MAAM,IAAI,MAAM,wEAAwE,CAC1F,CAiBA,MAAM,aAAaC,EAAY,CAC7B,MAAMvO,EAAQuO,EAAW,IAAI7P,GAAMA,EAAG,IAAI,EAC1C,UAAW8P,KAAaD,EACtB,MAAMC,EAAU,KAAM,CACpB,MAAAxO,CACR,CAAO,EAEH,OAAO,IACT,CAQA,gBAAgBK,EAAM,CACpB,MAAM4N,EAAgB5N,EAAK,eAE3B,OADsB,KAAK,QAAO,EAAG,mBAAkB,EAAG,KAAKoO,GAAOA,EAAI,gBAAkBR,CAAa,GACjF,IAAI5N,EAAK,IAAI,CACvC,CAKA,YAAYjH,EAAO,GAAI,CACrB,OAAO,IAAIqU,GAAM,KAAK,OAAQrU,CAAI,CACpC,CAEA,WAAWA,EAAO,GAAI,CACpB,OAAO,IAAIoT,GAAK,KAAK,OAAQpT,CAAI,CACnC,CAEA,aAAaA,EAAO,GAAI,CACtB,OAAO,IAAIoR,GAAO,KAAK,OAAQpR,CAAI,CACrC,CAEA,WAAWA,EAAO,GAAI,CACpB,OAAO,IAAIsU,GAAK,KAAK,OAAQtU,CAAI,CACnC,CAEA,WAAWA,EAAO,GAAI,CACpB,OAAO,IAAIiT,GAAK,KAAK,OAAQjT,CAAI,CACnC,CAKA,iBAAkB,CAChB,OAAO,IAAI+T,GAAU,KAAK,MAAM,CAClC,CAKA,sBAAsB/T,EAAO,GAAI,CAC/B,OAAO,IAAIoU,GAAgB,KAAK,OAAQpU,CAAI,CAC9C,CAEA,eAAeA,EAAO,GAAI,CACxB,OAAO,IAAIsS,GAAS,KAAK,OAAQtS,CAAI,CACvC,CAEA,cAAcA,EAAO,GAAI,CACvB,OAAO,IAAI0U,GAAQ,KAAK,OAAQ1U,CAAI,CACtC,CAEA,gBAAgBA,EAAO,GAAI,CACzB,OAAO,IAAIyQ,GAAU,KAAK,OAAQzQ,CAAI,CACxC,CAKA,uBAAuBA,EAAO,GAAI,CAChC,OAAO,IAAI4Q,GAAiB,KAAK,OAAQ5Q,CAAI,CAC/C,CAKA,uBAAuBA,EAAO,GAAI,CAChC,OAAO,IAAI+Q,GAAiB,KAAK,OAAQ/Q,CAAI,CAC/C,CAEA,eAAeA,EAAO,GAAIgE,EAAS,KAAM,CACvC,OAAKA,IACHA,EAAS,KAAK,QAAO,EAAG,YAAW,EAAG,CAAC,GAElC,IAAImM,GAAS,KAAK,OAAQnQ,CAAI,EAAE,UAAUgE,CAAM,CACzD,CAEA,aAAahE,EAAO,GAAI,CACtB,OAAO,IAAImR,GAAS,KAAK,OAAQnR,CAAI,CACvC,CACF,CAMAgV,GAAS,iBAAmB,IAAI,QAsBhC,MAAMM,EAAU,CAEd,YAAYC,EAAU,CAEpB,KAAK,cAAgB,GAMrB,KAAK,aAAe,CAAA,EAMpB,KAAK,cAAgB,CAAA,EAErB,KAAK,iBAAmB,CAAA,EAExB,KAAK,kBAAoB,CAAA,EAEzB,KAAK,SAAW,OAEhB,KAAK,SAAW,GAEhB,KAAK,WAAa,IAAI,IAEtB,KAAK,UAAY,OACjB,KAAK,SAAWA,EAChBA,EAAS,QAAO,EAAG,iBAAiB,IAAI,EACxC,KAAK,UAAYC,GAAU,CACzB,MAAMzW,EAAQyW,EACRlV,EAASvB,EAAM,OACjBuB,aAAkBqR,IAAqBrR,EAAO,gBAAkB,KAAK,gBACnEvB,EAAM,OAAS,eAAe,KAAK,sBAAsBuB,CAAM,EAC/DvB,EAAM,OAAS,gBAAgB,KAAK,yBAAyBuB,CAAM,EAE3E,EACA,MAAMY,EAAQqU,EAAS,SAAQ,EAC/BrU,EAAM,iBAAiB,cAAe,KAAK,SAAS,EACpDA,EAAM,iBAAiB,eAAgB,KAAK,SAAS,CACvD,CAEA,SAAU,CACR,KAAK,SAAS,UAAU,kBAAkB,IAAI,EAC9C,MAAMA,EAAQ,KAAK,SAAS,SAAQ,EACpCA,EAAM,oBAAoB,cAAe,KAAK,SAAS,EACvDA,EAAM,oBAAoB,eAAgB,KAAK,SAAS,EACxD,UAAWuU,KAAY,KAAK,WAC1BA,EAAS,QAAO,CAEpB,CAEA,OAAO,UAAW,CAAC,CAMnB,YAAa,CACX,OAAO,KAAK,QACd,CAMA,YAAYC,EAAU,CACpB,YAAK,SAAWA,EACT,IACT,CAMA,gBAAiB,CACf,OAAO,MAAM,KAAK,KAAK,UAAU,CACnC,CAKA,sBAAsBD,EAAU,CAC9B,YAAK,WAAW,IAAIA,CAAQ,EACrB,IACT,CAEA,yBAAyBA,EAAU,CACjC,YAAK,WAAW,OAAOA,CAAQ,EACxB,IACT,CAKA,QAAQE,EAAMC,EAAa,CACzB,OAAO,IACT,CAUA,QAAQC,EAAgBC,EAAe,CACrC,OAAO,IACT,CAUA,SAASC,EAAgBD,EAAe,CACtC,OAAO,IACT,CACF,CAEAR,GAAU,eAAiB,OAS3B,MAAMU,EAAc,CAClB,YAAYC,EAAS,CACnB,KAAK,QAAU,OACf,KAAK,QAAU,CAAA,EACf,KAAK,YAAc,CAAA,EACnB,KAAK,kBAAoB,CAAA,EACzB,KAAK,UAAY,CAAA,EACjB,KAAK,SAAW,CAAA,EAChB,KAAK,aAAe,IAAI,IACxB,KAAK,UAAY,CAAA,EACjB,KAAK,OAAS,CAAA,EACd,KAAK,QAAU,CAAA,EACf,KAAK,MAAQ,CAAA,EACb,KAAK,MAAQ,CAAA,EACb,KAAK,WAAa,CAAA,EAClB,KAAK,OAAS,CAAA,EACd,KAAK,QAAUA,CACjB,CACA,eAAeC,EAAaC,EAAgB,CAC1C,KAAK,aAAa,IAAID,EAAaC,CAAc,EAC7CA,EAAe,WAAa,QAC9BD,EAAY,YAAYC,EAAe,QAAQ,EAE7CA,EAAe,SAAW,QAC5BD,EAAY,UAAUC,EAAe,MAAM,EAE7C,MAAMC,EAAa,KAAK,QAAQ,KAAK,SAASD,EAAe,KAAK,EAClE,GAAIC,EAAW,UAAY,OAAW,OACtC,MAAMC,EAAa,KAAK,QAAQ,KAAK,SAASD,EAAW,OAAO,EAC5DC,EAAW,YAAc,QAC3BH,EAAY,aAAaG,EAAW,SAAS,EAE3CA,EAAW,YAAc,QAC3BH,EAAY,aAAaG,EAAW,SAAS,EAE3CA,EAAW,QAAU,QACvBH,EAAY,SAASG,EAAW,KAAK,EAEnCA,EAAW,QAAU,QACvBH,EAAY,SAASG,EAAW,KAAK,CAEzC,CACF,CAEA,MAAMC,GAAkB,CACtB,OAAQjP,GAAO,iBACf,WAAY,CAAA,EACZ,aAAc,CAAA,CAChB,EACMkP,GAA0B,IAAI,IAAI,CAACxU,EAAa,OAAQA,EAAa,QAASA,EAAa,SAAUA,EAAa,KAAMA,EAAa,UAAWA,EAAa,KAAMA,EAAa,KAAK,CAAC,EAE5L,MAAMyU,EAAW,CACf,OAAO,KAAKP,EAASQ,EAAWH,GAAiB,CAC/C,MAAMI,EAAUrW,GAAS,GAAIiW,GAAiBG,CAAQ,EAChD,CACJ,KAAAE,CACN,EAAQV,EACEV,EAAW,IAAIP,GAAQ,EAAG,UAAU0B,EAAQ,MAAM,EACxD,KAAK,SAAST,EAASS,CAAO,EAE9B,MAAME,EAAU,IAAIZ,GAAcC,CAAO,EAEnCY,EAAWF,EAAK,MAChBG,EAAQvB,EAAS,QAAO,EAAG,SAAQ,EACrCsB,EAAS,YAAWC,EAAM,UAAYD,EAAS,WAC/CA,EAAS,SAAQC,EAAM,OAASD,EAAS,QACzCF,EAAK,SAAW,QAClBpB,EAAS,QAAO,EAAG,UAAUlV,GAAS,GAAIsW,EAAK,MAAM,CAAC,EAGxD,MAAMI,EAAiBJ,EAAK,gBAAkB,CAAA,EACxCK,EAAqBL,EAAK,oBAAsB,CAAA,EACtDD,EAAQ,WAAW,KAAK,CAACzW,EAAGC,IAAMD,EAAE,eAAiBC,EAAE,eAAiB,EAAI,EAAE,EAC9E,UAAWoV,KAAaoB,EAAQ,WAC9B,GAAIK,EAAe,SAASzB,EAAU,cAAc,EAAG,CAErD,MAAMlR,EAAYmR,EAAS,gBAAgBD,CAAS,EAAE,YAAY0B,EAAmB,SAAS1B,EAAU,cAAc,CAAC,EAEjH2B,EAAmB7S,EAAU,aAAa,OAAO1F,GAAQ,CAAC6X,GAAwB,IAAI7X,CAAI,CAAC,EAC7FuY,EAAiB,QACnBP,EAAQ,OAAO,KAAK,iCAAiCO,EAAiB,MAAM,6BAAkC7S,EAAU,aAAa,kDAAkD,EAGzL,UAAWlF,KAAOkF,EAAU,iBAC1BA,EAAU,QAAQlF,EAAKwX,EAAQ,aAAaxX,CAAG,CAAC,CAEpD,CAGF,MAAMgY,EAAaP,EAAK,SAAW,CAAA,EACnCpB,EAAS,QAAO,EAAG,mBAAkB,EAAG,OAAOnR,GAAaA,EAAU,aAAa,SAASrC,EAAa,MAAM,CAAC,EAAE,QAAQqC,GAAaA,EAAU,QAAQwS,EAAS7U,EAAa,MAAM,CAAC,EACtL6U,EAAQ,QAAUM,EAAW,IAAIC,GAAa,CAC5C,MAAMnT,EAASuR,EAAS,aAAa4B,EAAU,IAAI,EACnD,OAAIA,EAAU,QAAQnT,EAAO,UAAUmT,EAAU,MAAM,EACnDA,EAAU,KAAOA,EAAU,IAAI,QAAQ,IAAI,IAAM,GACnDnT,EAAO,OAAOmT,EAAU,GAAG,EAEtBnT,CACT,CAAC,EAED,MAAMoT,EAAiBT,EAAK,aAAe,CAAA,EAC3CC,EAAQ,kBAAoBQ,EAAe,IAAI,CAACC,EAAevY,IAAU,CACvE,GAAI,CAAC8X,EAAQ,YAAY9X,CAAK,EAAG,CAC/B,MAAMqY,EAAYlB,EAAQ,KAAK,QAAQoB,EAAc,MAAM,EACrDC,EAAWH,EAAU,IAAMlB,EAAQ,UAAUkB,EAAU,GAAG,EAAIlB,EAAQ,UAAUnU,EAAU,EAC1FkB,EAAaqU,EAAc,YAAc,EAC/CT,EAAQ,YAAY9X,CAAK,EAAIwD,GAAY,OAAOgV,EAAUtU,EAAYqU,EAAc,UAAU,CAChG,CACA,OAAOT,EAAQ,QAAQS,EAAc,MAAM,CAC7C,CAAC,EAGD,MAAME,EAAeZ,EAAK,WAAa,CAAA,EACvCC,EAAQ,UAAYW,EAAa,IAAIC,GAAe,CAClD,MAAMxT,EAAS4S,EAAQ,kBAAkBY,EAAY,UAAU,EACzDvD,EAAWsB,EAAS,eAAeiC,EAAY,KAAMxT,CAAM,EAAE,QAAQwT,EAAY,IAAI,EAM3F,OALIA,EAAY,QAAQvD,EAAS,UAAUuD,EAAY,MAAM,EACzDA,EAAY,aAAe,QAC7BvD,EAAS,cAAcuD,EAAY,UAAU,EAG3CA,EAAY,aAAe,QAI/BvD,EAAS,SAASwD,GAAiBD,EAAaZ,CAAO,CAAC,EACjD3C,CACT,CAAC,EAKD,MAAMyD,EAAYf,EAAK,QAAU,CAAA,EAC3BgB,EAAchB,EAAK,UAAY,CAAA,EACrCpB,EAAS,QAAO,EAAG,mBAAkB,EAAG,OAAOnR,GAAaA,EAAU,aAAa,SAASrC,EAAa,OAAO,CAAC,EAAE,QAAQqC,GAAaA,EAAU,QAAQwS,EAAS7U,EAAa,OAAO,CAAC,EACxL6U,EAAQ,SAAWc,EAAU,IAAIE,GAAY,CAC3C,MAAMhF,EAAU2C,EAAS,cAAcqC,EAAS,IAAI,EAGpD,GADIA,EAAS,QAAQhF,EAAQ,UAAUgF,EAAS,MAAM,EAClDA,EAAS,aAAe,OAAW,CACrC,MAAMP,EAAgBV,EAAK,YAAYiB,EAAS,UAAU,EACpDT,EAAYlB,EAAQ,KAAK,QAAQoB,EAAc,MAAM,EACrDQ,EAAaV,EAAU,IAAMlB,EAAQ,UAAUkB,EAAU,GAAG,EAAIlB,EAAQ,UAAUnU,EAAU,EAC5FkB,GAAaqU,EAAc,YAAc,EACzC/T,GAAa+T,EAAc,WAC3BS,GAAYD,EAAW,MAAM7U,GAAYA,GAAaM,EAAU,EACtEsP,EAAQ,SAASkF,EAAS,CAC5B,MAAWF,EAAS,MAAQ,SAC1BhF,EAAQ,SAASqD,EAAQ,UAAU2B,EAAS,GAAG,CAAC,EAC5CA,EAAS,IAAI,QAAQ,IAAI,IAAM,GACjChF,EAAQ,OAAOgF,EAAS,GAAG,GAG/B,GAAIA,EAAS,WAAa,OACxBhF,EAAQ,YAAYgF,EAAS,QAAQ,UAC5BA,EAAS,IAAK,CACvB,MAAMxT,EAAYC,GAAU,UAAUuT,EAAS,GAAG,EAClDhF,EAAQ,YAAY/O,GAAW,oBAAoBO,CAAS,CAAC,CAC/D,CACA,OAAOwO,CACT,CAAC,EAED2C,EAAS,QAAO,EAAG,mBAAkB,EAAG,OAAOnR,GAAaA,EAAU,aAAa,SAASrC,EAAa,QAAQ,CAAC,EAAE,QAAQqC,GAAaA,EAAU,QAAQwS,EAAS7U,EAAa,QAAQ,CAAC,EAC1L,MAAMgW,EAAepB,EAAK,WAAa,CAAA,EACvCC,EAAQ,UAAYmB,EAAa,IAAIC,GAAe,CAClD,MAAM9D,EAAWqB,EAAS,eAAeyC,EAAY,IAAI,EACrDA,EAAY,QAAQ9D,EAAS,UAAU8D,EAAY,MAAM,EAEzDA,EAAY,YAAc,QAC5B9D,EAAS,aAAa8D,EAAY,SAAS,EAEzCA,EAAY,cAAgB,QAC9B9D,EAAS,eAAe8D,EAAY,WAAW,EAE7CA,EAAY,cAAgB,QAC9B9D,EAAS,eAAe8D,EAAY,WAAW,EAGjD,MAAMC,EAASD,EAAY,sBAAwB,CAAA,EAcnD,GAbIC,EAAO,kBAAoB,QAC7B/D,EAAS,mBAAmB+D,EAAO,eAAe,EAEhDD,EAAY,iBAAmB,QACjC9D,EAAS,kBAAkB8D,EAAY,cAAc,EAEnDC,EAAO,iBAAmB,QAC5B/D,EAAS,kBAAkB+D,EAAO,cAAc,EAE9CA,EAAO,kBAAoB,QAC7B/D,EAAS,mBAAmB+D,EAAO,eAAe,EAGhDA,EAAO,mBAAqB,OAAW,CACzC,MAAM9B,EAAiB8B,EAAO,iBACxBrF,EAAUgE,EAAQ,SAASe,EAAYxB,EAAe,KAAK,EAAE,MAAM,EACzEjC,EAAS,oBAAoBtB,CAAO,EACpCgE,EAAQ,eAAe1C,EAAS,wBAAuB,EAAIiC,CAAc,CAC3E,CACA,GAAI6B,EAAY,kBAAoB,OAAW,CAC7C,MAAM7B,EAAiB6B,EAAY,gBAC7BpF,EAAUgE,EAAQ,SAASe,EAAYxB,EAAe,KAAK,EAAE,MAAM,EACzEjC,EAAS,mBAAmBtB,CAAO,EACnCgE,EAAQ,eAAe1C,EAAS,uBAAsB,EAAIiC,CAAc,CAC1E,CACA,GAAI6B,EAAY,gBAAkB,OAAW,CAC3C,MAAM7B,EAAiB6B,EAAY,cAC7BpF,EAAUgE,EAAQ,SAASe,EAAYxB,EAAe,KAAK,EAAE,MAAM,EACzEjC,EAAS,iBAAiBtB,CAAO,EACjCgE,EAAQ,eAAe1C,EAAS,qBAAoB,EAAIiC,CAAc,EAClE6B,EAAY,cAAc,QAAU,QACtC9D,EAAS,eAAe8D,EAAY,cAAc,KAAK,CAE3D,CACA,GAAIA,EAAY,mBAAqB,OAAW,CAC9C,MAAM7B,EAAiB6B,EAAY,iBAC7BpF,EAAUgE,EAAQ,SAASe,EAAYxB,EAAe,KAAK,EAAE,MAAM,EACzEjC,EAAS,oBAAoBtB,CAAO,EACpCgE,EAAQ,eAAe1C,EAAS,wBAAuB,EAAIiC,CAAc,EACrE6B,EAAY,iBAAiB,WAAa,QAC5C9D,EAAS,qBAAqB8D,EAAY,iBAAiB,QAAQ,CAEvE,CACA,GAAIC,EAAO,2BAA6B,OAAW,CACjD,MAAM9B,EAAiB8B,EAAO,yBACxBrF,EAAUgE,EAAQ,SAASe,EAAYxB,EAAe,KAAK,EAAE,MAAM,EACzEjC,EAAS,4BAA4BtB,CAAO,EAC5CgE,EAAQ,eAAe1C,EAAS,gCAA+B,EAAIiC,CAAc,CACnF,CACA,OAAOjC,CACT,CAAC,EAEDqB,EAAS,QAAO,EAAG,mBAAkB,EAAG,OAAOnR,GAAaA,EAAU,aAAa,SAASrC,EAAa,IAAI,CAAC,EAAE,QAAQqC,GAAaA,EAAU,QAAQwS,EAAS7U,EAAa,IAAI,CAAC,EAClL,MAAMmW,EAAWvB,EAAK,QAAU,CAAA,EAChCpB,EAAS,QAAO,EAAG,mBAAkB,EAAG,OAAOnR,GAAaA,EAAU,aAAa,SAASrC,EAAa,SAAS,CAAC,EAAE,QAAQqC,GAAaA,EAAU,QAAQwS,EAAS7U,EAAa,SAAS,CAAC,EAC5L6U,EAAQ,OAASsB,EAAS,IAAIC,GAAW,CACvC,MAAMvS,EAAO2P,EAAS,WAAW4C,EAAQ,IAAI,EAC7C,OAAIA,EAAQ,QAAQvS,EAAK,UAAUuS,EAAQ,MAAM,EAC7CA,EAAQ,UAAY,QACtBvS,EAAK,WAAWuS,EAAQ,OAAO,GAEXA,EAAQ,YAAc,CAAA,GAC9B,QAAQC,GAAgB,CACpC,MAAMlF,EAAYqC,EAAS,gBAAe,EACtC6C,EAAa,QAAQlF,EAAU,UAAUkF,EAAa,MAAM,EAC5DA,EAAa,WAAa,QAC5BlF,EAAU,YAAY0D,EAAQ,UAAUwB,EAAa,QAAQ,CAAC,EAE5DA,EAAa,OAAS,QACxBlF,EAAU,QAAQkF,EAAa,IAAI,EAErC,SAAW,CAACpE,GAAUlV,EAAK,IAAK,OAAO,QAAQsZ,EAAa,YAAc,CAAA,CAAE,EAC1ElF,EAAU,aAAac,GAAU4C,EAAQ,UAAU9X,EAAK,CAAC,EAEvDsZ,EAAa,UAAY,QAC3BlF,EAAU,WAAW0D,EAAQ,UAAUwB,EAAa,OAAO,CAAC,EAE9D,MAAMC,GAAcF,EAAQ,QAAUA,EAAQ,OAAO,aAAe,CAAA,GACjDC,EAAa,SAAW,CAAA,GAChC,QAAQ,CAACE,GAAWC,KAAgB,CAC7C,MAAMC,GAAaH,GAAYE,EAAW,GAAKA,GAAY,SAAQ,EAC7DjY,GAASiV,EAAS,sBAAsBiD,EAAU,EACxD,SAAW,CAACxE,GAAUyE,EAAa,IAAK,OAAO,QAAQH,EAAS,EAC9DhY,GAAO,aAAa0T,GAAU4C,EAAQ,UAAU6B,EAAa,CAAC,EAEhEvF,EAAU,UAAU5S,EAAM,CAC5B,CAAC,EACDsF,EAAK,aAAasN,CAAS,CAC7B,CAAC,EACMtN,CACT,CAAC,EAED,MAAM8S,EAAa/B,EAAK,SAAW,CAAA,EACnCC,EAAQ,QAAU8B,EAAW,IAAIC,GAAa,CAC5C,MAAM9E,EAAS0B,EAAS,aAAaoD,EAAU,IAAI,EAAE,QAAQA,EAAU,IAAI,EAE3E,GADIA,EAAU,QAAQ9E,EAAO,UAAU8E,EAAU,MAAM,EACnDA,EAAU,OAASvH,GAAO,KAAK,YAAa,CAC9C,MAAMwH,EAAiBD,EAAU,YACjC9E,EAAO,QAAQ+E,EAAe,IAAI,EAClC/E,EAAO,SAAS+E,EAAe,KAAK,EAChCA,EAAe,OAAS,QAC1B/E,EAAO,QAAQ+E,EAAe,IAAI,EAEhCA,EAAe,cAAgB,QACjC/E,EAAO,eAAe+E,EAAe,WAAW,CAEpD,KAAO,CACL,MAAMC,EAAWF,EAAU,aAC3B9E,EAAO,SAASgF,EAAS,KAAK,EAAE,QAAQA,EAAS,IAAI,EAAE,QAAQA,EAAS,IAAI,EAAE,QAAQA,EAAS,IAAI,CACrG,CACA,OAAOhF,CACT,CAAC,EAED,MAAMiF,EAAWnC,EAAK,OAAS,CAAA,EAC/BpB,EAAS,QAAO,EAAG,mBAAkB,EAAG,OAAOnR,GAAaA,EAAU,aAAa,SAASrC,EAAa,IAAI,CAAC,EAAE,QAAQqC,GAAaA,EAAU,QAAQwS,EAAS7U,EAAa,IAAI,CAAC,EAClL6U,EAAQ,MAAQkC,EAAS,IAAIC,GAAW,CACtC,MAAMpZ,EAAO4V,EAAS,WAAWwD,EAAQ,IAAI,EAW7C,GAVIA,EAAQ,QAAQpZ,EAAK,UAAUoZ,EAAQ,MAAM,EAC7CA,EAAQ,cAAgB,QAC1BpZ,EAAK,eAAeoZ,EAAQ,WAAW,EAErCA,EAAQ,WAAa,QACvBpZ,EAAK,YAAYoZ,EAAQ,QAAQ,EAE/BA,EAAQ,QAAU,QACpBpZ,EAAK,SAASoZ,EAAQ,KAAK,EAEzBA,EAAQ,SAAW,OAAW,CAChC,MAAM1F,EAAc,CAAC,EAAG,EAAG,CAAC,EACtBC,EAAW,CAAC,EAAG,EAAG,EAAG,CAAC,EACtBR,EAAQ,CAAC,EAAG,EAAG,CAAC,EACtB1H,GAAU,UAAU2N,EAAQ,OAAQ1F,EAAaC,EAAUR,CAAK,EAChEnT,EAAK,eAAe0T,CAAW,EAC/B1T,EAAK,YAAY2T,CAAQ,EACzB3T,EAAK,SAASmT,CAAK,CACrB,CACA,OAAIiG,EAAQ,UAAY,QACtBpZ,EAAK,WAAWoZ,EAAQ,OAAO,EAG1BpZ,CACT,CAAC,EAED,MAAMqZ,EAAWrC,EAAK,OAAS,CAAA,EAC/BC,EAAQ,MAAQoC,EAAS,IAAIC,GAAW,CACtC,MAAMnF,EAAOyB,EAAS,WAAW0D,EAAQ,IAAI,EACzCA,EAAQ,QAAQnF,EAAK,UAAUmF,EAAQ,MAAM,EAC7CA,EAAQ,sBAAwB,QAClCnF,EAAK,uBAAuB8C,EAAQ,UAAUqC,EAAQ,mBAAmB,CAAC,EAExEA,EAAQ,WAAa,QACvBnF,EAAK,YAAY8C,EAAQ,MAAMqC,EAAQ,QAAQ,CAAC,EAElD,UAAWC,KAAaD,EAAQ,OAC9BnF,EAAK,SAAS8C,EAAQ,MAAMsC,CAAS,CAAC,EAExC,OAAOpF,CACT,CAAC,EAEDgF,EAAS,IAAI,CAACC,EAASG,IAAc,CACnC,MAAMvZ,EAAOiX,EAAQ,MAAMsC,CAAS,GACnBH,EAAQ,UAAY,CAAA,GAC5B,QAAQI,GAAcxZ,EAAK,SAASiX,EAAQ,MAAMuC,CAAU,CAAC,CAAC,EACnEJ,EAAQ,OAAS,QAAWpZ,EAAK,QAAQiX,EAAQ,OAAOmC,EAAQ,IAAI,CAAC,EACrEA,EAAQ,SAAW,QAAWpZ,EAAK,UAAUiX,EAAQ,QAAQmC,EAAQ,MAAM,CAAC,EAC5EA,EAAQ,OAAS,QAAWpZ,EAAK,QAAQiX,EAAQ,MAAMmC,EAAQ,IAAI,CAAC,CAC1E,CAAC,EAED,MAAMK,EAAgBzC,EAAK,YAAc,CAAA,EACzCC,EAAQ,WAAawC,EAAc,IAAIC,GAAgB,CACrD,MAAMC,EAAY/D,EAAS,gBAAgB8D,EAAa,IAAI,EACxDA,EAAa,QAAQC,EAAU,UAAUD,EAAa,MAAM,EAEhE,MAAME,GADcF,EAAa,UAAY,CAAA,GAChB,IAAIhD,IAAc,CAC7C,MAAM1F,GAAU4E,EAAS,yBAAyB,SAASqB,EAAQ,UAAUP,GAAW,KAAK,CAAC,EAAE,UAAUO,EAAQ,UAAUP,GAAW,MAAM,CAAC,EAAE,iBAAiBA,GAAW,eAAiBtF,GAAiB,cAAc,MAAM,EAClO,OAAIsF,GAAW,QAAQ1F,GAAQ,UAAU0F,GAAW,MAAM,EAC1DiD,EAAU,WAAW3I,EAAO,EACrBA,EACT,CAAC,EAED,OADiB0I,EAAa,UAAY,CAAA,GACjC,QAAQG,IAAc,CAC7B,MAAM9I,GAAU6E,EAAS,uBAAsB,EAAG,WAAWgE,EAASC,GAAW,OAAO,CAAC,EAAE,cAAcA,GAAW,OAAO,IAAI,EAC3HA,GAAW,OAAO,OAAS,QAAW9I,GAAQ,cAAckG,EAAQ,MAAM4C,GAAW,OAAO,IAAI,CAAC,EACjGA,GAAW,QAAQ9I,GAAQ,UAAU8I,GAAW,MAAM,EAC1DF,EAAU,WAAW5I,EAAO,CAC9B,CAAC,EACM4I,CACT,CAAC,EAED,MAAMG,EAAY9C,EAAK,QAAU,CAAA,EACjC,OAAApB,EAAS,QAAO,EAAG,mBAAkB,EAAG,OAAOnR,GAAaA,EAAU,aAAa,SAASrC,EAAa,KAAK,CAAC,EAAE,QAAQqC,GAAaA,EAAU,QAAQwS,EAAS7U,EAAa,KAAK,CAAC,EACpL6U,EAAQ,OAAS6C,EAAU,IAAIC,GAAY,CACzC,MAAMC,EAAQpE,EAAS,YAAYmE,EAAS,IAAI,EAChD,OAAIA,EAAS,QAAQC,EAAM,UAAUD,EAAS,MAAM,GACnCA,EAAS,OAAS,CAAA,GAC1B,IAAIR,GAAatC,EAAQ,MAAMsC,CAAS,CAAC,EAAE,QAAQvZ,GAAQga,EAAM,SAASha,CAAI,CAAC,EACjFga,CACT,CAAC,EACGhD,EAAK,QAAU,QACjBpB,EAAS,QAAO,EAAG,gBAAgBqB,EAAQ,OAAOD,EAAK,KAAK,CAAC,EAG/DpB,EAAS,UAAU,qBAAqB,QAAQnR,GAAaA,EAAU,KAAKwS,CAAO,CAAC,EAKpFW,EAAa,QAAQ,CAACC,EAAa1Y,IAAU,CAC3C,MAAMmV,EAAW2C,EAAQ,UAAU9X,CAAK,EAClC8a,EAAkB,CAAC,CAACpC,EAAY,OAChCqC,EAAe,CAACrC,EAAY,YAAc,CAACvD,EAAS,SAAQ,GAC9D2F,GAAmBC,IACrB5F,EAAS,UAAU,EAAI,EAAE,SAAS6F,GAAetC,EAAaZ,CAAO,CAAC,CAE1E,CAAC,EACMrB,CACT,CACA,OAAO,SAASU,EAASS,EAAS,CAChC,MAAMC,EAAOV,EAAQ,KACrB,GAAIU,EAAK,MAAM,UAAY,MACzB,MAAM,IAAI,MAAM,8BAA8BA,EAAK,MAAM,OAAO,IAAI,EAEtE,GAAIA,EAAK,oBACP,UAAW9B,KAAiB8B,EAAK,mBAC/B,GAAI,CAACD,EAAQ,WAAW,KAAKtS,GAAaA,EAAU,iBAAmByQ,CAAa,EAClF,MAAM,IAAI,MAAM,gCAAgCA,CAAa,IAAI,EAIvE,GAAI8B,EAAK,eACP,UAAW9B,KAAiB8B,EAAK,eAC1BD,EAAQ,WAAW,KAAKtS,GAAaA,EAAU,iBAAmByQ,CAAa,GAClF6B,EAAQ,OAAO,KAAK,gCAAgC7B,CAAa,IAAI,CAI7E,CACF,CAKA,SAASkF,GAAoBvC,EAAaZ,EAAS,CACjD,MAAMX,EAAUW,EAAQ,QAClBoD,EAAapD,EAAQ,YAAYY,EAAY,UAAU,EACvDH,EAAgBpB,EAAQ,KAAK,YAAYuB,EAAY,UAAU,EAC/DyC,EAAa5X,GAA0BmV,EAAY,aAAa,EAChEnH,EAAcF,GAAS,eAAeqH,EAAY,IAAI,EACtD0C,EAAgBD,EAAW,kBAC3BE,EAAqB3C,EAAY,YAAc,EAC/CxY,EAAQ,IAAIib,EAAWzC,EAAY,MAAQnH,CAAW,EACtD9M,EAAO,IAAI,SAASyW,EAAW,OAAQA,EAAW,WAAYA,EAAW,UAAU,EACnFI,EAAa/C,EAAc,WACjC,QAAS9W,EAAI,EAAGA,EAAIiX,EAAY,MAAOjX,IACrC,QAAS+P,EAAI,EAAGA,EAAID,EAAaC,IAAK,CACpC,MAAMtN,EAAamX,EAAqB5Z,EAAI6Z,EAAa9J,EAAI4J,EAC7D,IAAI9Y,EACJ,OAAQoW,EAAY,cAAa,CAC/B,KAAKrH,GAAS,cAAc,MAC1B/O,EAAQmC,EAAK,WAAWP,EAAY,EAAI,EACxC,MACF,KAAKmN,GAAS,cAAc,aAC1B/O,EAAQmC,EAAK,UAAUP,EAAY,EAAI,EACvC,MACF,KAAKmN,GAAS,cAAc,eAC1B/O,EAAQmC,EAAK,UAAUP,EAAY,EAAI,EACvC,MACF,KAAKmN,GAAS,cAAc,cAC1B/O,EAAQmC,EAAK,SAASP,CAAU,EAChC,MACF,KAAKmN,GAAS,cAAc,MAC1B/O,EAAQmC,EAAK,SAASP,EAAY,EAAI,EACtC,MACF,KAAKmN,GAAS,cAAc,KAC1B/O,EAAQmC,EAAK,QAAQP,CAAU,EAC/B,MACF,QACE,MAAM,IAAI,MAAM,6BAA6BwU,EAAY,aAAa,IAAI,CACpF,CACMxY,EAAMuB,EAAI8P,EAAcC,CAAC,EAAIlP,CAC/B,CAEF,OAAOpC,CACT,CAKA,SAASyY,GAAiBD,EAAaZ,EAAS,CAC9C,MAAMX,EAAUW,EAAQ,QAClBoD,EAAapD,EAAQ,YAAYY,EAAY,UAAU,EACvDH,EAAgBpB,EAAQ,KAAK,YAAYuB,EAAY,UAAU,EAC/DyC,EAAa5X,GAA0BmV,EAAY,aAAa,EAChEnH,EAAcF,GAAS,eAAeqH,EAAY,IAAI,EACtD0C,EAAgBD,EAAW,kBAC3BI,EAAgBhK,EAAc6J,EAEpC,GAAI7C,EAAc,aAAe,QAAaA,EAAc,aAAegD,EACzE,OAAON,GAAoBvC,EAAaZ,CAAO,EAEjD,MAAM5T,EAAagX,EAAW,YAAcxC,EAAY,YAAc,GAChElU,EAAakU,EAAY,MAAQnH,EAAc6J,EAGrD,OAAO,IAAID,EAAWD,EAAW,OAAO,MAAMhX,EAAYA,EAAaM,CAAU,CAAC,CACpF,CAKA,SAASwW,GAAetC,EAAaZ,EAAS,CAC5C,MAAMqD,EAAa5X,GAA0BmV,EAAY,aAAa,EAChEnH,EAAcF,GAAS,eAAeqH,EAAY,IAAI,EAC5D,IAAIxY,EACAwY,EAAY,aAAe,OAC7BxY,EAAQyY,GAAiBD,EAAaZ,CAAO,EAE7C5X,EAAQ,IAAIib,EAAWzC,EAAY,MAAQnH,CAAW,EAExD,MAAMiK,EAAY9C,EAAY,OAC9B,GAAI,CAAC8C,EAAW,OAAOtb,EACvB,MAAMqG,EAAQiV,EAAU,MAClBC,EAAala,GAAS,CAAA,EAAImX,EAAa8C,EAAU,QAAS,CAC9D,MAAAjV,EACA,KAAM,QACV,CAAG,EACKmV,EAAYna,GAAS,CAAA,EAAImX,EAAa8C,EAAU,OAAQ,CAC5D,MAAAjV,CACJ,CAAG,EACKc,EAAUsR,GAAiB8C,EAAY3D,CAAO,EAC9C6D,EAAShD,GAAiB+C,EAAW5D,CAAO,EAElD,QAASrW,EAAI,EAAGA,EAAIga,EAAW,MAAOha,IACpC,QAAS+P,EAAI,EAAGA,EAAID,EAAaC,IAC/BtR,EAAMmH,EAAQ5F,CAAC,EAAI8P,EAAcC,CAAC,EAAImK,EAAOla,EAAI8P,EAAcC,CAAC,EAGpE,OAAOtR,CACT,CAEA,IAAI0b,IACH,SAAUA,EAAkB,CAC3BA,EAAiBA,EAAiB,aAAkB,KAAK,EAAI,eAC7DA,EAAiBA,EAAiB,qBAA0B,KAAK,EAAI,sBACvE,GAAGA,KAAqBA,GAAmB,CAAA,EAAG,EAO9C,MAAMC,EAAc,CAClB,YAAYC,EAAM3E,EAASS,EAAS,CAClC,KAAK,KAAO,OACZ,KAAK,QAAU,OACf,KAAK,QAAU,OACf,KAAK,iBAAmB,IAAI,IAC5B,KAAK,kBAAoB,IAAI,IAC7B,KAAK,eAAiB,IAAI,IAC1B,KAAK,eAAiB,IAAI,IAC1B,KAAK,aAAe,IAAI,IACxB,KAAK,iBAAmB,IAAI,IAC5B,KAAK,aAAe,IAAI,IACxB,KAAK,aAAe,IAAI,IACxB,KAAK,cAAgB,IAAI,IACzB,KAAK,mBAAqB,IAAI,IAE9B,KAAK,kBAAoB,IAAI,IAC7B,KAAK,mBAAqB,IAAI,IAE9B,KAAK,cAAgB,IAAI,IACzB,KAAK,iBAAmB,CAAA,EACxB,KAAK,iBAAmB,IAAI,IAC5B,KAAK,yBAA2B,IAAI,IACpC,KAAK,cAAgB,CAAA,EACrB,KAAK,mBAAqB,OAC1B,KAAK,kBAAoB,OACzB,KAAK,OAAS,OACd,KAAK,kBAAoB,IAAI,IAC7B,KAAK,6BAA+B,IAAI,IAAI,CAAC,cAAc,CAAC,EAC5D,KAAK,gBAAkB,IAAI,IAC3B,KAAK,KAAOkE,EACZ,KAAK,QAAU3E,EACf,KAAK,QAAUS,EACf,MAAMmE,EAAOD,EAAK,QAAO,EACnBE,EAAaD,EAAK,YAAW,EAAG,OAChCE,EAAYF,EAAK,aAAY,EAAG,OACtC,KAAK,mBAAqB,IAAIG,GAAmBF,EAAa,EAAG,IAAMpE,EAAQ,UAAY,QAAQ,EACnG,KAAK,kBAAoB,IAAIsE,GAAmBD,EAAY,EAAGnI,GAAWqI,GAAQL,EAAMhI,CAAO,GAAK8D,EAAQ,UAAY,SAAS,EACjI,KAAK,OAASkE,EAAK,UAAS,CAC9B,CAKA,qBAAqBhI,EAASsD,EAAa,CACzC,MAAMG,EAAa,CACjB,UAAWH,EAAY,aAAY,GAAM,OACzC,UAAWA,EAAY,aAAY,GAAM,OACzC,MAAOA,EAAY,SAAQ,EAC3B,MAAOA,EAAY,SAAQ,CACjC,EACUgF,EAAa,KAAK,UAAU7E,CAAU,EACvC,KAAK,mBAAmB,IAAI6E,CAAU,IACzC,KAAK,mBAAmB,IAAIA,EAAY,KAAK,QAAQ,KAAK,SAAS,MAAM,EACzE,KAAK,QAAQ,KAAK,SAAS,KAAK7E,CAAU,GAE5C,MAAMD,EAAa,CACjB,OAAQ,KAAK,cAAc,IAAIxD,CAAO,EACtC,QAAS,KAAK,mBAAmB,IAAIsI,CAAU,CACrD,EACUC,EAAa,KAAK,UAAU/E,CAAU,EACvC,KAAK,mBAAmB,IAAI+E,CAAU,IACzC,KAAK,mBAAmB,IAAIA,EAAY,KAAK,QAAQ,KAAK,SAAS,MAAM,EACzE,KAAK,QAAQ,KAAK,SAAS,KAAK/E,CAAU,GAE5C,MAAMD,EAAiB,CACrB,MAAO,KAAK,mBAAmB,IAAIgF,CAAU,CACnD,EACI,OAAIjF,EAAY,YAAW,IAAO,IAChCC,EAAe,SAAWD,EAAY,YAAW,GAE/C,OAAO,KAAKA,EAAY,UAAS,CAAE,EAAE,OAAS,IAChDC,EAAe,OAASD,EAAY,UAAS,GAE/C,KAAK,kBAAkB,IAAIA,EAAaC,CAAc,EAC/CA,CACT,CACA,kBAAkBV,EAAU,CAC1B,MAAM2F,EAAM,CAAA,EACZ,OAAI3F,EAAS,YACX2F,EAAI,KAAO3F,EAAS,QAAO,GAEzB,OAAO,KAAKA,EAAS,UAAS,CAAE,EAAE,OAAS,IAC7C2F,EAAI,OAAS3F,EAAS,UAAS,GAE1B2F,CACT,CACA,kBAAkBnH,EAAU,CAC1B,MAAMuD,EAAc,KAAK,kBAAkBvD,CAAQ,EACnD,OAAAuD,EAAY,KAAOvD,EAAS,QAAO,EACnCuD,EAAY,cAAgBvD,EAAS,iBAAgB,EACrDuD,EAAY,MAAQvD,EAAS,SAAQ,EACjB,KAAK,KAAK,SAAQ,EAAG,gBAAgBA,CAAQ,EAAE,KAAKpU,GAAQA,EAAK,YAAc,cAAgBA,EAAK,cAAa,EAAG,MAAQ,YAAcA,EAAK,QAAO,IAAO,OAAO,IAEtL2X,EAAY,IAAMvD,EAAS,OAAO,CAAA,CAAE,EAAE,IAAI,KAAK,MAAM,EACrDuD,EAAY,IAAMvD,EAAS,OAAO,CAAA,CAAE,EAAE,IAAI,KAAK,MAAM,GAEnDA,EAAS,kBACXuD,EAAY,WAAavD,EAAS,cAAa,GAE1CuD,CACT,CACA,gBAAgBI,EAAUlV,EAAMkQ,EAAS,CACvC,GAAI,KAAK,QAAQ,SAAWxQ,GAAO,IACjC,KAAK,iBAAiB,KAAKM,CAAI,EAC/BkV,EAAS,WAAa,KAAK,QAAQ,KAAK,YAAY,OACpD,KAAK,QAAQ,KAAK,YAAY,KAAK,CACjC,OAAQ,EACR,WAAY,GAEZ,WAAYlV,EAAK,UACzB,CAAO,MACI,CACL,MAAM0B,EAAYP,GAAW,oBAAoB+O,EAAQ,YAAW,CAAE,EACtEgF,EAAS,IAAM,KAAK,kBAAkB,UAAUhF,EAASxO,CAAS,EAClE,KAAK,kBAAkBwT,EAAS,IAAKlV,EAAM,EAAK,CAClD,CACF,CACA,kBAAkB4B,EAAK5B,EAAM2Y,EAAiB,CAC5C,MAAMC,EAAY,KAAK,QAAQ,UAE/B,GAAI,EAAEhX,KAAOgX,GAAY,CACvBA,EAAUhX,CAAG,EAAI5B,EACjB,MACF,CACA,GAAIA,IAAS4Y,EAAUhX,CAAG,EAAG,CAC3B,KAAK,OAAO,KAAK,4BAA4BA,CAAG,IAAI,EACpD,MACF,CACA,MAAMiX,EAAkB,iBAAiBjX,CAAG,wCAC5C,GAAI,CAAC+W,EAAiB,CACpB,KAAK,OAAO,KAAKE,CAAe,EAChC,MACF,CACA,MAAM,IAAI,MAAMA,CAAe,CACjC,CAOA,iBAAiBtH,EAAU,CACzB,MAAMuH,EAAc,KAAK,kBAAkB,IAAIvH,CAAQ,EACvD,GAAIuH,EAAa,OAAOA,EACxB,GAAIvH,EAAS,YAAa,OAAOhS,GAAkB,OACnD,UAAWpC,KAAQ,KAAK,KAAK,WAAW,gBAAgBoU,CAAQ,EAAG,CACjE,KAAM,CACJ,MAAAwH,CACR,EAAU5b,EAAK,cAAa,EACtB,GAAI4b,EAAO,OAAOA,EACd5b,EAAK,UAAS,EAAG,eAAiBkC,EAAa,MACjD,KAAK,OAAO,KAAK,wCAAwClC,EAAK,QAAO,CAAE,IAAI,CAE/E,CAEA,OAAOoC,GAAkB,KAC3B,CAOA,wBAAwBgS,EAAUwH,EAAO,CACvC,MAAMC,EAAY,KAAK,kBAAkB,IAAIzH,CAAQ,EACrD,GAAIyH,GAAaA,IAAcD,EAC7B,MAAM,IAAI,MAAM,wBAAwBC,CAAS,0BAA0BD,CAAK,IAAI,EAEtF,YAAK,kBAAkB,IAAIxH,EAAUwH,CAAK,EACnC,IACT,CACF,CAEAd,GAAc,iBAAmBD,GAMjCC,GAAc,gBAAkB1Y,GAEhC0Y,GAAc,gBAAkB,CAC9B,CAAC1Y,GAAkB,YAAY,EAAGyY,GAAiB,aACnD,CAACzY,GAAkB,oBAAoB,EAAGyY,GAAiB,oBAC7D,EACA,MAAMM,EAAmB,CACvB,YAAYW,EAAUC,EAAU,CAC9B,KAAK,SAAW,OAChB,KAAK,SAAW,OAChB,KAAK,QAAU,CAAA,EACf,KAAK,SAAWD,EAChB,KAAK,SAAWC,CAClB,CACA,UAAUC,EAAQzX,EAAW,CAC3B,GAAIyX,EAAO,SACT,OAAOA,EAAO,OAAM,EACf,GAAK,KAAK,SAEV,CACL,MAAMD,EAAW,KAAK,SAASC,CAAM,EACrC,YAAK,QAAQD,CAAQ,EAAI,KAAK,QAAQA,CAAQ,GAAK,EAC5C,GAAGA,CAAQ,IAAI,KAAK,QAAQA,CAAQ,GAAG,IAAIxX,CAAS,EAC7D,KALE,OAAO,GAAG,KAAK,SAASyX,CAAM,CAAC,IAAIzX,CAAS,EAMhD,CACF,CAEA,SAAS6W,GAAQ1F,EAAU3C,EAAS,CAClC,MAAM/S,EAAO0V,EAAS,SAAQ,EAAG,gBAAgB3C,CAAO,EAAE,KAAK/S,GAAQA,EAAK,UAAS,IAAO0V,EAAS,QAAO,CAAE,EAC9G,OAAO1V,EAAOA,EAAK,QAAO,EAAG,QAAQ,YAAa,EAAE,EAAI,EAC1D,CAEA,KAAM,CACJ,gBAAAqC,EACF,EAAIyY,GACE,CACJ,aAAAmB,GACA,eAAAC,GACA,cAAAC,EACF,EAAI7L,GAAS,cACP8L,GAA2B,IAAI,IAAI,CAACla,EAAa,SAAUA,EAAa,OAAQA,EAAa,SAAUA,EAAa,IAAI,CAAC,EAK/H,MAAMma,EAAW,CACf,OAAO,MAAMC,EAAKzF,EAAS,CACzB,MAAMxV,EAAQib,EAAI,SAAQ,EACpBtB,EAAOsB,EAAI,QAAO,EAClBxF,EAAO,CACX,MAAOtW,GAAS,CACd,UAAW,kBAAkBwB,EAAO,EAC5C,EAASgZ,EAAK,UAAU,EAClB,OAAQxa,GAAS,GAAIwa,EAAK,UAAS,CAAE,CAC3C,EACU5E,EAAU,CACd,KAAAU,EACA,UAAW,CAAA,CACjB,EACUC,EAAU,IAAI+D,GAAcwB,EAAKlG,EAASS,CAAO,EACjDzB,EAASyB,EAAQ,QAAUrP,GAAO,iBAKlC+U,EAAuB,IAAI,IAAI1F,EAAQ,WAAW,IAAIrB,GAAOA,EAAI,cAAc,CAAC,EAChF0B,EAAiBoF,EAAI,UAAU,qBAAqB,OAAO9G,GAAO+G,EAAqB,IAAI/G,EAAI,aAAa,CAAC,EAAE,KAAK,CAACpV,EAAGC,IAAMD,EAAE,cAAgBC,EAAE,cAAgB,EAAI,EAAE,EACxK8W,EAAqBmF,EAAI,UAAU,yBAAyB,OAAO9G,GAAO+G,EAAqB,IAAI/G,EAAI,aAAa,CAAC,EAAE,KAAK,CAACpV,EAAGC,IAAMD,EAAE,cAAgBC,EAAE,cAAgB,EAAI,EAAE,EAClL6W,EAAe,OAASoF,EAAI,QAAO,EAAG,mBAAkB,EAAG,QAC7DlH,EAAO,KAAK,uEAAuE,EAErF,UAAW7Q,KAAa2S,EAAgB,CAEtC,MAAME,EAAmB7S,EAAU,cAAc,OAAO1F,GAAQ,CAACud,GAAyB,IAAIvd,CAAI,CAAC,EAC/FuY,EAAiB,QACnBhC,EAAO,KAAK,kCAAkCgC,EAAiB,KAAI,CAAE,6BAAkC7S,EAAU,aAAa,kDAAkD,EAGlL,UAAWlF,KAAOkF,EAAU,kBAC1BA,EAAU,QAAQlF,EAAKwX,EAAQ,aAAaxX,CAAG,CAAC,CAEpD,CAUA,SAASmd,EAAgBC,EAAWC,EAAaC,EAAkBC,EAAkB,CACnF,MAAMC,EAAU,CAAA,EAChB,IAAIpZ,EAAa,EAEjB,UAAW2Q,KAAYqI,EAAW,CAChC,MAAM9E,EAAcZ,EAAQ,kBAAkB3C,CAAQ,EACtDuD,EAAY,WAAab,EAAK,YAAY,OAC1C,MAAMgG,EAAgB1I,EAAS,SAAQ,EACjCvR,GAAOJ,GAAY,IAAIA,GAAY,OAAOqa,CAAa,CAAC,EAC9DnF,EAAY,WAAalU,EACzBA,GAAcZ,GAAK,WACnBga,EAAQ,KAAKha,EAAI,EACjBkU,EAAQ,iBAAiB,IAAI3C,EAAU0C,EAAK,UAAU,MAAM,EAC5DA,EAAK,UAAU,KAAKa,CAAW,CACjC,CAEA,MAAMoF,EAAiBta,GAAY,OAAOoa,CAAO,EAC3CrF,EAAgB,CACpB,OAAQkF,EACR,WAAYC,EACZ,WAAYI,EAAe,UACnC,EACM,OAAIH,IAAkBpF,EAAc,OAASoF,GAC7C9F,EAAK,YAAY,KAAKU,CAAa,EAC5B,CACL,QAAAqF,EACA,WAAApZ,CACR,CACI,CAaA,SAASuZ,EAAoBP,EAAWC,EAAaC,EAAkB,CACrE,MAAMM,EAAcR,EAAU,CAAC,EAAE,SAAQ,EACzC,IAAIlC,EAAa,EAEjB,UAAWnG,KAAYqI,EAAW,CAChC,MAAM9E,EAAcZ,EAAQ,kBAAkB3C,CAAQ,EACtDuD,EAAY,WAAab,EAAK,YAAY,OAC1Ca,EAAY,WAAa4C,EACzB,MAAM/J,GAAc4D,EAAS,eAAc,EACrCiG,GAAgBjG,EAAS,iBAAgB,EAC/CmG,GAAc9X,GAAY,UAAU+N,GAAc6J,EAAa,EAC/DtD,EAAQ,iBAAiB,IAAI3C,EAAU0C,EAAK,UAAU,MAAM,EAC5DA,EAAK,UAAU,KAAKa,CAAW,CACjC,CAEA,MAAMlU,EAAawZ,EAAc1C,EAC3BpW,EAAS,IAAI,YAAYV,CAAU,EACnCC,EAAO,IAAI,SAASS,CAAM,EAEhC,QAASzD,EAAI,EAAGA,EAAIuc,EAAavc,IAAK,CACpC,IAAIwc,EAAmB,EACvB,UAAW9I,MAAYqI,EAAW,CAChC,MAAMjM,GAAc4D,GAAS,eAAc,EACrCiG,GAAgBjG,GAAS,iBAAgB,EACzCzI,GAAgByI,GAAS,iBAAgB,EACzCjV,GAAQiV,GAAS,SAAQ,EAC/B,QAAS3D,GAAI,EAAGA,GAAID,GAAaC,KAAK,CACpC,MAAM0M,GAAiBzc,EAAI6Z,EAAa2C,EAAmBzM,GAAI4J,GACzD9Y,GAAQpC,GAAMuB,EAAI8P,GAAcC,EAAC,EACvC,OAAQ9E,GAAa,CACnB,KAAK2E,GAAS,cAAc,MAC1B5M,EAAK,WAAWyZ,GAAgB5b,GAAO,EAAI,EAC3C,MACF,KAAK+O,GAAS,cAAc,KAC1B5M,EAAK,QAAQyZ,GAAgB5b,EAAK,EAClC,MACF,KAAK+O,GAAS,cAAc,MAC1B5M,EAAK,SAASyZ,GAAgB5b,GAAO,EAAI,EACzC,MACF,KAAK+O,GAAS,cAAc,cAC1B5M,EAAK,SAASyZ,GAAgB5b,EAAK,EACnC,MACF,KAAK+O,GAAS,cAAc,eAC1B5M,EAAK,UAAUyZ,GAAgB5b,GAAO,EAAI,EAC1C,MACF,KAAK+O,GAAS,cAAc,aAC1B5M,EAAK,UAAUyZ,GAAgB5b,GAAO,EAAI,EAC1C,MACF,QACE,MAAM,IAAI,MAAM,8BAAgCoK,EAAa,CAC7E,CACU,CACAuR,GAAoBza,GAAY,UAAU+N,GAAc6J,EAAa,CACvE,CACF,CAEA,MAAM7C,EAAgB,CACpB,OAAQkF,EACR,WAAYC,EACZ,WAAYlZ,EACZ,WAAY8W,EACZ,OAAQO,GAAc,iBAAiB,YAC/C,EACM,OAAAhE,EAAK,YAAY,KAAKU,CAAa,EAC5B,CACL,WAAA/T,EACA,QAAS,CAAC,IAAI,WAAWU,CAAM,CAAC,CACxC,CACI,CASA,SAASiZ,EAAsBX,EAAWC,EAAaC,EAAkB,CACvE,MAAME,EAAU,CAAA,EAChB,IAAIpZ,EAAa,EACjB,MAAM4Z,EAAa,IAAI,IACvB,IAAIC,EAAW,KACXC,EAAoB,GAExB,UAAWnJ,MAAYqI,EAAW,CAChC,MAAM9E,GAAcZ,EAAQ,kBAAkB3C,EAAQ,EACtD0C,EAAK,UAAU,KAAKa,EAAW,EAC/BZ,EAAQ,iBAAiB,IAAI3C,GAAU0C,EAAK,UAAU,OAAS,CAAC,EAChE,MAAMxQ,GAAU,CAAA,EACVsU,GAAS,CAAA,EACT4C,GAAK,CAAA,EACL1W,GAAO,IAAI,MAAMsN,GAAS,gBAAgB,EAAE,KAAK,CAAC,EACxD,QAAS1T,GAAI,EAAG+F,EAAK2N,GAAS,SAAQ,EAAI1T,GAAI+F,EAAI/F,KAEhD,GADA0T,GAAS,WAAW1T,GAAG8c,EAAE,EACrB,CAAAjS,GAAU,GAAGiS,GAAI1W,GAAM,CAAC,EAC5B,CAAAwW,EAAW,KAAK,IAAI5c,GAAG4c,CAAQ,EAC/BhX,GAAQ,KAAK5F,EAAC,EACd,QAAS+P,GAAI,EAAGA,GAAI+M,GAAG,OAAQ/M,KAAKmK,GAAO,KAAK4C,GAAG/M,EAAC,CAAC,EAEvD,MAAMjL,GAAQc,GAAQ,OAChBzD,GAAO,CACX,YAAA8U,GACA,MAAAnS,EACV,EAEQ,GADA6X,EAAW,IAAIjJ,GAAUvR,EAAI,EACzB2C,KAAU,EAAG,SACbA,GAAQ4O,GAAS,SAAQ,EAAK,IAChCmJ,EAAoB,IAEtB,MAAME,GAAajb,GAA0B4R,GAAS,iBAAgB,CAAE,EACxEvR,GAAK,QAAUyD,GACfzD,GAAK,OAAS,IAAI4a,GAAW7C,EAAM,CACrC,CAEA,GAAI,CAAC,OAAO,SAAS0C,CAAQ,EAC3B,MAAO,CACL,QAAAT,EACA,WAAApZ,CACV,EAEU8Z,GACFnI,EAAO,KAAK,kFAAkF,EAGhG,MAAMsI,EAAaJ,EAAW,IAAM,WAAaA,EAAW,MAAQ,YAAc,YAC5EK,EAAqBL,EAAW,IAAMnB,GAAgBmB,EAAW,MAAQpB,GAAiBD,GAC1F2B,EAAuB,CAC3B,OAAQlB,EACR,WAAYC,EAAmBlZ,EAC/B,WAAY,CACpB,EACM,UAAW2Q,MAAYqI,EAAW,CAChC,MAAM5Z,GAAOwa,EAAW,IAAIjJ,EAAQ,EACpC,GAAIvR,GAAK,QAAU,EAAG,SACtBA,GAAK,kBAAoB+a,EAAqB,WAC9C,MAAMzZ,GAAS1B,GAAY,IAAIA,GAAY,OAAO,IAAIib,EAAW7a,GAAK,OAAO,CAAC,CAAC,EAC/Ega,EAAQ,KAAK1Y,EAAM,EACnBV,GAAcU,GAAO,WACrByZ,EAAqB,YAAczZ,GAAO,UAC5C,CACA2S,EAAK,YAAY,KAAK8G,CAAoB,EAC1C,MAAMC,GAAyB/G,EAAK,YAAY,OAAS,EAEnDgH,GAAsB,CAC1B,OAAQpB,EACR,WAAYC,EAAmBlZ,EAC/B,WAAY,CACpB,EACM,UAAW2Q,MAAYqI,EAAW,CAChC,MAAM5Z,GAAOwa,EAAW,IAAIjJ,EAAQ,EACpC,GAAIvR,GAAK,QAAU,EAAG,SACtBA,GAAK,iBAAmBib,GAAoB,WAC5C,MAAM3Z,GAAS1B,GAAY,IAAIA,GAAY,OAAOI,GAAK,MAAM,CAAC,EAC9Dga,EAAQ,KAAK1Y,EAAM,EACnBV,GAAcU,GAAO,WACrB2Z,GAAoB,YAAc3Z,GAAO,UAC3C,CACA2S,EAAK,YAAY,KAAKgH,EAAmB,EACzC,MAAMC,GAAwBjH,EAAK,YAAY,OAAS,EAExD,UAAW1C,MAAYqI,EAAW,CAChC,MAAM5Z,GAAOwa,EAAW,IAAIjJ,EAAQ,EAChCvR,GAAK,QAAU,IACnBA,GAAK,YAAY,OAAS,CACxB,MAAOA,GAAK,MACZ,QAAS,CACP,WAAYgb,GACZ,WAAYhb,GAAK,kBACjB,cAAe8a,CAC3B,EACU,OAAQ,CACN,WAAYI,GACZ,WAAYlb,GAAK,gBAC7B,CACA,EACM,CACA,MAAO,CACL,QAAAga,EACA,WAAApZ,CACR,CACI,CA+CA,GA9CAqT,EAAK,UAAY,CAAA,EACjBA,EAAK,YAAc,CAAA,EAKnBA,EAAK,SAAW,CAAA,EAChBA,EAAK,SAAW,CAAA,EAChBA,EAAK,OAASkE,EAAK,aAAY,EAAG,IAAI,CAACjI,EAASiL,IAAiB,CAC/D,MAAMjG,EAAWhB,EAAQ,kBAAkBhE,CAAO,EAC9CA,EAAQ,gBACVgF,EAAS,SAAWhF,EAAQ,YAAW,GAEzC,MAAM+B,EAAQ/B,EAAQ,SAAQ,EAC9B,OAAI+B,GACFiC,EAAQ,gBAAgBgB,EAAUjD,EAAO/B,CAAO,EAElDgE,EAAQ,cAAc,IAAIhE,EAASiL,CAAY,EACxCjG,CACT,CAAC,EAEDb,EAAe,OAAO3S,GAAaA,EAAU,cAAc,SAASrC,EAAa,QAAQ,CAAC,EAAE,QAAQqC,GAAaA,EAAU,SAASwS,EAAS7U,EAAa,QAAQ,CAAC,EACnK8Y,EAAK,cAAa,EAAG,QAAQ5G,GAAY,CAOvC,MAAM6J,EAAgBlH,EAAQ,6BACxBmH,EAAkBnH,EAAQ,gBAEhC,GAAIA,EAAQ,iBAAiB,IAAI3C,CAAQ,EAAG,OAE5C,MAAMwH,EAAQ7E,EAAQ,iBAAiB3C,CAAQ,EAI/C,GAHA2C,EAAQ,wBAAwB3C,EAAUwH,CAAK,EAG3CqC,EAAc,IAAIrC,CAAK,EAAG,CAC5B,MAAMrb,EAASc,EAAM,YAAY+S,CAAQ,EAAE,KAAK7T,GAAUA,EAAO,eAAiB2B,EAAa,IAAI,EACnGgc,EAAgB,IAAI9J,EAAU7T,CAAM,CACtC,CACF,CAAC,EAED2W,EAAe,OAAO3S,GAAaA,EAAU,cAAc,SAASrC,EAAa,MAAM,CAAC,EAAE,QAAQqC,GAAaA,EAAU,SAASwS,EAAS7U,EAAa,MAAM,CAAC,GAC3I8Y,EAAK,cAAa,EAAG,OAAS,GAAKjE,EAAQ,iBAAiB,KAAO,GAAKiE,EAAK,aAAY,EAAG,OAAS,GAAKnE,EAAQ,SAAWtU,GAAO,MACrIyY,EAAK,YAAW,EAAG,SAAW,EAC/C,MAAM,IAAI,MAAM,6DAA6D,EAE/ElE,EAAK,QAAU,CAAA,EACfkE,EAAK,YAAW,EAAG,QAAQ,CAAC7W,EAAQlF,IAAU,CAC5C,MAAMqY,EAAYP,EAAQ,kBAAkB5S,CAAM,EAC5C8Z,EAAgBlH,EAAQ,6BACxB0F,EAAYtY,EAAO,YAAW,EAAG,OAAOyR,IAAYA,cAAoBtF,EAAQ,EAChF6N,EAAgB,IAAI,IAAI1B,EAAU,IAAIrI,IAAY2C,EAAQ,gBAAgB,IAAI3C,EAAQ,CAAC,CAAC,EACxFgK,EAAgB,IAAI,IAAI,MAAM,KAAKD,CAAa,EAAE,IAAI,CAAC5d,GAAQtB,KAAU,CAACsB,GAAQtB,EAAK,CAAC,CAAC,EACzFof,EAAiB,CAAA,EACvB,UAAWjK,MAAYqI,EAAW,CAChC,IAAI3G,EAEJ,GAAIiB,EAAQ,iBAAiB,IAAI3C,EAAQ,EAAG,SAC5C,MAAMwH,GAAQ7E,EAAQ,iBAAiB3C,EAAQ,EAC/C,IAAI/U,GAAMuc,GACV,GAAIqC,EAAc,IAAIrC,EAAK,EAAG,CAC5B,MAAMrb,GAASwW,EAAQ,gBAAgB,IAAI3C,EAAQ,EACnD/U,IAAO,IAAI+e,EAAc,IAAI7d,EAAM,CAAC,EACtC,CACA8d,EAAevI,EAAOzW,EAAG,IAAMgf,EAAevI,CAAI,EAAI,CACpD,MAAA8F,GACA,UAAW,CAAA,CACrB,GACQyC,EAAehf,EAAG,EAAE,UAAU,KAAK+U,EAAQ,CAC7C,CAEA,MAAMyI,EAAU,CAAA,EACVH,EAAc5F,EAAK,QAAQ,OACjC,IAAIwH,GAAmB,EACvB,SAAW,CACT,MAAA1C,GACA,UAAW2C,EACnB,IAAW,OAAO,OAAOF,CAAc,EAC/B,GAAIzC,KAAUvZ,GAAgB,cAAgBwU,EAAQ,eAAiB1U,GAAa,YAAa,CAE/F,MAAMe,GAAS8Z,EAAoBuB,GAAgB7B,EAAa4B,EAAgB,EAChFA,IAAoBpb,GAAO,WAC3B,UAAWY,MAAWZ,GAAO,QAC3B2Z,EAAQ,KAAK/Y,EAAO,CAExB,SAAW8X,KAAUvZ,GAAgB,aAEnC,UAAW+R,MAAYmK,GAAgB,CAGrC,MAAMrb,GAAS8Z,EAAoB,CAAC5I,EAAQ,EAAGsI,EAAa4B,EAAgB,EAC5EA,IAAoBpb,GAAO,WAC3B,UAAWsb,MAAYtb,GAAO,QAC5B2Z,EAAQ,KAAK2B,EAAQ,CAEzB,SACS5C,KAAUvZ,GAAgB,OAAQ,CAE3C,MAAMa,GAASka,EAAsBmB,GAAgB7B,EAAa4B,EAAgB,EAClFA,IAAoBpb,GAAO,WAC3B,UAAWub,MAAYvb,GAAO,QAC5B2Z,EAAQ,KAAK4B,EAAQ,CAEzB,SAAW7C,KAAUvZ,GAAgB,qBAAsB,CAEzD,MAAM5B,GAASqa,GAAc,iBAAiB,qBACxC5X,GAASsZ,EAAgB+B,GAAgB7B,EAAa4B,GAAkB7d,EAAM,EACpF6d,IAAoBpb,GAAO,WAC3B,UAAWwb,MAAYxb,GAAO,QAC5B2Z,EAAQ,KAAK6B,EAAQ,CAEzB,KAAO,CAEL,MAAMxb,GAASsZ,EAAgB+B,GAAgB7B,EAAa4B,EAAgB,EAC5EA,IAAoBpb,GAAO,WAC3B,UAAWyb,MAAYzb,GAAO,QAC5B2Z,EAAQ,KAAK8B,EAAQ,CAEzB,CAIF,GAAI5H,EAAQ,iBAAiB,QAAU9X,IAAU,GAC/C,QAASyB,GAAI,EAAGA,GAAIqW,EAAQ,iBAAiB,OAAQrW,KAInD,GAHAoW,EAAK,YAAYA,EAAK,OAAOpW,EAAC,EAAE,UAAU,EAAE,WAAa4d,GACzDA,IAAoBvH,EAAQ,iBAAiBrW,EAAC,EAAE,WAChDmc,EAAQ,KAAK9F,EAAQ,iBAAiBrW,EAAC,CAAC,EACpC4d,GAAmB,EAAG,CAExB,MAAMM,GAAe,EAAIN,GAAmB,EAC5CA,IAAoBM,GACpB/B,EAAQ,KAAK,IAAI,WAAW+B,EAAY,CAAC,CAC3C,EAGJ,GAAI7H,EAAQ,iBAAiB,IAAI5S,CAAM,EACrC,UAAWtB,MAAQkU,EAAQ,iBAAiB,IAAI5S,CAAM,EACpD2S,EAAK,YAAY,KAAK,CACpB,OAAQ4F,EACR,WAAY4B,GACZ,WAAYzb,GAAK,UAC7B,CAAW,EACDkU,EAAQ,yBAAyB,IAAIlU,GAAMiU,EAAK,YAAY,OAAS,CAAC,EACtEwH,IAAoBzb,GAAK,WACzBga,EAAQ,KAAKha,EAAI,EAGrB,GAAIyb,GAAkB,CAEpB,IAAI7Z,GACAoS,EAAQ,SAAWtU,GAAO,IAC5BkC,GAAMxC,IAENwC,GAAMsS,EAAQ,mBAAmB,UAAU5S,EAAQ,KAAK,EACxDmT,EAAU,IAAM7S,IAGlB6S,EAAU,WAAagH,GACvBvH,EAAQ,kBAAkBtS,GAAKhC,GAAY,OAAOoa,CAAO,EAAG,EAAI,CAClE,CACA/F,EAAK,QAAQ,KAAKQ,CAAS,EAC3BP,EAAQ,eAAe,IAAI5S,EAAQlF,CAAK,CAC1C,CAAC,EACG+b,EAAK,cAAa,EAAG,KAAK5a,GAAK,CAACA,EAAE,UAAS,CAAE,GAC/CgV,EAAO,KAAK,4DAA4D,EAG1E8B,EAAe,OAAO3S,GAAaA,EAAU,cAAc,SAASrC,EAAa,QAAQ,CAAC,EAAE,QAAQqC,GAAaA,EAAU,SAASwS,EAAS7U,EAAa,QAAQ,CAAC,EACnK4U,EAAK,UAAYkE,EAAK,cAAa,EAAG,IAAI,CAAC3G,EAAUpV,IAAU,CAC7D,MAAMkZ,EAAcpB,EAAQ,kBAAkB1C,CAAQ,EAwBtD,GAtBIA,EAAS,aAAY,IAAO5B,GAAS,UAAU,SACjD0F,EAAY,UAAY9D,EAAS,aAAY,GAE3CA,EAAS,aAAY,IAAO5B,GAAS,UAAU,OACjD0F,EAAY,YAAc9D,EAAS,eAAc,GAE/CA,EAAS,eAAc,IAAI8D,EAAY,YAAc,IAEzDA,EAAY,qBAAuB,CAAA,EAC9B5M,GAAU,GAAG8I,EAAS,mBAAkB,EAAI,CAAC,EAAG,EAAG,EAAG,CAAC,CAAC,IAC3D8D,EAAY,qBAAqB,gBAAkB9D,EAAS,mBAAkB,GAE3E9I,GAAU,GAAG8I,EAAS,oBAAqB,CAAC,EAAG,EAAG,CAAC,CAAC,IACvD8D,EAAY,eAAiB9D,EAAS,kBAAiB,GAErDA,EAAS,mBAAkB,IAAO,IACpC8D,EAAY,qBAAqB,gBAAkB9D,EAAS,mBAAkB,GAE5EA,EAAS,kBAAiB,IAAO,IACnC8D,EAAY,qBAAqB,eAAiB9D,EAAS,kBAAiB,GAG1EA,EAAS,sBAAuB,CAClC,MAAMtB,EAAUsB,EAAS,oBAAmB,EACtCgC,EAAchC,EAAS,wBAAuB,EACpD8D,EAAY,qBAAqB,iBAAmBpB,EAAQ,qBAAqBhE,EAASsD,CAAW,CACvG,CACA,GAAIhC,EAAS,qBAAsB,CACjC,MAAMtB,EAAUsB,EAAS,mBAAkB,EACrCgC,EAAchC,EAAS,uBAAsB,EACnD8D,EAAY,gBAAkBpB,EAAQ,qBAAqBhE,EAASsD,CAAW,CACjF,CACA,GAAIhC,EAAS,mBAAoB,CAC/B,MAAMtB,EAAUsB,EAAS,iBAAgB,EACnCgC,EAAchC,EAAS,qBAAoB,EAC3CiC,EAAiBS,EAAQ,qBAAqBhE,EAASsD,CAAW,EACpEhC,EAAS,eAAc,IAAO,IAChCiC,EAAe,MAAQjC,EAAS,eAAc,GAEhD8D,EAAY,cAAgB7B,CAC9B,CACA,GAAIjC,EAAS,sBAAuB,CAClC,MAAMtB,EAAUsB,EAAS,oBAAmB,EACtCgC,EAAchC,EAAS,wBAAuB,EAC9CiC,EAAiBS,EAAQ,qBAAqBhE,EAASsD,CAAW,EACpEhC,EAAS,qBAAoB,IAAO,IACtCiC,EAAe,SAAWjC,EAAS,qBAAoB,GAEzD8D,EAAY,iBAAmB7B,CACjC,CACA,GAAIjC,EAAS,8BAA+B,CAC1C,MAAMtB,EAAUsB,EAAS,4BAA2B,EAC9CgC,EAAchC,EAAS,gCAA+B,EAC5D8D,EAAY,qBAAqB,yBAA2BpB,EAAQ,qBAAqBhE,EAASsD,CAAW,CAC/G,CACA,OAAAU,EAAQ,iBAAiB,IAAI1C,EAAUpV,CAAK,EACrCkZ,CACT,CAAC,EAEDjB,EAAe,OAAO3S,GAAaA,EAAU,cAAc,SAASrC,EAAa,IAAI,CAAC,EAAE,QAAQqC,GAAaA,EAAU,SAASwS,EAAS7U,EAAa,IAAI,CAAC,EAC3J4U,EAAK,OAASkE,EAAK,WAAU,EAAG,IAAI,CAACjV,EAAM9G,IAAU,CACnD,MAAMqZ,EAAUvB,EAAQ,kBAAkBhR,CAAI,EAC9C,IAAIyS,EAAc,KAClB,OAAAF,EAAQ,WAAavS,EAAK,eAAc,EAAG,IAAIsN,GAAa,CAC1D,MAAMkF,EAAe,CACnB,WAAY,CAAA,CACtB,EACQA,EAAa,KAAOlF,EAAU,QAAO,EACrC,MAAMgB,EAAWhB,EAAU,YAAW,EAClCgB,IACFkE,EAAa,SAAWxB,EAAQ,iBAAiB,IAAI1C,CAAQ,GAE3D,OAAO,KAAKhB,EAAU,UAAS,CAAE,EAAE,SACrCkF,EAAa,OAASlF,EAAU,UAAS,GAE3C,MAAM/M,EAAU+M,EAAU,WAAU,EAChC/M,IACFiS,EAAa,QAAUxB,EAAQ,iBAAiB,IAAIzQ,CAAO,GAE7D,UAAW6N,KAAYd,EAAU,gBAC/BkF,EAAa,WAAWpE,CAAQ,EAAI4C,EAAQ,iBAAiB,IAAI1D,EAAU,aAAac,CAAQ,CAAC,EAEnG,UAAW1T,KAAU4S,EAAU,cAAe,CAC5C,MAAMoF,EAAY,CAAA,EAClB,UAAWtE,KAAY1T,EAAO,gBAC5BgY,EAAUtE,CAAQ,EAAI4C,EAAQ,iBAAiB,IAAItW,EAAO,aAAa0T,CAAQ,CAAC,EAElFoE,EAAa,QAAUA,EAAa,SAAW,CAAA,EAC/CA,EAAa,QAAQ,KAAKE,CAAS,CACrC,CACA,OAAIpF,EAAU,YAAW,EAAG,QAAU,CAACmF,IACrCA,EAAcnF,EAAU,YAAW,EAAG,IAAI5S,GAAUA,EAAO,SAAS,GAE/D8X,CACT,CAAC,EACGxS,EAAK,WAAU,EAAG,SACpBuS,EAAQ,QAAUvS,EAAK,WAAU,GAE/ByS,IACFF,EAAQ,OAASA,EAAQ,QAAU,CAAA,EACnCA,EAAQ,OAAO,YAAiBE,GAElCzB,EAAQ,aAAa,IAAIhR,EAAM9G,CAAK,EAC7BqZ,CACT,CAAC,EAEDxB,EAAK,QAAUkE,EAAK,YAAW,EAAG,IAAI,CAAChH,EAAQ/U,IAAU,CACvD,MAAM6Z,EAAY/B,EAAQ,kBAAkB/C,CAAM,EAElD,GADA8E,EAAU,KAAO9E,EAAO,QAAO,EAC3B8E,EAAU,OAASvH,GAAO,KAAK,YAAa,CAC9CuH,EAAU,YAAc,CACtB,MAAO9E,EAAO,SAAQ,EACtB,KAAMA,EAAO,QAAO,EACpB,KAAMA,EAAO,QAAO,CAC9B,EACQ,MAAMtC,EAAcsC,EAAO,eAAc,EACrCtC,IAAgB,OAClBoH,EAAU,YAAY,YAAcpH,EAExC,MACEoH,EAAU,aAAe,CACvB,MAAO9E,EAAO,SAAQ,EACtB,KAAMA,EAAO,QAAO,EACpB,KAAMA,EAAO,QAAO,EACpB,KAAMA,EAAO,QAAO,CAC9B,EAEM,OAAA+C,EAAQ,eAAe,IAAI/C,EAAQ/U,CAAK,EACjC6Z,CACT,CAAC,EAEDhC,EAAK,MAAQkE,EAAK,UAAS,EAAG,IAAI,CAAClb,EAAMb,IAAU,CACjD,MAAMia,EAAUnC,EAAQ,kBAAkBjX,CAAI,EAC9C,OAAKyL,GAAU,GAAGzL,EAAK,iBAAkB,CAAC,EAAG,EAAG,CAAC,CAAC,IAChDoZ,EAAQ,YAAcpZ,EAAK,eAAc,GAEtCyL,GAAU,GAAGzL,EAAK,YAAW,EAAI,CAAC,EAAG,EAAG,EAAG,CAAC,CAAC,IAChDoZ,EAAQ,SAAWpZ,EAAK,YAAW,GAEhCyL,GAAU,GAAGzL,EAAK,WAAY,CAAC,EAAG,EAAG,CAAC,CAAC,IAC1CoZ,EAAQ,MAAQpZ,EAAK,SAAQ,GAE3BA,EAAK,WAAU,EAAG,SACpBoZ,EAAQ,QAAUpZ,EAAK,WAAU,GAGnCiX,EAAQ,aAAa,IAAIjX,EAAMb,CAAK,EAC7Bia,CACT,CAAC,EAEDpC,EAAK,MAAQkE,EAAK,UAAS,EAAG,IAAI,CAAC/G,EAAMhV,IAAU,CACjD,MAAMma,EAAUrC,EAAQ,kBAAkB9C,CAAI,EACxCU,EAAsBV,EAAK,uBAAsB,EACnDU,IACFyE,EAAQ,oBAAsBrC,EAAQ,iBAAiB,IAAIpC,CAAmB,GAEhF,MAAMD,EAAWT,EAAK,YAAW,EACjC,OAAIS,IACF0E,EAAQ,SAAWrC,EAAQ,aAAa,IAAIrC,CAAQ,GAEtD0E,EAAQ,OAASnF,EAAK,aAAa,IAAIW,GAASmC,EAAQ,aAAa,IAAInC,CAAK,CAAC,EAC/EmC,EAAQ,aAAa,IAAI9C,EAAMhV,CAAK,EAC7Bma,CACT,CAAC,EAED4B,EAAK,UAAS,EAAG,QAAQ,CAAClb,EAAMb,IAAU,CACxC,MAAMia,EAAUpC,EAAK,MAAM7X,CAAK,EAC1B8G,EAAOjG,EAAK,QAAO,EACrBiG,IACFmT,EAAQ,KAAOnC,EAAQ,aAAa,IAAIhR,CAAI,GAE9C,MAAMiO,EAASlU,EAAK,UAAS,EACzBkU,IACFkF,EAAQ,OAASnC,EAAQ,eAAe,IAAI/C,CAAM,GAEpD,MAAMC,EAAOnU,EAAK,QAAO,EACrBmU,IACFiF,EAAQ,KAAOnC,EAAQ,aAAa,IAAI9C,CAAI,GAE1CnU,EAAK,eAAe,OAAS,IAC/BoZ,EAAQ,SAAWpZ,EAAK,eAAe,IAAIA,GAAQiX,EAAQ,aAAa,IAAIjX,CAAI,CAAC,EAErF,CAAC,EAEDgX,EAAK,WAAakE,EAAK,eAAc,EAAG,IAAI,CAACvB,EAAWxa,IAAU,CAChE,MAAMua,EAAezC,EAAQ,kBAAkB0C,CAAS,EAClDoF,EAAkB,IAAI,IAC5B,OAAArF,EAAa,SAAWC,EAAU,aAAY,EAAG,IAAI,CAAC3I,EAASgO,IAAiB,CAC9E,MAAMtI,EAAaO,EAAQ,kBAAkBjG,CAAO,EACpD,OAAA0F,EAAW,MAAQO,EAAQ,iBAAiB,IAAIjG,EAAQ,UAAU,EAClE0F,EAAW,OAASO,EAAQ,iBAAiB,IAAIjG,EAAQ,WAAW,EACpE0F,EAAW,cAAgB1F,EAAQ,iBAAgB,EACnD+N,EAAgB,IAAI/N,EAASgO,CAAY,EAClCtI,CACT,CAAC,EACDgD,EAAa,SAAWC,EAAU,aAAY,EAAG,IAAI5I,GAAW,CAC9D,MAAM8I,EAAa5C,EAAQ,kBAAkBlG,CAAO,EACpD,OAAA8I,EAAW,QAAUkF,EAAgB,IAAIhO,EAAQ,WAAU,CAAE,EAC7D8I,EAAW,OAAS,CAClB,KAAM5C,EAAQ,aAAa,IAAIlG,EAAQ,cAAa,CAAE,EACtD,KAAMA,EAAQ,cAAa,CACrC,EACe8I,CACT,CAAC,EACD5C,EAAQ,kBAAkB,IAAI0C,EAAWxa,CAAK,EACvCua,CACT,CAAC,EAED1C,EAAK,OAASkE,EAAK,WAAU,EAAG,IAAI,CAAClB,EAAO7a,IAAU,CACpD,MAAM4a,EAAW9C,EAAQ,kBAAkB+C,CAAK,EAChD,OAAAD,EAAS,MAAQC,EAAM,eAAe,IAAIha,GAAQiX,EAAQ,aAAa,IAAIjX,CAAI,CAAC,EAChFiX,EAAQ,cAAc,IAAI+C,EAAO7a,CAAK,EAC/B4a,CACT,CAAC,EACD,MAAM3E,EAAe8F,EAAK,gBAAe,EACzC,OAAI9F,IACF4B,EAAK,MAAQkE,EAAK,WAAU,EAAG,QAAQ9F,CAAY,GAGrD4B,EAAK,eAAiBI,EAAe,IAAI1B,GAAOA,EAAI,aAAa,EACjEsB,EAAK,mBAAqBK,EAAmB,IAAI3B,GAAOA,EAAI,aAAa,EACzE0B,EAAe,QAAQ3S,GAAaA,EAAU,MAAMwS,CAAO,CAAC,EAE5DgI,GAAMjI,CAAI,EACHV,CACT,CACF,CAMA,SAAS2I,GAAM/C,EAAQ,CACrB,MAAMgD,EAAS,CAAA,EACf,UAAW3f,KAAO2c,EAAQ,CACxB,MAAMza,EAAQya,EAAO3c,CAAG,GACpB,MAAM,QAAQkC,CAAK,GAAKA,EAAM,SAAW,GAElCA,IAAU,MAAQA,IAAU,IAE5BA,GAAS,OAAOA,GAAU,UAAY,OAAO,KAAKA,CAAK,EAAE,SAAW,IAC7Eyd,EAAO,KAAK3f,CAAG,CAEnB,CACA,UAAWA,KAAO2f,EAChB,OAAOhD,EAAO3c,CAAG,CAErB,CAEA,IAAI4f,IACH,SAAUA,EAAW,CACpBA,EAAUA,EAAU,KAAU,UAAU,EAAI,OAC5CA,EAAUA,EAAU,IAAS,OAAO,EAAI,KAC1C,GAAGA,KAAcA,GAAY,CAAA,EAAG,EAYhC,MAAMC,EAAW,CACf,aAAc,CACZ,KAAK,QAAU1X,GAAO,iBACtB,KAAK,YAAc,IAAI,IACvB,KAAK,cAAgB,CAAA,EACrB,KAAK,cAAgBrF,GAAa,YAElC,KAAK,cAAgB,EAErB,KAAK,eAAiB,CACxB,CAEA,UAAUiT,EAAQ,CAChB,YAAK,QAAUA,EACR,IACT,CAEA,mBAAmB+J,EAAY,CAC7B,UAAW5a,KAAa4a,EACtB,KAAK,YAAY,IAAI5a,CAAS,EAC9BA,EAAU,SAAQ,EAEpB,OAAO,IACT,CAEA,qBAAqB6a,EAAc,CACjC,cAAO,OAAO,KAAK,cAAeA,CAAY,EACvC,IACT,CAKA,gBAAgBC,EAAQ,CACtB,YAAK,cAAgBA,EACd,IACT,CAKA,MAAM,KAAK5a,EAAK,CACd,OAAO,MAAM,KAAK,SAAS,MAAM,KAAK,WAAWA,CAAG,CAAC,CACvD,CAEA,MAAM,WAAWA,EAAK,CACpB,MAAMf,EAAO,MAAM,KAAK,QAAQe,EAAK,MAAM,EAC3C,KAAK,cAAgBf,EAAK,WAC1B,MAAM0S,EAAUkJ,GAAM5b,CAAI,EAAI,KAAK,cAAcA,CAAI,EAAI,CACvD,KAAM,KAAK,MAAMjB,GAAY,WAAWiB,CAAI,CAAC,EAC7C,UAAW,CAAA,CACjB,EAEI,aAAM,KAAK,uBAAuB0S,EAAS,KAAK,QAAQ3R,CAAG,CAAC,EAC5D,KAAK,uBAAuB2R,CAAO,EAC5BA,CACT,CAEA,MAAM,SAASA,EAAS,CACtB,OAAAA,EAAU,KAAK,UAAUA,CAAO,EAChC,KAAK,uBAAuBA,CAAO,EAC5BO,GAAW,KAAKP,EAAS,CAC9B,WAAY,MAAM,KAAK,KAAK,WAAW,EACvC,aAAc,KAAK,cACnB,OAAQ,KAAK,OACnB,CAAK,CACH,CAEA,MAAM,aAAamJ,EAAK,CACtB,MAAMnJ,EAAU,KAAK,cAAc3T,GAAY,WAAW8c,CAAG,CAAC,EAC9D,KAAK,uBAAuBnJ,CAAO,EACnC,MAAMU,EAAOV,EAAQ,KAErB,GAAIU,EAAK,SAAWA,EAAK,QAAQ,KAAKQ,GAAakI,GAAiBpJ,EAASkB,CAAS,CAAC,EACrF,MAAM,IAAI,MAAM,sDAAsD,EACjE,GAAIR,EAAK,QAAUA,EAAK,OAAO,KAAKiB,GAAY0H,GAAgBrJ,EAAS2B,CAAQ,CAAC,EACvF,MAAM,IAAI,MAAM,qDAAqD,EAEvE,OAAO3B,CACT,CAEA,MAAM,WAAWmJ,EAAK,CACpB,OAAO,KAAK,SAAS,MAAM,KAAK,aAAa9c,GAAY,WAAW8c,CAAG,CAAC,CAAC,CAC3E,CAKA,MAAM,UAAUjD,EAAK1F,EAAW,GAAI,CAClC,GAAIA,EAAS,SAAWrU,GAAO,KAAO+Z,EAAI,QAAO,EAAG,YAAW,EAAG,OAAS,EACzE,MAAM,IAAI,MAAM,4BAA4B,EAE9C,OAAOD,GAAW,MAAMC,EAAK,CAC3B,OAAQ1F,EAAS,QAAUrU,GAAO,KAClC,SAAUqU,EAAS,UAAY,GAC/B,OAAQ,KAAK,QACb,aAAc,KAAK,cACnB,aAAcpW,GAAS,GAAI,KAAK,aAAa,EAC7C,WAAY,MAAM,KAAK,KAAK,WAAW,CAC7C,CAAK,CACH,CAEA,MAAM,YAAY8b,EAAK,CACrB,KAAM,CACJ,KAAAxF,EACA,UAAA2E,CACN,EAAQ,MAAM,KAAK,UAAUa,EAAK,CAC5B,OAAQ/Z,GAAO,GACrB,CAAK,EACKmd,EAAS,IAAI,YAAY,CAAC,WAAY,EAAG,EAAE,CAAC,EAC5CC,EAAW,KAAK,UAAU7I,CAAI,EAC9B8I,EAAgBnd,GAAY,IAAIA,GAAY,WAAWkd,CAAQ,EAAG,EAAI,EACtEE,EAAkBpd,GAAY,OAAO,IAAI,YAAY,CAACmd,EAAc,WAAY,UAAU,CAAC,CAAC,EAC5FE,EAAYrd,GAAY,OAAO,CAACod,EAAiBD,CAAa,CAAC,EACrEF,EAAOA,EAAO,OAAS,CAAC,GAAKI,EAAU,WACvC,MAAMC,EAAY,OAAO,OAAOtE,CAAS,EAAE,CAAC,EAC5C,GAAI,CAACsE,GAAa,CAACA,EAAU,WAC3B,OAAOtd,GAAY,OAAO,CAACA,GAAY,OAAOid,CAAM,EAAGI,CAAS,CAAC,EAEnE,MAAME,EAAevd,GAAY,IAAIsd,EAAW,CAAI,EAC9CE,EAAiBxd,GAAY,OAAO,IAAI,YAAY,CAACud,EAAa,WAAY,OAAU,CAAC,CAAC,EAC1FE,EAAWzd,GAAY,OAAO,CAACwd,EAAgBD,CAAY,CAAC,EAClE,OAAAN,EAAOA,EAAO,OAAS,CAAC,GAAKQ,EAAS,WAC/Bzd,GAAY,OAAO,CAACA,GAAY,OAAOid,CAAM,EAAGI,EAAWI,CAAQ,CAAC,CAC7E,CAIA,MAAM,uBAAuB9J,EAAStP,EAAM,CAC1C,IAAIqZ,EAAQ,KACZ,MAAMC,EAAShK,EAAQ,KAAK,QAAU,CAAA,EAChCyG,EAAUzG,EAAQ,KAAK,SAAW,CAAA,EAClCiK,EAAmB,CAAC,GAAGD,EAAQ,GAAGvD,CAAO,EAAE,IAAI,eAAgBpF,EAAU,CAC7E,MAAMhT,EAAMgT,EAAS,IACrB,GAAI,CAAChT,GAAOA,EAAI,MAAM,OAAO,EAAG,OAAO,QAAQ,QAAO,EACtD2R,EAAQ,UAAU3R,CAAG,EAAI,MAAM0b,EAAM,QAAQA,EAAM,QAAQrZ,EAAMrC,CAAG,EAAG,MAAM,EAC7E0b,EAAM,eAAiB/J,EAAQ,UAAU3R,CAAG,EAAE,UAChD,CAAC,EACD,MAAM,QAAQ,IAAI4b,CAAgB,CACpC,CACA,uBAAuBjK,EAAS,CAG9B,SAASkK,EAAgB7I,EAAU,CACjC,GAAKA,EAAS,IACd,IAAIA,EAAS,OAAOrB,EAAQ,UAAW,CACrC3T,GAAY,WAAW2T,EAAQ,UAAUqB,EAAS,GAAG,CAAC,EACtD,MACF,CACA,GAAIA,EAAS,IAAI,MAAM,OAAO,EAAG,CAE/B,MAAM8I,EAAe,KAAKlR,IAAM,IAAI7K,GAAU,UAAUiT,EAAS,GAAG,CAAC,GACrErB,EAAQ,UAAUmK,CAAY,EAAI9d,GAAY,wBAAwBgV,EAAS,GAAG,EAClFA,EAAS,IAAM8I,CACjB,EACF,EAEenK,EAAQ,KAAK,QAAU,CAAA,GAC/B,QAAQtB,GAAS,CACtB,GAAIA,EAAM,aAAe,QAAaA,EAAM,MAAQ,OAClD,MAAM,IAAI,MAAM,sCAAsC,EAExDwL,EAAgBxL,CAAK,CACvB,CAAC,GAEesB,EAAQ,KAAK,SAAW,CAAA,GAChC,QAAQkK,CAAe,CACjC,CAQA,UAAUlK,EAAS,CACjB,KAAM,CACJ,OAAAgK,EACA,QAAAvD,CACN,EAAQzG,EAAQ,KACZ,OAAAA,EAAU,CACR,KAAM5V,GAAS,GAAI4V,EAAQ,IAAI,EAC/B,UAAW5V,GAAS,GAAI4V,EAAQ,SAAS,CAC/C,EACQgK,IACFhK,EAAQ,KAAK,OAASgK,EAAO,IAAItL,GAAStU,GAAS,GAAIsU,CAAK,CAAC,GAE3D+H,IACFzG,EAAQ,KAAK,QAAUyG,EAAQ,IAAI1Y,GAAU3D,GAAS,GAAI2D,CAAM,CAAC,GAE5DiS,CACT,CAEA,cAAcmJ,EAAK,CAEjB,GAAI,CAACD,GAAMC,CAAG,EACZ,MAAM,IAAI,MAAM,0BAA0B,EAG5C,MAAMM,EAAkB,IAAI,YAAYN,EAAI,OAAQA,EAAI,WAAa,GAAI,CAAC,EAC1E,GAAIM,EAAgB,CAAC,IAAMZ,GAAU,KACnC,MAAM,IAAI,MAAM,kCAAkC,EAEpD,MAAMuB,EAAiB,GACjBC,EAAiBZ,EAAgB,CAAC,EAClCF,EAAWld,GAAY,WAAWA,GAAY,OAAO8c,EAAKiB,EAAgBC,CAAc,CAAC,EACzF3J,EAAO,KAAK,MAAM6I,CAAQ,EAE1Be,EAAgBF,EAAiBC,EACvC,GAAIlB,EAAI,YAAcmB,EACpB,MAAO,CACL,KAAA5J,EACA,UAAW,CAAA,CACnB,EAEI,MAAMmJ,EAAiB,IAAI,YAAYV,EAAI,OAAQA,EAAI,WAAamB,EAAe,CAAC,EACpF,GAAIT,EAAe,CAAC,IAAMhB,GAAU,IAGlC,MAAO,CACL,KAAAnI,EACA,UAAW,CAAA,CACnB,EAEI,MAAM6J,EAAgBV,EAAe,CAAC,EAChCF,EAAYtd,GAAY,OAAO8c,EAAKmB,EAAgB,EAAGC,CAAa,EAC1E,MAAO,CACL,KAAA7J,EACA,UAAW,CACT,CAAC7U,EAAU,EAAG8d,CACtB,CACA,CACE,CACF,CACA,SAASP,GAAiBoB,EAActJ,EAAW,CACjD,OAAOA,EAAU,MAAQ,QAAa,EAAEA,EAAU,OAAOsJ,EAAa,UACxE,CACA,SAASnB,GAAgBmB,EAAc7I,EAAU,CAC/C,OAAOA,EAAS,MAAQ,QAAa,EAAEA,EAAS,OAAO6I,EAAa,YAAc7I,EAAS,aAAe,MAC5G,CACA,SAASuH,GAAM5b,EAAM,CACnB,GAAIA,EAAK,WAAa,EAAI,YAAY,kBAAmB,MAAO,GAChE,MAAMgc,EAAS,IAAI,YAAYhc,EAAK,OAAQA,EAAK,WAAY,CAAC,EAC9D,OAAOgc,EAAO,CAAC,IAAM,YAAcA,EAAO,CAAC,IAAM,CACnD,CAiQA,MAAMmB,WAAc3B,EAAW,CAK7B,YAAY4B,EAAcla,GAAU,aAAc,CAChD,MAAK,EACL,KAAK,aAAe,OACpB,KAAK,aAAeka,CACtB,CACA,MAAM,QAAQrc,EAAK5F,EAAM,CACvB,MAAMkiB,EAAW,MAAM,MAAMtc,EAAK,KAAK,YAAY,EACnD,OAAQ5F,EAAI,CACV,IAAK,OACH,OAAO,IAAI,WAAW,MAAMkiB,EAAS,YAAW,CAAE,EACpD,IAAK,OACH,OAAOA,EAAS,KAAI,CAC5B,CACE,CACA,QAAQja,EAAMD,EAAM,CAClB,OAAOD,GAAU,QAAQE,EAAMD,CAAI,CACrC,CACA,QAAQpC,EAAK,CACX,OAAOmC,GAAU,QAAQnC,CAAG,CAC9B,CACF,CC1lMA,KAAM,CAAE,IAAAuc,GAAK,IAAAC,GAAK,GAAAC,EAAE,EAAK,KACnBC,GAAMD,GAAK,EACV,SAASE,GAAW3N,EAAU,CAEjC,MAAM4N,EAAKL,GAAIvN,EAAS,CAAC,EAAI,GAAM0N,GAAM,GAAG,EACtCG,EAAKL,GAAIxN,EAAS,CAAC,EAAI,GAAM0N,GAAM,GAAG,EACtCI,EAAKP,GAAIvN,EAAS,CAAC,EAAI,GAAM0N,GAAM,GAAG,EACtCK,EAAKP,GAAIxN,EAAS,CAAC,EAAI,GAAM0N,GAAM,GAAG,EACtCM,EAAKT,GAAIvN,EAAS,CAAC,EAAI,GAAM0N,GAAM,GAAG,EACtCjV,EAAK+U,GAAIxN,EAAS,CAAC,EAAI,GAAM0N,GAAM,GAAG,EACtCO,EAAI,CAAC,EAAG,EAAG,EAAG,CAAC,EACrB,OAAAA,EAAE,CAAC,EAAIL,EAAKE,EAAKE,EAAKH,EAAKE,EAAKtV,EAChCwV,EAAE,CAAC,EAAIJ,EAAKC,EAAKE,EAAKJ,EAAKG,EAAKtV,EAChCwV,EAAE,CAAC,EAAIL,EAAKG,EAAKC,EAAKH,EAAKC,EAAKrV,EAChCwV,EAAE,CAAC,EAAIL,EAAKE,EAAKrV,EAAKoV,EAAKE,EAAKC,EACzBC,CACX,CCdA,IAAIC,GAAgB,OAChBC,GAAoB,EACpBC,GAAe,GAOZ,MAAMC,GAAoBxN,GAAS,CACtCqN,GAAgBrN,CACpB,EAKayN,GAAmB,IAAMJ,GAOzBK,GAAwBC,GAAa,CAC9CL,GAAoBK,CACxB,EAKaC,GAAuB,IAAMN,GAO7BO,GAAmBC,GAAQ,CACpCP,GAAeO,CACnB,EAKaC,GAAkB,IAAMR,GAC/BS,GAAiB,IAAI,IAC3B,IAAI7I,GACA8I,GACAC,GACAC,GACAC,GACG,SAASC,IAAU,CACtBL,GAAe,MAAK,EACpBX,GAAgB,OAChBC,GAAoB,EACpBC,GAAe,EACnB,CAKO,SAASe,GAAUtG,EAAKzd,EAAMiB,EAAMgF,EAAK,CAC5C,MAAM+d,EAAS/iB,EAAKjB,CAAI,EACxB,GAAIgkB,GAAU,KACV,OAAO,KAEX,GAAI,OAAOA,GAAW,WAClB,OAAOA,EAEX,MAAMC,EAAUP,GAAc,SAAQ,EAChCQ,EAAMlkB,GAAQ,WAAa,EAAI,EAC/BmkB,EAAS,IAAI,aAAaD,EAAMD,CAAO,EAC7C,QAASpiB,EAAI,EAAGA,EAAIoiB,EAAS,EAAEpiB,EAAG,CAC9B,MAAMsE,EAAItE,GAAKoiB,EAAU,GACnB3d,EAAI0d,EAAOlB,KAAkB,YAAc3c,GAC5C,EAAI,KAAK,IAAIA,EAAI,EAAI,KAAK,EAAE,GAAK,CAAC,EACvCge,EAAO,IAAID,IAAQ,EAAI3B,GAAWjc,CAAC,EAAIA,EAAG4d,EAAMriB,CAAC,CACrD,CACA,MAAMuiB,EAAiB3G,EAAI,eAAexc,EAAK,KAAO,IAAMjB,EAAO,SAAS,EACvE,UAAUyd,EAAI,QAAO,EAAG,YAAW,EAAG,CAAC,CAAC,EACxC,SAAS0G,CAAM,EACf,QAAQD,IAAQ,EAAIzS,GAAS,KAAK,KAAOA,GAAS,KAAK,IAAI,EAC1DQ,EAAUwL,EAAI,uBAAsB,EACrC,SAASiG,EAAa,EACtB,UAAUU,CAAc,EACxB,iBAAiB,QAAQ,EACxBpS,EAAUyL,EAAI,uBAAsB,EACrC,cAAczd,CAAI,EAClB,cAAciG,CAAG,EACjB,WAAWgM,CAAO,EACvB,OAAA2I,GAAU,WAAW3I,CAAO,EAC5B2I,GAAU,WAAW5I,CAAO,EAC5B6R,GAAe,GACRG,EAAO,CAAC,CACnB,CAKO,SAASK,GAAS5G,EAAKxc,EAAMqjB,EAAU,CAC1C,GAAIb,GAAe,IAAIa,CAAQ,EAAG,CAC9B,MAAMtS,EAAUyL,EAAI,uBAAsB,EACrC,cAAc,SAAS,EACvB,cAAcxc,CAAI,EAClB,WAAW2iB,EAAc,EAC9BhJ,GAAU,WAAW5I,CAAO,EAC5B6R,GAAe,EACnB,CACJ,CAKO,MAAMU,GAAYD,GAAab,GAAe,IAAIa,CAAQ,EAK1D,SAASE,GAAWC,EAAcC,EAAO,CAC5C,MAAMC,EAAiB,CAAA,EACvB,GAAID,GAAS,KACT,OAAOC,EAEX,QAAS9iB,EAAI,EAAGA,EAAI4iB,EAAa,QAAS,EAAE5iB,EACxC,QAAS+P,EAAI,EAAGA,EAAI,EAAG,EAAEA,EACrB+S,EAAe9iB,EAAI,EAAI+P,CAAC,EACpB6S,EAAa,eAAe5iB,EAAI4iB,EAAa,QAAU7S,CAAC,EAEpE,GAAI8S,EAAM,MACN,QAAS7iB,EAAI,EAAGA,EAAI4iB,EAAa,QAAS,EAAE5iB,EAAG,CAC3C,MAAM+iB,EAAWH,EAAa,eACxB/d,EAAS7E,EAAI4iB,EAAa,QAC1BI,EAAMF,EAAe,MAAMje,EAAQA,EAAS,CAAC,EACnDge,EAAM,MAAMG,CAAG,EACf,QAASjT,EAAI,EAAGA,EAAI,EAAG,EAAEA,EACrBgT,EAASle,EAASkL,CAAC,EAAIiT,EAAIjT,CAAC,CACpC,CAEJ,OAAO+S,CACX,CAKO,SAASG,GAASrH,EAAKgH,EAAcvd,EAAMyd,EAAgBD,EAAO,CACjEA,GAAS,OAGbxd,EAAK,WAAW,CAAC,CAAC,CAAC,EACnBA,EAAK,eAAc,EAAG,QAAQ,CAACsN,EAAW3S,IAAM,CAC5C,GAAI6iB,EAAM,IACN,QAAS7iB,EAAI,EAAGA,EAAI4iB,EAAa,QAAS,EAAE5iB,EAAG,CAC3C,MAAMgjB,EAAMF,EAAe,MAAM,EAAI9iB,EAAG,GAAKA,EAAI,EAAE,EACnD6iB,EAAM,IAAIG,CAAG,EACbF,EAAe,OAAO,EAAI9iB,EAAG,EAAG,GAAGgjB,CAAG,CAC1C,CAEJ,MAAME,EAAgBvQ,EAAU,aAAa,UAAU,EAAE,SAAQ,EAC3DlU,EAAQ,IAAI,aAAaykB,EAAc,MAAM,EAC7Cre,EAAS+d,EAAa,SAAS5iB,CAAC,EACtC,QAAS+P,EAAI,EAAGA,EAAItR,EAAM,OAAQ,EAAEsR,EAChCtR,EAAMsR,CAAC,EAAI+S,EAAeje,EAASkL,CAAC,EAAImT,EAAcnT,CAAC,EAE3D,MAAMoT,EAAgBvH,EAAI,eAAevW,EAAK,QAAO,EAAK,eAAe,EACpE,UAAUuW,EAAI,QAAO,EAAG,YAAW,EAAG,CAAC,CAAC,EACxC,SAASnd,CAAK,EACd,QAAQmR,GAAS,KAAK,IAAI,EACzBwT,EAAcxH,EAAI,sBAAqB,EAAG,aAAa,WAAYuH,CAAa,EACtFxQ,EAAU,UAAUyQ,CAAW,CACnC,CAAC,EACL,CAWY,MAACC,GAAgB,CAACZ,EAAUa,IAAS,CAC7C,MAAMT,EAAQjB,GAAe,IAAIa,CAAQ,EACrCI,GAAS,KACTA,EAAM,MAAQS,EAGd1B,GAAe,IAAIa,EAAU,CAAE,MAAOa,CAAI,CAAE,CAEpD,EAWaC,GAAc,CAACd,EAAUa,IAAS,CAC3C,MAAMT,EAAQjB,GAAe,IAAIa,CAAQ,EACrCI,GAAS,KACTA,EAAM,IAAMS,EAGZ1B,GAAe,IAAIa,EAAU,CAAE,IAAKa,CAAI,CAAE,CAElD,EAKO,SAASE,GAAkB5H,EAAK,CACnC7C,GAAY6C,EAAI,gBAAgB,EAAE,EAClCoG,GAAe,GACf,MAAMI,EAAU,KAAK,MAAMlB,GAAoBC,EAAY,EAAI,EACzDsC,EAAQ,IAAI,aAAarB,CAAO,EAChCxP,EAAU,IAAI,aAAawP,CAAO,EACxC,QAASpiB,EAAI,EAAGA,EAAIoiB,EAAS,EAAEpiB,EAAG,CAC9B,MAAMsE,EAAItE,GAAKoiB,EAAU,GACzBqB,EAAMzjB,CAAC,EAAIsE,EAAI4c,GACftO,EAAQ5S,CAAC,EACLihB,KAAkB,YAAc3c,GAAK,EAAI,KAAK,IAAIA,EAAI,EAAI,KAAK,EAAE,GAAK,CAC9E,CACAud,GAAgBjG,EAAI,eAAe,iBAAiB,EAC/C,UAAUA,EAAI,aAAY,CAAE,EAC5B,SAAS6H,CAAK,EACd,QAAQ7T,GAAS,KAAK,MAAM,EACjCkS,GAAkBlG,EAAI,eAAe,mBAAmB,EACnD,UAAUA,EAAI,QAAO,EAAG,YAAW,EAAG,CAAC,CAAC,EACxC,SAAShJ,CAAO,EAChB,QAAQhD,GAAS,KAAK,MAAM,EACjCmS,GAAiBnG,EAAI,uBAAsB,EACtC,SAASiG,EAAa,EACtB,UAAUC,EAAe,EACzB,iBAAiB,QAAQ,EAC9B/I,GAAU,WAAWgJ,EAAc,CACvC,CAKO,SAAS2B,IAAwB,CAC/B1B,KACDH,GAAc,QAAO,EACrBC,GAAgB,QAAO,EACvBC,GAAe,QAAO,EACtBhJ,GAAU,QAAO,EAEzB,0KCzQC4K,GAAQ,CAET,IAAIC,EAAY,OAAO,eACnBC,EAAmB,OAAO,yBAC1BC,EAAoB,OAAO,oBAC3BC,EAAe,OAAO,UAAU,eAChCC,EAAW,CAACjkB,EAAQkkB,IAAQ,CAC9B,QAASxkB,KAAQwkB,EACfL,EAAU7jB,EAAQN,EAAM,CAAE,IAAKwkB,EAAIxkB,CAAI,EAAG,WAAY,GAAM,CAChE,EACIykB,EAAc,CAACC,EAAIC,EAAMC,EAAQC,IAAS,CAC5C,GAAIF,GAAQ,OAAOA,GAAS,UAAY,OAAOA,GAAS,WACtD,QAASzlB,MAAOmlB,EAAkBM,CAAI,EAChC,CAACL,EAAa,KAAKI,EAAIxlB,EAAG,GAAKA,KAAQ0lB,GACzCT,EAAUO,EAAIxlB,GAAK,CAAE,IAAK,IAAMylB,EAAKzlB,EAAG,EAAG,WAAY,EAAE2lB,EAAOT,EAAiBO,EAAMzlB,EAAG,IAAM2lB,EAAK,WAAY,EAEvH,OAAOH,CACT,EACII,EAAgBC,GAAQN,EAAYN,EAAU,CAAA,EAAI,aAAc,CAAE,MAAO,EAAI,CAAE,EAAGY,CAAG,EACrFC,EAAU,CAACC,EAAQC,EAAaC,IAC3B,IAAI,QAAQ,CAACxV,EAASyV,KAAW,CACtC,IAAIC,GAAajkB,GAAU,CACzB,GAAI,CACFkkB,GAAKH,EAAU,KAAK/jB,CAAK,CAAC,CAClC,OAAemkB,GAAG,CACVH,GAAOG,EAAC,CAChB,CACA,EACQC,GAAYpkB,GAAU,CACxB,GAAI,CACFkkB,GAAKH,EAAU,MAAM/jB,CAAK,CAAC,CACnC,OAAemkB,GAAG,CACVH,GAAOG,EAAC,CAChB,CACA,EACQD,GAAQzgB,GAAMA,EAAE,KAAO8K,EAAQ9K,EAAE,KAAK,EAAI,QAAQ,QAAQA,EAAE,KAAK,EAAE,KAAKwgB,GAAWG,EAAQ,EAC/FF,IAAMH,EAAYA,EAAU,MAAMF,EAAQC,CAAW,GAAG,MAAM,CAClE,CAAG,EAICO,EAAkB,CAAA,EACtBlB,EAASkB,EAAiB,CACxB,gBAAiB,IAAMC,GACvB,oBAAqB,IAAMC,GAC3B,MAAO,IAAMC,GACb,UAAW,IAAMC,GACjB,QAAS,IAAMjP,GACf,QAAS,IAAMkP,GACf,eAAgB,IAAMC,GACtB,mBAAoB,IAAMC,GAC1B,WAAY,IAAMC,GAClB,KAAM,IAAMC,GACZ,UAAW,IAAM9Q,GACjB,cAAe,IAAM+Q,GACrB,QAAS,IAAMC,EACjB,CAAC,EACDlC,EAAO,QAAUY,EAAaW,CAAe,EAG7C,SAASY,EAAaC,EAAQ,CAC5B,IAAIC,EAASnlB,GAAU,CACrB,GAAIA,IAAU,KACZolB,EAAG,OAAO,CAAC,UACF,OAAOplB,GAAU,UAC1BolB,EAAG,OAAO,CAAC,EACXA,EAAG,OAAO,CAACplB,CAAK,UACP,OAAOA,GAAU,SAC1BolB,EAAG,OAAO,CAAC,EACXA,EAAG,QAAQplB,EAAQ,CAAC,UACX,OAAOA,GAAU,SAC1BolB,EAAG,OAAO,CAAC,EACXA,EAAG,MAAMC,EAAWrlB,CAAK,CAAC,UACjBA,aAAiB,WAC1BolB,EAAG,OAAO,CAAC,EACXA,EAAG,MAAMplB,CAAK,UACLA,aAAiB,MAAO,CACjColB,EAAG,OAAO,CAAC,EACXA,EAAG,QAAQplB,EAAM,MAAM,EACvB,QAASslB,MAAQtlB,EACfmlB,EAAMG,EAAI,CAElB,KAAW,CACL,IAAIC,GAAO,OAAO,KAAKvlB,CAAK,EAC5BolB,EAAG,OAAO,CAAC,EACXA,EAAG,QAAQG,GAAK,MAAM,EACtB,QAASznB,MAAOynB,GACdH,EAAG,MAAMC,EAAWvnB,EAAG,CAAC,EACxBqnB,EAAMnlB,EAAMlC,EAAG,CAAC,CAExB,CACA,EACMsnB,EAAK,IAAII,EACb,OAAAJ,EAAG,QAAQ,CAAC,EACZA,EAAG,QAAQF,EAAO,IAAM,EAAI,CAAC,CAACA,EAAO,SAAS,EAC9CC,EAAMD,EAAO,KAAK,EAClBO,EAAcL,EAAG,IAAKA,EAAG,IAAM,EAAG,CAAC,EAC5BA,EAAG,IAAI,SAAS,EAAGA,EAAG,GAAG,CAClC,CACA,SAASM,EAAaC,EAAO,CAC3B,IAAIR,EAAQ,IAAM,CAChB,OAAQC,EAAG,MAAK,EAAE,CAChB,IAAK,GACH,OAAO,KACT,IAAK,GACH,MAAO,CAAC,CAACA,EAAG,MAAK,EACnB,IAAK,GACH,OAAOA,EAAG,OAAM,EAClB,IAAK,GACH,OAAOQ,EAAWR,EAAG,MAAM,EAC7B,IAAK,GACH,OAAOA,EAAG,KAAI,EAChB,IAAK,GAAG,CACN,IAAInhB,GAAQmhB,EAAG,OAAM,EACjBS,GAAS,CAAA,EACb,QAAS1mB,EAAI,EAAGA,EAAI8E,GAAO9E,IACzB0mB,GAAO,KAAKV,GAAO,EAErB,OAAOU,EACf,CACM,IAAK,GAAG,CACN,IAAI5hB,GAAQmhB,EAAG,OAAM,EACjBS,GAAS,CAAA,EACb,QAAS1mB,EAAI,EAAGA,EAAI8E,GAAO9E,IACzB0mB,GAAOD,EAAWR,EAAG,KAAI,CAAE,CAAC,EAAID,EAAK,EAEvC,OAAOU,EACf,CACM,QACE,MAAM,IAAI,MAAM,gBAAgB,CACxC,CACA,EACMT,EAAK,IAAII,EAAWG,CAAK,EACzB3X,EAAKoX,EAAG,OAAM,EACdU,IAAa9X,EAAK,KAAO,EAC7BA,KAAQ,EACR,IAAIhO,GAAQmlB,EAAK,EACjB,GAAIC,EAAG,MAAQO,EAAM,OACnB,MAAM,IAAI,MAAM,gBAAgB,EAElC,MAAO,CAAE,GAAA3X,EAAI,UAAA8X,GAAW,MAAA9lB,EAAK,CAC/B,CACA,IAAIwlB,EAAa,KAAM,CACrB,YAAYO,EAAM,IAAI,WAAW,IAAI,EAAG,CACtC,KAAK,IAAMA,EACX,KAAK,IAAM,EACX,KAAK,IAAM,CACf,CACE,OAAOC,EAAO,CACZ,GAAI,KAAK,IAAMA,EAAQ,KAAK,IAAI,OAAQ,CACtC,IAAIC,EAAQ,IAAI,YAAY,KAAK,IAAMD,GAAS,CAAC,EACjDC,EAAM,IAAI,KAAK,GAAG,EAClB,KAAK,IAAMA,CACjB,CACI,YAAK,KAAOD,EACL,KAAK,IAAMA,CACtB,CACE,OAAOhmB,EAAO,CACZ,IAAIgE,EAAS,KAAK,OAAO,CAAC,EAC1B,KAAK,IAAIA,CAAM,EAAIhE,CACvB,CACE,QAAQA,EAAO,CACb,IAAIgE,EAAS,KAAK,OAAO,CAAC,EAC1ByhB,EAAc,KAAK,IAAKzlB,EAAOgE,CAAM,CACzC,CACE,MAAM2hB,EAAO,CACX,IAAI3hB,EAAS,KAAK,OAAO,EAAI2hB,EAAM,MAAM,EACzCF,EAAc,KAAK,IAAKE,EAAM,OAAQ3hB,CAAM,EAC5C,KAAK,IAAI,IAAI2hB,EAAO3hB,EAAS,CAAC,CAClC,CACE,MAAMgiB,EAAO,CACX,GAAI,KAAK,IAAMA,EAAQ,KAAK,IAAI,OAC9B,MAAM,IAAI,MAAM,gBAAgB,EAElC,YAAK,KAAOA,EACL,KAAK,IAAMA,CACtB,CACE,OAAQ,CACN,OAAO,KAAK,IAAI,KAAK,MAAM,CAAC,CAAC,CACjC,CACE,QAAS,CACP,OAAOE,EAAa,KAAK,IAAK,KAAK,MAAM,CAAC,CAAC,CAC/C,CACE,MAAO,CACL,IAAI1iB,EAAS,KAAK,OAAM,EACpBmiB,EAAQ,IAAI,WAAWniB,CAAM,EAC7B2iB,EAAM,KAAK,MAAMR,EAAM,MAAM,EACjC,OAAAA,EAAM,IAAI,KAAK,IAAI,SAASQ,EAAKA,EAAM3iB,CAAM,CAAC,EACvCmiB,CACX,GAEIN,EACAO,EACAQ,EACJ,GAAI,OAAO,YAAgB,KAAe,OAAO,YAAgB,IAAa,CAC5E,IAAIC,EAAU,IAAI,YACdC,EAAU,IAAI,YAClBjB,EAAc7jB,GAAS6kB,EAAQ,OAAO7kB,CAAI,EAC1CokB,EAAcD,GAAUW,EAAQ,OAAOX,CAAK,EAC5CS,EAAkB,8BACpB,SAAW,OAAO,OAAW,IAC3Bf,EAAc7jB,GAAS,OAAO,KAAKA,CAAI,EACvCokB,EAAcD,GAAU,CACtB,GAAI,CAAE,OAAA/iB,EAAQ,WAAAhB,EAAY,WAAAM,CAAU,EAAKyjB,EACzC,OAAO,OAAO,KAAK/iB,EAAQhB,EAAYM,CAAU,EAAE,SAAQ,CAC/D,EACEkkB,EAAkB,sBAElB,OAAM,IAAI,MAAM,sBAAsB,EAExC,GAAI,EAAEf,EAAW,EAAE,YAAa,YAC9B,MAAM,IAAI,MAAM,yBAAyBe,CAAe;AAAA;AAAA;AAAA;AAAA;AAAA,CAKzD,EACD,SAASF,EAAatjB,EAAQoB,EAAQ,CACpC,OAAOpB,EAAOoB,GAAQ,EAAIpB,EAAOoB,GAAQ,GAAK,EAAIpB,EAAOoB,GAAQ,GAAK,GAAKpB,EAAOoB,GAAQ,GAAK,EACjG,CACA,SAASyhB,EAAc7iB,EAAQ5C,EAAOgE,EAAQ,CAC5CpB,EAAOoB,GAAQ,EAAIhE,EACnB4C,EAAOoB,GAAQ,EAAIhE,GAAS,EAC5B4C,EAAOoB,GAAQ,EAAIhE,GAAS,GAC5B4C,EAAOoB,GAAQ,EAAIhE,GAAS,EAC9B,CAGA,IAAIumB,EAAQ,KAAK,UACbC,EAAuB,UACvBC,EAA2B,SAC/B,SAASC,EAA2BrN,EAAQsN,EAAM,CAChD,MAAMC,EAAS,CAAA,EACf,UAAW5mB,KAASqZ,EAAQ,CAE1B,GADAwN,GAAoB7mB,EAAO2mB,CAAI,EAC3B3mB,EAAM,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,WAAW2mB,CAAI,KAAK3mB,CAAK,EAAE,EACxE4mB,EAAO,KAAK5mB,CAAK,CACrB,CACE,OAAO4mB,EAAO,KAAK,GAAG,CACxB,CACA,IAAIE,EAAgB,IAAM,KACtBC,EAAiB/mB,GAAU,OAAOA,GAAU,UAAY,KAAO,YAC/DgnB,EAAgBhnB,GAAU,OAAOA,GAAU,SAAW,KAAO,WAC7DinB,EAAgBjnB,GAAUA,aAAiB,OAAS,KAAO,kBAC3DknB,EAAiBlnB,GAAU,OAAOA,GAAU,UAAYA,KAAWA,EAAQ,GAAK,KAAO,aACvFmnB,GAAyBnnB,GAAU,OAAOA,GAAU,UAAYA,KAAWA,EAAQ,IAAMA,GAAS,GAAKA,GAAS,MAAQ,KAAO,sBAC/HonB,GAAkBpnB,GAAU,OAAOA,GAAU,WAAa,KAAO,aACjEqnB,GAAernB,GAAU,MAAM,QAAQA,CAAK,EAAI,KAAO,WACvDsnB,GAAwBtnB,GAAU,MAAM,QAAQA,CAAK,GAAKA,EAAM,MAAOyD,GAAM,OAAOA,GAAM,QAAQ,EAAI,KAAO,sBAC7G8jB,GAAgBvnB,GAAU,OAAOA,GAAU,UAAYA,IAAU,MAAQ,CAAC,MAAM,QAAQA,CAAK,EAAI,KAAO,YACxGwnB,GAAqBxnB,GAAU,OAAOA,GAAU,UAAYA,IAAU,KAAO,KAAO,wBACpFynB,GAA2BznB,GAAUA,aAAiB,YAAY,OAAS,KAAO,uBAClF0nB,GAAsB1nB,GAAU,OAAOA,GAAU,UAAY,CAAC,MAAM,QAAQA,CAAK,EAAI,KAAO,oBAC5F2nB,GAAyB3nB,GAAU,OAAOA,GAAU,UAAY,OAAOA,GAAU,UAAY,KAAO,wBACpG4nB,GAAwB5nB,GAAU,OAAOA,GAAU,UAAY,OAAOA,GAAU,UAAYA,IAAU,MAAQ,CAAC,MAAM,QAAQA,CAAK,EAAI,KAAO,wBAC7I6nB,GAAgC7nB,GAAU,OAAOA,GAAU,UAAY,MAAM,QAAQA,CAAK,GAAKA,EAAM,MAAOyD,GAAM,OAAOA,GAAM,QAAQ,EAAI,KAAO,kCAClJqkB,GAA4B9nB,GAAU,OAAOA,GAAU,UAAYA,aAAiB,WAAa,KAAO,2BACxG+nB,GAAqB/nB,GAAU,OAAOA,GAAU,UAAYA,aAAiB,IAAM,KAAO,oBAC9F,SAASgoB,EAAQvN,EAAQ8K,EAAMznB,EAAKmqB,EAAU,CAC5C,IAAIjoB,GAAQya,EAAO3c,CAAG,EAEtB,GADAynB,EAAKznB,EAAM,EAAE,EAAI,GACbkC,KAAU,OAAQ,OACtB,IAAIkoB,GAASD,EAASjoB,EAAK,EAC3B,GAAIkoB,KAAW,KAAM,MAAM,IAAI,MAAM,GAAG3B,EAAMzoB,CAAG,CAAC,YAAYoqB,EAAM,EAAE,EACtE,OAAOloB,EACT,CACA,SAASmoB,GAAqB1N,EAAQ8K,EAAM6C,EAAO,CACjD,QAAStqB,KAAO2c,EACd,GAAI,EAAE3c,KAAOynB,GACX,MAAM,IAAI,MAAM,kBAAkB6C,CAAK,KAAK7B,EAAMzoB,CAAG,CAAC,EAAE,CAG9D,CACA,SAASuqB,GAA0B/S,EAAS,CAC1C,IAAIiQ,EAAuB,OAAO,OAAO,IAAI,EACzC+C,EAAUN,EAAQ1S,EAASiQ,EAAM,UAAWwC,EAAiB,EAC7DQ,EAAaP,EAAQ1S,EAASiQ,EAAM,aAAckC,EAAuB,EACzEe,GAASR,EAAQ1S,EAASiQ,EAAM,SAAUwB,CAAa,EAC3D,OAAAoB,GAAqB7S,EAASiQ,EAAM,sBAAsB,EACnD,CACL,QAAA+C,EACA,WAAAC,EACA,OAAAC,GAEJ,CACA,SAASC,GAAoBC,EAAa,CACxC,IAAIC,EACJ,GAAID,IAAgB,OAAQ,CAC1BC,EAA4B,OAAO,OAAO,IAAI,EAC9C,QAAS7qB,KAAO4qB,EAAa,CAC3B,IAAI1oB,EAAQ0oB,EAAY5qB,CAAG,EAC3B,GAAI,OAAOkC,GAAU,UAAYA,IAAU,GACzC2oB,EAAU7qB,CAAG,EAAIkC,MAEjB,OAAM,IAAI,MAAM,YAAYumB,EAAMzoB,CAAG,CAAC,qDAAqD,CAEnG,CACA,CACE,OAAO6qB,CACT,CACA,SAASC,GAAaC,EAAOvT,EAASiQ,EAAMuD,EAAOC,GAAiB,CAClE,IAAIC,GAAQhB,EAAQ1S,EAASiQ,EAAM,QAASwB,CAAa,EACrDkC,GAAWjB,EAAQ1S,EAASiQ,EAAM,WAAYyB,CAAY,EAC1DkC,GAAWlB,EAAQ1S,EAASiQ,EAAM,WAAY2B,CAAa,EAC3D8B,KAAU,OAAQH,EAAM,KAAK,WAAWG,EAAK,EAAE,EAC1CF,GAAOD,EAAM,KAAK,cAAc,EACzCA,EAAM,KAAK,eAAeI,IAAYF,EAAe,EAAE,EACvDF,EAAM,KAAK,eAAeK,IAAY,CAAC,EAAE,CAC3C,CACA,SAASrC,GAAoB7mB,EAAO2mB,EAAM7oB,EAAK,CAC7C,GAAI,OAAOkC,GAAU,SACnB,MAAM,IAAI,MAAM,sBAAsB2mB,CAAI,GAAG7oB,IAAQ,OAAS,IAAMyoB,EAAMzoB,CAAG,EAAI,EAAE,wBAAwB,OAAOkC,CAAK,UAAU,EAEnI,OAAOA,CACT,CACA,SAASmpB,GAAgBN,EAAOvT,EAASiQ,EAAM,CAC7C,IAAI6D,EAAgBpB,EAAQ1S,EAASiQ,EAAM,gBAAiByB,CAAY,EACpEqC,GAAarB,EAAQ1S,EAASiQ,EAAM,aAAcyB,CAAY,EAC9DsC,GAAiBtB,EAAQ1S,EAASiQ,EAAM,iBAAkBwB,CAAa,EACvE7nB,GAAS8oB,EAAQ1S,EAASiQ,EAAM,SAAUsC,EAA4B,EACtE0B,GAASvB,EAAQ1S,EAASiQ,EAAM,SAAUyB,CAAY,EACtDwC,EAAaxB,EAAQ1S,EAASiQ,EAAM,aAAcyB,CAAY,EAC9DyC,GAAczB,EAAQ1S,EAASiQ,EAAM,cAAe0B,CAAY,EAChEyC,GAAe1B,EAAQ1S,EAASiQ,EAAM,eAAgB0B,CAAY,EAClE0C,GAAe3B,EAAQ1S,EAASiQ,EAAM,eAAgBwB,CAAa,EACnE6C,GAAS5B,EAAQ1S,EAASiQ,EAAM,SAAUwB,CAAa,EACvD8C,GAAe7B,EAAQ1S,EAASiQ,EAAM,eAAgBwB,CAAa,EACnE+C,GAAmB9B,EAAQ1S,EAASiQ,EAAM,mBAAoBwB,CAAa,EAC3EgD,GAAoB/B,EAAQ1S,EAASiQ,EAAM,oBAAqBwB,CAAa,EAC7EiD,GAAYhC,EAAQ1S,EAASiQ,EAAM,YAAa2B,CAAa,EAC7D+C,GAAOjC,EAAQ1S,EAASiQ,EAAM,OAAQ+B,EAAoB,EAC1D4C,GAAalC,EAAQ1S,EAASiQ,EAAM,aAAc+B,EAAoB,EACtE6C,GAAUnC,EAAQ1S,EAASiQ,EAAM,UAAWyB,CAAY,EACxDoD,GAAcpC,EAAQ1S,EAASiQ,EAAM,cAAewB,CAAa,EACjEsD,EAAoBrC,EAAQ1S,EAASiQ,EAAM,oBAAqBwB,CAAa,EAC7EuD,EAAMtC,EAAQ1S,EAASiQ,EAAM,MAAOyB,CAAY,EAChDuD,EAAavC,EAAQ1S,EAASiQ,EAAM,aAAcyB,CAAY,EAC9DwD,EAAcxC,EAAQ1S,EAASiQ,EAAM,cAAeyB,CAAY,EAChEyD,GAAkBzC,EAAQ1S,EAASiQ,EAAM,kBAAmByB,CAAY,EACxE0D,GAAS1C,EAAQ1S,EAASiQ,EAAM,SAAUwB,CAAa,EACvD4D,EAAiB3C,EAAQ1S,EAASiQ,EAAM,iBAAkBwB,CAAa,EACvE6D,GAAS5C,EAAQ1S,EAASiQ,EAAM,SAAUgC,EAAY,EACtDsD,EAAc7C,EAAQ1S,EAASiQ,EAAM,cAAegC,EAAY,EAChEuD,EAAY9C,EAAQ1S,EAASiQ,EAAM,YAAagC,EAAY,EAC5DwD,GAAO/C,EAAQ1S,EAASiQ,EAAM,OAAQ+B,EAAoB,EAC1D0D,GAAYhD,EAAQ1S,EAASiQ,EAAM,YAAawB,CAAa,EAC7DkE,GAAWjD,EAAQ1S,EAASiQ,EAAM,WAAYyB,CAAY,EAC1DkE,GAAclD,EAAQ1S,EAASiQ,EAAM,cAAeqC,EAAoB,EACxEuD,GAAWnD,EAAQ1S,EAASiQ,EAAM,WAAY+B,EAAoB,EAiBtE,GAhBI8B,GAAeP,EAAM,KAAK,oBAAoBO,CAAa,EAAE,EAC7DC,KAAe,QAAQR,EAAM,KAAK,iBAAiBQ,EAAU,EAAE,EAC/DC,KAAmB,QAAQT,EAAM,KAAK,qBAAqBS,EAAc,EAAE,EAC3EpqB,IAAQ2pB,EAAM,KAAK,YAAYnC,EAA2B,MAAM,QAAQxnB,EAAM,EAAIA,GAAS,CAACA,EAAM,EAAG,QAAQ,CAAC,EAAE,EAChHqqB,IAAQV,EAAM,KAAK,YAAYU,EAAM,EAAE,EACvCC,GAAYX,EAAM,KAAK,iBAAiBW,CAAU,EAAE,EACpDyB,IAAUpC,EAAM,KAAK,cAAcoC,EAAQ,EAAE,EAC7CC,IAAarC,EAAM,KAAK,kBAAkB,OAAOqC,IAAgB,SAAWA,GAAc,KAAK,UAAUA,EAAW,CAAC,EAAE,EACvHtB,IAAQf,EAAM,KAAK,UAAU,EAC7BgB,IAAchB,EAAM,KAAK,iBAAiB,EAC1CiB,IAAkBjB,EAAM,KAAK,qBAAqB,EAClDkB,IAAmBlB,EAAM,KAAK,sBAAsB,EACpDmB,IAAWnB,EAAM,KAAK,gBAAgBmB,EAAS,EAAE,EACjDG,IAAStB,EAAM,KAAK,aAAasB,EAAO,EAAE,EAC1CC,KAAgB,QAAQvB,EAAM,KAAK,kBAAkBuB,EAAW,EAAE,EAClEC,GAAmBxB,EAAM,KAAK,sBAAsB,EACpDoB,GAAM,QAAStD,MAAQsD,GAAMpB,EAAM,KAAK,UAAUhC,GAAoBF,GAAM,MAAM,CAAC,EAAE,EAYzF,GAXIuD,IAAYrB,EAAM,KAAK,iBAAiBnC,EAA2BwD,GAAY,YAAY,CAAC,EAAE,EAC9FiB,IAAUtC,EAAM,KAAK,eAAenC,EAA2ByE,GAAU,WAAW,CAAC,EAAE,EACvF1B,IAAaZ,EAAM,KAAK,kBAAkBuC,GAAmB3B,EAAW,CAAC,EAAE,EAC3EC,IAAcb,EAAM,KAAK,mBAAmBuC,GAAmB1B,EAAY,CAAC,EAAE,EAC9EC,KAAiB,QAAQd,EAAM,KAAK,mBAAmBc,EAAY,EAAE,EACrEW,GAAKzB,EAAM,KAAK,SAASyB,CAAG,EAAE,EAC9BC,GAAY1B,EAAM,KAAK,iBAAiB0B,CAAU,EAAE,EACpDC,GAAa3B,EAAM,KAAK,kBAAkB2B,CAAW,EAAE,EACvDC,IAAiB5B,EAAM,KAAK,uBAAuB4B,EAAe,EAAE,EACpEC,IAAQ7B,EAAM,KAAK,WAAW,EAC9B8B,GAAgB9B,EAAM,KAAK,oBAAoB,EAC/C+B,GACF,QAAS9sB,MAAO8sB,GAAQ,CACtB,GAAI9sB,GAAI,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,mBAAmBA,EAAG,EAAE,EACnE+qB,EAAM,KAAK,YAAY/qB,EAAG,IAAI+oB,GAAoB+D,GAAO9sB,EAAG,EAAG,SAAUA,EAAG,CAAC,EAAE,CACrF,CAEE,GAAI+sB,EACF,QAAS/sB,MAAO+sB,EAAa,CAC3B,GAAI/sB,GAAI,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,yBAAyBA,EAAG,EAAE,EACzE+qB,EAAM,KAAK,kBAAkB/qB,EAAG,IAAI+oB,GAAoBgE,EAAY/sB,EAAG,EAAG,eAAgBA,EAAG,CAAC,EAAE,CACtG,CAEE,GAAIgtB,EACF,QAAShtB,MAAOgtB,EAAW,CACzB,GAAIhtB,GAAI,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,sBAAsBA,EAAG,EAAE,EACtE,MAAMkC,GAAQ8qB,EAAUhtB,EAAG,EAC3B,GAAI,OAAOkC,IAAU,UAAW,MAAM,IAAI,MAAM,gCAAgCumB,EAAMzoB,EAAG,CAAC,yBAAyB,OAAOkC,EAAK,UAAU,EACzI6oB,EAAM,KAAK,eAAe/qB,EAAG,IAAIkC,EAAK,EAAE,CAC9C,CAEE,GAAI+qB,GAAM,QAAS7mB,MAAM6mB,GAAMlC,EAAM,KAAK,UAAUhC,GAAoB3iB,GAAI,MAAM,CAAC,EAAE,EACjF8mB,IAAWnC,EAAM,KAAK,cAAc,CAC1C,CACA,SAASwC,GAAqBC,EAAUhW,EAASwT,EAAOC,EAAiBwC,GAAc,CACrF,IAAIte,GACJ,IAAI4b,GAAQ,CAAA,EACR2C,GAAU,CAAA,EACVjG,EAAuB,OAAO,OAAO,IAAI,EACzCkG,GAAgB,KAChBC,GAAkB,KACtB9C,GAAaC,GAAOvT,EAASiQ,EAAMuD,EAAOC,CAAe,EACzDI,GAAgBN,GAAOvT,EAASiQ,CAAI,EACpC,IAAIoG,GAAY3D,EAAQ1S,EAASiQ,EAAM,YAAaoC,EAAqB,EACrEiE,GAAS5D,EAAQ1S,EAASiQ,EAAM,SAAUwB,CAAa,EACvD8E,GAAY7D,EAAQ1S,EAASiQ,EAAM,YAAawB,CAAa,EAC7D+E,GAAmB9D,EAAQ1S,EAASiQ,EAAM,mBAAoBwB,CAAa,EAC3EgF,GAAW/D,EAAQ1S,EAASiQ,EAAM,WAAYwB,CAAa,EAC3DiF,GAAUhE,EAAQ1S,EAASiQ,EAAM,UAAWyB,CAAY,EACxDiF,GAASjE,EAAQ1S,EAASiQ,EAAM,SAAUyB,CAAY,EACtDkF,GAAUlE,EAAQ1S,EAASiQ,EAAM,UAAWyB,CAAY,EACxDmF,GAAWnE,EAAQ1S,EAASiQ,EAAM,WAAYyB,CAAY,EAC1DoF,GAAoBpE,EAAQ1S,EAASiQ,EAAM,oBAAqB+B,EAAoB,EACpF+E,EAAiBrE,EAAQ1S,EAASiQ,EAAM,YAAa+B,EAAoB,EACzEgF,EAAatE,EAAQ1S,EAASiQ,EAAM,aAAc+B,EAAoB,EACtEiF,EAAavE,EAAQ1S,EAASiQ,EAAM,aAAc+B,EAAoB,EACtEkF,EAAWxE,EAAQ1S,EAASiQ,EAAM,WAAY+B,EAAoB,EAClEmF,GAAWzE,EAAQ1S,EAASiQ,EAAM,WAAYyB,CAAY,EAC1D0F,GAAQ1E,EAAQ1S,EAASiQ,EAAM,QAASgC,EAAY,EACpDoF,EAAS3E,EAAQ1S,EAASiQ,EAAM,SAAUgC,EAAY,EACtDqF,GAAe5E,EAAQ1S,EAASiQ,EAAM,eAAgBgC,EAAY,EAClEsF,EAAa7E,EAAQ1S,EAASiQ,EAAM,aAAcyB,CAAY,EAC9D8F,EAAa9E,EAAQ1S,EAASiQ,EAAM,aAAcyB,CAAY,EAC9D+F,GAAa/E,EAAQ1S,EAASiQ,EAAM,aAAcyB,CAAY,EAC9DgG,GAAahF,EAAQ1S,EAASiQ,EAAM,aAAcyB,CAAY,EAC9DiG,GAASjF,EAAQ1S,EAASiQ,EAAM,SAAU+B,EAAoB,EAC9D4F,GAASlF,EAAQ1S,EAASiQ,EAAM,SAAUgC,EAAY,EACtD4F,GAASnF,EAAQ1S,EAASiQ,EAAM,SAAUgC,EAAY,EACtD6F,GAAcpF,EAAQ1S,EAASiQ,EAAM,cAAeiC,EAAiB,EACrE6F,GAAgBrF,EAAQ1S,EAASiQ,EAAM,gBAAiByB,CAAY,EACpEsG,GAAQtF,EAAQ1S,EAASiQ,EAAM,QAASgC,EAAY,EACpDgG,IAAStgB,GAAK+a,EAAQ1S,EAASiQ,EAAM,QAASwB,CAAa,IAAM,KAAO9Z,GAAKse,GAC7EiC,GAAiBxF,EAAQ1S,EAASiQ,EAAM,iBAAkBwB,CAAa,EACvE2B,GAAcV,EAAQ1S,EAASiQ,EAAM,cAAegC,EAAY,EAqBpE,GApBAhC,EAAK,QAAU,GACf4C,GAAqB7S,EAASiQ,EAAM,MAAM+F,CAAQ,SAAS,EACvDK,IAAW9C,GAAM,KAAK,cAAc8C,KAAc,GAAO,GAAK,IAAIA,EAAS,EAAE,EAAE,EAC/EC,IAAQ/C,GAAM,KAAK,UAAU,EAC7B2E,IAAgB3E,GAAM,KAAK,mBAAmB,EAC9CgD,IAAWhD,GAAM,KAAK,aAAa,EACnCiD,IAAkBjD,GAAM,KAAK,qBAAqB,EAClDkD,IAAUlD,GAAM,KAAK,YAAY,EACjCmD,IAASnD,GAAM,KAAK,aAAamD,EAAO,EAAE,EAC1CC,IAAQpD,GAAM,KAAK,YAAYoD,EAAM,EAAE,EACvCC,IAASrD,GAAM,KAAK,aAAaqD,EAAO,EAAE,EAC1CC,IAAUtD,GAAM,KAAK,cAAcsD,EAAQ,EAAE,EAC7CM,IAAU5D,GAAM,KAAK,cAAc4D,EAAQ,EAAE,EAC7CL,IAAmBvD,GAAM,KAAK,wBAAwBnC,EAA2B0F,GAAmB,mBAAmB,CAAC,EAAE,EAC1HS,GAAYhE,GAAM,KAAK,iBAAiBgE,CAAU,EAAE,EACpDC,GAAYjE,GAAM,KAAK,iBAAiBiE,CAAU,EAAE,EACpDC,IAAYlE,GAAM,KAAK,iBAAiBkE,EAAU,EAAE,EACpDC,IAAYnE,GAAM,KAAK,iBAAiBmE,EAAU,EAAE,EACpDV,GAAYzD,GAAM,KAAK,iBAAiBnC,EAA2B4F,EAAY,YAAY,CAAC,EAAE,EAC9FC,GAAY1D,GAAM,KAAK,gBAAgBnC,EAA2B6F,EAAY,WAAW,CAAC,EAAE,EAC5FC,EAAU,QAAS5tB,MAAQ4tB,EAAU3D,GAAM,KAAK,cAAchC,GAAoBjoB,GAAM,UAAU,CAAC,EAAE,EACzG,GAAI8tB,GACF,QAASe,MAAOf,GAAO,CACrB,GAAIe,GAAI,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,kCAAkCA,EAAG,EAAE,EAClF5E,GAAM,KAAK,WAAW4E,EAAG,IAAI5G,GAAoB6F,GAAMe,EAAG,EAAG,QAASA,EAAG,CAAC,EAAE,CAClF,CAEE,GAAIP,GACF,QAAS5vB,MAAQ4vB,GAAQ,CACvB,GAAI5vB,GAAK,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,6BAA6BA,EAAI,EAAE,EAC/EurB,GAAM,KAAK,YAAYvrB,EAAI,IAAIupB,GAAoBqG,GAAO5vB,EAAI,EAAG,SAAUA,EAAI,CAAC,EAAE,CACxF,CAEE,GAAI6vB,GACF,QAAS7vB,MAAQ6vB,GAAQ,CACvB,GAAI7vB,GAAK,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,6BAA6BA,EAAI,EAAE,EAC/EurB,GAAM,KAAK,YAAYvrB,EAAI,IAAIupB,GAAoBsG,GAAO7vB,EAAI,EAAG,SAAUA,EAAI,CAAC,EAAE,CACxF,CAEE,GAAI2vB,GAAQ,QAAS3nB,MAAQ2nB,GAAQpE,GAAM,KAAK,YAAYhC,GAAoBvhB,GAAM,QAAQ,CAAC,EAAE,EACjG,GAAIqnB,EACF,QAAS1Y,MAAO0Y,EAAQ,CACtB,GAAI1Y,GAAI,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,6BAA6BA,EAAG,EAAE,EAC7E4U,GAAM,KAAK,YAAY5U,EAAG,IAAI4S,GAAoB8F,EAAO1Y,EAAG,EAAG,SAAUA,EAAG,CAAC,EAAE,CACrF,CAEE,GAAI2Y,GACF,QAAS3Y,MAAO2Y,GAAc,CAC5B,GAAI3Y,GAAI,QAAQ,GAAG,GAAK,EAAG,MAAM,IAAI,MAAM,0BAA0BA,EAAG,EAAE,EAC1E4U,GAAM,KAAK,mBAAmB5U,EAAG,IAAI4S,GAAoB+F,GAAa3Y,EAAG,EAAG,gBAAiBA,EAAG,CAAC,EAAE,CACzG,CAEE,GAAImZ,GACF,GAAI,MAAM,QAAQA,EAAW,EAC3B,QAASjuB,GAAI,EAAGyP,GAAIwe,GAAY,OAAQjuB,GAAIyP,GAAGzP,KAAK,CAClD,IAAIuuB,GAAaN,GAAYjuB,EAAC,EAC9B,GAAI,OAAOuuB,IAAe,UAAYA,KAAe,KAAM,CACzD,IAAIC,GAAiC,OAAO,OAAO,IAAI,EACnD9d,GAAQmY,EAAQ0F,GAAYC,GAAgB,KAAM3G,CAAY,EAC9DlX,GAASkY,EAAQ0F,GAAYC,GAAgB,MAAO3G,CAAY,EAEpE,GADAmB,GAAqBuF,GAAYC,GAAgB,2BAA6BxuB,EAAC,EAC3E0Q,KAAU,OAAQ,MAAM,IAAI,MAAM,kDAAoD1Q,EAAC,EAC3F,GAAI2Q,KAAW,OAAQ,MAAM,IAAI,MAAM,mDAAqD3Q,EAAC,EAC7FqsB,GAAQ,KAAK,CAAC1b,GAAQD,EAAK,CAAC,CACtC,MACU2b,GAAQ,KAAK,CAAC,GAAI3E,GAAoB6G,GAAY,wBAA0BvuB,EAAC,CAAC,CAAC,CAEzF,KAEM,SAASrB,MAAOsvB,GACd5B,GAAQ,KAAK,CAAC1tB,GAAK+oB,GAAoBuG,GAAYtvB,EAAG,EAAG,cAAeA,EAAG,CAAC,CAAC,EAInF,GAAIwvB,GAAO,CACT,IAAIM,GAA4B,OAAO,OAAO,IAAI,EAC9CC,GAAW7F,EAAQsF,GAAOM,GAAW,WAAY9F,EAAwB,EACzEgG,GAAa9F,EAAQsF,GAAOM,GAAW,aAAc5G,CAAY,EACjE+G,GAAa/F,EAAQsF,GAAOM,GAAW,aAAc5G,CAAY,EACjEgH,GAAUhG,EAAQsF,GAAOM,GAAW,SAAU5G,CAAY,EAC9DmB,GAAqBmF,GAAOM,GAAW,mBAAmB,EACtDG,IAAYlF,GAAM,KAAK,gBAAgBkF,EAAU,EAAE,EACnDC,IAASnF,GAAM,KAAK,YAAYmF,EAAO,EAAE,EACzCF,KAAYpC,GAAkBoC,IAC9B,OAAOD,IAAa,SAAUpC,GAAgBpG,EAAWwI,EAAQ,EAC5DA,cAAoB,aAAYpC,GAAgBoC,GAC7D,CACE,IAAII,GAAY,CAAA,EAChB,GAAI5B,EACF,QAASrsB,MAASqsB,EAChBrsB,IAAS,GACTiuB,GAAU,KAAKjuB,EAAK,EAGxB,MAAO,CACL,QAAAwrB,GACA,MAAA3C,GACA,MAAA0E,GACA,cAAA9B,GACA,gBAAAC,GACA,cAAA2B,GACA,UAAAY,GACA,YAAaxF,GAAoBC,EAAW,EAEhD,CACA,SAASwF,GAAyB5C,EAAUhW,EAASwT,EAAOC,EAAiB,CAC3E,IAAIF,GAAQ,CAAA,EACRtD,GAAuB,OAAO,OAAO,IAAI,EAC7CqD,GAAaC,GAAOvT,EAASiQ,GAAMuD,EAAOC,CAAe,EACzDI,GAAgBN,GAAOvT,EAASiQ,EAAI,EACpC,IAAIoG,GAAY3D,EAAQ1S,EAASiQ,GAAM,YAAaoC,EAAqB,EACrEoG,GAAa/F,EAAQ1S,EAASiQ,GAAM,aAAcyB,CAAY,EAC9D2F,EAAS3E,EAAQ1S,EAASiQ,GAAM,SAAUyB,CAAY,EACtDkG,GAASlF,EAAQ1S,EAASiQ,GAAM,SAAUyB,CAAY,EACtDmG,GAASnF,EAAQ1S,EAASiQ,GAAM,SAAUyB,CAAY,EACtD0B,GAAcV,EAAQ1S,EAASiQ,GAAM,cAAegC,EAAY,EACpE,OAAAY,GAAqB7S,EAASiQ,GAAM,MAAM+F,CAAQ,SAAS,EACvDK,IAAW9C,GAAM,KAAK,eAAe8C,KAAc,GAAO,WAAaA,EAAS,EAAE,EAClFoC,IAAYlF,GAAM,KAAK,gBAAgBkF,EAAU,EAAE,EACnDpB,GAAQ9D,GAAM,KAAK,YAAY8D,CAAM,EAAE,EACvCO,IAAQrE,GAAM,KAAK,YAAYqE,EAAM,EAAE,EACvCC,IAAQtE,GAAM,KAAK,YAAYsE,EAAM,EAAE,EACpC,CACL,MAAAtE,GACA,YAAaJ,GAAoBC,EAAW,EAEhD,CACA,SAASyF,GAAcC,EAAU,CAC/B,MAAMC,EAAwB,CAAA,EACxBC,EAAY,CAAE,SAAU,GAAO,OAAQ,EAAE,EAC/C,IAAIC,EAAoB,CAAA,EACpBC,GAAgB,EAChBC,GAAe,EACfC,GAAS,IAAI,WAAW,GAAK,IAAI,EACjCC,GAAa,EACbC,EAAkBC,IAAU,CAC9B,IAAIC,GAAQH,GAAaE,GAAM,OAC/B,GAAIC,GAAQJ,GAAO,OAAQ,CACzB,IAAIK,EAAO,IAAI,WAAWD,GAAQ,CAAC,EACnCC,EAAK,IAAIL,EAAM,EACfA,GAASK,CACf,CACIL,GAAO,IAAIG,GAAOF,EAAU,EAC5BA,IAAcE,GAAM,OACpB,IAAI7qB,EAAS,EACb,KAAOA,EAAS,GAAK2qB,IAAY,CAC/B,IAAInrB,EAAS0iB,EAAawI,GAAQ1qB,CAAM,EACxC,GAAIA,EAAS,EAAIR,EAASmrB,GACxB,MAEF3qB,GAAU,EACVgrB,GAAqBN,GAAO,SAAS1qB,EAAQA,EAASR,CAAM,CAAC,EAC7DQ,GAAUR,CAChB,CACQQ,EAAS,IACX0qB,GAAO,WAAW,EAAG1qB,EAAQ2qB,EAAU,EACvCA,IAAc3qB,EAEpB,EACMirB,GAAcC,IAAU,CAC1BZ,EAAU,SAAW,GACjBY,KAAOZ,EAAU,OAAS,MAAQY,GAAM,SAAWA,KACvD,MAAM1tB,GAAO,0BAA4B8sB,EAAU,OACnD,QAAStgB,KAAMugB,EACbA,EAAkBvgB,CAAE,EAAExM,GAAM,IAAI,EAElC+sB,EAAoB,CAAA,CACxB,EACMY,GAAc,CAAC7vB,GAAMU,GAAOovB,IAAa,CAC3C,GAAId,EAAU,SAAU,OAAOc,EAAS,mCAAqCd,EAAU,OAAQ,IAAI,EACnG,IAAItgB,EAAKwgB,KACTD,EAAkBvgB,CAAE,EAAI,CAACkhB,EAAO1P,IAAa,CAC3C,GAAI,CACF4P,EAASF,EAAO1P,CAAQ,CAChC,QAAO,CACKlgB,IAAMA,GAAK,MAAK,CAC5B,CACA,EACQA,IAAMA,GAAK,IAAG,EAClB8uB,EAAS,aAAanJ,EAAa,CAAE,GAAAjX,EAAI,UAAW,GAAM,MAAAhO,EAAK,CAAE,CAAC,CACtE,EACMqvB,GAAe,CAACrhB,GAAIhO,KAAU,CAChC,GAAIsuB,EAAU,SAAU,MAAM,IAAI,MAAM,mCAAqCA,EAAU,MAAM,EAC7FF,EAAS,aAAanJ,EAAa,CAAE,GAAAjX,GAAI,UAAW,GAAO,MAAAhO,EAAK,CAAE,CAAC,CACvE,EACMsvB,GAAgB,CAACthB,GAAIuhB,KAAY3L,EAAQ,KAAM,KAAM,WAAa,CACpE,GAAI,CACF,GAAI2L,GAAQ,UAAY,OAAQ,CAC9BF,GAAarhB,GAAI,EAAE,EACnB,MACR,CACM,GAAI,OAAOuhB,GAAQ,KAAQ,SAAU,CACnC,MAAMC,EAAmBnB,EAAsBkB,GAAQ,GAAG,EAC1D,GAAI,CAACC,EACH,OAEF,MAAMJ,EAAWI,EAAiBD,GAAQ,OAAO,EACjD,GAAIH,EAAU,CACZ,MAAMA,EAASphB,GAAIuhB,EAAO,EAC1B,MACV,CACA,CACM,MAAM,IAAI,MAAM,oBAAsBA,GAAQ,OAAO,CAC3D,OAAapL,EAAG,CACV,MAAMsL,EAAS,CAACC,GAAsBvL,EAAGiK,EAAU,KAAM,OAAQ,EAAE,CAAC,EACpE,GAAI,CACFiB,GAAarhB,GAAI,CAAE,OAAAyhB,EAAQ,CACnC,MAAmB,CACnB,CACA,CACA,CAAG,EACGE,GAAgB,GAChBX,GAAwBrJ,IAAU,CACpC,GAAIgK,GAAe,CACjBA,GAAgB,GAChB,IAAIC,EAAgB,OAAO,aAAa,GAAGjK,EAAK,EAChD,GAAIiK,IAAkB,UACpB,MAAM,IAAI,MAAM,8EAAmFrJ,EAAMqJ,CAAa,CAAC,EAAE,EAE3H,MACN,CACI,IAAI1K,GAASQ,EAAaC,EAAK,EAC/B,GAAIT,GAAO,UACToK,GAAcpK,GAAO,GAAIA,GAAO,KAAK,MAChC,CACL,IAAIkK,EAAWb,EAAkBrJ,GAAO,EAAE,EAC1C,OAAOqJ,EAAkBrJ,GAAO,EAAE,EAC9BA,GAAO,MAAM,MAAOkK,EAASlK,GAAO,MAAM,MAAO,EAAE,EAClDkK,EAAS,KAAMlK,GAAO,KAAK,CACtC,CACA,EA8JE,MAAO,CACL,eAAA0J,EACA,WAAAK,GACA,QAAS,CACP,eAjKiB,CAAC,CAAE,SAAA3D,GAAU,KAAAhsB,GAAM,QAAAgW,EAAS,MAAAwT,EAAO,UAAA+G,EAAW,SAAAT,KAAe,CAChF,IAAIU,GAAW,EACf,MAAMC,GAAWtB,KACXe,EAAmB,CAAA,EACnBQ,GAAY,CAChB,KAAM,CACA,EAAEF,KAAa,GACbxwB,IAAMA,GAAK,IAAG,CAE5B,EACM,OAAQ,CACF,EAAEwwB,KAAa,IACjB,OAAOzB,EAAsB0B,EAAQ,EACjCzwB,IAAMA,GAAK,MAAK,EAE9B,GAEI+uB,EAAsB0B,EAAQ,EAAIP,EAClCQ,GAAU,IAAG,EACbC,GACE3E,GACAyE,GACAZ,GACAE,GACAW,GACA5B,EACAoB,EACAla,EACAwT,EACA+G,EACA,CAACK,EAAKC,IAAQ,CACZ,GAAI,CACFf,EAASc,EAAKC,CAAG,CAC3B,QAAS,CACCH,GAAU,MAAK,CACzB,CACA,EAEA,EA4HM,UA3Ha,CAAC,CAAE,SAAA1E,GAAU,KAAAhsB,GAAM,MAAAuQ,EAAO,QAAAyF,EAAS,MAAAwT,EAAO,GAAAsH,EAAI,SAAAhB,MAAe,CAC5E,MAAMiB,GAAUC,GAAiB,EACjC,IAAIC,EAASC,IAAc,CACzB,GAAI,CACF,GAAI,OAAO3gB,GAAU,UAAY,EAAEA,aAAiB,YAClD,MAAM,IAAI,MAAM,2DAA2D,EAC7E,GAAI,CACF,MAAAgZ,EACA,YAAAH,GACEwF,GAAyB5C,GAAUhW,EAASwT,EAAOrC,CAAwB,EAC3E8I,GAAU,CACZ,QAAS,YACT,MAAA1G,EACA,QAAS2H,KAAc,KACvB,MAAOA,KAAc,KAAOnL,EAAWmL,EAAS,EAAI,OAAO3gB,GAAU,SAAWwV,EAAWxV,CAAK,EAAIA,GAElG6Y,IAAa6G,GAAQ,YAAc7G,GACvCyG,GAAY7vB,GAAMiwB,GAAS,CAACL,GAAO1P,KAAa,CAC9C,GAAI0P,GAAO,OAAOE,GAAS,IAAI,MAAMF,EAAK,EAAG,IAAI,EACjD,IAAIO,GAASgB,GAAyBjR,GAAS,OAAQ6Q,EAAO,EAC1DK,GAAWD,GAAyBjR,GAAS,SAAU6Q,EAAO,EAC9DM,GAAc,EACdtuB,GAAO,IAAM,CACf,GAAI,EAAEsuB,KAAgB,EAAG,CACvB,IAAIhvB,GAAS,CACX,SAAA+uB,GACA,KAAMlR,GAAS,KACf,IAAKA,GAAS,IACd,YAAa,OACb,cAAe,QAEb,kBAAmBA,KAAU7d,GAAO,cAA4C6d,IAAS,eACzFA,GAAS,cAAa7d,GAAO,YAA0C6d,IAAS,aACpF4P,GAAS,KAAMztB,EAAM,CACnC,CACA,EACU,GAAI8tB,GAAO,OAAS,EAAG,OAAOL,GAASwB,GAAoB,mBAAoBnB,GAAQiB,EAAQ,EAAG,IAAI,EAClGlR,GAAS,SACXmR,KACAP,EAAG,SAAS5Q,GAAS,KAAM,CAAC0Q,GAAKrC,KAAa,CACxCqC,KAAQ,KACVd,GAASc,GAAK,IAAI,GAElB1Q,GAAS,KAAOqO,GAChBxrB,GAAI,EAEpB,CAAa,GAECmd,GAAS,QACXmR,KACAP,EAAG,SAAS5Q,GAAS,IAAK,CAAC0Q,GAAKrC,KAAa,CACvCqC,KAAQ,KACVd,GAASc,GAAK,IAAI,GAElB1Q,GAAS,IAAMqO,GACfxrB,GAAI,EAEpB,CAAa,GAEHA,GAAI,CACd,CAAS,CACT,OAAe8hB,EAAG,CACV,IAAI0E,EAAQ,CAAA,EACZ,GAAI,CACFD,GAAaC,EAAOvT,EAAS,CAAA,EAAIwT,EAAOrC,CAAwB,CAC1E,MAAqB,CACrB,CACQ,MAAMyI,GAAQQ,GAAsBvL,EAAGiK,EAAUiC,GAAS,OAAQ,EAAE,EACpElB,GAAY7vB,GAAM,CAAE,QAAS,QAAS,MAAAupB,EAAO,MAAAqG,EAAK,EAAI,IAAM,CAC1DA,GAAM,OAASmB,GAAQ,KAAKnB,GAAM,MAAM,EACxCE,GAASwB,GAAoB,mBAAoB,CAAC1B,EAAK,EAAG,CAAA,CAAE,EAAG,IAAI,CAC7E,CAAS,CACT,CACA,EACI,IAAK,OAAOrf,GAAU,UAAYA,aAAiB,aAAeA,EAAM,OAAS,KAAO,KAAM,CAC5F,IAAIxN,GAAOkuB,EACXA,EAAQ,IAAMH,EAAG,UAAUvgB,EAAOxN,EAAI,CAC5C,CACIkuB,EAAM,IAAI,CACd,EA6CM,eA5CkB,CAAC,CAAE,SAAAjF,GAAU,KAAAhsB,GAAM,SAAAuxB,EAAU,QAAAvb,EAAS,SAAA8Z,KAAe,CACzE,GAAI,CAAC9Z,EAAS,MAAM,IAAI,MAAM,8BAA8BgW,EAAQ,SAAS,EAC7E,IAAI/F,EAAO,CAAA,EACPuL,GAAO9I,EAAQ1S,EAASiQ,EAAM,OAAQyB,CAAY,EAClDgC,GAAQhB,EAAQ1S,EAASiQ,EAAM,QAASwB,CAAa,EACrDgK,EAAgB/I,EAAQ1S,EAASiQ,EAAM,gBAAiB2B,CAAa,EAEzE,GADAiB,GAAqB7S,EAASiQ,EAAM,MAAM+F,EAAQ,SAAS,EACvDwF,KAAS,OAAQ,MAAM,IAAI,MAAM,qBAAqBxF,EAAQ,SAAS,EAC3E,GAAIwF,KAAS,SAAWA,KAAS,UAAW,MAAM,IAAI,MAAM,iDAAiDxF,EAAQ,SAAS,EAC9H,IAAIiE,GAAU,CACZ,QAAS,cACT,SAAUyB,GAAiBH,EAAU,WAAY,KAAM,GAAIE,CAAa,EACxE,UAAWD,KAAS,WAElB9H,KAAU,SAAQuG,GAAQ,MAAQvG,IAClC+H,IAAkB,SAAQxB,GAAQ,cAAgBwB,GACtD5B,GAAY7vB,GAAMiwB,GAAS,CAACL,EAAO1P,IAAa,CAC9C,GAAI0P,EAAO,OAAOE,EAAS,IAAI,MAAMF,CAAK,EAAG,IAAI,EACjDE,EAAS,KAAM5P,EAAS,QAAQ,CACtC,CAAK,CACL,EAyBM,gBAxBmB,CAAC,CAAE,SAAA8L,GAAU,KAAAhsB,GAAM,SAAAysB,EAAU,QAAAzW,EAAS,SAAA8Z,KAAe,CACtE9Z,IAAY,SAAQA,EAAU,CAAA,GAClC,IAAIiQ,EAAO,CAAA,EACPyD,GAAQhB,EAAQ1S,EAASiQ,EAAM,QAASwB,CAAa,EACrDkK,GAAUjJ,EAAQ1S,EAASiQ,EAAM,UAAWwB,CAAa,EAC7DoB,GAAqB7S,EAASiQ,EAAM,MAAM+F,EAAQ,SAAS,EAC3D,IAAIiE,EAAU,CACZ,QAAS,mBACT,SAAAxD,GAEE/C,KAAU,SAAQuG,EAAQ,MAAQvG,IAClCiI,KAAY,SAAQ1B,EAAQ,QAAU0B,IAC1C9B,GAAY7vB,GAAMiwB,EAAS,CAACL,GAAO1P,IAAa,CAC9C,GAAI0P,GAAO,OAAOE,EAAS,IAAI,MAAMF,EAAK,EAAG,IAAI,EACjDE,EAAS,KAAM5P,EAAS,MAAM,CACpC,CAAK,CACL,CASA,EAEA,CACA,SAASyQ,GAAmB3E,EAAUyE,EAAUZ,EAAaE,EAAc/vB,GAAM8uB,GAAUoB,GAAkBla,GAASwT,EAAO+G,GAAWT,GAAU,CAChJ,MAAMiB,GAAUC,GAAiB,EAC3BY,GAAY5F,IAAa,UACzB6F,GAAc,CAAChN,GAAGiN,KAAe,CACrC,MAAMvI,GAAQ,CAAA,EACd,GAAI,CACFD,GAAaC,GAAOvT,GAAS,CAAA,EAAIwT,EAAOtC,CAAoB,CAClE,MAAiB,CACjB,CACI,MAAM6K,GAAU3B,GAAsBvL,GAAGiK,GAAUiC,GAAS,OAAQe,EAAU,EAC9EjC,EAAY7vB,GAAM,CAAE,QAAS,QAAS,MAAAupB,GAAO,MAAOwI,EAAO,EAAI,IAAM,CACnEA,GAAQ,OAAShB,GAAQ,KAAKgB,GAAQ,MAAM,EAC5CjC,GAASwB,GAAoBM,GAAY,iBAAmB,eAAgB,CAACG,EAAO,EAAG,EAAE,EAAG,IAAI,CACtG,CAAK,CACL,EACE,IAAIC,GACJ,GAAI,OAAOhc,IAAY,SAAU,CAC/B,MAAMtV,GAAQsV,GAAQ,QACtB,GAAItV,KAAU,OAAQ,CACpB,GAAI,CAAC,MAAM,QAAQA,EAAK,EAAG,OAAOmxB,GAAY,IAAI,MAAM,4BAA4B,EAAG,EAAE,EACzFG,GAAUtxB,EAChB,CACA,CACE,GAAIsxB,IAAWA,GAAQ,OAAS,EAAG,CACjC,GAAIlD,GAAS,OAAQ,OAAO+C,GAAY,IAAI,MAAM,6CAA6C,EAAG,EAAE,EACpGI,GACExB,EACAZ,EACAE,EACA/vB,GACA8uB,GACAoB,GACAla,GACAgc,GACAjB,EACN,EAAM,KACC1uB,IAAW,CACV,GAAI,CAACA,GAAO,GAAI,OAAOwvB,GAAYxvB,GAAO,MAAOA,GAAO,UAAU,EAClE,GAAI,CACF6vB,GAAuB7vB,GAAO,eAAgBA,GAAO,kBAAmBA,GAAO,0BAA0B,CACnH,OAAiBwiB,GAAG,CACVgN,GAAYhN,GAAG,EAAE,CAC3B,CACA,EACOA,IAAMgN,GAAYhN,GAAG,EAAE,GAE1B,MACJ,CACE,GAAI,CACFqN,GAAuB,KAAM,CAAC7vB,GAAQ8vB,KAASA,GAAK,CAAA,EAAI,CAAA,CAAE,EAAG,IAAM,CACvE,CAAK,CACL,OAAWtN,GAAG,CACVgN,GAAYhN,GAAG,EAAE,CACrB,CACE,SAASqN,GAAuBE,GAAgBC,GAAmBC,GAA4B,CAC7F,MAAMrG,GAAe6C,GAAS,MACxB,CACJ,QAAA5C,GACA,MAAA3C,EACA,MAAA0E,EACA,cAAA9B,EACA,gBAAAC,EACA,cAAA2B,GACA,UAAAY,GACA,YAAAvF,CACN,EAAQ2C,GAAqBC,EAAUhW,GAASwT,EAAOtC,EAAsB+E,EAAY,EACrF,GAAIgC,GAAS,CAACa,GAAS,MAAO,MAAM,IAAI,MAAM,uDAAuD,EACrG,MAAMmB,GAAU,CACd,QAAS,QACT,IAAKQ,EACL,QAAAvE,GACA,MAAA3C,EACA,MAAA0E,EACA,cAAA9B,EACA,gBAAAC,EACA,cAAe2B,IAAiBwC,GAChC,UAAA5B,GACA,QAASiD,IAEPQ,KAAgBnC,GAAQ,QAAUmC,IAClChJ,IAAa6G,GAAQ,YAAc7G,GACvC,MAAMmJ,EAAwB,CAACrS,GAAUsS,KAAc,CACrD,MAAMnwB,GAAS,CACb,OAAQ8uB,GAAyBjR,GAAS,OAAQ6Q,EAAO,EACzD,SAAUI,GAAyBjR,GAAS,SAAU6Q,EAAO,EAC7D,YAAa,OACb,SAAU,OACV,YAAa,QAET0B,GAAiBpwB,GAAO,OAAO,MAAK,EACpCqwB,GAAmBrwB,GAAO,SAAS,MAAK,EAC1C6d,GAAS,cAAa7d,GAAO,YAAc6d,GAAS,YAAY,IAAIyS,EAAkB,GACtFzS,GAAS,WAAU7d,GAAO,SAAW,KAAK,MAAM6d,GAAS,QAAQ,GACjEA,GAAS,cAAa7d,GAAO,YAAc6d,GAAS,aACpDA,GAAS,gBAAkB,QAAQ,QAAQ,IAAIoG,EAAWpG,GAAS,aAAa,EAAE,QAAQ,MAAO,EAAE,CAAC,EACxGmS,GAAkBhwB,GAAQ,CAACuwB,GAAaC,KAAkB,CACxD,GAAIJ,GAAe,OAAS,GAAKG,GAAY,OAAS,EAAG,CACvD,MAAMhD,GAAQ0B,GAAoB,eAAgBmB,GAAe,OAAOG,EAAW,EAAGF,GAAiB,OAAOG,EAAa,CAAC,EAC5H,OAAOL,GAAU5C,GAAO,KAAMgD,GAAaC,EAAa,CAClE,CACQL,GAAU,KAAMnwB,GAAQuwB,GAAaC,EAAa,CAC1D,CAAO,CACP,EACI,IAAIC,EACAC,GACAnB,KACF1B,GAAiB,QAAQ,EAAI,CAACxhB,GAAIskB,KAAa,IAAI,QAAS/jB,IAAY,CACtEsjB,EAAsBS,GAAU,CAACpC,GAAKvuB,GAAQuwB,GAAaC,KAAkB,CAC3E,MAAM3S,GAAW,CACf,OAAQ0S,GACR,SAAUC,IAERE,IAAqBA,GAAoBnC,GAAKvuB,EAAM,EACxDywB,EAAsB,OACtBC,GAAsB,OACtBhD,EAAarhB,GAAIwR,EAAQ,EACzBjR,GAAO,CACjB,CAAS,CACT,CAAO,GACH4gB,EAAY7vB,GAAMiwB,GAAS,CAACL,GAAO1P,KAAa,CAC9C,GAAI0P,GAAO,OAAOE,GAAS,IAAI,MAAMF,EAAK,EAAG,IAAI,EACjD,GAAI,CAACgC,GACH,OAAOW,EAAsBrS,GAAU,CAAC0Q,GAAKC,MAC3CyB,GAA0B,EACnBxC,GAASc,GAAKC,EAAG,EACzB,EAEH,GAAI3Q,GAAS,OAAO,OAAS,EAC3B,OAAO4P,GAASwB,GAAoB,iBAAkBpR,GAAS,OAAQA,GAAS,QAAQ,EAAG,IAAI,EAEjG,IAAI+S,GAAa,GACjB,MAAM5wB,GAAS,CACb,QAAS,KACFywB,IAAqBA,EAAsB,IAAI,QAAQ,CAAC7jB,GAASyV,KAAW,CAC/E,IAAIwO,GACJH,GAAsB,CAACnC,GAAKuC,KAAY,CACjCD,KAAeA,GAAgB,IAAMtC,GAAMlM,GAAOkM,EAAG,EAAI3hB,GAAQkkB,EAAO,EAC3F,EACY,MAAMC,GAAsB,IAAM,CAKhCvD,EAAY7vB,GAJK,CACf,QAAS,UACT,IAAKywB,GAEqB,CAAC4C,GAAQC,KAAc,CAC7CD,GACF3O,GAAO,IAAI,MAAM2O,EAAM,CAAC,EACfH,GACTA,GAAa,EAEbE,GAAmB,CAErC,CAAe,CACf,EACYA,GAAmB,CAC/B,CAAW,GACMN,GAET,MAAO,CAACS,GAAW,CAAA,IAAO,IAAI,QAAQ,CAACtkB,GAASyV,KAAW,CACzD,GAAI,CAACoK,GAAS,MAAO,MAAM,IAAI,MAAM,gDAAgD,EACrF,MAAM7I,GAAO,CAAA,EACPuN,GAAQ9K,EAAQ6K,GAAUtN,GAAM,QAAS2B,CAAa,EAC5DiB,GAAqB0K,GAAUtN,GAAM,iBAAiB,EACtD,MAAM+M,GAAW,CACf,QAAS,QACT,IAAKvC,GAEH+C,KAAOR,GAAS,MAAQQ,IAC5B3D,EAAY7vB,GAAMgzB,GAAWK,IAAW,CAClCA,GAAQ3O,GAAO,IAAI,MAAM2O,EAAM,CAAC,EAC/BpkB,GAAQ,MAAM,CAC/B,CAAW,CACX,CAAS,EACD,MAAO,CAACskB,GAAW,CAAA,IAAO,IAAI,QAAQ,CAACtkB,GAASyV,KAAW,CACzD,GAAI,CAACoK,GAAS,MAAO,MAAM,IAAI,MAAM,gDAAgD,EACrF,MAAM7I,GAAO,CAAA,EACPwN,GAAO/K,EAAQ6K,GAAUtN,GAAM,OAAQ4B,EAAqB,EAC5D6L,GAAOhL,EAAQ6K,GAAUtN,GAAM,OAAQyB,CAAY,EACnDiM,GAAWjL,EAAQ6K,GAAUtN,GAAM,WAAYyB,CAAY,EAC3DkM,GAAUlL,EAAQ6K,GAAUtN,GAAM,UAAWyB,CAAY,EACzDmM,GAAWnL,EAAQ6K,GAAUtN,GAAM,WAAYyB,CAAY,EAC3DoM,GAAWpL,EAAQ6K,GAAUtN,GAAM,WAAYyB,CAAY,EAC3DqM,GAAOrL,EAAQ6K,GAAUtN,GAAM,OAAQgC,EAAY,EACnD+L,GAAYtL,EAAQ6K,GAAUtN,GAAM,YAAa6B,EAAc,EACrEe,GAAqB0K,GAAUtN,GAAM,iBAAiB,EACtD,MAAM+M,GAAW,CACf,QAAS,QACT,IAAKvC,EACL,UAAW,CAAC,CAACuD,IAQf,GANIP,KAAS,SAAQT,GAAS,KAAOS,IACjCC,KAAS,SAAQV,GAAS,KAAOU,IACjCC,KAAa,SAAQX,GAAS,SAAWW,IACzCC,KAAY,SAAQZ,GAAS,QAAUY,IACvCC,KAAa,SAAQb,GAAS,SAAWa,IACzCC,KAAa,SAAQd,GAAS,SAAWc,IACzCC,GAAM,CACR,MAAME,GAAW,CAAA,EACXC,GAASxL,EAAQqL,GAAME,GAAU,SAAU1L,EAA4B,EAC7EM,GAAqBkL,GAAME,GAAU,kBAAkB,EACnD,MAAM,QAAQC,EAAM,EAAGlB,GAAS,WAAakB,GACxCA,KAAW,SAAQlB,GAAS,WAAa,CAACkB,EAAM,EACrE,CACUrE,EAAY7vB,GAAMgzB,GAAU,CAACK,GAAQC,KAAc,CACjD,GAAID,GAAQ,OAAO3O,GAAO,IAAI,MAAM2O,EAAM,CAAC,EACvCW,KACF9D,GAAiB,eAAe,EAAI,CAACxhB,GAAIylB,KAAa,CACpDH,GAAUG,GAAS,IAAI,EACvBpE,EAAarhB,GAAI,EAAE,CACnC,GAEYO,GAAQqkB,EAAS,CAC7B,CAAW,CACX,CAAS,EACD,OAAQ,IAAM,IAAI,QAASrkB,IAAY,CACrC,GAAIgkB,GAAY,OAAOhkB,GAAO,EAK9B4gB,EAAY7vB,GAJK,CACf,QAAS,SACT,IAAKywB,GAEqB,IAAM,CAChCxhB,GAAO,CACnB,CAAW,CACX,CAAS,EACD,QAAS,IAAM,IAAI,QAASA,IAAY,CACtC,GAAIgkB,GAAY,OAAOhkB,GAAO,EAC9BgkB,GAAa,GAKbpD,EAAY7vB,GAJK,CACf,QAAS,UACT,IAAKywB,GAEqB,IAAM,CAChCxhB,GAAO,EACPqjB,GAA0B,EAC1BtyB,GAAK,MAAK,CACtB,CAAW,CACX,CAAS,GAEHA,GAAK,IAAG,EACR8vB,GAAS,KAAMztB,EAAM,CAC3B,CAAK,CACL,CACA,CACA,IAAI4vB,GAAgB,CAACxB,EAAUZ,EAAaE,EAAc/vB,EAAM8uB,GAAUoB,GAAkBkE,GAAgBpC,GAASjB,IAAYzM,EAAQ,KAAM,KAAM,WAAa,CAChK,IAAI+P,GAAmB,CAAA,EACnBC,GAAiB,CAAA,EACjBC,GAAqB,CAAA,EACrBC,GAAkB,CAAA,EAClBC,GAAqB,CAAA,EACrBC,GAAiB,EACjB70B,GAAI,EACJuyB,GAAiB,CAAA,EACjBuC,GAAc,GAClB3C,GAAU,CAAC,GAAGA,EAAO,EACrB,QAAShM,MAAQgM,GAAS,CACxB,IAAI/L,EAAO,CAAA,EACX,GAAI,OAAOD,IAAS,SAAU,MAAM,IAAI,MAAM,mBAAmBnmB,EAAC,oBAAoB,EACtF,MAAMP,EAAOopB,EAAQ1C,GAAMC,EAAM,OAAQyB,CAAY,EACrD,GAAI,OAAOpoB,GAAS,UAAYA,IAAS,GAAI,MAAM,IAAI,MAAM,mBAAmBO,EAAC,oBAAoB,EACrG,GAAI,CACF,IAAI+0B,EAAQlM,EAAQ1C,GAAMC,EAAM,QAAS6B,EAAc,EACvD,GAAI,OAAO8M,GAAU,WAAY,MAAM,IAAI,MAAM,oCAAoC,EACrF/L,GAAqB7C,GAAMC,EAAM,aAAagB,EAAM3nB,CAAI,CAAC,EAAE,EAC3D,IAAIu1B,EAAS,CACX,KAAAv1B,EACA,QAAS,GACT,MAAO,GACP,UAAW,CAAA,EACX,OAAQ,CAAA,GAEVO,KA2CA,IAAIi1B,GAAUF,EAAM,CAClB,eAAAR,GACA,QA5CY,CAACpuB,EAAMgQ,GAAU,CAAA,IAAO,CACpC,GAAI,CAAC2e,GAAa,MAAM,IAAI,MAAM,yDAAyD,EAC3F,GAAI,OAAO3uB,GAAS,SAAU,MAAM,IAAI,MAAM,sCAAsC,EACpF,IAAI+uB,EAAwB,OAAO,OAAO,IAAI,EAC1CjD,EAAapJ,EAAQ1S,GAAS+e,EAAO,aAAcrN,CAAY,EAC/DsN,GAAWtM,EAAQ1S,GAAS+e,EAAO,WAAYrN,CAAY,EAC3DuN,GAAYvM,EAAQ1S,GAAS+e,EAAO,YAAarN,CAAY,EAC7D8G,GAAa9F,EAAQ1S,GAAS+e,EAAO,aAAcrN,CAAY,EAC/D8J,GAAO9I,EAAQ1S,GAAS+e,EAAO,OAAQrN,CAAY,EACnDwN,GAAaxM,EAAQ1S,GAAS+e,EAAO,aAAcvN,CAAa,EAChE2N,GAAmBzM,EAAQ1S,GAAS+e,EAAO,OAAQ9M,EAAY,EACnE,OAAAY,GAAqB7S,GAAS+e,EAAO,mBAAmB,EACjD,IAAI,QAAQ,CAACK,GAAU1Q,KAAW,CACvC,MAAMuL,GAAU,CACd,QAAS,UACT,KAAAjqB,EACA,IAAKyqB,EACL,WAAYnxB,GAMd,GAJIwyB,GAAc,OAAM7B,GAAQ,WAAa6B,GACzCkD,IAAY,OAAM/E,GAAQ,SAAW+E,IACrCC,IAAa,OAAMhF,GAAQ,UAAYgF,IACvCzG,IAAc,OAAMyB,GAAQ,WAAazB,IACzCgD,IAAQ,KAAMvB,GAAQ,KAAOuB,OAC5B,OAAM,IAAI,MAAM,4CAA4C,EAC7D0D,IAAc,OAAMjF,GAAQ,WAAac,EAAQ,MAAMmE,EAAU,GACjEC,IAAoB,OAAMlF,GAAQ,KAAOoF,GAAkBF,GAAkB,MAAM,GACvFtF,EAAY7vB,EAAMiwB,GAAS,CAACL,GAAO1P,KAAa,CAC1C0P,KAAU,KAAMlL,GAAO,IAAI,MAAMkL,EAAK,CAAC,EACtCwF,GAAS,CACZ,OAAQjE,GAAyBjR,GAAS,OAAQ6Q,CAAO,EACzD,SAAUI,GAAyBjR,GAAS,SAAU6Q,CAAO,EAC7D,KAAM7Q,GAAS,KACf,SAAUA,GAAS,SACnB,YAAaA,GAAS,YACtB,UAAWA,GAAS,UACpB,OAAQA,GAAS,OACjB,WAAY6Q,EAAQ,KAAK7Q,GAAS,UAAU,CAC1D,CAAa,CACb,CAAW,CACX,CAAS,CACT,EAIQ,QAAQ4P,EAAU,CAChB,IAAIwF,GAAiB,+DACjBC,EAAiBC,GAAgB,IAAI,MAAMF,EAAc,EAAGxG,GAAU,SAAS,EACnFuF,GAAiB,KAAK,CAAE,KAAA/0B,EAAM,SAAAwwB,EAAU,KAAMyF,EAAgB,EAC9DV,EAAO,QAAU,EAC3B,EACQ,MAAM/E,EAAU,CACd,IAAIwF,GAAiB,6DACjBC,EAAiBC,GAAgB,IAAI,MAAMF,EAAc,EAAGxG,GAAU,OAAO,EACjFwF,GAAe,KAAK,CAAE,KAAAh1B,EAAM,SAAAwwB,EAAU,KAAMyF,EAAgB,EAC5DV,EAAO,MAAQ,EACzB,EACQ,UAAU7e,EAAS8Z,GAAU,CAC3B,IAAIwF,EAAiB,iEACjBC,EAAiBC,GAAgB,IAAI,MAAMF,CAAc,EAAGxG,GAAU,WAAW,EACjFiG,GAAQ,CAAA,EACR11B,GAASqpB,EAAQ1S,EAAS+e,GAAO,SAAUpN,CAAY,EACvDsN,GAAYvM,EAAQ1S,EAAS+e,GAAO,YAAarN,CAAY,EAEjE,GADAmB,GAAqB7S,EAAS+e,GAAO,kCAAkC9N,EAAM3nB,CAAI,CAAC,EAAE,EAChFD,IAAU,KAAM,MAAM,IAAI,MAAM,sCAAsC,EAC1E,IAAIqP,GAAKgmB,KACTH,GAAmB7lB,EAAE,EAAI,CAAE,KAAApP,EAAM,SAAAwwB,GAAU,KAAMyF,CAAc,EAC/DV,EAAO,UAAU,KAAK,CAAE,GAAAnmB,GAAI,OAAQod,GAAmBzsB,EAAM,EAAG,UAAW41B,IAAa,EAAE,CAAE,CACtG,EACQ,OAAOjf,EAAS8Z,GAAU,CACxB,IAAIwF,EAAiB,8DACjBC,EAAiBC,GAAgB,IAAI,MAAMF,CAAc,EAAGxG,GAAU,QAAQ,EAC9EiG,GAAQ,CAAA,EACR11B,GAASqpB,EAAQ1S,EAAS+e,GAAO,SAAUpN,CAAY,EACvDsN,GAAYvM,EAAQ1S,EAAS+e,GAAO,YAAarN,CAAY,EAEjE,GADAmB,GAAqB7S,EAAS+e,GAAO,+BAA+B9N,EAAM3nB,CAAI,CAAC,EAAE,EAC7ED,IAAU,KAAM,MAAM,IAAI,MAAM,mCAAmC,EACvE,IAAIqP,GAAKgmB,KACTF,GAAgB9lB,EAAE,EAAI,CAAE,KAAApP,EAAM,SAAAwwB,GAAU,KAAMyF,CAAc,EAC5DV,EAAO,OAAO,KAAK,CAAE,GAAAnmB,GAAI,OAAQod,GAAmBzsB,EAAM,EAAG,UAAW41B,IAAa,EAAE,CAAE,CACnG,EACQ,UAAUnF,EAAU,CAClB2E,GAAmB,KAAK3E,CAAQ,CAC1C,EACQ,QAAShB,GAAS,OAC1B,CAAO,EACGgG,KAAS,MAAMA,IACnB1C,GAAe,KAAKyC,CAAM,CAChC,OAAahQ,EAAG,CACV,MAAO,CAAE,GAAI,GAAO,MAAOA,EAAG,WAAYvlB,CAAI,CACpD,CACA,CACE4wB,GAAiB,UAAU,EAAI,CAACxhB,GAAIuhB,IAAY3L,EAAQ,KAAM,KAAM,WAAa,CAC/EyM,EAAQ,MAAK,EACb,IAAI7Q,EAAW,CAAE,OAAQ,CAAA,EAAI,SAAU,CAAA,CAAE,EACzC,MAAM,QAAQ,IAAImU,GAAiB,IAAKoB,GAAOnR,EAAQ,KAAM,CAACmR,CAAE,EAAG,UAAW,CAAE,KAAAn2B,EAAM,SAAAwwB,GAAU,KAAA4F,EAAI,EAAI,CACtG,GAAI,CACF,IAAIrzB,EAAS,MAAMytB,GAAQ,EAC3B,GAAIztB,GAAU,KAAM,CAClB,GAAI,OAAOA,GAAW,SAAU,MAAM,IAAI,MAAM,yCAAyC4kB,EAAM3nB,CAAI,CAAC,sBAAsB,EAC1H,IAAI2mB,GAAO,CAAA,EACPkK,EAASzH,EAAQrmB,EAAQ4jB,GAAM,SAAU8B,EAAW,EACpDqJ,EAAW1I,EAAQrmB,EAAQ4jB,GAAM,WAAY8B,EAAW,EAC5Dc,GAAqBxmB,EAAQ4jB,GAAM,qCAAqCgB,EAAM3nB,CAAI,CAAC,EAAE,EACjF6wB,GAAU,MAAMjQ,EAAS,OAAO,KAAK,GAAGwR,GAAiBvB,EAAQ,SAAUY,EAASzxB,EAAM,MAAM,CAAC,EACjG8xB,GAAY,MAAMlR,EAAS,SAAS,KAAK,GAAGwR,GAAiBN,EAAU,WAAYL,EAASzxB,EAAM,MAAM,CAAC,CACvH,CACA,OAAeulB,EAAG,CACV3E,EAAS,OAAO,KAAKkQ,GAAsBvL,EAAGiK,GAAUiC,EAAS2E,IAAQA,GAAI,EAAIp2B,CAAI,CAAC,CAC9F,CACA,CAAK,CAAC,CAAC,EACHywB,EAAarhB,GAAIwR,CAAQ,CAC7B,CAAG,EACDgQ,GAAiB,YAAY,EAAI,CAACxhB,GAAIuhB,IAAY3L,EAAQ,KAAM,KAAM,WAAa,CACjF,IAAIpE,EAAW,CAAA,EAAI5gB,EAAO,GAAIwwB,EAAU4F,GACxC,QAASC,MAAO1F,EAAQ,IACtB,GAAI,EACD,CAAE,KAAA3wB,EAAM,SAAAwwB,EAAU,KAAA4F,EAAI,EAAKnB,GAAmBoB,EAAG,GAClD,IAAItzB,EAAS,MAAMytB,EAAS,CAC1B,KAAMG,EAAQ,KACd,SAAUA,EAAQ,SAClB,UAAWA,EAAQ,UACnB,WAAYA,EAAQ,WACpB,KAAMA,EAAQ,KACd,WAAYc,EAAQ,KAAKd,EAAQ,UAAU,EAC3C,KAAMA,EAAQ,IACxB,CAAS,EACD,GAAI5tB,GAAU,KAAM,CAClB,GAAI,OAAOA,GAAW,SAAU,MAAM,IAAI,MAAM,2CAA2C4kB,EAAM3nB,CAAI,CAAC,sBAAsB,EAC5H,IAAI2mB,GAAO,CAAA,EACP6L,EAAapJ,EAAQrmB,EAAQ4jB,GAAM,aAAcyB,CAAY,EAC7D1hB,EAAO0iB,EAAQrmB,EAAQ4jB,GAAM,OAAQyB,CAAY,EACjDuN,GAAYvM,EAAQrmB,EAAQ4jB,GAAM,YAAayB,CAAY,EAC3DkO,GAASlN,EAAQrmB,EAAQ4jB,GAAM,SAAUyB,CAAY,EACrDwF,GAAWxE,EAAQrmB,EAAQ4jB,GAAM,WAAYwB,CAAa,EAC1DoO,GAAcnN,EAAQrmB,EAAQ4jB,GAAM,cAAewB,CAAa,EAChEyN,GAAaxM,EAAQrmB,EAAQ4jB,GAAM,aAAcuB,CAAa,EAC9D2I,GAASzH,EAAQrmB,EAAQ4jB,GAAM,SAAU8B,EAAW,EACpDqJ,GAAW1I,EAAQrmB,EAAQ4jB,GAAM,WAAY8B,EAAW,EACxD+N,GAAapN,EAAQrmB,EAAQ4jB,GAAM,aAAc+B,EAAoB,EACrE+N,GAAYrN,EAAQrmB,EAAQ4jB,GAAM,YAAa+B,EAAoB,EACvEa,GAAqBxmB,EAAQ4jB,GAAM,uCAAuCgB,EAAM3nB,CAAI,CAAC,EAAE,EACvF4gB,EAAS,GAAKyV,GACV7D,GAAc,OAAM5R,EAAS,WAAa4R,GAC1C9rB,GAAQ,OAAMka,EAAS,KAAOla,GAC9BivB,IAAa,OAAM/U,EAAS,UAAY+U,IACxCW,IAAU,OAAM1V,EAAS,OAAS0V,IAClC1I,IAAY,OAAMhN,EAAS,SAAWgN,IACtC2I,IAAe,OAAM3V,EAAS,YAAc2V,IAC5CX,IAAc,OAAMhV,EAAS,WAAa6Q,EAAQ,MAAMmE,EAAU,GAClE/E,IAAU,OAAMjQ,EAAS,OAASwR,GAAiBvB,GAAQ,SAAUY,EAASzxB,EAAM,MAAM,GAC1F8xB,IAAY,OAAMlR,EAAS,SAAWwR,GAAiBN,GAAU,WAAYL,EAASzxB,EAAM,MAAM,GAClGw2B,IAAc,OAAM5V,EAAS,WAAa8V,GAAoBF,GAAY,YAAY,GACtFC,IAAa,OAAM7V,EAAS,UAAY8V,GAAoBD,GAAW,WAAW,GACtF,KACV,CACA,OAAelR,EAAG,CACV3E,EAAW,CAAE,GAAIyV,GAAK,OAAQ,CAACvF,GAAsBvL,EAAGiK,GAAUiC,EAAS2E,IAAQA,GAAI,EAAIp2B,CAAI,CAAC,CAAC,EACjG,KACR,CAEIywB,EAAarhB,GAAIwR,CAAQ,CAC7B,CAAG,EACDgQ,GAAiB,SAAS,EAAI,CAACxhB,GAAIuhB,IAAY3L,EAAQ,KAAM,KAAM,WAAa,CAC9E,IAAIpE,EAAW,CAAA,EAAI5gB,EAAO,GAAIwwB,EAAU4F,GACxC,QAASC,MAAO1F,EAAQ,IACtB,GAAI,EACD,CAAE,KAAA3wB,EAAM,SAAAwwB,EAAU,KAAA4F,EAAI,EAAKlB,GAAgBmB,EAAG,GAC/C,IAAItzB,EAAS,MAAMytB,EAAS,CAC1B,KAAMG,EAAQ,KACd,UAAWA,EAAQ,UACnB,OAAQA,EAAQ,OAChB,WAAYc,EAAQ,KAAKd,EAAQ,UAAU,EAC3C,KAAMA,EAAQ,IACxB,CAAS,EACD,GAAI5tB,GAAU,KAAM,CAClB,GAAI,OAAOA,GAAW,SAAU,MAAM,IAAI,MAAM,wCAAwC4kB,EAAM3nB,CAAI,CAAC,sBAAsB,EACzH,IAAI2mB,GAAO,CAAA,EACP6L,EAAapJ,EAAQrmB,EAAQ4jB,GAAM,aAAcyB,CAAY,EAC7D6G,EAAW7F,EAAQrmB,EAAQ4jB,GAAM,WAAYuC,EAAwB,EACrEgG,GAAa9F,EAAQrmB,EAAQ4jB,GAAM,aAAcyB,CAAY,EAC7DwN,GAAaxM,EAAQrmB,EAAQ4jB,GAAM,aAAcuB,CAAa,EAC9D6F,GAAS3E,EAAQrmB,EAAQ4jB,GAAM,SAAUyB,CAAY,EACrDyI,GAASzH,EAAQrmB,EAAQ4jB,GAAM,SAAU8B,EAAW,EACpDqJ,GAAW1I,EAAQrmB,EAAQ4jB,GAAM,WAAY8B,EAAW,EACxD+N,GAAapN,EAAQrmB,EAAQ4jB,GAAM,aAAc+B,EAAoB,EACrE+N,GAAYrN,EAAQrmB,EAAQ4jB,GAAM,YAAa+B,EAAoB,EACvEa,GAAqBxmB,EAAQ4jB,GAAM,oCAAoCgB,EAAM3nB,CAAI,CAAC,EAAE,EACpF4gB,EAAS,GAAKyV,GACV7D,GAAc,OAAM5R,EAAS,WAAa4R,GAC1CvD,aAAoB,WAAYrO,EAAS,SAAWqO,EAC/CA,GAAY,OAAMrO,EAAS,SAAW6F,EAAWwI,CAAQ,GAC9DC,IAAc,OAAMtO,EAAS,WAAasO,IAC1C0G,IAAc,OAAMhV,EAAS,WAAa6Q,EAAQ,MAAMmE,EAAU,GAClE7H,IAAU,OAAMnN,EAAS,OAASmN,IAClC8C,IAAU,OAAMjQ,EAAS,OAASwR,GAAiBvB,GAAQ,SAAUY,EAASzxB,EAAM,MAAM,GAC1F8xB,IAAY,OAAMlR,EAAS,SAAWwR,GAAiBN,GAAU,WAAYL,EAASzxB,EAAM,MAAM,GAClGw2B,IAAc,OAAM5V,EAAS,WAAa8V,GAAoBF,GAAY,YAAY,GACtFC,IAAa,OAAM7V,EAAS,UAAY8V,GAAoBD,GAAW,WAAW,GACtF,KACV,CACA,OAAelR,EAAG,CACV3E,EAAW,CAAE,GAAIyV,GAAK,OAAQ,CAACvF,GAAsBvL,EAAGiK,GAAUiC,EAAS2E,IAAQA,GAAI,EAAIp2B,CAAI,CAAC,CAAC,EACjG,KACR,CAEIywB,EAAarhB,GAAIwR,CAAQ,CAC7B,CAAG,EACD,IAAImS,GAAoB,CAAChwB,GAAQ8vB,IAASA,EAAK,CAAA,EAAI,EAAE,EACjDmC,GAAe,OAAS,IAC1BjC,GAAoB,CAAChwB,GAAQ8vB,IAAS,CAC7B7N,EAAQ,KAAM,KAAM,WAAa,CACtC,MAAMsO,EAAc,CAAA,EACdC,EAAgB,CAAA,EACtB,SAAW,CAAE,KAAAvzB,EAAM,SAAAwwB,GAAU,KAAA4F,EAAI,IAAMpB,GAAgB,CACrD,IAAI2B,EACAC,GACJ,GAAI,CACF,MAAMx1B,EAAQ,MAAMovB,GAASztB,EAAM,EACnC,GAAI3B,GAAS,KAAM,CACjB,GAAI,OAAOA,GAAU,SAAU,MAAM,IAAI,MAAM,uCAAuCumB,EAAM3nB,CAAI,CAAC,sBAAsB,EACvH,IAAI2mB,EAAO,CAAA,EACPkK,GAASzH,EAAQhoB,EAAOulB,EAAM,SAAU8B,EAAW,EACnDqJ,GAAW1I,EAAQhoB,EAAOulB,EAAM,WAAY8B,EAAW,EAC3Dc,GAAqBnoB,EAAOulB,EAAM,mCAAmCgB,EAAM3nB,CAAI,CAAC,EAAE,EAC9E6wB,IAAU,OAAM8F,EAAYvE,GAAiBvB,GAAQ,SAAUY,EAASzxB,EAAM,MAAM,GACpF8xB,IAAY,OAAM8E,GAAcxE,GAAiBN,GAAU,WAAYL,EAASzxB,EAAM,MAAM,EAC9G,CACA,OAAmBulB,EAAG,CACVoR,EAAY,CAAC7F,GAAsBvL,EAAGiK,GAAUiC,EAAS2E,IAAQA,KAAQp2B,CAAI,CAAC,CAC1F,CACU,GAAI22B,EAAW,CACbrD,EAAY,KAAK,GAAGqD,CAAS,EAC7B,GAAI,CACF5zB,GAAO,OAAO,KAAK,GAAG4zB,CAAS,CAC7C,MAAwB,CACxB,CACA,CACU,GAAIC,GAAa,CACfrD,EAAc,KAAK,GAAGqD,EAAW,EACjC,GAAI,CACF7zB,GAAO,SAAS,KAAK,GAAG6zB,EAAW,CACjD,MAAwB,CACxB,CACA,CACA,CACQ/D,EAAKS,EAAaC,CAAa,CACvC,CAAO,CACP,GAEE,IAAIP,GAA6B,IAAM,CACrC,UAAW6D,MAAM1B,GACf,WAAW,IAAM0B,GAAE,EAAI,CAAC,CAE9B,EACE,OAAAxB,GAAc,GACP,CACL,GAAI,GACJ,eAAAvC,GACA,kBAAAC,GACA,2BAAAC,GAEJ,CAAC,EACD,SAAStB,IAAoB,CAC3B,MAAM5wB,EAAsB,IAAI,IAChC,IAAIg2B,EAAS,EACb,MAAO,CACL,OAAQ,CACNh2B,EAAI,MAAK,CACf,EACI,KAAKsO,EAAI,CACP,OAAOtO,EAAI,IAAIsO,CAAE,CACvB,EACI,MAAMhO,EAAO,CACX,GAAIA,IAAU,OAAQ,MAAO,GAC7B,MAAMgO,EAAK0nB,IACX,OAAAh2B,EAAI,IAAIsO,EAAIhO,CAAK,EACVgO,CACb,EAEA,CACA,SAAS8mB,GAAgB3Q,EAAGiK,EAAUuH,EAAO,CAC3C,IAAIX,EACAY,GAAQ,GACZ,MAAO,IAAM,CACX,GAAIA,GAAO,OAAOZ,EAClBY,GAAQ,GACR,GAAI,CACF,IAAIC,IAAS1R,EAAE,MAAQ,IAAI,MAAM;AAAA,CAAI,EACrC0R,GAAM,OAAO,EAAG,CAAC,EACjB,IAAIC,GAAYC,GAAkB3H,EAAUyH,GAAOF,CAAK,EACxD,GAAIG,GACF,OAAAd,EAAO,CAAE,KAAM7Q,EAAE,QAAS,SAAU2R,EAAS,EACtCd,CAEf,MAAiB,CACjB,CACA,CACA,CACA,SAAStF,GAAsBvL,EAAGiK,EAAU4H,EAAOhB,EAAM5D,GAAY,CACnE,IAAI5vB,GAAO,iBACPs0B,GAAY,KAChB,GAAI,CACFt0B,IAAQ2iB,GAAKA,EAAE,SAAWA,GAAK,EACnC,MAAe,CACf,CACE,GAAI,CACF2R,GAAYC,GAAkB3H,GAAWjK,EAAE,MAAQ,IAAI,MAAM;AAAA,CAAI,EAAG,EAAE,CAC1E,MAAe,CACf,CACE,MAAO,CAAE,GAAI,GAAI,WAAAiN,GAAY,KAAA5vB,GAAM,SAAUs0B,GAAW,MAAOd,EAAO,CAACA,CAAI,EAAI,CAAA,EAAI,OAAQgB,EAAQA,EAAM,MAAM7R,CAAC,EAAI,EAAE,CACxH,CACA,SAAS4R,GAAkB3H,EAAUyH,EAAOF,EAAO,CACjD,IAAIM,EAAK,UACT,GAAI7H,EAAS,cAAgB,CAACyH,EAAM,CAAC,EAAE,WAAWI,CAAE,GAAKJ,EAAM,CAAC,EAAE,WAAWI,CAAE,EAC7E,QAAS92B,GAAI,EAAGA,GAAI02B,EAAM,OAAQ12B,KAAK,CACrC,IAAI+2B,GAAOL,EAAM12B,EAAC,EAClB,GAAK+2B,GAAK,WAAWD,CAAE,EAEvB,IADAC,GAAOA,GAAK,MAAMD,EAAG,MAAM,IACd,CACX,IAAIE,GAAQ,iCAAiC,KAAKD,EAAI,EACtD,GAAIC,GAAO,CACTD,GAAOC,GAAM,CAAC,EACd,QACV,CAEQ,GADAA,GAAQ,2CAA2C,KAAKD,EAAI,EACxDC,GAAO,CACTD,GAAOC,GAAM,CAAC,EACd,QACV,CAEQ,GADAA,GAAQ,sBAAsB,KAAKD,EAAI,EACnCC,GAAO,CACT,IAAItI,GACJ,GAAI,CACFA,GAAWO,EAAS,aAAa+H,GAAM,CAAC,EAAG,MAAM,CAC7D,MAAsB,CACV,KACZ,CACU,IAAIC,EAAWvI,GAAS,MAAM,0BAA0B,EAAE,CAACsI,GAAM,CAAC,EAAI,CAAC,GAAK,GACxEE,GAAS,CAACF,GAAM,CAAC,EAAI,EACrB3yB,GAAS4yB,EAAS,MAAMC,GAAQA,GAASV,EAAM,MAAM,IAAMA,EAAQA,EAAM,OAAS,EACtF,MAAO,CACL,KAAMQ,GAAM,CAAC,EACb,UAAW,OACX,KAAM,CAACA,GAAM,CAAC,EACd,OAAQ9Q,EAAW+Q,EAAS,MAAM,EAAGC,EAAM,CAAC,EAAE,OAC9C,OAAQhR,EAAW+Q,EAAS,MAAMC,GAAQA,GAAS7yB,EAAM,CAAC,EAAE,OAC5D,SAAU4yB,EAAW;AAAA,EAAOP,EAAM,MAAM,CAAC,EAAE,KAAK;AAAA,CAAI,EACpD,WAAY,GAExB,CACQ,KACR,CACA,CAEE,OAAO,IACT,CACA,SAASjF,GAAoBpvB,EAAMiuB,EAAQiB,EAAU,CACnD,IAAI5B,EAAQ,EACZttB,GAAQiuB,EAAO,OAAS,EAAI,GAAK,SAASA,EAAO,MAAM,SAASA,EAAO,OAAS,EAAI,GAAK,GAAG,IAAMA,EAAO,MAAM,EAAGX,EAAQ,CAAC,EAAE,IAAI,CAAC3K,GAAGhlB,KAAM,CACzI,GAAIA,KAAM2vB,EAAO,MAAO;AAAA,KACxB,GAAI,CAAC3K,GAAE,SAAU,MAAO;AAAA,SACnBA,GAAE,IAAI,GACX,GAAI,CAAE,KAAAmS,GAAM,KAAAJ,EAAM,OAAAG,EAAM,EAAKlS,GAAE,SAC3BoS,GAAapS,GAAE,WAAa,YAAYA,GAAE,UAAU,KAAO,GAC/D,MAAO;AAAA,EACTmS,EAAI,IAAIJ,CAAI,IAAIG,EAAM,YAAYE,EAAU,GAAGpS,GAAE,IAAI,EACvD,CAAG,EAAE,KAAK,EAAE,EACV,IAAI+K,GAAQ,IAAI,MAAM1tB,CAAI,EAC1B,SAAW,CAAC1D,GAAKkC,EAAK,GAAK,CAAC,CAAC,SAAUyvB,CAAM,EAAG,CAAC,WAAYiB,CAAQ,CAAC,EACpE,OAAO,eAAexB,GAAOpxB,GAAK,CAChC,aAAc,GACd,WAAY,GACZ,IAAK,IAAMkC,GACX,IAAM6lB,IAAW,OAAO,eAAeqJ,GAAOpxB,GAAK,CACjD,aAAc,GACd,WAAY,GACZ,MAAO+nB,GACR,CACP,CAAK,EAEH,OAAOqJ,EACT,CACA,SAASuB,GAAyBI,EAAUmF,EAAO,CACjD,UAAW3E,KAAWR,EACpBQ,EAAQ,OAAS2E,EAAM,KAAK3E,EAAQ,MAAM,EAE5C,OAAOR,CACT,CACA,SAAS2F,GAAiBV,EAAW1N,EAAO2I,EAAe,CACzD,GAAI+E,GAAa,KAAM,OAAO,KAC9B,IAAIvQ,EAAO,CAAA,EACP+Q,GAAOtO,EAAQ8N,EAAWvQ,EAAM,OAAQyB,CAAY,EACpDuN,GAAYvM,EAAQ8N,EAAWvQ,EAAM,YAAayB,CAAY,EAC9DkP,GAAOlO,EAAQ8N,EAAWvQ,EAAM,OAAQ2B,CAAa,EACrDmP,GAASrO,EAAQ8N,EAAWvQ,EAAM,SAAU2B,CAAa,EACzD1jB,EAASwkB,EAAQ8N,EAAWvQ,EAAM,SAAU2B,CAAa,EACzDkP,GAAWpO,EAAQ8N,EAAWvQ,EAAM,WAAYyB,CAAY,EAC5DyP,GAAazO,EAAQ8N,EAAWvQ,EAAM,aAAcyB,CAAY,EAEpE,GADAmB,GAAqB2N,EAAWvQ,EAAM6C,CAAK,EACvCgO,GAAU,CACZ,MAAMM,GAAgBN,GAAS,MAC7B,GACCC,IAAUA,GAAS,EAAIA,GAAS,IAAM7yB,GAAUA,EAAS,EAAIA,EAAS,IAAMutB,GAAiBA,EAAgB,EAAIA,EAAgB,KAEhI,CAAC,gBAAgB,KAAK2F,EAAa,GAAK,CAAC,KAAK,KAAKN,EAAQ,IAC7DA,GAAWM,GAEjB,CACE,MAAO,CACL,KAAMJ,IAAQ,GACd,UAAW/B,IAAa,GACxB,KAAM2B,IAAQ,EACd,OAAQG,IAAU,EAClB,OAAQ7yB,GAAU,EAClB,SAAU4yB,IAAY,GACtB,WAAYK,IAAc,GAE9B,CACA,SAASzF,GAAiBH,EAAUxc,EAAU2hB,EAAOW,EAAoB5F,GAAe,CACtF,IAAI6F,GAAgB,CAAA,EAChBl5B,GAAQ,EACZ,UAAW2zB,MAAWR,EAAU,CAC9B,IAAItL,EAAO,CAAA,EACPvX,GAAKga,EAAQqJ,GAAS9L,EAAM,KAAMyB,CAAY,EAC9CoK,GAAapJ,EAAQqJ,GAAS9L,EAAM,aAAcyB,CAAY,EAC9DxlB,GAAOwmB,EAAQqJ,GAAS9L,EAAM,OAAQyB,CAAY,EAClD8O,GAAY9N,EAAQqJ,GAAS9L,EAAM,WAAYmC,EAAkB,EACjEmP,GAAQ7O,EAAQqJ,GAAS9L,EAAM,QAAS8B,EAAW,EACnDyP,GAAS9O,EAAQqJ,GAAS9L,EAAM,SAAUuB,CAAa,EACvDsB,GAAQ,cAAc1qB,EAAK,QAAQ2W,CAAQ,IAC/C8T,GAAqBkJ,GAAS9L,EAAM6C,EAAK,EACzC,IAAI2O,GAAa,CAAA,EACjB,GAAIF,GACF,UAAW7B,MAAQ6B,GAAO,CACxB,IAAIG,GAAW,CAAA,EACXC,GAAWjP,EAAQgN,GAAMgC,GAAU,OAAQhQ,CAAY,EACvDkQ,GAAelP,EAAQgN,GAAMgC,GAAU,WAAYtP,EAAkB,EACzES,GAAqB6M,GAAMgC,GAAU5O,EAAK,EAC1C2O,GAAW,KAAK,CACd,KAAME,IAAY,GAClB,SAAUT,GAAiBU,GAAc9O,GAAO2I,EAAa,CACvE,CAAS,CACT,CAEI6F,GAAc,KAAK,CACjB,GAAI5oB,IAAM,GACV,WAAYojB,IAAcuF,EAC1B,KAAMn1B,IAAQ,GACd,SAAUg1B,GAAiBV,GAAW1N,GAAO2I,EAAa,EAC1D,MAAOgG,GACP,OAAQf,EAAQA,EAAM,MAAMc,EAAM,EAAI,EAC5C,CAAK,EACDp5B,IACJ,CACE,OAAOk5B,EACT,CACA,SAAStB,GAAoBjc,EAAQhF,EAAU,CAC7C,MAAM1S,EAAS,CAAA,EACf,UAAW3B,KAASqZ,EAAQ,CAC1B,GAAI,OAAOrZ,GAAU,SAAU,MAAM,IAAI,MAAM,GAAGumB,EAAMlS,CAAQ,CAAC,8BAA8B,EAC/F1S,EAAO,KAAK3B,CAAK,CACrB,CACE,OAAO2B,CACT,CACA,SAASgzB,GAAkBj1B,EAAK2U,EAAU,CACxC,MAAM1S,EAAyB,OAAO,OAAO,IAAI,EACjD,UAAW7D,KAAO4B,EAAK,CACrB,MAAMM,GAAQN,EAAI5B,CAAG,EACrB,GAAI,OAAOkC,IAAU,SAAU,MAAM,IAAI,MAAM,OAAOumB,EAAMzoB,CAAG,CAAC,cAAcyoB,EAAMlS,CAAQ,CAAC,mBAAmB,EAChH1S,EAAO7D,CAAG,EAAIkC,EAClB,CACE,OAAO2B,CACT,CACA,SAASswB,GAAmB,CAAE,KAAA3sB,EAAM,SAAAuoB,EAAU,KAAAsJ,CAAI,EAAI,CACpD,IAAI31B,EAAO,KACX,MAAO,CACL,KAAA8D,EACA,SAAAuoB,EACA,KAAAsJ,EACA,IAAI,MAAO,CACT,MAAMC,GAAS,KAAK,SACpB,OAAI51B,IAAS,MAAQ41B,KAAWvJ,KAC9BA,EAAWuJ,GACX51B,EAAOokB,EAAWwR,EAAM,GAEnB51B,CACb,EAEA,CACA,SAAS4pB,GAAmBiM,EAAQ,CAClC,IAAI11B,EAAS01B,EAAO,OACpB,OAAIA,EAAO,QAAO11B,EAAS,KAAK01B,EAAO,KAAK,IAAI11B,CAAM,IAC/CA,CACT,CAGA,IAAIqjB,GAAU,UACVR,GAASlP,GAAYgiB,GAAsB,EAAG,MAAMhiB,CAAO,EAC3DE,GAAWF,GAAYgiB,GAAsB,EAAG,QAAQhiB,CAAO,EAC/DtB,GAAY,CAACnE,EAAOyF,IAAYgiB,GAAsB,EAAG,UAAUznB,EAAOyF,CAAO,EACjFqP,GAAiB,CAACkM,EAAUvb,IAAYgiB,GAAsB,EAAG,eAAezG,EAAUvb,CAAO,EACjGgP,GAAkB,CAACyH,EAAUzW,IAAYgiB,GAAsB,EAAG,gBAAgBvL,EAAUzW,CAAO,EACnGmP,GAAY,IAAM,CACpB,MAAM,IAAI,MAAM,wCAAwC,CAC1D,EACIM,GAAgB,IAAM,CACxB,MAAM,IAAI,MAAM,4CAA4C,CAC9D,EACIH,GAAqB,IAAM,CAC7B,MAAM,IAAI,MAAM,iDAAiD,CACnE,EACIL,GAAsB,IAAM,CAC9B,MAAM,IAAI,MAAM,kDAAkD,CACpE,EACIO,GAAO,KACLyS,IAAaA,GAAW,EACrB,QAAQ,QAAO,GAEpBC,GACAD,GACAE,GACAH,GAAyB,IAAM,CACjC,GAAIG,GAAkB,OAAOA,GAC7B,MAAID,GAAyB,IAAI,MAAM,gGAAgG,EACjI,IAAI,MAAM,mDAAmD,CACrE,EACI3S,GAAcvP,GAAY,CAC5BA,EAAU+S,GAA0B/S,GAAW,EAAE,EACjD,IAAIgT,EAAUhT,EAAQ,QAClBiT,EAAajT,EAAQ,WACrBoiB,EAAYpiB,EAAQ,SAAW,GACnC,GAAI,CAACgT,GAAW,CAACC,EAAY,MAAM,IAAI,MAAM,qEAAqE,EAClH,GAAIiP,GAAmB,MAAM,IAAI,MAAM,yCAAyC,EAChF,OAAAA,GAAoBG,GAAoBrP,GAAW,GAAIC,EAAYmP,CAAS,EAC5EF,GAAkB,MAAM,IAAM,CAC5BA,GAAoB,MACxB,CAAG,EACMA,EACT,EACIG,GAAsB,CAACrP,EAASC,EAAYmP,IAAc9T,EAAQ,KAAM,KAAM,WAAa,CAC7F,IAAI4E,EACAoP,GACJ,MAAMC,GAAmB,IAAI,QAAStpB,IAAYqpB,GAAgBrpB,EAAO,EACzE,GAAImpB,EAAW,CACb,IAAII,GAAO,IAAI,KAAK,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA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","x_google_ignoreList":[0,1,4,6,7,8,9,12,13,14,15,16,17,18,19,20,21,23,24]}